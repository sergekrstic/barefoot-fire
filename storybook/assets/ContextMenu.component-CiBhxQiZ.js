import{j as l}from"./jsx-runtime-D_zvdyIk.js";import{r as t}from"./index-PahMPgEy.js";import{u as I,o as M,f as T,s as F,a as w,b as j,c as k,d as q,e as N,g as L,F as P,h as O,i as S}from"./floating-ui.react-DXVSm5aW.js";const U=t.forwardRef(({label:m,disabled:u,...o},c)=>l.jsx("button",{...o,ref:c,role:"menuitem",disabled:u,children:m})),_=({className:m,children:u})=>{const[o,c]=t.useState(null),[p,i]=t.useState(!1),g=t.useRef([]),x=t.useRef(t.Children.map(u,n=>t.isValidElement(n)?n.props.label:null)),f=t.useRef(!1),{refs:d,floatingStyles:h,context:a}=I({open:p,onOpenChange:i,middleware:[M({mainAxis:5,alignmentAxis:4}),T({fallbackPlacements:["left-start"]}),F({padding:10})],placement:"right-start",strategy:"fixed",whileElementsMounted:w}),v=j(a,{role:"menu"}),y=k(a),C=q(a,{listRef:g,onNavigate:c,activeIndex:o}),R=N(a,{enabled:p,listRef:x,onMatch:c,activeIndex:o}),{getFloatingProps:b,getItemProps:E}=L([v,y,C,R]);return t.useEffect(()=>{let n;const r=e=>{e.preventDefault(),d.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:e.clientX,y:e.clientY,top:e.clientY,right:e.clientX,bottom:e.clientY,left:e.clientX}}}),i(!0),clearTimeout(n),f.current=!1,n=window.setTimeout(()=>{f.current=!0},300)},s=()=>{f.current&&i(!1)};return document.addEventListener("contextmenu",r),document.addEventListener("mouseup",s),()=>{document.removeEventListener("contextmenu",r),document.removeEventListener("mouseup",s),clearTimeout(n)}},[d]),l.jsx(P,{children:p&&l.jsx(O,{lockScroll:!0,children:l.jsx(S,{context:a,initialFocus:d.floating,children:l.jsx("div",{className:m,ref:d.setFloating,style:h,...b(),children:t.Children.map(u,(n,r)=>t.isValidElement(n)&&t.cloneElement(n,E({tabIndex:o===r?0:-1,ref(s){g.current[r]=s},onClick(){var s,e;(e=(s=n.props).onClick)==null||e.call(s),i(!1)},onMouseUp(){var s,e;(e=(s=n.props).onClick)==null||e.call(s),i(!1)}})))})})})})};U.__docgenInfo={description:"",methods:[],displayName:"ContextMenuItem",props:{label:{required:!0,tsType:{name:"string"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};_.__docgenInfo={description:"",methods:[],displayName:"ContextMenu",props:{className:{required:!1,tsType:{name:"string"},description:""},label:{required:!1,tsType:{name:"string"},description:""},nested:{required:!1,tsType:{name:"boolean"},description:""}}};export{_ as C,U as a};
