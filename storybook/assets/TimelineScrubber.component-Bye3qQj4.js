import{j as q}from"./jsx-runtime-D_zvdyIk.js";import{C as yy}from"./CollapsibleTree.component-DRXLFRFl.js";import"./ContextMenu.component-CiBhxQiZ.js";import{D as Dc}from"./DatePicker.component-D4qOE7Yf.js";import{M as Vr,a as Ie}from"./DropdownMenu.component-wXtweCx3.js";import{r as X,c as Hi,g as vy}from"./index-PahMPgEy.js";import{e as su,f as Eh,i as wy,j as _y,k as xy,u as Le,p as Ic,h as Ah}from"./ScenarioGraph.component-CRAv5duO.js";import{F as Ty,M as Sy,E as Ch,D as Rc}from"./Menu.icon-Dh1hQpZk.js";import"./Modal.component-BzCUJgMo.js";import"./Popover.trigger-CTMGeKFO.js";import"./Tooltip.trigger-BLwQiu7C.js";import{t as yt}from"./colors-Cuw9ST8W.js";import{P as My,a as ef,b as Oc}from"./react-resizable-panels.browser.esm-zIh8wNIw.js";function cu(){return cu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cu.apply(null,arguments)}var kh=["shift","alt","meta","mod","ctrl"],$y={esc:"escape",return:"enter",".":"period",",":"comma","-":"slash"," ":"space","`":"backquote","#":"backslash","+":"bracketright",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function tn(e){return(e&&$y[e]||e||"").trim().toLowerCase().replace(/key|digit|numpad|arrow/,"")}function Ey(e){return kh.includes(e)}function tf(e,t){return t===void 0&&(t=","),e.split(t)}function nf(e,t,n){t===void 0&&(t="+");var r=e.toLocaleLowerCase().split(t).map(function(a){return tn(a)}),i={alt:r.includes("alt"),ctrl:r.includes("ctrl")||r.includes("control"),shift:r.includes("shift"),meta:r.includes("meta"),mod:r.includes("mod")},o=r.filter(function(a){return!kh.includes(a)});return cu({},i,{keys:o,description:n,hotkey:e})}(function(){typeof document<"u"&&(document.addEventListener("keydown",function(e){e.key!==void 0&&Nh([tn(e.key),tn(e.code)])}),document.addEventListener("keyup",function(e){e.key!==void 0&&Lh([tn(e.key),tn(e.code)])})),typeof window<"u"&&window.addEventListener("blur",function(){nn.clear()})})();var nn=new Set;function ds(e){return Array.isArray(e)}function Ay(e,t){t===void 0&&(t=",");var n=ds(e)?e:e.split(t);return n.every(function(r){return nn.has(r.trim().toLowerCase())})}function Nh(e){var t=Array.isArray(e)?e:[e];nn.has("meta")&&nn.forEach(function(n){return!Ey(n)&&nn.delete(n.toLowerCase())}),t.forEach(function(n){return nn.add(n.toLowerCase())})}function Lh(e){var t=Array.isArray(e)?e:[e];e==="meta"?nn.clear():t.forEach(function(n){return nn.delete(n.toLowerCase())})}function Cy(e,t,n){(typeof n=="function"&&n(e,t)||n===!0)&&e.preventDefault()}function ky(e,t,n){return typeof n=="function"?n(e,t):n===!0||n===void 0}function Ny(e){return Dh(e,["input","textarea","select"])}function Dh(e,t){t===void 0&&(t=!1);var n=e.target,r=e.composed,i=null;return Ly(n)&&r?i=e.composedPath()[0]&&e.composedPath()[0].tagName:i=n&&n.tagName,ds(t)?!!(i&&t&&t.some(function(o){var a;return o.toLowerCase()===((a=i)==null?void 0:a.toLowerCase())})):!!(i&&t&&t)}function Ly(e){return!!e.tagName&&!e.tagName.startsWith("-")&&e.tagName.includes("-")}function Dy(e,t){return e.length===0&&t?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):t?e.some(function(n){return t.includes(n)})||e.includes("*"):!0}var Iy=function(t,n,r){r===void 0&&(r=!1);var i=n.alt,o=n.meta,a=n.mod,f=n.shift,u=n.ctrl,s=n.keys,c=t.key,l=t.code,d=t.ctrlKey,h=t.metaKey,p=t.shiftKey,g=t.altKey,m=tn(l),y=c.toLowerCase();if(!(s!=null&&s.includes(m))&&!(s!=null&&s.includes(y))&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(m))return!1;if(!r){if(i===!g&&y!=="alt"||f===!p&&y!=="shift")return!1;if(a){if(!h&&!d)return!1}else if(o===!h&&y!=="meta"&&y!=="os"||u===!d&&y!=="ctrl"&&y!=="control")return!1}return s&&s.length===1&&(s.includes(y)||s.includes(m))?!0:s?Ay(s):!s},Ry=X.createContext(void 0),Oy=function(){return X.useContext(Ry)};function Ih(e,t){return e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(e).length===Object.keys(t).length&&Object.keys(e).reduce(function(n,r){return n&&Ih(e[r],t[r])},!0):e===t}var Py=X.createContext({hotkeys:[],enabledScopes:[],toggleScope:function(){},enableScope:function(){},disableScope:function(){}}),Fy=function(){return X.useContext(Py)};function qy(e){var t=X.useRef(void 0);return Ih(t.current,e)||(t.current=e),t.current}var Pc=function(t){t.stopPropagation(),t.preventDefault(),t.stopImmediatePropagation()},jy=typeof window<"u"?X.useLayoutEffect:X.useEffect;function zy(e,t,n,r){var i=X.useState(null),o=i[0],a=i[1],f=X.useRef(!1),u=n instanceof Array?r instanceof Array?void 0:r:n,s=ds(e)?e.join(u==null?void 0:u.splitKey):e,c=n instanceof Array?n:r instanceof Array?r:void 0,l=X.useCallback(t,c??[]),d=X.useRef(l);c?d.current=l:d.current=t;var h=qy(u),p=Fy(),g=p.enabledScopes,m=Oy();return jy(function(){if(!((h==null?void 0:h.enabled)===!1||!Dy(g,h==null?void 0:h.scopes))){var y=function(_,E){var C;if(E===void 0&&(E=!1),!(Ny(_)&&!Dh(_,h==null?void 0:h.enableOnFormTags))){if(o!==null){var k=o.getRootNode();if((k instanceof Document||k instanceof ShadowRoot)&&k.activeElement!==o&&!o.contains(k.activeElement)){Pc(_);return}}(C=_.target)!=null&&C.isContentEditable&&!(h!=null&&h.enableOnContentEditable)||tf(s,h==null?void 0:h.splitKey).forEach(function(R){var $,S=nf(R,h==null?void 0:h.combinationKey);if(Iy(_,S,h==null?void 0:h.ignoreModifiers)||($=S.keys)!=null&&$.includes("*")){if(h!=null&&h.ignoreEventWhen!=null&&h.ignoreEventWhen(_)||E&&f.current)return;if(Cy(_,S,h==null?void 0:h.preventDefault),!ky(_,S,h==null?void 0:h.enabled)){Pc(_);return}d.current(_,S),E||(f.current=!0)}})}},b=function(_){_.key!==void 0&&(Nh(tn(_.code)),((h==null?void 0:h.keydown)===void 0&&(h==null?void 0:h.keyup)!==!0||h!=null&&h.keydown)&&y(_))},w=function(_){_.key!==void 0&&(Lh(tn(_.code)),f.current=!1,h!=null&&h.keyup&&y(_,!0))},v=o||(u==null?void 0:u.document)||document;return v.addEventListener("keyup",w),v.addEventListener("keydown",b),m&&tf(s,h==null?void 0:h.splitKey).forEach(function(T){return m.addHotkey(nf(T,h==null?void 0:h.combinationKey,h==null?void 0:h.description))}),function(){v.removeEventListener("keyup",w),v.removeEventListener("keydown",b),m&&tf(s,h==null?void 0:h.splitKey).forEach(function(T){return m.removeHotkey(nf(T,h==null?void 0:h.combinationKey,h==null?void 0:h.description))})}}},[o,s,h,g]),a}function To({textClassName:e,inputClassName:t,value:n,onChange:r,onBlur:i,onCancel:o,rightAlign:a=!1}){const f=X.useRef(null),[u,s]=X.useState(!1);return zy(["esc","return"],(c,l)=>{if(f.current)switch(l.hotkey){case"esc":o&&o(),s(!1);break;case"return":i&&i(c.target.value),s(!1);break}},{enableOnFormTags:["input"]},[n,u]),q.jsxs("div",{className:"relative grow",children:[u&&q.jsx("input",{ref:f,type:typeof n=="string"?"text":"number",autoFocus:!0,className:su("absolute rounded-md border border-violet-500 bg-slate-800 px-2 py-1 text-slate-300 outline-0",{"-bottom-1 -top-1":!0,"-left-[9px] right-3 text-left":!a,"-right-[9px] left-3 text-right":a,"appearance-none":typeof n=="number"},t),value:n,onBlur:c=>{s(!1),i&&i(c.target.value)},onChange:c=>{r&&r(c.target.value)}}),q.jsx("span",{className:su("cursor-text",e),onClick:c=>{c.stopPropagation(),s(!0)},children:u?".":By(n)})]})}function By(e){if(typeof e=="number")return Eh(e);if(typeof e=="string")return e||"No name";throw new Error("Invalid value type")}To.__docgenInfo={description:"",methods:[],displayName:"EditableText",props:{textClassName:{required:!1,tsType:{name:"string"},description:""},inputClassName:{required:!1,tsType:{name:"string"},description:""},rightAlign:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},value:{required:!0,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},onBlur:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},onCancel:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const Uy={scenarioGraph:wy,scenarioMap:_y,budgetMap:xy};function xn(){xn=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(S,x,A){S[x]=A.value},i=typeof Symbol=="function"?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",f=i.toStringTag||"@@toStringTag";function u(S,x,A){return Object.defineProperty(S,x,{value:A,enumerable:!0,configurable:!0,writable:!0}),S[x]}try{u({},"")}catch{u=function(x,A,M){return x[A]=M}}function s(S,x,A,M){var N=x&&x.prototype instanceof d?x:d,L=Object.create(N.prototype),B=new k(M||[]);return r(L,"_invoke",{value:T(S,A,B)}),L}function c(S,x,A){try{return{type:"normal",arg:S.call(x,A)}}catch(M){return{type:"throw",arg:M}}}e.wrap=s;var l={};function d(){}function h(){}function p(){}var g={};u(g,o,function(){return this});var m=Object.getPrototypeOf,y=m&&m(m(R([])));y&&y!==t&&n.call(y,o)&&(g=y);var b=p.prototype=d.prototype=Object.create(g);function w(S){["next","throw","return"].forEach(function(x){u(S,x,function(A){return this._invoke(x,A)})})}function v(S,x){function A(N,L,B,H){var O=c(S[N],S,L);if(O.type!=="throw"){var j=O.arg,P=j.value;return P&&typeof P=="object"&&n.call(P,"__await")?x.resolve(P.__await).then(function(F){A("next",F,B,H)},function(F){A("throw",F,B,H)}):x.resolve(P).then(function(F){j.value=F,B(j)},function(F){return A("throw",F,B,H)})}H(O.arg)}var M;r(this,"_invoke",{value:function(N,L){function B(){return new x(function(H,O){A(N,L,H,O)})}return M=M?M.then(B,B):B()}})}function T(S,x,A){var M="suspendedStart";return function(N,L){if(M==="executing")throw new Error("Generator is already running");if(M==="completed"){if(N==="throw")throw L;return $()}for(A.method=N,A.arg=L;;){var B=A.delegate;if(B){var H=_(B,A);if(H){if(H===l)continue;return H}}if(A.method==="next")A.sent=A._sent=A.arg;else if(A.method==="throw"){if(M==="suspendedStart")throw M="completed",A.arg;A.dispatchException(A.arg)}else A.method==="return"&&A.abrupt("return",A.arg);M="executing";var O=c(S,x,A);if(O.type==="normal"){if(M=A.done?"completed":"suspendedYield",O.arg===l)continue;return{value:O.arg,done:A.done}}O.type==="throw"&&(M="completed",A.method="throw",A.arg=O.arg)}}}function _(S,x){var A=x.method,M=S.iterator[A];if(M===void 0)return x.delegate=null,A==="throw"&&S.iterator.return&&(x.method="return",x.arg=void 0,_(S,x),x.method==="throw")||A!=="return"&&(x.method="throw",x.arg=new TypeError("The iterator does not provide a '"+A+"' method")),l;var N=c(M,S.iterator,x.arg);if(N.type==="throw")return x.method="throw",x.arg=N.arg,x.delegate=null,l;var L=N.arg;return L?L.done?(x[S.resultName]=L.value,x.next=S.nextLoc,x.method!=="return"&&(x.method="next",x.arg=void 0),x.delegate=null,l):L:(x.method="throw",x.arg=new TypeError("iterator result is not an object"),x.delegate=null,l)}function E(S){var x={tryLoc:S[0]};1 in S&&(x.catchLoc=S[1]),2 in S&&(x.finallyLoc=S[2],x.afterLoc=S[3]),this.tryEntries.push(x)}function C(S){var x=S.completion||{};x.type="normal",delete x.arg,S.completion=x}function k(S){this.tryEntries=[{tryLoc:"root"}],S.forEach(E,this),this.reset(!0)}function R(S){if(S){var x=S[o];if(x)return x.call(S);if(typeof S.next=="function")return S;if(!isNaN(S.length)){var A=-1,M=function N(){for(;++A<S.length;)if(n.call(S,A))return N.value=S[A],N.done=!1,N;return N.value=void 0,N.done=!0,N};return M.next=M}}return{next:$}}function $(){return{value:void 0,done:!0}}return h.prototype=p,r(b,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:h,configurable:!0}),h.displayName=u(p,f,"GeneratorFunction"),e.isGeneratorFunction=function(S){var x=typeof S=="function"&&S.constructor;return!!x&&(x===h||(x.displayName||x.name)==="GeneratorFunction")},e.mark=function(S){return Object.setPrototypeOf?Object.setPrototypeOf(S,p):(S.__proto__=p,u(S,f,"GeneratorFunction")),S.prototype=Object.create(b),S},e.awrap=function(S){return{__await:S}},w(v.prototype),u(v.prototype,a,function(){return this}),e.AsyncIterator=v,e.async=function(S,x,A,M,N){N===void 0&&(N=Promise);var L=new v(s(S,x,A,M),N);return e.isGeneratorFunction(x)?L:L.next().then(function(B){return B.done?B.value:L.next()})},w(b),u(b,f,"Generator"),u(b,o,function(){return this}),u(b,"toString",function(){return"[object Generator]"}),e.keys=function(S){var x=Object(S),A=[];for(var M in x)A.push(M);return A.reverse(),function N(){for(;A.length;){var L=A.pop();if(L in x)return N.value=L,N.done=!1,N}return N.done=!0,N}},e.values=R,k.prototype={constructor:k,reset:function(S){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!S)for(var x in this)x.charAt(0)==="t"&&n.call(this,x)&&!isNaN(+x.slice(1))&&(this[x]=void 0)},stop:function(){this.done=!0;var S=this.tryEntries[0].completion;if(S.type==="throw")throw S.arg;return this.rval},dispatchException:function(S){if(this.done)throw S;var x=this;function A(O,j){return L.type="throw",L.arg=S,x.next=O,j&&(x.method="next",x.arg=void 0),!!j}for(var M=this.tryEntries.length-1;M>=0;--M){var N=this.tryEntries[M],L=N.completion;if(N.tryLoc==="root")return A("end");if(N.tryLoc<=this.prev){var B=n.call(N,"catchLoc"),H=n.call(N,"finallyLoc");if(B&&H){if(this.prev<N.catchLoc)return A(N.catchLoc,!0);if(this.prev<N.finallyLoc)return A(N.finallyLoc)}else if(B){if(this.prev<N.catchLoc)return A(N.catchLoc,!0)}else{if(!H)throw new Error("try statement without catch or finally");if(this.prev<N.finallyLoc)return A(N.finallyLoc)}}}},abrupt:function(S,x){for(var A=this.tryEntries.length-1;A>=0;--A){var M=this.tryEntries[A];if(M.tryLoc<=this.prev&&n.call(M,"finallyLoc")&&this.prev<M.finallyLoc){var N=M;break}}N&&(S==="break"||S==="continue")&&N.tryLoc<=x&&x<=N.finallyLoc&&(N=null);var L=N?N.completion:{};return L.type=S,L.arg=x,N?(this.method="next",this.next=N.finallyLoc,l):this.complete(L)},complete:function(S,x){if(S.type==="throw")throw S.arg;return S.type==="break"||S.type==="continue"?this.next=S.arg:S.type==="return"?(this.rval=this.arg=S.arg,this.method="return",this.next="end"):S.type==="normal"&&x&&(this.next=x),l},finish:function(S){for(var x=this.tryEntries.length-1;x>=0;--x){var A=this.tryEntries[x];if(A.finallyLoc===S)return this.complete(A.completion,A.afterLoc),C(A),l}},catch:function(S){for(var x=this.tryEntries.length-1;x>=0;--x){var A=this.tryEntries[x];if(A.tryLoc===S){var M=A.completion;if(M.type==="throw"){var N=M.arg;C(A)}return N}}throw new Error("illegal catch attempt")},delegateYield:function(S,x,A){return this.delegate={iterator:R(S),resultName:x,nextLoc:A},this.method==="next"&&(this.arg=void 0),l}},e}function Fc(e,t,n,r,i,o,a){try{var f=e[o](a),u=f.value}catch(s){n(s);return}f.done?t(u):Promise.resolve(u).then(r,i)}function rf(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(u){Fc(o,r,i,a,f,"next",u)}function f(u){Fc(o,r,i,a,f,"throw",u)}a(void 0)})}}function Kr(){return Kr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kr.apply(this,arguments)}function Hy(e){if(e==null)throw new TypeError("Cannot destructure "+e)}function bi(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function f(c){try{s(r.next(c))}catch(l){a(l)}}function u(c){try{s(r.throw(c))}catch(l){a(l)}}function s(c){c.done?o(c.value):i(c.value).then(f,u)}s((r=r.apply(e,t||[])).next())})}function yi(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=f(0),a.throw=f(1),a.return=f(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function f(s){return function(c){return u([s,c])}}function u(s){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(n=0)),n;)try{if(r=1,i&&(o=s[0]&2?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[s[0]&2,o.value]),s[0]){case 0:case 1:o=s;break;case 4:return n.label++,{value:s[1],done:!1};case 5:n.label++,i=s[1],s=[0];continue;case 7:s=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!o||s[1]>o[0]&&s[1]<o[3])){n.label=s[1];break}if(s[0]===6&&n.label<o[1]){n.label=o[1],o=s;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(s);break}o[2]&&n.ops.pop(),n.trys.pop();continue}s=t.call(e,n)}catch(c){s=[6,c],i=0}finally{r=o=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}function Yy(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(f){a={error:f}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o}function Gy(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Yy(arguments[t]));return e}var Wy=new Map([["avi","video/avi"],["gif","image/gif"],["ico","image/x-icon"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["mkv","video/x-matroska"],["mov","video/quicktime"],["mp4","video/mp4"],["pdf","application/pdf"],["png","image/png"],["zip","application/zip"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"]]);function ha(e,t){var n=Xy(e);if(typeof n.path!="string"){var r=e.webkitRelativePath;Object.defineProperty(n,"path",{value:typeof t=="string"?t:typeof r=="string"&&r.length>0?r:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}function Xy(e){var t=e.name,n=t&&t.lastIndexOf(".")!==-1;if(n&&!e.type){var r=t.split(".").pop().toLowerCase(),i=Wy.get(r);i&&Object.defineProperty(e,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return e}var Vy=[".DS_Store","Thumbs.db"];function Ky(e){return bi(this,void 0,void 0,function(){return yi(this,function(t){return[2,Zy(e)&&e.dataTransfer?e2(e.dataTransfer,e.type):Qy(e)]})})}function Zy(e){return!!e.dataTransfer}function Qy(e){var t=Jy(e.target)?e.target.files?lu(e.target.files):[]:[];return t.map(function(n){return ha(n)})}function Jy(e){return e!==null}function e2(e,t){return bi(this,void 0,void 0,function(){var n,r;return yi(this,function(i){switch(i.label){case 0:return e.items?(n=lu(e.items).filter(function(o){return o.kind==="file"}),t!=="drop"?[2,n]:[4,Promise.all(n.map(t2))]):[3,2];case 1:return r=i.sent(),[2,qc(Rh(r))];case 2:return[2,qc(lu(e.files).map(function(o){return ha(o)}))]}})})}function qc(e){return e.filter(function(t){return Vy.indexOf(t.name)===-1})}function lu(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r)}return t}function t2(e){if(typeof e.webkitGetAsEntry!="function")return jc(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?Oh(t):jc(e)}function Rh(e){return e.reduce(function(t,n){return Gy(t,Array.isArray(n)?Rh(n):[n])},[])}function jc(e){var t=e.getAsFile();if(!t)return Promise.reject(e+" is not a File");var n=ha(t);return Promise.resolve(n)}function n2(e){return bi(this,void 0,void 0,function(){return yi(this,function(t){return[2,e.isDirectory?Oh(e):r2(e)]})})}function Oh(e){var t=e.createReader();return new Promise(function(n,r){var i=[];function o(){var a=this;t.readEntries(function(f){return bi(a,void 0,void 0,function(){var u,s,c;return yi(this,function(l){switch(l.label){case 0:if(f.length)return[3,5];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return u=l.sent(),n(u),[3,4];case 3:return s=l.sent(),r(s),[3,4];case 4:return[3,6];case 5:c=Promise.all(f.map(n2)),i.push(c),o(),l.label=6;case 6:return[2]}})})},function(f){r(f)})}o()})}function r2(e){return bi(this,void 0,void 0,function(){return yi(this,function(t){return[2,new Promise(function(n,r){e.file(function(i){var o=ha(i,e.fullPath);n(o)},function(i){r(i)})})]})})}function i2(e,t,n,r){var i=document.createElement("input");i.style.display="none",document.body.appendChild(i),i.type="file",e!=="*"&&(i.accept=e),i.multiple=t,i.addEventListener("change",function(o){n(o),document.body.removeChild(i)}),r&&r(i),i.dispatchEvent(new MouseEvent("click"))}var o2=function(t){var n=t.onFilesSelected,r=t.onFilesSuccessfullySelected,i=t.onFilesRejected,o=t.onClear,a=t.validators,f=X.useCallback(function(l){n==null||n(l),a==null||a.forEach(function(d){d.onFilesSelected(l)})},[n,a]),u=X.useCallback(function(l){r==null||r(l),a==null||a.forEach(function(d){d.onFilesSuccessfullySelected(l)})},[a,r]),s=X.useCallback(function(l){i==null||i(l),a==null||a.forEach(function(d){d.onFilesRejected(l)})},[a,i]),c=X.useCallback(function(){o==null||o(),a==null||a.forEach(function(l){l.onClear==null||l.onClear()})},[a,o]);return{onFilesSelected:f,onFilesSuccessfullySelected:u,onFilesRejected:s,onClear:c}},a2=[];function f2(e){var t=e.accept,n=t===void 0?"*":t,r=e.multiple,i=r===void 0?!0:r,o=e.readAs,a=o===void 0?"Text":o,f=e.readFilesContent,u=f===void 0?!0:f,s=e.validators,c=s===void 0?a2:s,l=e.initializeWithCustomParameters,d=X.useState([]),h=d[0],p=d[1],g=X.useState([]),m=g[0],y=g[1],b=X.useState([]),w=b[0],v=b[1],T=X.useState(!1),_=T[0],E=T[1],C=o2(e),k=C.onFilesSelected,R=C.onFilesSuccessfullySelected,$=C.onFilesRejected,S=C.onClear,x=X.useCallback(function(){p([]),y([]),v([])},[]),A=X.useCallback(function(){x(),S==null||S()},[x,S]),M=X.useCallback(function(L){return new Promise(function(){var B=rf(xn().mark(function H(O,j){var P,F,K;return xn().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:P=new FileReader,F=P["readAs"+a],F.call(P,L),K=function(z){var D=Kr({},(Hy(z),z));j(Kr({},D))},P.onload=rf(xn().mark(function Y(){return xn().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",Promise.all(c.map(function(U){return U.validateAfterParsing(e,L,P).catch(function(G){return Promise.reject(K(G))})})).then(function(){return O(Kr({},L,{content:P.result,name:L.name,lastModified:L.lastModified}))}).catch(function(){}));case 1:case"end":return D.stop()}},Y)})),P.onerror=function(){K({name:"FileReaderError",readerError:P.error,causedByFile:L})};case 6:case"end":return W.stop()}},H)}));return function(H,O){return B.apply(this,arguments)}}())},[e,a,c]),N=X.useCallback(function(){var L=n instanceof Array?n.join(","):n;i2(L,i,function(){var B=rf(xn().mark(function H(O){var j,P,F,K,Z,W;return xn().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return x(),j=O.target,P=j.files?Array.from(j.files):[],E(!0),z.next=6,Promise.all(c.map(function(D){return D.validateBeforeParsing(e,P).catch(function(U){return Array.isArray(U)?U:[U]})}));case 6:if(F=z.sent.flat(1).filter(Boolean),p(P),v(F),!F.length){z.next=15;break}return E(!1),p([]),$==null||$({errors:F}),k==null||k({errors:F}),z.abrupt("return");case 15:if(u){z.next=19;break}return E(!1),k==null||k({plainFiles:P,filesContent:[]}),z.abrupt("return");case 19:return z.next=21,Ky(O);case 21:return K=z.sent,Z=[],z.next=25,Promise.all(K.map(function(D){return M(D).catch(function(U){Z.push.apply(Z,Array.isArray(U)?U:[U])})}));case 25:if(W=z.sent,E(!1),!Z.length){z.next=34;break}return p([]),y([]),v(function(D){return[].concat(D,Z)}),$==null||$({errors:Z}),k==null||k({errors:F.concat(Z)}),z.abrupt("return");case 34:y(W),p(P),v([]),R==null||R({filesContent:W,plainFiles:P}),k==null||k({plainFiles:P,filesContent:W});case 39:case"end":return z.stop()}},H)}));return function(H){return B.apply(this,arguments)}}(),l)},[e,n,x,l,i,$,k,R,M,u,c]);return{openFilePicker:N,filesContent:m,errors:w,loading:_,plainFiles:h,clear:A}}function u2(){const e=Le(s=>s.reset),t=Le(s=>s.saveAs),n=Le(s=>s.load),{openFilePicker:r,filesContent:i}=f2({accept:".json",multiple:!1});X.useEffect(()=>{i.length&&n(JSON.parse(i[0].content))},[i,n]);const o=X.useCallback(()=>{n(Uy)},[n]),a="rounded-md border border-transparent px-2 py-1 text-sm text-violet-400 outline-none hover:border-violet-500 hover:bg-violet-600 hover:text-violet-300 data-[open]:border-violet-400 data-[open]:bg-violet-600 data-[open]:text-violet-200",f="rounded-md border border-slate-300 bg-slate-200 py-1 text-slate-800 outline-none drop-shadow-lg",u="flex w-full min-w-40 items-center justify-between px-4 py-1 text-sm outline-none focus:bg-violet-600 focus:text-slate-100 disabled:text-slate-400";return q.jsxs("div",{className:"flex items-center border-b border-violet-600 bg-violet-900 bg-gradient-to-tr from-violet-900 to-violet-600 px-4 py-2",children:[q.jsx(Ty,{className:"pr-2 text-violet-400 data-[open]:text-violet-200",size:20}),q.jsx("div",{className:"grow text-xl font-semibold tracking-widest text-violet-400",children:"Barefoot FIRE"}),q.jsxs(Vr,{menuButtonClasses:a,menuContainerClasses:f,label:q.jsx(Sy,{className:"text-violet-400",size:20}),children:[q.jsx(Ie,{className:u,label:"New",onClick:e}),q.jsx(Ie,{className:u,label:"Open",onClick:r}),q.jsx(Ie,{className:u,label:"Save",onClick:t}),q.jsxs(Vr,{menuContainerClasses:f,menuItemClasses:u,label:"Export",children:[q.jsx(Ie,{className:u,label:"CSV",disabled:!0}),q.jsx(Ie,{className:u,label:"JSON",disabled:!0}),q.jsx(Ie,{className:u,label:"Excel",disabled:!0})]}),q.jsxs(Vr,{menuContainerClasses:f,menuItemClasses:u,label:"Examples",children:[q.jsx(Ie,{className:u,label:"Simple example",disabled:!0}),q.jsx(Ie,{className:u,label:"Detailed example",onClick:o}),q.jsx(Ie,{className:u,label:"Rent vs Mortgage",disabled:!0}),q.jsx(Ie,{className:u,label:"Petrol vs Hybrid vs Electric",disabled:!0}),q.jsx(Ie,{className:u,label:"Median vs Professional vs Elite",disabled:!0})]})]})]})}u2.__docgenInfo={description:"",methods:[],displayName:"Header"};var of,zc;function Ph(){if(zc)return of;zc=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return of=e,of}var af,Bc;function s2(){if(Bc)return af;Bc=1;var e=typeof Hi=="object"&&Hi&&Hi.Object===Object&&Hi;return af=e,af}var ff,Uc;function Fh(){if(Uc)return ff;Uc=1;var e=s2(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return ff=n,ff}var uf,Hc;function c2(){if(Hc)return uf;Hc=1;var e=Fh(),t=function(){return e.Date.now()};return uf=t,uf}var sf,Yc;function l2(){if(Yc)return sf;Yc=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return sf=t,sf}var cf,Gc;function d2(){if(Gc)return cf;Gc=1;var e=l2(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return cf=n,cf}var lf,Wc;function qh(){if(Wc)return lf;Wc=1;var e=Fh(),t=e.Symbol;return lf=t,lf}var df,Xc;function h2(){if(Xc)return df;Xc=1;var e=qh(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;function o(a){var f=n.call(a,i),u=a[i];try{a[i]=void 0;var s=!0}catch{}var c=r.call(a);return s&&(f?a[i]=u:delete a[i]),c}return df=o,df}var hf,Vc;function p2(){if(Vc)return hf;Vc=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return hf=n,hf}var pf,Kc;function m2(){if(Kc)return pf;Kc=1;var e=qh(),t=h2(),n=p2(),r="[object Null]",i="[object Undefined]",o=e?e.toStringTag:void 0;function a(f){return f==null?f===void 0?i:r:o&&o in Object(f)?t(f):n(f)}return pf=a,pf}var mf,Zc;function g2(){if(Zc)return mf;Zc=1;function e(t){return t!=null&&typeof t=="object"}return mf=e,mf}var gf,Qc;function b2(){if(Qc)return gf;Qc=1;var e=m2(),t=g2(),n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return gf=r,gf}var bf,Jc;function y2(){if(Jc)return bf;Jc=1;var e=d2(),t=Ph(),n=b2(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,f=parseInt;function u(s){if(typeof s=="number")return s;if(n(s))return r;if(t(s)){var c=typeof s.valueOf=="function"?s.valueOf():s;s=t(c)?c+"":c}if(typeof s!="string")return s===0?s:+s;s=e(s);var l=o.test(s);return l||a.test(s)?f(s.slice(2),l?2:8):i.test(s)?r:+s}return bf=u,bf}var yf,el;function v2(){if(el)return yf;el=1;var e=Ph(),t=c2(),n=y2(),r="Expected a function",i=Math.max,o=Math.min;function a(f,u,s){var c,l,d,h,p,g,m=0,y=!1,b=!1,w=!0;if(typeof f!="function")throw new TypeError(r);u=n(u)||0,e(s)&&(y=!!s.leading,b="maxWait"in s,d=b?i(n(s.maxWait)||0,u):d,w="trailing"in s?!!s.trailing:w);function v(x){var A=c,M=l;return c=l=void 0,m=x,h=f.apply(M,A),h}function T(x){return m=x,p=setTimeout(C,u),y?v(x):h}function _(x){var A=x-g,M=x-m,N=u-A;return b?o(N,d-M):N}function E(x){var A=x-g,M=x-m;return g===void 0||A>=u||A<0||b&&M>=d}function C(){var x=t();if(E(x))return k(x);p=setTimeout(C,_(x))}function k(x){return p=void 0,w&&c?v(x):(c=l=void 0,h)}function R(){p!==void 0&&clearTimeout(p),m=0,c=g=l=p=void 0}function $(){return p===void 0?h:k(t())}function S(){var x=t(),A=E(x);if(c=arguments,l=this,g=x,A){if(p===void 0)return T(g);if(b)return clearTimeout(p),p=setTimeout(C,u),v(g)}return p===void 0&&(p=setTimeout(C,u)),h}return S.cancel=R,S.flush=$,S}return yf=a,yf}var w2=v2();const _2=vy(w2),x2=[],tl={width:0,height:0,top:0,left:0};function T2({initialSize:e=tl,debounceTime:t=300,ignoreDimensions:n=x2,enableDebounceLeadingCall:r=!0,resizeObserverPolyfill:i}={}){const o=X.useRef(null),a=X.useRef(0),[f,u]=X.useState({...tl,...e}),s=X.useMemo(()=>{const c=Array.isArray(n)?n:[n];return _2(l=>{u(d=>Object.keys(d).filter(m=>d[m]!==l[m]).every(m=>c.includes(m))?d:l)},t,{leading:r})},[t,r,n]);return X.useEffect(()=>{const c=i||window.ResizeObserver,l=new c(d=>{d.forEach(h=>{const{left:p,top:g,width:m,height:y}=(h==null?void 0:h.contentRect)??{};a.current=window.requestAnimationFrame(()=>{s({width:m,height:y,top:g,left:p})})})});return o.current&&l.observe(o.current),()=>{window.cancelAnimationFrame(a.current),l.disconnect(),s.cancel()}},[s,i]),{parentRef:o,resize:s,...f}}const S2={width:"100%",height:"100%"};function hs({className:e,children:t,debounceTime:n,ignoreDimensions:r,initialSize:i,parentSizeStyles:o=S2,enableDebounceLeadingCall:a=!0,resizeObserverPolyfill:f,...u}){const{parentRef:s,resize:c,...l}=T2({initialSize:i,debounceTime:n,ignoreDimensions:r,enableDebounceLeadingCall:a,resizeObserverPolyfill:f});return q.jsx("div",{style:o,ref:s,className:e,...u,children:t({...l,ref:s.current,resize:c})})}hs.__docgenInfo={description:"",methods:[],displayName:"ResponsiveContainer",props:{className:{required:!1,tsType:{name:"string"},description:"Optional `className` to add to the parent `div` wrapper used for size measurement."},parentSizeStyles:{required:!1,tsType:{name:"ReactCSSProperties",raw:"React.CSSProperties"},description:"@deprecated - use `style` prop as all other props are passed directly to the parent `div`.\n@TODO remove in the next major version.\nOptional `style` object to apply to the parent `div` wrapper used for size measurement.",defaultValue:{value:"{ width: '100%', height: '100%' }",computed:!1}},children:{required:!0,tsType:{name:"signature",type:"function",raw:"(args: ParentSizeProvidedProps) => React.ReactNode",signature:{arguments:[{type:{name:"intersection",raw:`ParentSizeState & {
  ref: HTMLDivElement | null
  resize: (state: ParentSizeState) => void
}`,elements:[{name:"signature",type:"object",raw:`{
  width: number
  height: number
  top: number
  left: number
}`,signature:{properties:[{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}},{key:"top",value:{name:"number",required:!0}},{key:"left",value:{name:"number",required:!0}}]}},{name:"signature",type:"object",raw:`{
  ref: HTMLDivElement | null
  resize: (state: ParentSizeState) => void
}`,signature:{properties:[{key:"ref",value:{name:"union",raw:"HTMLDivElement | null",elements:[{name:"HTMLDivElement"},{name:"null"}],required:!0}},{key:"resize",value:{name:"signature",type:"function",raw:"(state: ParentSizeState) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  width: number
  height: number
  top: number
  left: number
}`,signature:{properties:[{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}},{key:"top",value:{name:"number",required:!0}},{key:"left",value:{name:"number",required:!0}}]}},name:"state"}],return:{name:"void"}},required:!0}}]}}]},name:"args"}],return:{name:"ReactReactNode",raw:"React.ReactNode"}}},description:"Child render function `({ width, height, top, left, ref, resize }) => ReactNode`."},initialSize:{required:!1,tsType:{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  width: number
  height: number
  top: number
  left: number
}`,signature:{properties:[{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}},{key:"top",value:{name:"number",required:!0}},{key:"left",value:{name:"number",required:!0}}]}}],raw:"Partial<ParentSizeState>"},description:"Initial size before measuring the parent."},resizeObserverPolyfill:{required:!1,tsType:{name:"ResizeObserverPolyfill"},description:"Optionally inject a ResizeObserver polyfill, else this *must* be globally available."},ignoreDimensions:{required:!1,tsType:{name:"union",raw:"keyof ParentSizeState | (keyof ParentSizeState)[]",elements:[{name:"signature",type:"object",raw:`{
  width: number
  height: number
  top: number
  left: number
}`,signature:{properties:[{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}},{key:"top",value:{name:"number",required:!0}},{key:"left",value:{name:"number",required:!0}}]}},{name:"Array",elements:[{name:"unknown"}],raw:"(keyof ParentSizeState)[]"}]},description:"Optional dimensions provided won't trigger a state change when changed."},debounceTime:{required:!1,tsType:{name:"number"},description:"Child render updates upon resize are delayed until `debounceTime` milliseconds _after_ the last resize event is observed. Defaults to `300`."},enableDebounceLeadingCall:{required:!1,tsType:{name:"boolean"},description:"Optional flag to toggle leading debounce calls. When set to true this will ensure that the component always renders immediately. Defaults to `true`.",defaultValue:{value:"true",computed:!1}}}};function M2(){const e=Le(a=>a.timeScrubberSelection),t=Le(a=>a.setTimeScrubberSelection),n=Le(a=>a.scenarioStartEvents),r=Le(a=>a.highlightedPlotData),i=Le(a=>a.pinnedPlotData),o=X.useMemo(()=>{const f="month",u=Ic({data:r,interval:f,cumulative:!0}),s=i?Ic({data:i,interval:f,cumulative:!0}):[];return[...u,...s].sort((l,d)=>Ah(l.date).diff(d.date))},[r,i]);return q.jsxs(q.Fragment,{children:[q.jsx(uy,{type:i?"difference":"area",data:o,selection:e,onUpdateSelection:t}),q.jsx(iy,{type:i?"difference":"area",timeseries:o,scenarioEvents:n,selection:e})]})}M2.__docgenInfo={description:"",methods:[],displayName:"ScenarioBrushChart"};function jh({showDelete:e,onAddBranch:t,onDelete:n}){const r="rounded-sm border border-transparent outline-none hover:border-slate-700 data-[open]:border-slate-600",i="rounded-md border border-slate-300 bg-slate-200 py-1 text-slate-800 outline-none drop-shadow-lg",o="flex w-full min-w-28 items-center justify-between px-4 py-1 text-sm outline-none focus:bg-violet-600 focus:text-slate-100 disabled:text-slate-400",a=f=>{f.stopPropagation()};return q.jsxs(Vr,{menuButtonClasses:r,menuContainerClasses:i,label:q.jsx("div",{onClick:a,children:q.jsx(Ch,{className:"flex h-5 w-5 items-center justify-center text-slate-500",size:14})}),children:[q.jsx(Ie,{className:o,label:"Add branch",onClick:t}),e&&q.jsx(Ie,{className:o,label:"Delete",disabled:!0,onClick:n})]})}jh.__docgenInfo={description:"",methods:[],displayName:"ScenarioBudgetMenu",props:{showDelete:{required:!1,tsType:{name:"boolean"},description:""},onAddBranch:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onDelete:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};function zh({onDelete:e}){const t="ml-3 rounded-sm border border-transparent outline-none hover:border-slate-700 data-[open]:border-slate-600",n="rounded-md border border-slate-300 bg-slate-200 py-1 text-slate-800 outline-none drop-shadow-lg",r="flex w-full min-w-28 items-center justify-between px-4 py-1 text-sm outline-none focus:bg-violet-600 focus:text-slate-100 disabled:text-slate-400",i=o=>{o.stopPropagation()};return q.jsx(Vr,{menuButtonClasses:t,menuContainerClasses:n,label:q.jsx("div",{onClick:i,children:q.jsx(Ch,{className:"flex h-5 w-5 items-center justify-center text-slate-500",size:14})}),children:q.jsx(Ie,{className:r,label:"Delete",onClick:e})})}zh.__docgenInfo={description:"",methods:[],displayName:"ScenarioBudgetItemMenu",props:{onDelete:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};function Bh({type:e,budget:t,onUpdateName:n,onUpdateAmount:r,onDelete:i}){const[o,a]=X.useState(t.name),[f,u]=X.useState(t.amount);return q.jsxs("div",{className:"flex w-full flex-row items-center justify-center py-2",children:[q.jsx("div",{className:"grow",children:q.jsx(To,{value:o,onChange:a,onBlur:n,onCancel:()=>a(t.name)})}),q.jsx("div",{className:su("relative min-w-14 text-right",{"text-slate-500":e==="parent"}),children:e==="parent"?q.jsx("span",{children:Eh(f)}):q.jsx(To,{value:f,onChange:s=>u(Number(s)),onBlur:s=>r(Number(s)),onCancel:()=>u(t.amount),rightAlign:!0})}),q.jsx("div",{className:"flex items-center justify-center",children:q.jsx(zh,{onDelete:i})})]})}Bh.__docgenInfo={description:"",methods:[],displayName:"ScenarioBudgetItem",props:{type:{required:!0,tsType:{name:"union",raw:"'parent' | 'leaf'",elements:[{name:"literal",value:"'parent'"},{name:"literal",value:"'leaf'"}]},description:""},budget:{required:!0,tsType:{name:"Budget"},description:""},onUpdateName:{required:!0,tsType:{name:"signature",type:"function",raw:"(name: string) => void",signature:{arguments:[{type:{name:"string"},name:"name"}],return:{name:"void"}}},description:""},onUpdateAmount:{required:!0,tsType:{name:"signature",type:"function",raw:"(amount: number) => void",signature:{arguments:[{type:{name:"number"},name:"amount"}],return:{name:"void"}}},description:""},onDelete:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};function du({id:e,type:t}){const n=Le(o=>o.budgetMap[e]),r=Le(o=>o.updateBudget),i=Le(o=>o.deleteBudget);return q.jsx(Bh,{type:t,budget:n,onUpdateName:o=>r(n.id,{name:o}),onUpdateAmount:o=>r(n.id,{amount:o}),onDelete:()=>i(n.id)})}du.__docgenInfo={description:"",methods:[],displayName:"ScenarioBudgetItem",props:{id:{required:!0,tsType:{name:"string"},description:""},type:{required:!0,tsType:{name:"union",raw:"'parent' | 'leaf'",elements:[{name:"literal",value:"'parent'"},{name:"literal",value:"'leaf'"}]},description:""}}};function Uh({scenario:e,onAddBranch:t,onUpdateScenarioName:n}){const[r,i]=X.useState(new Date(e.startDate)),o=new Date("2035-12-31");return q.jsxs("div",{className:"flex h-full w-full select-none flex-col bg-slate-900 text-slate-300",children:[q.jsx("div",{className:"bg-slate-800 px-4 py-1 text-sm font-medium text-slate-500",children:"Scenario Budget"}),e?q.jsxs("div",{className:"flex-grow overflow-y-auto pb-4",children:[q.jsxs("div",{className:"flex items-center justify-between px-4 py-4 text-lg font-medium",children:[q.jsx(To,{value:e.name,onChange:n}),q.jsx(jh,{onAddBranch:t,onDelete:()=>{},showDelete:e.id!=="root"})]}),q.jsxs("div",{className:"flex px-4 pb-2",children:[q.jsx(Dc,{value:r,onChange:i}),q.jsx("span",{className:"px-2 text-slate-500",children:"–"}),q.jsx(Dc,{value:o,disabled:!0})]}),q.jsx(yy,{tree:e.budgets,expanded:!0,parentContainerClasses:"cursor-pointer hover:bg-slate-800 px-4",childContainerClasses:"cursor-default px-4",renderCollapsibleItemContent:a=>q.jsx(du,{id:a.id,type:"parent"}),renderLeafItemContent:a=>q.jsx(du,{id:a.id,type:"leaf"})},e.name)]}):q.jsx("div",{className:"px-4 pb-2 pt-4 text-lg font-medium text-slate-500",children:"No budget selected"})]})}Uh.__docgenInfo={description:"",methods:[],displayName:"ScenarioBudget",props:{scenario:{required:!0,tsType:{name:"union",raw:"Scenario | null",elements:[{name:"Scenario"},{name:"null"}]},description:""},onAddBranch:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onUpdateScenarioName:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""}}};function $2(){const e=Le(i=>i.selectedScenarioId),t=Le(i=>i.scenarioMap[e]),n=Le(i=>i.addScenario),r=Le(i=>i.updateScenarioName);return q.jsx(Uh,{scenario:t,onAddBranch:()=>n(e),onUpdateScenarioName:i=>r(t.id,i)})}$2.__docgenInfo={description:"",methods:[],displayName:"ScenarioBudget"};function Oe(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function vi(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function pa(e){let t,n,r;e.length!==2?(t=Oe,n=(f,u)=>Oe(e(f),u),r=(f,u)=>e(f)-u):(t=e===Oe||e===vi?e:E2,n=e,r=e);function i(f,u,s=0,c=f.length){if(s<c){if(t(u,u)!==0)return c;do{const l=s+c>>>1;n(f[l],u)<0?s=l+1:c=l}while(s<c)}return s}function o(f,u,s=0,c=f.length){if(s<c){if(t(u,u)!==0)return c;do{const l=s+c>>>1;n(f[l],u)<=0?s=l+1:c=l}while(s<c)}return s}function a(f,u,s=0,c=f.length){const l=i(f,u,s,c-1);return l>s&&r(f[l-1],u)>-r(f[l],u)?l-1:l}return{left:i,center:a,right:o}}function E2(){return 0}function Hh(e){return e===null?NaN:+e}function*A2(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const C2=pa(Oe),ma=C2.right;pa(Hh).center;function ps(e,t){let n=0;for(let r of e)r!=null&&(r=+r)>=r&&++n;return n}function k2(e){return e.length|0}function N2(e){return!(e>0)}function L2(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function D2(e){return t=>e(...t)}function I2(...e){const t=typeof e[e.length-1]=="function"&&D2(e.pop());e=e.map(L2);const n=e.map(k2),r=e.length-1,i=new Array(r+1).fill(0),o=[];if(r<0||n.some(N2))return o;for(;;){o.push(i.map((f,u)=>e[u][f]));let a=r;for(;++i[a]===n[a];){if(a===0)return t?o.map(t):o;i[a--]=0}}}function R2(e,t){var n=0;return Float64Array.from(e,r=>n+=+r||0)}function Yh(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let a of e)a!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i));else{let a=-1;for(let f of e)(f=t(f,++a,e))!=null&&(f=+f)>=f&&(r=f-i,i+=r/++n,o+=r*(f-i))}if(n>1)return o/(n-1)}function Gh(e,t){const n=Yh(e,t);return n&&Math.sqrt(n)}function Ge(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(n===void 0?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}class Cn{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],a=t+o,f=Math.abs(t)<Math.abs(o)?t-(a-o):o-(a-t);f&&(n[r++]=f),t=a}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,o,a=0;if(n>0){for(a=t[--n];n>0&&(r=a,i=t[--n],a=r+i,o=i-(a-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=a+i,i==r-a&&(a=r))}return a}}class kn extends Map{constructor(t,n=Vh){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(hu(this,t))}has(t){return super.has(hu(this,t))}set(t,n){return super.set(Wh(this,t),n)}delete(t){return super.delete(Xh(this,t))}}class ga extends Set{constructor(t,n=Vh){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(hu(this,t))}add(t){return super.add(Wh(this,t))}delete(t){return super.delete(Xh(this,t))}}function hu({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Wh({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Xh({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Vh(e){return e!==null&&typeof e=="object"?e.valueOf():e}function pu(e){return e}function ba(e,...t){return ms(e,pu,pu,t)}function Jn(e,t,...n){return ms(e,pu,t,n)}function O2(e,t,...n){return ms(e,Array.from,t,n)}function ms(e,t,n,r){return function i(o,a){if(a>=r.length)return n(o);const f=new kn,u=r[a++];let s=-1;for(const c of o){const l=u(c,++s,o),d=f.get(l);d?d.push(c):f.set(l,[c])}for(const[c,l]of f)f.set(c,i(l,a));return t(f)}(e,0)}function P2(e,t){return Array.from(t,n=>e[n])}function So(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const r=Uint32Array.from(e,(i,o)=>o);return t.length>1?(t=t.map(i=>e.map(i)),r.sort((i,o)=>{for(const a of t){const f=Mo(a[i],a[o]);if(f)return f}})):(n=e.map(n),r.sort((i,o)=>Mo(n[i],n[o]))),P2(e,r)}return e.sort(Kh(n))}function Kh(e=Oe){if(e===Oe)return Mo;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function Mo(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function gs(e,t,n){return(t.length!==2?So(Jn(e,t,n),([r,i],[o,a])=>Oe(i,a)||Oe(r,o)):So(ba(e,n),([r,i],[o,a])=>t(i,a)||Oe(r,o))).map(([r])=>r)}const F2=Math.sqrt(50),q2=Math.sqrt(10),j2=Math.sqrt(2);function $o(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=F2?10:o>=q2?5:o>=j2?2:1;let f,u,s;return i<0?(s=Math.pow(10,-i)/a,f=Math.round(e*s),u=Math.round(t*s),f/s<e&&++f,u/s>t&&--u,s=-s):(s=Math.pow(10,i)*a,f=Math.round(e/s),u=Math.round(t/s),f*s<e&&++f,u*s>t&&--u),u<f&&.5<=n&&n<2?$o(e,t,n*2):[f,u,s]}function ri(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,a]=r?$o(t,e,n):$o(e,t,n);if(!(o>=i))return[];const f=o-i+1,u=new Array(f);if(r)if(a<0)for(let s=0;s<f;++s)u[s]=(o-s)/-a;else for(let s=0;s<f;++s)u[s]=(o-s)*a;else if(a<0)for(let s=0;s<f;++s)u[s]=(i+s)/-a;else for(let s=0;s<f;++s)u[s]=(i+s)*a;return u}function Eo(e,t,n){return t=+t,e=+e,n=+n,$o(e,t,n)[2]}function mu(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Eo(t,e,n):Eo(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function z2(e){return Math.max(1,Math.ceil(Math.log(ps(e))/Math.LN2)+1)}function rt(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function B2(e,t){let n,r=-1,i=-1;if(t===void 0)for(const o of e)++i,o!=null&&(n<o||n===void 0&&o>=o)&&(n=o,r=i);else for(let o of e)(o=t(o,++i,e))!=null&&(n<o||n===void 0&&o>=o)&&(n=o,r=i);return r}function Bt(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function U2(e,t){let n,r=-1,i=-1;if(t===void 0)for(const o of e)++i,o!=null&&(n>o||n===void 0&&o>=o)&&(n=o,r=i);else for(let o of e)(o=t(o,++i,e))!=null&&(n>o||n===void 0&&o>=o)&&(n=o,r=i);return r}function Zh(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?Mo:Kh(i);r>n;){if(r-n>600){const u=r-n+1,s=t-n+1,c=Math.log(u),l=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*l*(u-l)/u)*(s-u/2<0?-1:1),h=Math.max(n,Math.floor(t-s*l/u+d)),p=Math.min(r,Math.floor(t+(u-s)*l/u+d));Zh(e,t,h,p,i)}const o=e[t];let a=n,f=r;for(Cr(e,n,t),i(e[r],o)>0&&Cr(e,n,r);a<f;){for(Cr(e,a,f),++a,--f;i(e[a],o)<0;)++a;for(;i(e[f],o)>0;)--f}i(e[n],o)===0?Cr(e,n,f):(++f,Cr(e,f,r)),f<=t&&(n=f+1),t<=f&&(r=f-1)}return e}function Cr(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Qh(e,t=Oe){let n,r=!1;if(t.length===1){let i;for(const o of e){const a=t(o);(r?Oe(a,i)>0:Oe(a,a)===0)&&(n=o,i=a,r=!0)}}else for(const i of e)(r?t(i,n)>0:t(i,i)===0)&&(n=i,r=!0);return n}function ir(e,t,n){if(e=Float64Array.from(A2(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return Bt(e);if(t>=1)return rt(e);var r,i=(r-1)*t,o=Math.floor(i),a=rt(Zh(e,o).subarray(0,o+1)),f=Bt(e.subarray(o+1));return a+(f-a)*(i-o)}}function H2(e,t,n=Hh){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e),f=+n(e[o+1],o+1,e);return a+(f-a)*(i-o)}}function Y2(e,t,n){const r=ps(e),i=ir(e,.75)-ir(e,.25);return r&&i?Math.ceil((n-t)/(2*i*Math.pow(r,-1/3))):1}function Jh(e,t,n){const r=ps(e),i=Gh(e);return r&&i?Math.ceil((n-t)*Math.cbrt(r)/(3.49*i)):1}function G2(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function gu(e,t){return ir(e,.5,t)}function*W2(e){for(const t of e)yield*t}function e0(e){return Array.from(W2(e))}function X2(e,t){const n=new kn;if(t===void 0)for(let o of e)o!=null&&o>=o&&n.set(o,(n.get(o)||0)+1);else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&a>=a&&n.set(a,(n.get(a)||0)+1)}let r,i=0;for(const[o,a]of n)a>i&&(i=a,r=o);return r}function V2(e,t=K2){const n=[];let r,i=!1;for(const o of e)i&&n.push(t(r,o)),r=o,i=!0;return n}function K2(e,t){return[e,t]}function bu(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function fn(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function Ao(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function Z2(e){return e}var Q2=3,nl=1e-6;function J2(e){return"translate("+e+",0)"}function ev(e){return t=>+e(t)}function tv(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function nv(){return!this.__axis}function rv(e,t){var n=[],r=null,i=null,o=6,a=6,f=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,s=1,c="y",l=J2;function d(h){var p=r??(t.ticks?t.ticks.apply(t,n):t.domain()),g=i??(t.tickFormat?t.tickFormat.apply(t,n):Z2),m=Math.max(o,0)+f,y=t.range(),b=+y[0]+u,w=+y[y.length-1]+u,v=(t.bandwidth?tv:ev)(t.copy(),u),T=h.selection?h.selection():h,_=T.selectAll(".domain").data([null]),E=T.selectAll(".tick").data(p,t).order(),C=E.exit(),k=E.enter().append("g").attr("class","tick"),R=E.select("line"),$=E.select("text");_=_.merge(_.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),E=E.merge(k),R=R.merge(k.append("line").attr("stroke","currentColor").attr(c+"2",s*o)),$=$.merge(k.append("text").attr("fill","currentColor").attr(c,s*m).attr("dy","0.71em")),h!==T&&(_=_.transition(h),E=E.transition(h),R=R.transition(h),$=$.transition(h),C=C.transition(h).attr("opacity",nl).attr("transform",function(S){return isFinite(S=v(S))?l(S+u):this.getAttribute("transform")}),k.attr("opacity",nl).attr("transform",function(S){var x=this.parentNode.__axis;return l((x&&isFinite(x=x(S))?x:v(S))+u)})),C.remove(),_.attr("d",a?"M"+b+","+s*a+"V"+u+"H"+w+"V"+s*a:"M"+b+","+u+"H"+w),E.attr("opacity",1).attr("transform",function(S){return l(v(S)+u)}),R.attr(c+"2",s*o),$.attr(c,s*m).text(g),T.filter(nv).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","middle"),T.each(function(){this.__axis=v})}return d.scale=function(h){return arguments.length?(t=h,d):t},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(h){return arguments.length?(n=h==null?[]:Array.from(h),d):n.slice()},d.tickValues=function(h){return arguments.length?(r=h==null?null:Array.from(h),d):r&&r.slice()},d.tickFormat=function(h){return arguments.length?(i=h,d):i},d.tickSize=function(h){return arguments.length?(o=a=+h,d):o},d.tickSizeInner=function(h){return arguments.length?(o=+h,d):o},d.tickSizeOuter=function(h){return arguments.length?(a=+h,d):a},d.tickPadding=function(h){return arguments.length?(f=+h,d):f},d.offset=function(h){return arguments.length?(u=+h,d):u},d}function iv(e){return rv(Q2,e)}var ov={value:()=>{}};function t0(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new bo(n)}function bo(e){this._=e}function av(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}bo.prototype=t0.prototype={constructor:bo,on:function(e,t){var n=this._,r=av(e+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(e=r[o]).type)&&(i=fv(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(i=(e=r[o]).type)n[i]=rl(n[i],e.name,t);else if(t==null)for(i in n)n[i]=rl(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new bo(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function fv(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function rl(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=ov,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var yu="http://www.w3.org/1999/xhtml";const or={svg:"http://www.w3.org/2000/svg",xhtml:yu,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ya(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),or.hasOwnProperty(t)?{space:or[t],local:e}:e}function uv(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===yu&&t.documentElement.namespaceURI===yu?t.createElement(e):t.createElementNS(n,e)}}function sv(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function va(e){var t=ya(e);return(t.local?sv:uv)(t)}function cv(){}function bs(e){return e==null?cv:function(){return this.querySelector(e)}}function lv(e){typeof e!="function"&&(e=bs(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,f=r[i]=new Array(a),u,s,c=0;c<a;++c)(u=o[c])&&(s=e.call(u,u.__data__,c,o))&&("__data__"in u&&(s.__data__=u.__data__),f[c]=s);return new ze(r,this._parents)}function dv(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function hv(){return[]}function n0(e){return e==null?hv:function(){return this.querySelectorAll(e)}}function pv(e){return function(){return dv(e.apply(this,arguments))}}function mv(e){typeof e=="function"?e=pv(e):e=n0(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a=t[o],f=a.length,u,s=0;s<f;++s)(u=a[s])&&(r.push(e.call(u,u.__data__,s,a)),i.push(u));return new ze(r,i)}function r0(e){return function(){return this.matches(e)}}function i0(e){return function(t){return t.matches(e)}}var gv=Array.prototype.find;function bv(e){return function(){return gv.call(this.children,e)}}function yv(){return this.firstElementChild}function vv(e){return this.select(e==null?yv:bv(typeof e=="function"?e:i0(e)))}var wv=Array.prototype.filter;function _v(){return Array.from(this.children)}function xv(e){return function(){return wv.call(this.children,e)}}function Tv(e){return this.selectAll(e==null?_v:xv(typeof e=="function"?e:i0(e)))}function Sv(e){typeof e!="function"&&(e=r0(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,f=r[i]=[],u,s=0;s<a;++s)(u=o[s])&&e.call(u,u.__data__,s,o)&&f.push(u);return new ze(r,this._parents)}function o0(e){return new Array(e.length)}function Mv(){return new ze(this._enter||this._groups.map(o0),this._parents)}function Co(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Co.prototype={constructor:Co,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function $v(e){return function(){return e}}function Ev(e,t,n,r,i,o){for(var a=0,f,u=t.length,s=o.length;a<s;++a)(f=t[a])?(f.__data__=o[a],r[a]=f):n[a]=new Co(e,o[a]);for(;a<u;++a)(f=t[a])&&(i[a]=f)}function Av(e,t,n,r,i,o,a){var f,u,s=new Map,c=t.length,l=o.length,d=new Array(c),h;for(f=0;f<c;++f)(u=t[f])&&(d[f]=h=a.call(u,u.__data__,f,t)+"",s.has(h)?i[f]=u:s.set(h,u));for(f=0;f<l;++f)h=a.call(e,o[f],f,o)+"",(u=s.get(h))?(r[f]=u,u.__data__=o[f],s.delete(h)):n[f]=new Co(e,o[f]);for(f=0;f<c;++f)(u=t[f])&&s.get(d[f])===u&&(i[f]=u)}function Cv(e){return e.__data__}function kv(e,t){if(!arguments.length)return Array.from(this,Cv);var n=t?Av:Ev,r=this._parents,i=this._groups;typeof e!="function"&&(e=$v(e));for(var o=i.length,a=new Array(o),f=new Array(o),u=new Array(o),s=0;s<o;++s){var c=r[s],l=i[s],d=l.length,h=Nv(e.call(c,c&&c.__data__,s,r)),p=h.length,g=f[s]=new Array(p),m=a[s]=new Array(p),y=u[s]=new Array(d);n(c,l,g,m,y,h,t);for(var b=0,w=0,v,T;b<p;++b)if(v=g[b]){for(b>=w&&(w=b+1);!(T=m[w])&&++w<p;);v._next=T||null}}return a=new ze(a,r),a._enter=f,a._exit=u,a}function Nv(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Lv(){return new ze(this._exit||this._groups.map(o0),this._parents)}function Dv(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Iv(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,a=Math.min(i,o),f=new Array(i),u=0;u<a;++u)for(var s=n[u],c=r[u],l=s.length,d=f[u]=new Array(l),h,p=0;p<l;++p)(h=s[p]||c[p])&&(d[p]=h);for(;u<i;++u)f[u]=n[u];return new ze(f,this._parents)}function Rv(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function Ov(e){e||(e=Pv);function t(l,d){return l&&d?e(l.__data__,d.__data__):!l-!d}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],f=a.length,u=i[o]=new Array(f),s,c=0;c<f;++c)(s=a[c])&&(u[c]=s);u.sort(t)}return new ze(i,this._parents).order()}function Pv(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Fv(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function qv(){return Array.from(this)}function jv(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function zv(){let e=0;for(const t of this)++e;return e}function Bv(){return!this.node()}function Uv(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,a=i.length,f;o<a;++o)(f=i[o])&&e.call(f,f.__data__,o,i);return this}function Hv(e){return function(){this.removeAttribute(e)}}function Yv(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Gv(e,t){return function(){this.setAttribute(e,t)}}function Wv(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Xv(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Vv(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Kv(e,t){var n=ya(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Yv:Hv:typeof t=="function"?n.local?Vv:Xv:n.local?Wv:Gv)(n,t))}function a0(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Zv(e){return function(){this.style.removeProperty(e)}}function Qv(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Jv(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function ew(e,t,n){return arguments.length>1?this.each((t==null?Zv:typeof t=="function"?Jv:Qv)(e,t,n??"")):ar(this.node(),e)}function ar(e,t){return e.style.getPropertyValue(t)||a0(e).getComputedStyle(e,null).getPropertyValue(t)}function tw(e){return function(){delete this[e]}}function nw(e,t){return function(){this[e]=t}}function rw(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function iw(e,t){return arguments.length>1?this.each((t==null?tw:typeof t=="function"?rw:nw)(e,t)):this.node()[e]}function f0(e){return e.trim().split(/^|\s+/)}function ys(e){return e.classList||new u0(e)}function u0(e){this._node=e,this._names=f0(e.getAttribute("class")||"")}u0.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function s0(e,t){for(var n=ys(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function c0(e,t){for(var n=ys(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function ow(e){return function(){s0(this,e)}}function aw(e){return function(){c0(this,e)}}function fw(e,t){return function(){(t.apply(this,arguments)?s0:c0)(this,e)}}function uw(e,t){var n=f0(e+"");if(arguments.length<2){for(var r=ys(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?fw:t?ow:aw)(n,t))}function sw(){this.textContent=""}function cw(e){return function(){this.textContent=e}}function lw(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function dw(e){return arguments.length?this.each(e==null?sw:(typeof e=="function"?lw:cw)(e)):this.node().textContent}function hw(){this.innerHTML=""}function pw(e){return function(){this.innerHTML=e}}function mw(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function gw(e){return arguments.length?this.each(e==null?hw:(typeof e=="function"?mw:pw)(e)):this.node().innerHTML}function bw(){this.nextSibling&&this.parentNode.appendChild(this)}function yw(){return this.each(bw)}function vw(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ww(){return this.each(vw)}function _w(e){var t=typeof e=="function"?e:va(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function xw(){return null}function Tw(e,t){var n=typeof e=="function"?e:va(e),r=t==null?xw:typeof t=="function"?t:bs(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Sw(){var e=this.parentNode;e&&e.removeChild(this)}function Mw(){return this.each(Sw)}function $w(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ew(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Aw(e){return this.select(e?Ew:$w)}function Cw(e){return arguments.length?this.property("__data__",e):this.node().__data__}function kw(e){return function(t){e.call(this,t,this.__data__)}}function Nw(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Lw(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function Dw(e,t,n){return function(){var r=this.__on,i,o=kw(t);if(r){for(var a=0,f=r.length;a<f;++a)if((i=r[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Iw(e,t,n){var r=Nw(e+""),i,o=r.length,a;if(arguments.length<2){var f=this.node().__on;if(f){for(var u=0,s=f.length,c;u<s;++u)for(i=0,c=f[u];i<o;++i)if((a=r[i]).type===c.type&&a.name===c.name)return c.value}return}for(f=t?Dw:Lw,i=0;i<o;++i)this.each(f(r[i],t,n));return this}function l0(e,t,n){var r=a0(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Rw(e,t){return function(){return l0(this,e,t)}}function Ow(e,t){return function(){return l0(this,e,t.apply(this,arguments))}}function Pw(e,t){return this.each((typeof t=="function"?Ow:Rw)(e,t))}function*Fw(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var d0=[null];function ze(e,t){this._groups=e,this._parents=t}function wi(){return new ze([[document.documentElement]],d0)}function qw(){return this}ze.prototype=wi.prototype={constructor:ze,select:lv,selectAll:mv,selectChild:vv,selectChildren:Tv,filter:Sv,data:kv,enter:Mv,exit:Lv,join:Dv,merge:Iv,selection:qw,order:Rv,sort:Ov,call:Fv,nodes:qv,node:jv,size:zv,empty:Bv,each:Uv,attr:Kv,style:ew,property:iw,classed:uw,text:dw,html:gw,raise:yw,lower:ww,append:_w,insert:Tw,remove:Mw,clone:Aw,datum:Cw,on:Iw,dispatch:Pw,[Symbol.iterator]:Fw};function er(e){return typeof e=="string"?new ze([[document.querySelector(e)]],[document.documentElement]):new ze([[e]],d0)}function jw(e){let t;for(;t=e.sourceEvent;)e=t;return e}function zw(e,t){if(e=jw(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function xr(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function _i(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function dn(){}var Nn=.7,fr=1/Nn,tr="\\s*([+-]?\\d+)\\s*",ii="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Bw=/^#([0-9a-f]{3,8})$/,Uw=new RegExp(`^rgb\\(${tr},${tr},${tr}\\)$`),Hw=new RegExp(`^rgb\\(${_t},${_t},${_t}\\)$`),Yw=new RegExp(`^rgba\\(${tr},${tr},${tr},${ii}\\)$`),Gw=new RegExp(`^rgba\\(${_t},${_t},${_t},${ii}\\)$`),Ww=new RegExp(`^hsl\\(${ii},${_t},${_t}\\)$`),Xw=new RegExp(`^hsla\\(${ii},${_t},${_t},${ii}\\)$`),il={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};xr(dn,Ln,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ol,formatHex:ol,formatHex8:Vw,formatHsl:Kw,formatRgb:al,toString:al});function ol(){return this.rgb().formatHex()}function Vw(){return this.rgb().formatHex8()}function Kw(){return h0(this).formatHsl()}function al(){return this.rgb().formatRgb()}function Ln(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Bw.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?fl(t):n===3?new we(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Yi(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Yi(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Uw.exec(e))?new we(t[1],t[2],t[3],1):(t=Hw.exec(e))?new we(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Yw.exec(e))?Yi(t[1],t[2],t[3],t[4]):(t=Gw.exec(e))?Yi(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Ww.exec(e))?cl(t[1],t[2]/100,t[3]/100,1):(t=Xw.exec(e))?cl(t[1],t[2]/100,t[3]/100,t[4]):il.hasOwnProperty(e)?fl(il[e]):e==="transparent"?new we(NaN,NaN,NaN,0):null}function fl(e){return new we(e>>16&255,e>>8&255,e&255,1)}function Yi(e,t,n,r){return r<=0&&(e=t=n=NaN),new we(e,t,n,r)}function vs(e){return e instanceof dn||(e=Ln(e)),e?(e=e.rgb(),new we(e.r,e.g,e.b,e.opacity)):new we}function un(e,t,n,r){return arguments.length===1?vs(e):new we(e,t,n,r??1)}function we(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}xr(we,un,_i(dn,{brighter(e){return e=e==null?fr:Math.pow(fr,e),new we(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Nn:Math.pow(Nn,e),new we(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new we($n(this.r),$n(this.g),$n(this.b),ko(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ul,formatHex:ul,formatHex8:Zw,formatRgb:sl,toString:sl}));function ul(){return`#${Mn(this.r)}${Mn(this.g)}${Mn(this.b)}`}function Zw(){return`#${Mn(this.r)}${Mn(this.g)}${Mn(this.b)}${Mn((isNaN(this.opacity)?1:this.opacity)*255)}`}function sl(){const e=ko(this.opacity);return`${e===1?"rgb(":"rgba("}${$n(this.r)}, ${$n(this.g)}, ${$n(this.b)}${e===1?")":`, ${e})`}`}function ko(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function $n(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Mn(e){return e=$n(e),(e<16?"0":"")+e.toString(16)}function cl(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new tt(e,t,n,r)}function h0(e){if(e instanceof tt)return new tt(e.h,e.s,e.l,e.opacity);if(e instanceof dn||(e=Ln(e)),!e)return new tt;if(e instanceof tt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,f=o-i,u=(o+i)/2;return f?(t===o?a=(n-r)/f+(n<r)*6:n===o?a=(r-t)/f+2:a=(t-n)/f+4,f/=u<.5?o+i:2-o-i,a*=60):f=u>0&&u<1?0:a,new tt(a,f,u,e.opacity)}function vu(e,t,n,r){return arguments.length===1?h0(e):new tt(e,t,n,r??1)}function tt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}xr(tt,vu,_i(dn,{brighter(e){return e=e==null?fr:Math.pow(fr,e),new tt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Nn:Math.pow(Nn,e),new tt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new we(vf(e>=240?e-240:e+120,i,r),vf(e,i,r),vf(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new tt(ll(this.h),Gi(this.s),Gi(this.l),ko(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ko(this.opacity);return`${e===1?"hsl(":"hsla("}${ll(this.h)}, ${Gi(this.s)*100}%, ${Gi(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ll(e){return e=(e||0)%360,e<0?e+360:e}function Gi(e){return Math.max(0,Math.min(1,e||0))}function vf(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const p0=Math.PI/180,m0=180/Math.PI,No=18,g0=.96422,b0=1,y0=.82521,v0=4/29,nr=6/29,w0=3*nr*nr,Qw=nr*nr*nr;function _0(e){if(e instanceof xt)return new xt(e.l,e.a,e.b,e.opacity);if(e instanceof Pt)return x0(e);e instanceof we||(e=vs(e));var t=Tf(e.r),n=Tf(e.g),r=Tf(e.b),i=wf((.2225045*t+.7168786*n+.0606169*r)/b0),o,a;return t===n&&n===r?o=a=i:(o=wf((.4360747*t+.3850649*n+.1430804*r)/g0),a=wf((.0139322*t+.0971045*n+.7141733*r)/y0)),new xt(116*i-16,500*(o-i),200*(i-a),e.opacity)}function wu(e,t,n,r){return arguments.length===1?_0(e):new xt(e,t,n,r??1)}function xt(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}xr(xt,wu,_i(dn,{brighter(e){return new xt(this.l+No*(e??1),this.a,this.b,this.opacity)},darker(e){return new xt(this.l-No*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=g0*_f(t),e=b0*_f(e),n=y0*_f(n),new we(xf(3.1338561*t-1.6168667*e-.4906146*n),xf(-.9787684*t+1.9161415*e+.033454*n),xf(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function wf(e){return e>Qw?Math.pow(e,1/3):e/w0+v0}function _f(e){return e>nr?e*e*e:w0*(e-v0)}function xf(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Tf(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Jw(e){if(e instanceof Pt)return new Pt(e.h,e.c,e.l,e.opacity);if(e instanceof xt||(e=_0(e)),e.a===0&&e.b===0)return new Pt(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*m0;return new Pt(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function _u(e,t,n,r){return arguments.length===1?Jw(e):new Pt(e,t,n,r??1)}function Pt(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function x0(e){if(isNaN(e.h))return new xt(e.l,0,0,e.opacity);var t=e.h*p0;return new xt(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}xr(Pt,_u,_i(dn,{brighter(e){return new Pt(this.h,this.c,this.l+No*(e??1),this.opacity)},darker(e){return new Pt(this.h,this.c,this.l-No*(e??1),this.opacity)},rgb(){return x0(this).rgb()}}));var T0=-.14861,ws=1.78277,_s=-.29227,wa=-.90649,oi=1.97294,dl=oi*wa,hl=oi*ws,pl=ws*_s-wa*T0;function e_(e){if(e instanceof En)return new En(e.h,e.s,e.l,e.opacity);e instanceof we||(e=vs(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(pl*r+dl*t-hl*n)/(pl+dl-hl),o=r-i,a=(oi*(n-i)-_s*o)/wa,f=Math.sqrt(a*a+o*o)/(oi*i*(1-i)),u=f?Math.atan2(a,o)*m0-120:NaN;return new En(u<0?u+360:u,f,i,e.opacity)}function Tt(e,t,n,r){return arguments.length===1?e_(e):new En(e,t,n,r??1)}function En(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}xr(En,Tt,_i(dn,{brighter(e){return e=e==null?fr:Math.pow(fr,e),new En(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Nn:Math.pow(Nn,e),new En(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*p0,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new we(255*(t+n*(T0*r+ws*i)),255*(t+n*(_s*r+wa*i)),255*(t+n*(oi*r)),this.opacity)}}));function t_(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}function n_(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,f=r<t-1?e[r+2]:2*o-i;return t_((n-r/t)*t,a,i,o,f)}}const _a=e=>()=>e;function S0(e,t){return function(n){return e+n*t}}function r_(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function xs(e,t){var n=t-e;return n?S0(e,n>180||n<-180?n-360*Math.round(n/360):n):_a(isNaN(e)?t:e)}function i_(e){return(e=+e)==1?Ae:function(t,n){return n-t?r_(t,n,e):_a(isNaN(t)?n:t)}}function Ae(e,t){var n=t-e;return n?S0(e,n):_a(isNaN(e)?t:e)}const Dn=function e(t){var n=i_(t);function r(i,o){var a=n((i=un(i)).r,(o=un(o)).r),f=n(i.g,o.g),u=n(i.b,o.b),s=Ae(i.opacity,o.opacity);return function(c){return i.r=a(c),i.g=f(c),i.b=u(c),i.opacity=s(c),i+""}}return r.gamma=e,r}(1);function o_(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),a,f;for(a=0;a<n;++a)f=un(t[a]),r[a]=f.r||0,i[a]=f.g||0,o[a]=f.b||0;return r=e(r),i=e(i),o=e(o),f.opacity=1,function(u){return f.r=r(u),f.g=i(u),f.b=o(u),f+""}}}var a_=o_(n_);function f_(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function u_(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function s_(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=xi(e[a],t[a]);for(;a<n;++a)o[a]=t[a];return function(f){for(a=0;a<r;++a)o[a]=i[a](f);return o}}function c_(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function $e(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function l_(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=xi(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var xu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Sf=new RegExp(xu.source,"g");function d_(e){return function(){return e}}function h_(e){return function(t){return e(t)+""}}function M0(e,t){var n=xu.lastIndex=Sf.lastIndex=0,r,i,o,a=-1,f=[],u=[];for(e=e+"",t=t+"";(r=xu.exec(e))&&(i=Sf.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),f[a]?f[a]+=o:f[++a]=o),(r=r[0])===(i=i[0])?f[a]?f[a]+=i:f[++a]=i:(f[++a]=null,u.push({i:a,x:$e(r,i)})),n=Sf.lastIndex;return n<t.length&&(o=t.slice(n),f[a]?f[a]+=o:f[++a]=o),f.length<2?u[0]?h_(u[0].x):d_(t):(t=u.length,function(s){for(var c=0,l;c<t;++c)f[(l=u[c]).i]=l.x(s);return f.join("")})}function xi(e,t){var n=typeof t,r;return t==null||n==="boolean"?_a(t):(n==="number"?$e:n==="string"?(r=Ln(t))?(t=r,Dn):M0:t instanceof Ln?Dn:t instanceof Date?c_:u_(t)?f_:Array.isArray(t)?s_:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?l_:$e)(e,t)}function Ts(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var ml=180/Math.PI,Tu={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function $0(e,t,n,r,i,o){var a,f,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(f=Math.sqrt(n*n+r*r))&&(n/=f,r/=f,u/=f),e*r<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*ml,skewX:Math.atan(u)*ml,scaleX:a,scaleY:f}}var Wi;function p_(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Tu:$0(t.a,t.b,t.c,t.d,t.e,t.f)}function m_(e){return e==null||(Wi||(Wi=document.createElementNS("http://www.w3.org/2000/svg","g")),Wi.setAttribute("transform",e),!(e=Wi.transform.baseVal.consolidate()))?Tu:(e=e.matrix,$0(e.a,e.b,e.c,e.d,e.e,e.f))}function E0(e,t,n,r){function i(s){return s.length?s.pop()+" ":""}function o(s,c,l,d,h,p){if(s!==l||c!==d){var g=h.push("translate(",null,t,null,n);p.push({i:g-4,x:$e(s,l)},{i:g-2,x:$e(c,d)})}else(l||d)&&h.push("translate("+l+t+d+n)}function a(s,c,l,d){s!==c?(s-c>180?c+=360:c-s>180&&(s+=360),d.push({i:l.push(i(l)+"rotate(",null,r)-2,x:$e(s,c)})):c&&l.push(i(l)+"rotate("+c+r)}function f(s,c,l,d){s!==c?d.push({i:l.push(i(l)+"skewX(",null,r)-2,x:$e(s,c)}):c&&l.push(i(l)+"skewX("+c+r)}function u(s,c,l,d,h,p){if(s!==l||c!==d){var g=h.push(i(h)+"scale(",null,",",null,")");p.push({i:g-4,x:$e(s,l)},{i:g-2,x:$e(c,d)})}else(l!==1||d!==1)&&h.push(i(h)+"scale("+l+","+d+")")}return function(s,c){var l=[],d=[];return s=e(s),c=e(c),o(s.translateX,s.translateY,c.translateX,c.translateY,l,d),a(s.rotate,c.rotate,l,d),f(s.skewX,c.skewX,l,d),u(s.scaleX,s.scaleY,c.scaleX,c.scaleY,l,d),s=c=null,function(h){for(var p=-1,g=d.length,m;++p<g;)l[(m=d[p]).i]=m.x(h);return l.join("")}}}var g_=E0(p_,"px, ","px)","deg)"),b_=E0(m_,", ",")",")");function y_(e){return function(t,n){var r=e((t=vu(t)).h,(n=vu(n)).h),i=Ae(t.s,n.s),o=Ae(t.l,n.l),a=Ae(t.opacity,n.opacity);return function(f){return t.h=r(f),t.s=i(f),t.l=o(f),t.opacity=a(f),t+""}}}const v_=y_(xs);function w_(e,t){var n=Ae((e=wu(e)).l,(t=wu(t)).l),r=Ae(e.a,t.a),i=Ae(e.b,t.b),o=Ae(e.opacity,t.opacity);return function(a){return e.l=n(a),e.a=r(a),e.b=i(a),e.opacity=o(a),e+""}}function __(e){return function(t,n){var r=e((t=_u(t)).h,(n=_u(n)).h),i=Ae(t.c,n.c),o=Ae(t.l,n.l),a=Ae(t.opacity,n.opacity);return function(f){return t.h=r(f),t.c=i(f),t.l=o(f),t.opacity=a(f),t+""}}}const x_=__(xs);function A0(e){return function t(n){n=+n;function r(i,o){var a=e((i=Tt(i)).h,(o=Tt(o)).h),f=Ae(i.s,o.s),u=Ae(i.l,o.l),s=Ae(i.opacity,o.opacity);return function(c){return i.h=a(c),i.s=f(c),i.l=u(Math.pow(c,n)),i.opacity=s(c),i+""}}return r.gamma=t,r}(1)}A0(xs);var Ss=A0(Ae);function xa(e,t){t===void 0&&(t=e,e=xi);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(a){var f=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return o[f](a-f)}}function ot(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}var ur=0,jr=0,kr=0,C0=1e3,Lo,zr,Do=0,In=0,Ta=0,ai=typeof performance=="object"&&performance.now?performance:Date,k0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ms(){return In||(k0(T_),In=ai.now()+Ta)}function T_(){In=0}function Io(){this._call=this._time=this._next=null}Io.prototype=N0.prototype={constructor:Io,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Ms():+n)+(t==null?0:+t),!this._next&&zr!==this&&(zr?zr._next=this:Lo=this,zr=this),this._call=e,this._time=n,Su()},stop:function(){this._call&&(this._call=null,this._time=1/0,Su())}};function N0(e,t,n){var r=new Io;return r.restart(e,t,n),r}function S_(){Ms(),++ur;for(var e=Lo,t;e;)(t=In-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ur}function gl(){In=(Do=ai.now())+Ta,ur=jr=0;try{S_()}finally{ur=0,$_(),In=0}}function M_(){var e=ai.now(),t=e-Do;t>C0&&(Ta-=t,Do=e)}function $_(){for(var e,t=Lo,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Lo=n);zr=e,Su(r)}function Su(e){if(!ur){jr&&(jr=clearTimeout(jr));var t=e-In;t>24?(e<1/0&&(jr=setTimeout(gl,e-ai.now()-Ta)),kr&&(kr=clearInterval(kr))):(kr||(Do=ai.now(),kr=setInterval(M_,C0)),ur=1,k0(gl))}}function bl(e,t,n){var r=new Io;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var E_=t0("start","end","cancel","interrupt"),A_=[],L0=0,yl=1,Mu=2,yo=3,vl=4,$u=5,vo=6;function Sa(e,t,n,r,i,o){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;C_(e,n,{name:t,index:r,group:i,on:E_,tween:A_,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:L0})}function $s(e,t){var n=st(e,t);if(n.state>L0)throw new Error("too late; already scheduled");return n}function $t(e,t){var n=st(e,t);if(n.state>yo)throw new Error("too late; already running");return n}function st(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function C_(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=N0(o,0,n.time);function o(s){n.state=yl,n.timer.restart(a,n.delay,n.time),n.delay<=s&&a(s-n.delay)}function a(s){var c,l,d,h;if(n.state!==yl)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===yo)return bl(a);h.state===vl?(h.state=vo,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=vo,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(bl(function(){n.state===yo&&(n.state=vl,n.timer.restart(f,n.delay,n.time),f(s))}),n.state=Mu,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Mu){for(n.state=yo,i=new Array(d=n.tween.length),c=0,l=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++l]=h);i.length=l+1}}function f(s){for(var c=s<n.duration?n.ease.call(null,s/n.duration):(n.timer.restart(u),n.state=$u,1),l=-1,d=i.length;++l<d;)i[l].call(e,c);n.state===$u&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=vo,n.timer.stop(),delete r[t];for(var s in r)return;delete e.__transition}}function k_(e,t){var n=e.__transition,r,i,o=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){o=!1;continue}i=r.state>Mu&&r.state<$u,r.state=vo,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}o&&delete e.__transition}}function N_(e){return this.each(function(){k_(this,e)})}function L_(e,t){var n,r;return function(){var i=$t(this,e),o=i.tween;if(o!==n){r=n=o;for(var a=0,f=r.length;a<f;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function D_(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=$t(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var f={name:t,value:n},u=0,s=i.length;u<s;++u)if(i[u].name===t){i[u]=f;break}u===s&&i.push(f)}o.tween=i}}function I_(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=st(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===e)return a.value;return null}return this.each((t==null?L_:D_)(n,e,t))}function Es(e,t,n){var r=e._id;return e.each(function(){var i=$t(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return st(i,r).value[t]}}function D0(e,t){var n;return(typeof t=="number"?$e:t instanceof Ln?Dn:(n=Ln(t))?(t=n,Dn):M0)(e,t)}function R_(e){return function(){this.removeAttribute(e)}}function O_(e){return function(){this.removeAttributeNS(e.space,e.local)}}function P_(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttribute(e);return a===i?null:a===r?o:o=t(r=a,n)}}function F_(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?o:o=t(r=a,n)}}function q_(e,t,n){var r,i,o;return function(){var a,f=n(this),u;return f==null?void this.removeAttribute(e):(a=this.getAttribute(e),u=f+"",a===u?null:a===r&&u===i?o:(i=u,o=t(r=a,f)))}}function j_(e,t,n){var r,i,o;return function(){var a,f=n(this),u;return f==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),u=f+"",a===u?null:a===r&&u===i?o:(i=u,o=t(r=a,f)))}}function z_(e,t){var n=ya(e),r=n==="transform"?b_:D0;return this.attrTween(e,typeof t=="function"?(n.local?j_:q_)(n,r,Es(this,"attr."+e,t)):t==null?(n.local?O_:R_)(n):(n.local?F_:P_)(n,r,t))}function B_(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function U_(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function H_(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&U_(e,o)),n}return i._value=t,i}function Y_(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&B_(e,o)),n}return i._value=t,i}function G_(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=ya(e);return this.tween(n,(r.local?H_:Y_)(r,t))}function W_(e,t){return function(){$s(this,e).delay=+t.apply(this,arguments)}}function X_(e,t){return t=+t,function(){$s(this,e).delay=t}}function V_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?W_:X_)(t,e)):st(this.node(),t).delay}function K_(e,t){return function(){$t(this,e).duration=+t.apply(this,arguments)}}function Z_(e,t){return t=+t,function(){$t(this,e).duration=t}}function Q_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?K_:Z_)(t,e)):st(this.node(),t).duration}function J_(e,t){if(typeof t!="function")throw new Error;return function(){$t(this,e).ease=t}}function e6(e){var t=this._id;return arguments.length?this.each(J_(t,e)):st(this.node(),t).ease}function t6(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;$t(this,e).ease=n}}function n6(e){if(typeof e!="function")throw new Error;return this.each(t6(this._id,e))}function r6(e){typeof e!="function"&&(e=r0(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,f=r[i]=[],u,s=0;s<a;++s)(u=o[s])&&e.call(u,u.__data__,s,o)&&f.push(u);return new Ut(r,this._parents,this._name,this._id)}function i6(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),f=0;f<o;++f)for(var u=t[f],s=n[f],c=u.length,l=a[f]=new Array(c),d,h=0;h<c;++h)(d=u[h]||s[h])&&(l[h]=d);for(;f<r;++f)a[f]=t[f];return new Ut(a,this._parents,this._name,this._id)}function o6(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function a6(e,t,n){var r,i,o=o6(t)?$s:$t;return function(){var a=o(this,e),f=a.on;f!==r&&(i=(r=f).copy()).on(t,n),a.on=i}}function f6(e,t){var n=this._id;return arguments.length<2?st(this.node(),n).on.on(e):this.each(a6(n,e,t))}function u6(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function s6(){return this.on("end.remove",u6(this._id))}function c6(e){var t=this._name,n=this._id;typeof e!="function"&&(e=bs(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var f=r[a],u=f.length,s=o[a]=new Array(u),c,l,d=0;d<u;++d)(c=f[d])&&(l=e.call(c,c.__data__,d,f))&&("__data__"in c&&(l.__data__=c.__data__),s[d]=l,Sa(s[d],t,n,d,s,st(c,n)));return new Ut(o,this._parents,t,n)}function l6(e){var t=this._name,n=this._id;typeof e!="function"&&(e=n0(e));for(var r=this._groups,i=r.length,o=[],a=[],f=0;f<i;++f)for(var u=r[f],s=u.length,c,l=0;l<s;++l)if(c=u[l]){for(var d=e.call(c,c.__data__,l,u),h,p=st(c,n),g=0,m=d.length;g<m;++g)(h=d[g])&&Sa(h,t,n,g,d,p);o.push(d),a.push(c)}return new Ut(o,a,t,n)}var d6=wi.prototype.constructor;function h6(){return new d6(this._groups,this._parents)}function p6(e,t){var n,r,i;return function(){var o=ar(this,e),a=(this.style.removeProperty(e),ar(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}function I0(e){return function(){this.style.removeProperty(e)}}function m6(e,t,n){var r,i=n+"",o;return function(){var a=ar(this,e);return a===i?null:a===r?o:o=t(r=a,n)}}function g6(e,t,n){var r,i,o;return function(){var a=ar(this,e),f=n(this),u=f+"";return f==null&&(u=f=(this.style.removeProperty(e),ar(this,e))),a===u?null:a===r&&u===i?o:(i=u,o=t(r=a,f))}}function b6(e,t){var n,r,i,o="style."+t,a="end."+o,f;return function(){var u=$t(this,e),s=u.on,c=u.value[o]==null?f||(f=I0(t)):void 0;(s!==n||i!==c)&&(r=(n=s).copy()).on(a,i=c),u.on=r}}function y6(e,t,n){var r=(e+="")=="transform"?g_:D0;return t==null?this.styleTween(e,p6(e,r)).on("end.style."+e,I0(e)):typeof t=="function"?this.styleTween(e,g6(e,r,Es(this,"style."+e,t))).each(b6(this._id,e)):this.styleTween(e,m6(e,r,t),n).on("end.style."+e,null)}function v6(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function w6(e,t,n){var r,i;function o(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&v6(e,a,n)),r}return o._value=t,o}function _6(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,w6(e,t,n??""))}function x6(e){return function(){this.textContent=e}}function T6(e){return function(){var t=e(this);this.textContent=t??""}}function S6(e){return this.tween("text",typeof e=="function"?T6(Es(this,"text",e)):x6(e==null?"":e+""))}function M6(e){return function(t){this.textContent=e.call(this,t)}}function $6(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&M6(i)),t}return r._value=e,r}function E6(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,$6(e))}function A6(){for(var e=this._name,t=this._id,n=R0(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],f=a.length,u,s=0;s<f;++s)if(u=a[s]){var c=st(u,t);Sa(u,e,n,s,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Ut(r,this._parents,e,n)}function C6(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var f={value:a},u={value:function(){--i===0&&o()}};n.each(function(){var s=$t(this,r),c=s.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(f),t._.interrupt.push(f),t._.end.push(u)),s.on=t}),i===0&&o()})}var k6=0;function Ut(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function R0(){return++k6}var Ct=wi.prototype;Ut.prototype={constructor:Ut,select:c6,selectAll:l6,selectChild:Ct.selectChild,selectChildren:Ct.selectChildren,filter:r6,merge:i6,selection:h6,transition:A6,call:Ct.call,nodes:Ct.nodes,node:Ct.node,size:Ct.size,empty:Ct.empty,each:Ct.each,on:f6,attr:z_,attrTween:G_,style:y6,styleTween:_6,text:S6,textTween:E6,remove:s6,tween:I_,delay:V_,duration:Q_,ease:e6,easeVarying:n6,end:C6,[Symbol.iterator]:Ct[Symbol.iterator]};function N6(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var L6={time:null,delay:0,duration:250,ease:N6};function D6(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function I6(e){var t,n;e instanceof Ut?(t=e._id,e=e._name):(t=R0(),(n=L6).time=Ms(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],f=a.length,u,s=0;s<f;++s)(u=a[s])&&Sa(u,e,t,s,a,n||D6(u,t));return new Ut(r,this._parents,e,t)}wi.prototype.interrupt=N_;wi.prototype.transition=I6;const Eu=Math.PI,Au=2*Eu,Tn=1e-6,R6=Au-Tn;function O0(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function O6(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return O0;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class P0{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?O0:O6(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,a){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,f=this._y1,u=r-t,s=i-n,c=a-t,l=f-n,d=c*c+l*l;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Tn)if(!(Math.abs(l*u-s*c)>Tn)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-a,p=i-f,g=u*u+s*s,m=h*h+p*p,y=Math.sqrt(g),b=Math.sqrt(d),w=o*Math.tan((Eu-Math.acos((g+d-m)/(2*y*b)))/2),v=w/b,T=w/y;Math.abs(v-1)>Tn&&this._append`L${t+v*c},${n+v*l}`,this._append`A${o},${o},0,0,${+(l*h>c*p)},${this._x1=t+T*u},${this._y1=n+T*s}`}}arc(t,n,r,i,o,a){if(t=+t,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let f=r*Math.cos(i),u=r*Math.sin(i),s=t+f,c=n+u,l=1^a,d=a?i-o:o-i;this._x1===null?this._append`M${s},${c}`:(Math.abs(this._x1-s)>Tn||Math.abs(this._y1-c)>Tn)&&this._append`L${s},${c}`,r&&(d<0&&(d=d%Au+Au),d>R6?this._append`A${r},${r},0,1,${l},${t-f},${n-u}A${r},${r},0,1,${l},${this._x1=s},${this._y1=c}`:d>Tn&&this._append`A${r},${r},0,${+(d>=Eu)},${l},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Cu(e=3){return new P0(+e)}function P6(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ro(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function sr(e){return e=Ro(Math.abs(e)),e?e[1]:NaN}function F6(e,t){return function(n,r){for(var i=n.length,o=[],a=0,f=e[0],u=0;i>0&&f>0&&(u+f+1>r&&(f=Math.max(1,r-u)),o.push(n.substring(i-=f,i+f)),!((u+=f+1)>r));)f=e[a=(a+1)%e.length];return o.reverse().join(t)}}function q6(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var j6=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function fi(e){if(!(t=j6.exec(e)))throw new Error("invalid format: "+e);var t;return new As({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}fi.prototype=As.prototype;function As(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}As.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function z6(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var F0;function B6(e,t){var n=Ro(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(F0=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Ro(e,Math.max(0,t+o-1))[0]}function wl(e,t){var n=Ro(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const _l={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:P6,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>wl(e*100,t),r:wl,s:B6,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function xl(e){return e}var Tl=Array.prototype.map,Sl=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function U6(e){var t=e.grouping===void 0||e.thousands===void 0?xl:F6(Tl.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?xl:q6(Tl.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",f=e.minus===void 0?"−":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function s(l){l=fi(l);var d=l.fill,h=l.align,p=l.sign,g=l.symbol,m=l.zero,y=l.width,b=l.comma,w=l.precision,v=l.trim,T=l.type;T==="n"?(b=!0,T="g"):_l[T]||(w===void 0&&(w=12),v=!0,T="g"),(m||d==="0"&&h==="=")&&(m=!0,d="0",h="=");var _=g==="$"?n:g==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",E=g==="$"?r:/[%p]/.test(T)?a:"",C=_l[T],k=/[defgprs%]/.test(T);w=w===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function R($){var S=_,x=E,A,M,N;if(T==="c")x=C($)+x,$="";else{$=+$;var L=$<0||1/$<0;if($=isNaN($)?u:C(Math.abs($),w),v&&($=z6($)),L&&+$==0&&p!=="+"&&(L=!1),S=(L?p==="("?p:f:p==="-"||p==="("?"":p)+S,x=(T==="s"?Sl[8+F0/3]:"")+x+(L&&p==="("?")":""),k){for(A=-1,M=$.length;++A<M;)if(N=$.charCodeAt(A),48>N||N>57){x=(N===46?i+$.slice(A+1):$.slice(A))+x,$=$.slice(0,A);break}}}b&&!m&&($=t($,1/0));var B=S.length+$.length+x.length,H=B<y?new Array(y-B+1).join(d):"";switch(b&&m&&($=t(H+$,H.length?y-x.length:1/0),H=""),h){case"<":$=S+$+x+H;break;case"=":$=S+H+$+x;break;case"^":$=H.slice(0,B=H.length>>1)+S+$+x+H.slice(B);break;default:$=H+S+$+x;break}return o($)}return R.toString=function(){return l+""},R}function c(l,d){var h=s((l=fi(l),l.type="f",l)),p=Math.max(-8,Math.min(8,Math.floor(sr(d)/3)))*3,g=Math.pow(10,-p),m=Sl[8+p/3];return function(y){return h(g*y)+m}}return{format:s,formatPrefix:c}}var Xi,Tr,q0;H6({thousands:",",grouping:[3],currency:["$",""]});function H6(e){return Xi=U6(e),Tr=Xi.format,q0=Xi.formatPrefix,Xi}function Y6(e){return Math.max(0,-sr(Math.abs(e)))}function G6(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(sr(t)/3)))*3-sr(Math.abs(e)))}function W6(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,sr(t)-sr(e))+1}var te=1e-6,j0=1e-12,re=Math.PI,he=re/2,Ml=re/4,Be=re*2,Ne=180/re,de=re/180,ue=Math.abs,Sr=Math.atan,Ht=Math.atan2,ne=Math.cos,z0=Math.exp,Oo=Math.log,Mf=Math.pow,J=Math.sin,We=Math.sign||function(e){return e>0?1:e<0?-1:0},Pe=Math.sqrt,Cs=Math.tan;function B0(e){return e>1?0:e<-1?re:Math.acos(e)}function Ze(e){return e>1?he:e<-1?-he:Math.asin(e)}function Xe(){}function Po(e,t){e&&El.hasOwnProperty(e.type)&&El[e.type](e,t)}var $l={Feature:function(e,t){Po(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Po(n[r].geometry,t)}},El={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){ku(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)ku(n[r],t,0)},Polygon:function(e,t){Al(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Al(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Po(n[r],t)}};function ku(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function Al(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)ku(e[n],t,1);t.polygonEnd()}function Sn(e,t){e&&$l.hasOwnProperty(e.type)?$l[e.type](e,t):Po(e,t)}function Nu(e){return[Ht(e[1],e[0]),Ze(e[2])]}function cr(e){var t=e[0],n=e[1],r=ne(n);return[r*ne(t),r*J(t),J(n)]}function Vi(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Fo(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function $f(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Ki(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Lu(e){var t=Pe(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Du(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function Iu(e,t){return ue(e)>re&&(e-=Math.round(e/Be)*Be),[e,t]}Iu.invert=Iu;function U0(e,t,n){return(e%=Be)?t||n?Du(kl(e),Nl(t,n)):kl(e):t||n?Nl(t,n):Iu}function Cl(e){return function(t,n){return t+=e,ue(t)>re&&(t-=Math.round(t/Be)*Be),[t,n]}}function kl(e){var t=Cl(e);return t.invert=Cl(-e),t}function Nl(e,t){var n=ne(e),r=J(e),i=ne(t),o=J(t);function a(f,u){var s=ne(u),c=ne(f)*s,l=J(f)*s,d=J(u),h=d*n+c*r;return[Ht(l*i-h*o,c*n-d*r),Ze(h*i+l*o)]}return a.invert=function(f,u){var s=ne(u),c=ne(f)*s,l=J(f)*s,d=J(u),h=d*i-l*o;return[Ht(l*i+d*o,c*n+h*r),Ze(h*n-c*r)]},a}function X6(e){e=U0(e[0]*de,e[1]*de,e.length>2?e[2]*de:0);function t(n){return n=e(n[0]*de,n[1]*de),n[0]*=Ne,n[1]*=Ne,n}return t.invert=function(n){return n=e.invert(n[0]*de,n[1]*de),n[0]*=Ne,n[1]*=Ne,n},t}function V6(e,t,n,r,i,o){if(n){var a=ne(t),f=J(t),u=r*n;i==null?(i=t+r*Be,o=t-u/2):(i=Ll(a,i),o=Ll(a,o),(r>0?i<o:i>o)&&(i+=r*Be));for(var s,c=i;r>0?c>o:c<o;c-=u)s=Nu([a,-f*ne(c),-f*J(c)]),e.point(s[0],s[1])}}function Ll(e,t){t=cr(t),t[0]-=e,Lu(t);var n=B0(-t[1]);return((-t[2]<0?-n:n)+Be-te)%Be}function H0(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Xe,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function wo(e,t){return ue(e[0]-t[0])<te&&ue(e[1]-t[1])<te}function Zi(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Y0(e,t,n,r,i){var o=[],a=[],f,u;if(e.forEach(function(p){if(!((g=p.length-1)<=0)){var g,m=p[0],y=p[g],b;if(wo(m,y)){if(!m[2]&&!y[2]){for(i.lineStart(),f=0;f<g;++f)i.point((m=p[f])[0],m[1]);i.lineEnd();return}y[0]+=2*te}o.push(b=new Zi(m,p,null,!0)),a.push(b.o=new Zi(m,null,b,!1)),o.push(b=new Zi(y,p,null,!1)),a.push(b.o=new Zi(y,null,b,!0))}}),!!o.length){for(a.sort(t),Dl(o),Dl(a),f=0,u=a.length;f<u;++f)a[f].e=n=!n;for(var s=o[0],c,l;;){for(var d=s,h=!0;d.v;)if((d=d.n)===s)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(f=0,u=c.length;f<u;++f)i.point((l=c[f])[0],l[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,f=c.length-1;f>=0;--f)i.point((l=c[f])[0],l[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function Dl(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function Ef(e){return ue(e[0])<=re?e[0]:We(e[0])*((ue(e[0])+re)%Be-re)}function K6(e,t){var n=Ef(t),r=t[1],i=J(r),o=[J(n),-ne(n),0],a=0,f=0,u=new Cn;i===1?r=he+te:i===-1&&(r=-he-te);for(var s=0,c=e.length;s<c;++s)if(d=(l=e[s]).length)for(var l,d,h=l[d-1],p=Ef(h),g=h[1]/2+Ml,m=J(g),y=ne(g),b=0;b<d;++b,p=v,m=_,y=E,h=w){var w=l[b],v=Ef(w),T=w[1]/2+Ml,_=J(T),E=ne(T),C=v-p,k=C>=0?1:-1,R=k*C,$=R>re,S=m*_;if(u.add(Ht(S*k*J(R),y*E+S*ne(R))),a+=$?C+k*Be:C,$^p>=n^v>=n){var x=Fo(cr(h),cr(w));Lu(x);var A=Fo(o,x);Lu(A);var M=($^C>=0?-1:1)*Ze(A[2]);(r>M||r===M&&(x[0]||x[1]))&&(f+=$^C>=0?1:-1)}}return(a<-te||a<te&&u<-j0)^f&1}function G0(e,t,n,r){return function(i){var o=t(i),a=H0(),f=t(a),u=!1,s,c,l,d={point:h,lineStart:g,lineEnd:m,polygonStart:function(){d.point=y,d.lineStart=b,d.lineEnd=w,c=[],s=[]},polygonEnd:function(){d.point=h,d.lineStart=g,d.lineEnd=m,c=e0(c);var v=K6(s,r);c.length?(u||(i.polygonStart(),u=!0),Y0(c,Q6,v,n,i)):v&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=s=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(v,T){e(v,T)&&i.point(v,T)}function p(v,T){o.point(v,T)}function g(){d.point=p,o.lineStart()}function m(){d.point=h,o.lineEnd()}function y(v,T){l.push([v,T]),f.point(v,T)}function b(){f.lineStart(),l=[]}function w(){y(l[0][0],l[0][1]),f.lineEnd();var v=f.clean(),T=a.result(),_,E=T.length,C,k,R;if(l.pop(),s.push(l),l=null,!!E){if(v&1){if(k=T[0],(C=k.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),_=0;_<C;++_)i.point((R=k[_])[0],R[1]);i.lineEnd()}return}E>1&&v&2&&T.push(T.pop().concat(T.shift())),c.push(T.filter(Z6))}}return d}}function Z6(e){return e.length>1}function Q6(e,t){return((e=e.x)[0]<0?e[1]-he-te:he-e[1])-((t=t.x)[0]<0?t[1]-he-te:he-t[1])}const Il=G0(function(){return!0},J6,t3,[-re,-he]);function J6(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,a){var f=o>0?re:-re,u=ue(o-t);ue(u-re)<te?(e.point(t,n=(n+a)/2>0?he:-he),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(f,n),e.point(o,n),i=0):r!==f&&u>=re&&(ue(t-r)<te&&(t-=r*te),ue(o-f)<te&&(o-=f*te),n=e3(t,n,o,a),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(f,n),i=0),e.point(t=o,n=a),r=f},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function e3(e,t,n,r){var i,o,a=J(e-n);return ue(a)>te?Sr((J(t)*(o=ne(r))*J(n)-J(r)*(i=ne(t))*J(e))/(i*o*a)):(t+r)/2}function t3(e,t,n,r){var i;if(e==null)i=n*he,r.point(-re,i),r.point(0,i),r.point(re,i),r.point(re,0),r.point(re,-i),r.point(0,-i),r.point(-re,-i),r.point(-re,0),r.point(-re,i);else if(ue(e[0]-t[0])>te){var o=e[0]<t[0]?re:-re;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function n3(e){var t=ne(e),n=2*de,r=t>0,i=ue(t)>te;function o(c,l,d,h){V6(h,e,n,d,c,l)}function a(c,l){return ne(c)*ne(l)>t}function f(c){var l,d,h,p,g;return{lineStart:function(){p=h=!1,g=1},point:function(m,y){var b=[m,y],w,v=a(m,y),T=r?v?0:s(m,y):v?s(m+(m<0?re:-re),y):0;if(!l&&(p=h=v)&&c.lineStart(),v!==h&&(w=u(l,b),(!w||wo(l,w)||wo(b,w))&&(b[2]=1)),v!==h)g=0,v?(c.lineStart(),w=u(b,l),c.point(w[0],w[1])):(w=u(l,b),c.point(w[0],w[1],2),c.lineEnd()),l=w;else if(i&&l&&r^v){var _;!(T&d)&&(_=u(b,l,!0))&&(g=0,r?(c.lineStart(),c.point(_[0][0],_[0][1]),c.point(_[1][0],_[1][1]),c.lineEnd()):(c.point(_[1][0],_[1][1]),c.lineEnd(),c.lineStart(),c.point(_[0][0],_[0][1],3)))}v&&(!l||!wo(l,b))&&c.point(b[0],b[1]),l=b,h=v,d=T},lineEnd:function(){h&&c.lineEnd(),l=null},clean:function(){return g|(p&&h)<<1}}}function u(c,l,d){var h=cr(c),p=cr(l),g=[1,0,0],m=Fo(h,p),y=Vi(m,m),b=m[0],w=y-b*b;if(!w)return!d&&c;var v=t*y/w,T=-t*b/w,_=Fo(g,m),E=Ki(g,v),C=Ki(m,T);$f(E,C);var k=_,R=Vi(E,k),$=Vi(k,k),S=R*R-$*(Vi(E,E)-1);if(!(S<0)){var x=Pe(S),A=Ki(k,(-R-x)/$);if($f(A,E),A=Nu(A),!d)return A;var M=c[0],N=l[0],L=c[1],B=l[1],H;N<M&&(H=M,M=N,N=H);var O=N-M,j=ue(O-re)<te,P=j||O<te;if(!j&&B<L&&(H=L,L=B,B=H),P?j?L+B>0^A[1]<(ue(A[0]-M)<te?L:B):L<=A[1]&&A[1]<=B:O>re^(M<=A[0]&&A[0]<=N)){var F=Ki(k,(-R+x)/$);return $f(F,E),[A,Nu(F)]}}}function s(c,l){var d=r?e:re-e,h=0;return c<-d?h|=1:c>d&&(h|=2),l<-d?h|=4:l>d&&(h|=8),h}return G0(a,f,o,r?[0,-e]:[-re,e-re])}function r3(e,t,n,r,i,o){var a=e[0],f=e[1],u=t[0],s=t[1],c=0,l=1,d=u-a,h=s-f,p;if(p=n-a,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<l&&(l=p)}else if(d>0){if(p>l)return;p>c&&(c=p)}if(p=i-a,!(!d&&p<0)){if(p/=d,d<0){if(p>l)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<l&&(l=p)}if(p=r-f,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<l&&(l=p)}else if(h>0){if(p>l)return;p>c&&(c=p)}if(p=o-f,!(!h&&p<0)){if(p/=h,h<0){if(p>l)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<l&&(l=p)}return c>0&&(e[0]=a+c*d,e[1]=f+c*h),l<1&&(t[0]=a+l*d,t[1]=f+l*h),!0}}}}}var Br=1e9,Qi=-Br;function W0(e,t,n,r){function i(s,c){return e<=s&&s<=n&&t<=c&&c<=r}function o(s,c,l,d){var h=0,p=0;if(s==null||(h=a(s,l))!==(p=a(c,l))||u(s,c)<0^l>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+l+4)%4)!==p);else d.point(c[0],c[1])}function a(s,c){return ue(s[0]-e)<te?c>0?0:3:ue(s[0]-n)<te?c>0?2:1:ue(s[1]-t)<te?c>0?1:0:c>0?3:2}function f(s,c){return u(s.x,c.x)}function u(s,c){var l=a(s,1),d=a(c,1);return l!==d?l-d:l===0?c[1]-s[1]:l===1?s[0]-c[0]:l===2?s[1]-c[1]:c[0]-s[0]}return function(s){var c=s,l=H0(),d,h,p,g,m,y,b,w,v,T,_,E={point:C,lineStart:S,lineEnd:x,polygonStart:R,polygonEnd:$};function C(M,N){i(M,N)&&c.point(M,N)}function k(){for(var M=0,N=0,L=h.length;N<L;++N)for(var B=h[N],H=1,O=B.length,j=B[0],P,F,K=j[0],Z=j[1];H<O;++H)P=K,F=Z,j=B[H],K=j[0],Z=j[1],F<=r?Z>r&&(K-P)*(r-F)>(Z-F)*(e-P)&&++M:Z<=r&&(K-P)*(r-F)<(Z-F)*(e-P)&&--M;return M}function R(){c=l,d=[],h=[],_=!0}function $(){var M=k(),N=_&&M,L=(d=e0(d)).length;(N||L)&&(s.polygonStart(),N&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),L&&Y0(d,f,M,o,s),s.polygonEnd()),c=s,d=h=p=null}function S(){E.point=A,h&&h.push(p=[]),T=!0,v=!1,b=w=NaN}function x(){d&&(A(g,m),y&&v&&l.rejoin(),d.push(l.result())),E.point=C,v&&c.lineEnd()}function A(M,N){var L=i(M,N);if(h&&p.push([M,N]),T)g=M,m=N,y=L,T=!1,L&&(c.lineStart(),c.point(M,N));else if(L&&v)c.point(M,N);else{var B=[b=Math.max(Qi,Math.min(Br,b)),w=Math.max(Qi,Math.min(Br,w))],H=[M=Math.max(Qi,Math.min(Br,M)),N=Math.max(Qi,Math.min(Br,N))];r3(B,H,e,t,n,r)?(v||(c.lineStart(),c.point(B[0],B[1])),c.point(H[0],H[1]),L||c.lineEnd(),_=!1):L&&(c.lineStart(),c.point(M,N),_=!1)}b=M,w=N,v=L}return E}}const Ru=e=>e;var Af=new Cn,Ou=new Cn,X0,V0,Pu,Fu,Ot={point:Xe,lineStart:Xe,lineEnd:Xe,polygonStart:function(){Ot.lineStart=i3,Ot.lineEnd=a3},polygonEnd:function(){Ot.lineStart=Ot.lineEnd=Ot.point=Xe,Af.add(ue(Ou)),Ou=new Cn},result:function(){var e=Af/2;return Af=new Cn,e}};function i3(){Ot.point=o3}function o3(e,t){Ot.point=K0,X0=Pu=e,V0=Fu=t}function K0(e,t){Ou.add(Fu*e-Pu*t),Pu=e,Fu=t}function a3(){K0(X0,V0)}var lr=1/0,qo=lr,ui=-lr,jo=ui,zo={point:f3,lineStart:Xe,lineEnd:Xe,polygonStart:Xe,polygonEnd:Xe,result:function(){var e=[[lr,qo],[ui,jo]];return ui=jo=-(qo=lr=1/0),e}};function f3(e,t){e<lr&&(lr=e),e>ui&&(ui=e),t<qo&&(qo=t),t>jo&&(jo=t)}var qu=0,ju=0,Ur=0,Bo=0,Uo=0,Kn=0,zu=0,Bu=0,Hr=0,Z0,Q0,gt,bt,Ye={point:Rn,lineStart:Rl,lineEnd:Ol,polygonStart:function(){Ye.lineStart=c3,Ye.lineEnd=l3},polygonEnd:function(){Ye.point=Rn,Ye.lineStart=Rl,Ye.lineEnd=Ol},result:function(){var e=Hr?[zu/Hr,Bu/Hr]:Kn?[Bo/Kn,Uo/Kn]:Ur?[qu/Ur,ju/Ur]:[NaN,NaN];return qu=ju=Ur=Bo=Uo=Kn=zu=Bu=Hr=0,e}};function Rn(e,t){qu+=e,ju+=t,++Ur}function Rl(){Ye.point=u3}function u3(e,t){Ye.point=s3,Rn(gt=e,bt=t)}function s3(e,t){var n=e-gt,r=t-bt,i=Pe(n*n+r*r);Bo+=i*(gt+e)/2,Uo+=i*(bt+t)/2,Kn+=i,Rn(gt=e,bt=t)}function Ol(){Ye.point=Rn}function c3(){Ye.point=d3}function l3(){J0(Z0,Q0)}function d3(e,t){Ye.point=J0,Rn(Z0=gt=e,Q0=bt=t)}function J0(e,t){var n=e-gt,r=t-bt,i=Pe(n*n+r*r);Bo+=i*(gt+e)/2,Uo+=i*(bt+t)/2,Kn+=i,i=bt*e-gt*t,zu+=i*(gt+e),Bu+=i*(bt+t),Hr+=i*3,Rn(gt=e,bt=t)}function ep(e){this._context=e}ep.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Be);break}}},result:Xe};var Uu=new Cn,Cf,tp,np,Yr,Gr,si={point:Xe,lineStart:function(){si.point=h3},lineEnd:function(){Cf&&rp(tp,np),si.point=Xe},polygonStart:function(){Cf=!0},polygonEnd:function(){Cf=null},result:function(){var e=+Uu;return Uu=new Cn,e}};function h3(e,t){si.point=rp,tp=Yr=e,np=Gr=t}function rp(e,t){Yr-=e,Gr-=t,Uu.add(Pe(Yr*Yr+Gr*Gr)),Yr=e,Gr=t}let Pl,Ho,Fl,ql;class jl{constructor(t){this._append=t==null?ip:p3(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Fl||this._append!==Ho){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Fl=r,Ho=this._append,ql=this._,this._=i}this._+=ql;break}}}result(){const t=this._;return this._="",t.length?t:null}}function ip(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function p3(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return ip;if(t!==Pl){const n=10**t;Pl=t,Ho=function(i){let o=1;this._+=i[0];for(const a=i.length;o<a;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return Ho}function Ma(e,t){let n=3,r=4.5,i,o;function a(f){return f&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),Sn(f,i(o))),o.result()}return a.area=function(f){return Sn(f,i(Ot)),Ot.result()},a.measure=function(f){return Sn(f,i(si)),si.result()},a.bounds=function(f){return Sn(f,i(zo)),zo.result()},a.centroid=function(f){return Sn(f,i(Ye)),Ye.result()},a.projection=function(f){return arguments.length?(i=f==null?(e=null,Ru):(e=f).stream,a):e},a.context=function(f){return arguments.length?(o=f==null?(t=null,new jl(n)):new ep(t=f),typeof r!="function"&&o.pointRadius(r),a):t},a.pointRadius=function(f){return arguments.length?(r=typeof f=="function"?f:(o.pointRadius(+f),+f),a):r},a.digits=function(f){if(!arguments.length)return n;if(f==null)n=null;else{const u=Math.floor(f);if(!(u>=0))throw new RangeError(`invalid digits: ${f}`);n=u}return t===null&&(o=new jl(n)),a},a.projection(e).digits(n).context(t)}function Hu(e){return{stream:$a(e)}}function $a(e){return function(t){var n=new Yu;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Yu(){}Yu.prototype={constructor:Yu,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function ks(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Sn(n,e.stream(zo)),t(zo.result()),r!=null&&e.clipExtent(r),e}function Ns(e,t,n){return ks(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],a=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),f=+t[0][0]+(i-a*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(o-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([f,u])},n)}function op(e,t,n){return Ns(e,[[0,0],t],n)}function ap(e,t,n){return ks(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),a=(i-o*(r[1][0]+r[0][0]))/2,f=-o*r[0][1];e.scale(150*o).translate([a,f])},n)}function fp(e,t,n){return ks(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),a=-o*r[0][0],f=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,f])},n)}var zl=16,m3=ne(30*de);function Bl(e,t){return+t?b3(e,t):g3(e)}function g3(e){return $a({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function b3(e,t){function n(r,i,o,a,f,u,s,c,l,d,h,p,g,m){var y=s-r,b=c-i,w=y*y+b*b;if(w>4*t&&g--){var v=a+d,T=f+h,_=u+p,E=Pe(v*v+T*T+_*_),C=Ze(_/=E),k=ue(ue(_)-1)<te||ue(o-l)<te?(o+l)/2:Ht(T,v),R=e(k,C),$=R[0],S=R[1],x=$-r,A=S-i,M=b*x-y*A;(M*M/w>t||ue((y*x+b*A)/w-.5)>.3||a*d+f*h+u*p<m3)&&(n(r,i,o,a,f,u,$,S,k,v/=E,T/=E,_,g,m),m.point($,S),n($,S,k,v,T,_,s,c,l,d,h,p,g,m))}}return function(r){var i,o,a,f,u,s,c,l,d,h,p,g,m={point:y,lineStart:b,lineEnd:v,polygonStart:function(){r.polygonStart(),m.lineStart=T},polygonEnd:function(){r.polygonEnd(),m.lineStart=b}};function y(C,k){C=e(C,k),r.point(C[0],C[1])}function b(){l=NaN,m.point=w,r.lineStart()}function w(C,k){var R=cr([C,k]),$=e(C,k);n(l,d,c,h,p,g,l=$[0],d=$[1],c=C,h=R[0],p=R[1],g=R[2],zl,r),r.point(l,d)}function v(){m.point=y,r.lineEnd()}function T(){b(),m.point=_,m.lineEnd=E}function _(C,k){w(i=C,k),o=l,a=d,f=h,u=p,s=g,m.point=w}function E(){n(l,d,c,h,p,g,o,a,i,f,u,s,zl,r),m.lineEnd=v,v()}return m}}var y3=$a({point:function(e,t){this.stream.point(e*de,t*de)}});function v3(e){return $a({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function w3(e,t,n,r,i){function o(a,f){return a*=r,f*=i,[t+e*a,n-e*f]}return o.invert=function(a,f){return[(a-t)/e*r,(n-f)/e*i]},o}function Ul(e,t,n,r,i,o){if(!o)return w3(e,t,n,r,i);var a=ne(o),f=J(o),u=a*e,s=f*e,c=a/e,l=f/e,d=(f*n-a*t)/e,h=(f*t+a*n)/e;function p(g,m){return g*=r,m*=i,[u*g-s*m+t,n-s*g-u*m]}return p.invert=function(g,m){return[r*(c*g-l*m+d),i*(h-l*g-c*m)]},p}function hn(e){return up(function(){return e})()}function up(e){var t,n=150,r=480,i=250,o=0,a=0,f=0,u=0,s=0,c,l=0,d=1,h=1,p=null,g=Il,m=null,y,b,w,v=Ru,T=.5,_,E,C,k,R;function $(M){return C(M[0]*de,M[1]*de)}function S(M){return M=C.invert(M[0],M[1]),M&&[M[0]*Ne,M[1]*Ne]}$.stream=function(M){return k&&R===M?k:k=y3(v3(c)(g(_(v(R=M)))))},$.preclip=function(M){return arguments.length?(g=M,p=void 0,A()):g},$.postclip=function(M){return arguments.length?(v=M,m=y=b=w=null,A()):v},$.clipAngle=function(M){return arguments.length?(g=+M?n3(p=M*de):(p=null,Il),A()):p*Ne},$.clipExtent=function(M){return arguments.length?(v=M==null?(m=y=b=w=null,Ru):W0(m=+M[0][0],y=+M[0][1],b=+M[1][0],w=+M[1][1]),A()):m==null?null:[[m,y],[b,w]]},$.scale=function(M){return arguments.length?(n=+M,x()):n},$.translate=function(M){return arguments.length?(r=+M[0],i=+M[1],x()):[r,i]},$.center=function(M){return arguments.length?(o=M[0]%360*de,a=M[1]%360*de,x()):[o*Ne,a*Ne]},$.rotate=function(M){return arguments.length?(f=M[0]%360*de,u=M[1]%360*de,s=M.length>2?M[2]%360*de:0,x()):[f*Ne,u*Ne,s*Ne]},$.angle=function(M){return arguments.length?(l=M%360*de,x()):l*Ne},$.reflectX=function(M){return arguments.length?(d=M?-1:1,x()):d<0},$.reflectY=function(M){return arguments.length?(h=M?-1:1,x()):h<0},$.precision=function(M){return arguments.length?(_=Bl(E,T=M*M),A()):Pe(T)},$.fitExtent=function(M,N){return Ns($,M,N)},$.fitSize=function(M,N){return op($,M,N)},$.fitWidth=function(M,N){return ap($,M,N)},$.fitHeight=function(M,N){return fp($,M,N)};function x(){var M=Ul(n,0,0,d,h,l).apply(null,t(o,a)),N=Ul(n,r-M[0],i-M[1],d,h,l);return c=U0(f,u,s),E=Du(t,N),C=Du(c,E),_=Bl(E,T),A()}function A(){return k=R=null,$}return function(){return t=e.apply(this,arguments),$.invert=t.invert&&S,x()}}function Ls(e){var t=0,n=re/3,r=up(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*de,n=o[1]*de):[t*Ne,n*Ne]},i}function _3(e){var t=ne(e);function n(r,i){return[r*t,J(i)/t]}return n.invert=function(r,i){return[r/t,Ze(i*t)]},n}function x3(e,t){var n=J(e),r=(n+J(t))/2;if(ue(r)<te)return _3(e);var i=1+n*(2*r-n),o=Pe(i)/r;function a(f,u){var s=Pe(i-2*r*J(u))/r;return[s*J(f*=r),o-s*ne(f)]}return a.invert=function(f,u){var s=o-u,c=Ht(f,ue(s))*We(s);return s*r<0&&(c-=re*We(f)*We(s)),[c/r,Ze((i-(f*f+s*s)*r*r)/(2*r))]},a}function Yo(){return Ls(x3).scale(155.424).center([0,33.6442])}function sp(){return Yo().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function T3(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function S3(){var e,t,n=sp(),r,i=Yo().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=Yo().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f,u,s={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(o.point(h,p),u)||(f.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),g=(d[0]-p[0])/h,m=(d[1]-p[1])/h;return(m>=.12&&m<.234&&g>=-.425&&g<-.214?i:m>=.166&&m<.234&&g>=-.214&&g<-.115?a:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=T3([n.stream(t=d),i.stream(d),a.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),a.precision(d),l()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),a.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],g=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,g-.238*h],[p+.455*h,g+.238*h]]).stream(s),o=i.translate([p-.307*h,g+.201*h]).clipExtent([[p-.425*h+te,g+.12*h+te],[p-.214*h-te,g+.234*h-te]]).stream(s),f=a.translate([p-.205*h,g+.212*h]).clipExtent([[p-.214*h+te,g+.166*h+te],[p-.115*h-te,g+.234*h-te]]).stream(s),l()},c.fitExtent=function(d,h){return Ns(c,d,h)},c.fitSize=function(d,h){return op(c,d,h)},c.fitWidth=function(d,h){return ap(c,d,h)},c.fitHeight=function(d,h){return fp(c,d,h)};function l(){return e=t=null,c}return c.scale(1070)}function cp(e){return function(t,n){var r=ne(t),i=ne(n),o=e(r*i);return o===1/0?[2,0]:[o*i*J(t),o*J(n)]}}function Ti(e){return function(t,n){var r=Pe(t*t+n*n),i=e(r),o=J(i),a=ne(i);return[Ht(t*o,r*a),Ze(r&&n*o/r)]}}var lp=cp(function(e){return Pe(2/(1+e))});lp.invert=Ti(function(e){return 2*Ze(e/2)});function M3(){return hn(lp).scale(124.75).clipAngle(180-.001)}var dp=cp(function(e){return(e=B0(e))&&e/J(e)});dp.invert=Ti(function(e){return e});function $3(){return hn(dp).scale(79.4188).clipAngle(180-.001)}function Ea(e,t){return[e,Oo(Cs((he+t)/2))]}Ea.invert=function(e,t){return[e,2*Sr(z0(t))-he]};function E3(){return hp(Ea).scale(961/Be)}function hp(e){var t=hn(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,a=null,f,u,s;t.scale=function(l){return arguments.length?(r(l),c()):r()},t.translate=function(l){return arguments.length?(i(l),c()):i()},t.center=function(l){return arguments.length?(n(l),c()):n()},t.clipExtent=function(l){return arguments.length?(l==null?a=f=u=s=null:(a=+l[0][0],f=+l[0][1],u=+l[1][0],s=+l[1][1]),c()):a==null?null:[[a,f],[u,s]]};function c(){var l=re*r(),d=t(X6(t.rotate()).invert([0,0]));return o(a==null?[[d[0]-l,d[1]-l],[d[0]+l,d[1]+l]]:e===Ea?[[Math.max(d[0]-l,a),f],[Math.min(d[0]+l,u),s]]:[[a,Math.max(d[1]-l,f)],[u,Math.min(d[1]+l,s)]])}return c()}function Ji(e){return Cs((he+e)/2)}function A3(e,t){var n=ne(e),r=e===t?J(e):Oo(n/ne(t))/Oo(Ji(t)/Ji(e)),i=n*Mf(Ji(e),r)/r;if(!r)return Ea;function o(a,f){i>0?f<-he+te&&(f=-he+te):f>he-te&&(f=he-te);var u=i/Mf(Ji(f),r);return[u*J(r*a),i-u*ne(r*a)]}return o.invert=function(a,f){var u=i-f,s=We(r)*Pe(a*a+u*u),c=Ht(a,ue(u))*We(u);return u*r<0&&(c-=re*We(a)*We(u)),[c/r,2*Sr(Mf(i/s,1/r))-he]},o}function C3(){return Ls(A3).scale(109.5).parallels([30,30])}function Go(e,t){return[e,t]}Go.invert=Go;function k3(){return hn(Go).scale(152.63)}function N3(e,t){var n=ne(e),r=e===t?J(e):(n-ne(t))/(t-e),i=n/r+e;if(ue(r)<te)return Go;function o(a,f){var u=i-f,s=r*a;return[u*J(s),i-u*ne(s)]}return o.invert=function(a,f){var u=i-f,s=Ht(a,ue(u))*We(u);return u*r<0&&(s-=re*We(a)*We(u)),[s/r,i-We(r)*Pe(a*a+u*u)]},o}function L3(){return Ls(N3).scale(131.154).center([0,13.9389])}var Zr=1.340264,Qr=-.081106,Jr=893e-6,ei=.003796,Wo=Pe(3)/2,D3=12;function pp(e,t){var n=Ze(Wo*J(t)),r=n*n,i=r*r*r;return[e*ne(n)/(Wo*(Zr+3*Qr*r+i*(7*Jr+9*ei*r))),n*(Zr+Qr*r+i*(Jr+ei*r))]}pp.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,a,f,u;o<D3&&(f=n*(Zr+Qr*r+i*(Jr+ei*r))-t,u=Zr+3*Qr*r+i*(7*Jr+9*ei*r),n-=a=f/u,r=n*n,i=r*r*r,!(ue(a)<j0));++o);return[Wo*e*(Zr+3*Qr*r+i*(7*Jr+9*ei*r))/ne(n),Ze(J(n)/Wo)]};function I3(){return hn(pp).scale(177.158)}function mp(e,t){var n=ne(t),r=ne(e)*n;return[n*J(e)/r,J(t)/r]}mp.invert=Ti(Sr);function R3(){return hn(mp).scale(144.049).clipAngle(60)}function gp(e,t){return[ne(t)*J(e),J(t)]}gp.invert=Ti(Ze);function O3(){return hn(gp).scale(249.5).clipAngle(90+te)}function bp(e,t){var n=ne(t),r=1+ne(e)*n;return[n*J(e)/r,J(t)/r]}bp.invert=Ti(function(e){return 2*Sr(e)});function P3(){return hn(bp).scale(250).clipAngle(142)}function yp(e,t){return[Oo(Cs((he+t)/2)),-e]}yp.invert=function(e,t){return[-t,2*Sr(z0(e))-he]};function F3(){var e=hp(yp),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function Et(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Aa(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Gu=Symbol("implicit");function Ds(){var e=new kn,t=[],n=[],r=Gu;function i(o){let a=e.get(o);if(a===void 0){if(r!==Gu)return r;e.set(o,a=t.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new kn;for(const a of o)e.has(a)||e.set(a,t.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Ds(t,n).unknown(r)},Et.apply(i,arguments),i}function Ca(){var e=Ds().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,o,a,f=!1,u=0,s=0,c=.5;delete e.unknown;function l(){var d=t().length,h=i<r,p=h?i:r,g=h?r:i;o=(g-p)/Math.max(1,d-u+s*2),f&&(o=Math.floor(o)),p+=(g-p-o*(d-u))*c,a=o*(1-u),f&&(p=Math.round(p),a=Math.round(a));var m=bu(d).map(function(y){return p+o*y});return n(h?m.reverse():m)}return e.domain=function(d){return arguments.length?(t(d),l()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,l()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,f=!0,l()},e.bandwidth=function(){return a},e.step=function(){return o},e.round=function(d){return arguments.length?(f=!!d,l()):f},e.padding=function(d){return arguments.length?(u=Math.min(1,s=+d),l()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),l()):u},e.paddingOuter=function(d){return arguments.length?(s=+d,l()):s},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),l()):c},e.copy=function(){return Ca(t(),[r,i]).round(f).paddingInner(u).paddingOuter(s).align(c)},Et.apply(l(),arguments)}function vp(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return vp(t())},e}function q3(){return vp(Ca.apply(null,arguments).paddingInner(1))}function j3(e){return function(){return e}}function Wu(e){return+e}var Hl=[0,1];function Ve(e){return e}function Xu(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:j3(isNaN(t)?NaN:.5)}function z3(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function B3(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=Xu(i,r),o=n(a,o)):(r=Xu(r,i),o=n(o,a)),function(f){return o(r(f))}}function U3(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=Xu(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(f){var u=ma(e,f,1,r)-1;return o[u](i[u](f))}}function Si(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function ka(){var e=Hl,t=Hl,n=xi,r,i,o,a=Ve,f,u,s;function c(){var d=Math.min(e.length,t.length);return a!==Ve&&(a=z3(e[0],e[d-1])),f=d>2?U3:B3,u=s=null,l}function l(d){return d==null||isNaN(d=+d)?o:(u||(u=f(e.map(r),t,n)))(r(a(d)))}return l.invert=function(d){return a(i((s||(s=f(t,e.map(r),$e)))(d)))},l.domain=function(d){return arguments.length?(e=Array.from(d,Wu),c()):e.slice()},l.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},l.rangeRound=function(d){return t=Array.from(d),n=Ts,c()},l.clamp=function(d){return arguments.length?(a=d?!0:Ve,c()):a!==Ve},l.interpolate=function(d){return arguments.length?(n=d,c()):n},l.unknown=function(d){return arguments.length?(o=d,l):o},function(d,h){return r=d,i=h,c()}}function wp(){return ka()(Ve,Ve)}function H3(e,t,n,r){var i=mu(e,t,n),o;switch(r=fi(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=G6(i,a))&&(r.precision=o),q0(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=W6(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=Y6(i))&&(r.precision=o-(r.type==="%")*2);break}}return Tr(r)}function Mi(e){var t=e.domain;return e.ticks=function(n){var r=t();return ri(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return H3(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,a=r[i],f=r[o],u,s,c=10;for(f<a&&(s=a,a=f,f=s,s=i,i=o,o=s);c-- >0;){if(s=Eo(a,f,n),s===u)return r[i]=a,r[o]=f,t(r);if(s>0)a=Math.floor(a/s)*s,f=Math.ceil(f/s)*s;else if(s<0)a=Math.ceil(a*s)/s,f=Math.floor(f*s)/s;else break;u=s}return e},e}function Is(){var e=wp();return e.copy=function(){return Si(e,Is())},Et.apply(e,arguments),Mi(e)}function _p(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Wu),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return _p(e).unknown(t)},e=arguments.length?Array.from(e,Wu):[0,1],Mi(n)}function xp(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),e[n]=t.floor(i),e[r]=t.ceil(o),e}function Yl(e){return Math.log(e)}function Gl(e){return Math.exp(e)}function Y3(e){return-Math.log(-e)}function G3(e){return-Math.exp(-e)}function W3(e){return isFinite(e)?+("1e"+e):e<0?0:e}function X3(e){return e===10?W3:e===Math.E?Math.exp:t=>Math.pow(e,t)}function V3(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Wl(e){return(t,n)=>-e(-t,n)}function Tp(e){const t=e(Yl,Gl),n=t.domain;let r=10,i,o;function a(){return i=V3(r),o=X3(r),n()[0]<0?(i=Wl(i),o=Wl(o),e(Y3,G3)):e(Yl,Gl),t}return t.base=function(f){return arguments.length?(r=+f,a()):r},t.domain=function(f){return arguments.length?(n(f),a()):n()},t.ticks=f=>{const u=n();let s=u[0],c=u[u.length-1];const l=c<s;l&&([s,c]=[c,s]);let d=i(s),h=i(c),p,g;const m=f==null?10:+f;let y=[];if(!(r%1)&&h-d<m){if(d=Math.floor(d),h=Math.ceil(h),s>0){for(;d<=h;++d)for(p=1;p<r;++p)if(g=d<0?p/o(-d):p*o(d),!(g<s)){if(g>c)break;y.push(g)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(g=d>0?p/o(-d):p*o(d),!(g<s)){if(g>c)break;y.push(g)}y.length*2<m&&(y=ri(s,c,m))}else y=ri(d,h,Math.min(h-d,m)).map(o);return l?y.reverse():y},t.tickFormat=(f,u)=>{if(f==null&&(f=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=fi(u)).precision==null&&(u.trim=!0),u=Tr(u)),f===1/0)return u;const s=Math.max(1,r*f/t.ticks().length);return c=>{let l=c/o(Math.round(i(c)));return l*r<r-.5&&(l*=r),l<=s?u(c):""}},t.nice=()=>n(xp(n(),{floor:f=>o(Math.floor(i(f))),ceil:f=>o(Math.ceil(i(f)))})),t}function Sp(){const e=Tp(ka()).domain([1,10]);return e.copy=()=>Si(e,Sp()).base(e.base()),Et.apply(e,arguments),e}function Xl(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Vl(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Mp(e){var t=1,n=e(Xl(t),Vl(t));return n.constant=function(r){return arguments.length?e(Xl(t=+r),Vl(t)):t},Mi(n)}function $p(){var e=Mp(ka());return e.copy=function(){return Si(e,$p()).constant(e.constant())},Et.apply(e,arguments)}function Kl(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function K3(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Z3(e){return e<0?-e*e:e*e}function Ep(e){var t=e(Ve,Ve),n=1;function r(){return n===1?e(Ve,Ve):n===.5?e(K3,Z3):e(Kl(n),Kl(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Mi(t)}function Ap(){var e=Ep(ka());return e.copy=function(){return Si(e,Ap()).exponent(e.exponent())},Et.apply(e,arguments),e}function Cp(){var e=[],t=[],n=[],r;function i(){var a=0,f=Math.max(1,t.length);for(n=new Array(f-1);++a<f;)n[a-1]=H2(e,a/f);return o}function o(a){return a==null||isNaN(a=+a)?r:t[ma(n,a)]}return o.invertExtent=function(a){var f=t.indexOf(a);return f<0?[NaN,NaN]:[f>0?n[f-1]:e[0],f<n.length?n[f]:e[e.length-1]]},o.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let f of a)f!=null&&!isNaN(f=+f)&&e.push(f);return e.sort(Oe),i()},o.range=function(a){return arguments.length?(t=Array.from(a),i()):t.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return Cp().domain(e).range(t).unknown(r)},Et.apply(o,arguments)}function kp(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[ma(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var a=t.indexOf(o);return[e[a-1],e[a]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return kp().domain(e).range(t).unknown(n)},Et.apply(i,arguments)}const kf=new Date,Nf=new Date;function ge(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const a=i(o),f=i.ceil(o);return o-a<f-o?a:f},i.offset=(o,a)=>(t(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,f)=>{const u=[];if(o=i.ceil(o),f=f==null?1:Math.floor(f),!(o<a)||!(f>0))return u;let s;do u.push(s=new Date(+o)),t(o,f),e(o);while(s<o&&o<a);return u},i.filter=o=>ge(a=>{if(a>=a)for(;e(a),!o(a);)a.setTime(a-1)},(a,f)=>{if(a>=a)if(f<0)for(;++f<=0;)for(;t(a,-1),!o(a););else for(;--f>=0;)for(;t(a,1),!o(a););}),n&&(i.count=(o,a)=>(kf.setTime(+o),Nf.setTime(+a),e(kf),e(Nf),Math.floor(n(kf,Nf))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const Xo=ge(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Xo.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ge(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Xo);Xo.range;const Ft=1e3,Ke=Ft*60,qt=Ke*60,Yt=qt*24,Rs=Yt*7,Zl=Yt*30,Lf=Yt*365,nt=ge(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ft)},(e,t)=>(t-e)/Ft,e=>e.getUTCSeconds());nt.range;const $i=ge(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ft)},(e,t)=>{e.setTime(+e+t*Ke)},(e,t)=>(t-e)/Ke,e=>e.getMinutes());$i.range;const Ei=ge(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ke)},(e,t)=>(t-e)/Ke,e=>e.getUTCMinutes());Ei.range;const Ai=ge(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ft-e.getMinutes()*Ke)},(e,t)=>{e.setTime(+e+t*qt)},(e,t)=>(t-e)/qt,e=>e.getHours());Ai.range;const Ci=ge(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*qt)},(e,t)=>(t-e)/qt,e=>e.getUTCHours());Ci.range;const qn=ge(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ke)/Yt,e=>e.getDate()-1);qn.range;const Na=ge(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Yt,e=>e.getUTCDate()-1);Na.range;const La=ge(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Yt,e=>Math.floor(e/Yt));La.range;function jn(e){return ge(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Ke)/Rs)}const dr=jn(0),ci=jn(1),Np=jn(2),Lp=jn(3),On=jn(4),Dp=jn(5),Ip=jn(6);dr.range;ci.range;Np.range;Lp.range;On.range;Dp.range;Ip.range;function zn(e){return ge(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Rs)}const hr=zn(0),li=zn(1),Rp=zn(2),Op=zn(3),Pn=zn(4),Pp=zn(5),Fp=zn(6);hr.range;li.range;Rp.range;Op.range;Pn.range;Pp.range;Fp.range;const ki=ge(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());ki.range;const Ni=ge(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Ni.range;const at=ge(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());at.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ge(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});at.range;const ft=ge(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ft.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ge(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});ft.range;function qp(e,t,n,r,i,o){const a=[[nt,1,Ft],[nt,5,5*Ft],[nt,15,15*Ft],[nt,30,30*Ft],[o,1,Ke],[o,5,5*Ke],[o,15,15*Ke],[o,30,30*Ke],[i,1,qt],[i,3,3*qt],[i,6,6*qt],[i,12,12*qt],[r,1,Yt],[r,2,2*Yt],[n,1,Rs],[t,1,Zl],[t,3,3*Zl],[e,1,Lf]];function f(s,c,l){const d=c<s;d&&([s,c]=[c,s]);const h=l&&typeof l.range=="function"?l:u(s,c,l),p=h?h.range(s,+c+1):[];return d?p.reverse():p}function u(s,c,l){const d=Math.abs(c-s)/l,h=pa(([,,m])=>m).right(a,d);if(h===a.length)return e.every(mu(s/Lf,c/Lf,l));if(h===0)return Xo.every(Math.max(mu(s,c,l),1));const[p,g]=a[d/a[h-1][2]<a[h][2]/d?h-1:h];return p.every(g)}return[f,u]}const[Q3,jp]=qp(ft,Ni,hr,La,Ci,Ei),[J3,e5]=qp(at,ki,dr,qn,Ai,$i);function Df(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function If(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Nr(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function t5(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,f=e.months,u=e.shortMonths,s=Lr(i),c=Dr(i),l=Lr(o),d=Dr(o),h=Lr(a),p=Dr(a),g=Lr(f),m=Dr(f),y=Lr(u),b=Dr(u),w={a:L,A:B,b:H,B:O,c:null,d:rd,e:rd,f:S5,g:I5,G:O5,H:_5,I:x5,j:T5,L:zp,m:M5,M:$5,p:j,q:P,Q:ad,s:fd,S:E5,u:A5,U:C5,V:k5,w:N5,W:L5,x:null,X:null,y:D5,Y:R5,Z:P5,"%":od},v={a:F,A:K,b:Z,B:W,c:null,d:id,e:id,f:z5,g:Z5,G:J5,H:F5,I:q5,j:j5,L:Up,m:B5,M:U5,p:Y,q:z,Q:ad,s:fd,S:H5,u:Y5,U:G5,V:W5,w:X5,W:V5,x:null,X:null,y:K5,Y:Q5,Z:e8,"%":od},T={a:R,A:$,b:S,B:x,c:A,d:td,e:td,f:b5,g:ed,G:Jl,H:nd,I:nd,j:h5,L:g5,m:d5,M:p5,p:k,q:l5,Q:v5,s:w5,S:m5,u:a5,U:f5,V:u5,w:o5,W:s5,x:M,X:N,y:ed,Y:Jl,Z:c5,"%":y5};w.x=_(n,w),w.X=_(r,w),w.c=_(t,w),v.x=_(n,v),v.X=_(r,v),v.c=_(t,v);function _(D,U){return function(G){var I=[],ie=-1,V=0,oe=D.length,ae,ce,lt;for(G instanceof Date||(G=new Date(+G));++ie<oe;)D.charCodeAt(ie)===37&&(I.push(D.slice(V,ie)),(ce=Ql[ae=D.charAt(++ie)])!=null?ae=D.charAt(++ie):ce=ae==="e"?" ":"0",(lt=U[ae])&&(ae=lt(G,ce)),I.push(ae),V=ie+1);return I.push(D.slice(V,ie)),I.join("")}}function E(D,U){return function(G){var I=Nr(1900,void 0,1),ie=C(I,D,G+="",0),V,oe;if(ie!=G.length)return null;if("Q"in I)return new Date(I.Q);if("s"in I)return new Date(I.s*1e3+("L"in I?I.L:0));if(U&&!("Z"in I)&&(I.Z=0),"p"in I&&(I.H=I.H%12+I.p*12),I.m===void 0&&(I.m="q"in I?I.q:0),"V"in I){if(I.V<1||I.V>53)return null;"w"in I||(I.w=1),"Z"in I?(V=If(Nr(I.y,0,1)),oe=V.getUTCDay(),V=oe>4||oe===0?li.ceil(V):li(V),V=Na.offset(V,(I.V-1)*7),I.y=V.getUTCFullYear(),I.m=V.getUTCMonth(),I.d=V.getUTCDate()+(I.w+6)%7):(V=Df(Nr(I.y,0,1)),oe=V.getDay(),V=oe>4||oe===0?ci.ceil(V):ci(V),V=qn.offset(V,(I.V-1)*7),I.y=V.getFullYear(),I.m=V.getMonth(),I.d=V.getDate()+(I.w+6)%7)}else("W"in I||"U"in I)&&("w"in I||(I.w="u"in I?I.u%7:"W"in I?1:0),oe="Z"in I?If(Nr(I.y,0,1)).getUTCDay():Df(Nr(I.y,0,1)).getDay(),I.m=0,I.d="W"in I?(I.w+6)%7+I.W*7-(oe+5)%7:I.w+I.U*7-(oe+6)%7);return"Z"in I?(I.H+=I.Z/100|0,I.M+=I.Z%100,If(I)):Df(I)}}function C(D,U,G,I){for(var ie=0,V=U.length,oe=G.length,ae,ce;ie<V;){if(I>=oe)return-1;if(ae=U.charCodeAt(ie++),ae===37){if(ae=U.charAt(ie++),ce=T[ae in Ql?U.charAt(ie++):ae],!ce||(I=ce(D,G,I))<0)return-1}else if(ae!=G.charCodeAt(I++))return-1}return I}function k(D,U,G){var I=s.exec(U.slice(G));return I?(D.p=c.get(I[0].toLowerCase()),G+I[0].length):-1}function R(D,U,G){var I=h.exec(U.slice(G));return I?(D.w=p.get(I[0].toLowerCase()),G+I[0].length):-1}function $(D,U,G){var I=l.exec(U.slice(G));return I?(D.w=d.get(I[0].toLowerCase()),G+I[0].length):-1}function S(D,U,G){var I=y.exec(U.slice(G));return I?(D.m=b.get(I[0].toLowerCase()),G+I[0].length):-1}function x(D,U,G){var I=g.exec(U.slice(G));return I?(D.m=m.get(I[0].toLowerCase()),G+I[0].length):-1}function A(D,U,G){return C(D,t,U,G)}function M(D,U,G){return C(D,n,U,G)}function N(D,U,G){return C(D,r,U,G)}function L(D){return a[D.getDay()]}function B(D){return o[D.getDay()]}function H(D){return u[D.getMonth()]}function O(D){return f[D.getMonth()]}function j(D){return i[+(D.getHours()>=12)]}function P(D){return 1+~~(D.getMonth()/3)}function F(D){return a[D.getUTCDay()]}function K(D){return o[D.getUTCDay()]}function Z(D){return u[D.getUTCMonth()]}function W(D){return f[D.getUTCMonth()]}function Y(D){return i[+(D.getUTCHours()>=12)]}function z(D){return 1+~~(D.getUTCMonth()/3)}return{format:function(D){var U=_(D+="",w);return U.toString=function(){return D},U},parse:function(D){var U=E(D+="",!1);return U.toString=function(){return D},U},utcFormat:function(D){var U=_(D+="",v);return U.toString=function(){return D},U},utcParse:function(D){var U=E(D+="",!0);return U.toString=function(){return D},U}}}var Ql={"-":"",_:" ",0:"0"},_e=/^\s*\d+/,n5=/^%/,r5=/[\\^$*+?|[\]().{}]/g;function fe(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function i5(e){return e.replace(r5,"\\$&")}function Lr(e){return new RegExp("^(?:"+e.map(i5).join("|")+")","i")}function Dr(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function o5(e,t,n){var r=_e.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function a5(e,t,n){var r=_e.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function f5(e,t,n){var r=_e.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function u5(e,t,n){var r=_e.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function s5(e,t,n){var r=_e.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Jl(e,t,n){var r=_e.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function ed(e,t,n){var r=_e.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function c5(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function l5(e,t,n){var r=_e.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function d5(e,t,n){var r=_e.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function td(e,t,n){var r=_e.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function h5(e,t,n){var r=_e.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function nd(e,t,n){var r=_e.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function p5(e,t,n){var r=_e.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function m5(e,t,n){var r=_e.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function g5(e,t,n){var r=_e.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function b5(e,t,n){var r=_e.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function y5(e,t,n){var r=n5.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function v5(e,t,n){var r=_e.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function w5(e,t,n){var r=_e.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function rd(e,t){return fe(e.getDate(),t,2)}function _5(e,t){return fe(e.getHours(),t,2)}function x5(e,t){return fe(e.getHours()%12||12,t,2)}function T5(e,t){return fe(1+qn.count(at(e),e),t,3)}function zp(e,t){return fe(e.getMilliseconds(),t,3)}function S5(e,t){return zp(e,t)+"000"}function M5(e,t){return fe(e.getMonth()+1,t,2)}function $5(e,t){return fe(e.getMinutes(),t,2)}function E5(e,t){return fe(e.getSeconds(),t,2)}function A5(e){var t=e.getDay();return t===0?7:t}function C5(e,t){return fe(dr.count(at(e)-1,e),t,2)}function Bp(e){var t=e.getDay();return t>=4||t===0?On(e):On.ceil(e)}function k5(e,t){return e=Bp(e),fe(On.count(at(e),e)+(at(e).getDay()===4),t,2)}function N5(e){return e.getDay()}function L5(e,t){return fe(ci.count(at(e)-1,e),t,2)}function D5(e,t){return fe(e.getFullYear()%100,t,2)}function I5(e,t){return e=Bp(e),fe(e.getFullYear()%100,t,2)}function R5(e,t){return fe(e.getFullYear()%1e4,t,4)}function O5(e,t){var n=e.getDay();return e=n>=4||n===0?On(e):On.ceil(e),fe(e.getFullYear()%1e4,t,4)}function P5(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+fe(t/60|0,"0",2)+fe(t%60,"0",2)}function id(e,t){return fe(e.getUTCDate(),t,2)}function F5(e,t){return fe(e.getUTCHours(),t,2)}function q5(e,t){return fe(e.getUTCHours()%12||12,t,2)}function j5(e,t){return fe(1+Na.count(ft(e),e),t,3)}function Up(e,t){return fe(e.getUTCMilliseconds(),t,3)}function z5(e,t){return Up(e,t)+"000"}function B5(e,t){return fe(e.getUTCMonth()+1,t,2)}function U5(e,t){return fe(e.getUTCMinutes(),t,2)}function H5(e,t){return fe(e.getUTCSeconds(),t,2)}function Y5(e){var t=e.getUTCDay();return t===0?7:t}function G5(e,t){return fe(hr.count(ft(e)-1,e),t,2)}function Hp(e){var t=e.getUTCDay();return t>=4||t===0?Pn(e):Pn.ceil(e)}function W5(e,t){return e=Hp(e),fe(Pn.count(ft(e),e)+(ft(e).getUTCDay()===4),t,2)}function X5(e){return e.getUTCDay()}function V5(e,t){return fe(li.count(ft(e)-1,e),t,2)}function K5(e,t){return fe(e.getUTCFullYear()%100,t,2)}function Z5(e,t){return e=Hp(e),fe(e.getUTCFullYear()%100,t,2)}function Q5(e,t){return fe(e.getUTCFullYear()%1e4,t,4)}function J5(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Pn(e):Pn.ceil(e),fe(e.getUTCFullYear()%1e4,t,4)}function e8(){return"+0000"}function od(){return"%"}function ad(e){return+e}function fd(e){return Math.floor(+e/1e3)}var Gn,Os,Li;t8({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function t8(e){return Gn=t5(e),Os=Gn.format,Gn.parse,Li=Gn.utcFormat,Gn.utcParse,Gn}function n8(e){return new Date(e)}function r8(e){return e instanceof Date?+e:+new Date(+e)}function Ps(e,t,n,r,i,o,a,f,u,s){var c=wp(),l=c.invert,d=c.domain,h=s(".%L"),p=s(":%S"),g=s("%I:%M"),m=s("%I %p"),y=s("%a %d"),b=s("%b %d"),w=s("%B"),v=s("%Y");function T(_){return(u(_)<_?h:f(_)<_?p:a(_)<_?g:o(_)<_?m:r(_)<_?i(_)<_?y:b:n(_)<_?w:v)(_)}return c.invert=function(_){return new Date(l(_))},c.domain=function(_){return arguments.length?d(Array.from(_,r8)):d().map(n8)},c.ticks=function(_){var E=d();return e(E[0],E[E.length-1],_??10)},c.tickFormat=function(_,E){return E==null?T:s(E)},c.nice=function(_){var E=d();return(!_||typeof _.range!="function")&&(_=t(E[0],E[E.length-1],_??10)),_?d(xp(E,_)):c},c.copy=function(){return Si(c,Ps(e,t,n,r,i,o,a,f,u,s))},c}function i8(){return Et.apply(Ps(J3,e5,at,ki,dr,qn,Ai,$i,nt,Os).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function o8(){return Et.apply(Ps(Q3,jp,ft,Ni,hr,Na,Ci,Ei,nt,Li).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Da(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Ia(){var e=0,t=.5,n=1,r=1,i,o,a,f,u,s=Ve,c,l=!1,d;function h(g){return isNaN(g=+g)?d:(g=.5+((g=+c(g))-o)*(r*g<r*o?f:u),s(l?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([e,t,n]=g,i=c(e=+e),o=c(t=+t),a=c(n=+n),f=i===o?0:.5/(o-i),u=o===a?0:.5/(a-o),r=o<i?-1:1,h):[e,t,n]},h.clamp=function(g){return arguments.length?(l=!!g,h):l},h.interpolator=function(g){return arguments.length?(s=g,h):s};function p(g){return function(m){var y,b,w;return arguments.length?([y,b,w]=m,s=xa(g,[y,b,w]),h):[s(0),s(.5),s(1)]}}return h.range=p(xi),h.rangeRound=p(Ts),h.unknown=function(g){return arguments.length?(d=g,h):d},function(g){return c=g,i=g(e),o=g(t),a=g(n),f=i===o?0:.5/(o-i),u=o===a?0:.5/(a-o),r=o<i?-1:1,h}}function Yp(){var e=Mi(Ia()(Ve));return e.copy=function(){return Da(e,Yp())},Aa.apply(e,arguments)}function Gp(){var e=Tp(Ia()).domain([.1,1,10]);return e.copy=function(){return Da(e,Gp()).base(e.base())},Aa.apply(e,arguments)}function Wp(){var e=Mp(Ia());return e.copy=function(){return Da(e,Wp()).constant(e.constant())},Aa.apply(e,arguments)}function Xp(){var e=Ep(Ia());return e.copy=function(){return Da(e,Xp()).exponent(e.exponent())},Aa.apply(e,arguments)}function ee(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const a8=ee("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),f8=ee("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),u8=ee("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),s8=ee("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),c8=ee("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),l8=ee("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),d8=ee("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),h8=ee("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),p8=ee("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),m8=ee("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),g8=ee("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),se=e=>a_(e[e.length-1]);var Vp=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(ee);const Kp=se(Vp);var Zp=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(ee);const Qp=se(Zp);var Jp=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(ee);const em=se(Jp);var tm=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(ee);const nm=se(tm);var Vu=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(ee);const Vo=se(Vu);var rm=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(ee);const im=se(rm);var Ku=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(ee);const Ko=se(Ku);var om=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(ee);const am=se(om);var fm=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(ee);const um=se(fm);var sm=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(ee);const cm=se(sm);var lm=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(ee);const dm=se(lm);var hm=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(ee);const pm=se(hm);var mm=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(ee);const gm=se(mm);var bm=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(ee);const ym=se(bm);var vm=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(ee);const wm=se(vm);var _m=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(ee);const xm=se(_m);var Tm=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(ee);const Sm=se(Tm);var Mm=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(ee);const $m=se(Mm);var Em=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(ee);const Am=se(Em);var Cm=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(ee);const km=se(Cm);var Nm=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(ee);const Lm=se(Nm);var Dm=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(ee);const Im=se(Dm);var Rm=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(ee);const Om=se(Rm);var Pm=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(ee);const Fm=se(Pm);var qm=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(ee);const jm=se(qm);var zm=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(ee);const Bm=se(zm);var Um=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(ee);const Hm=se(Um);function Ym(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}const Gm=Ss(Tt(300,.5,0),Tt(-240,.5,1));var Wm=Ss(Tt(-100,.75,.35),Tt(80,1.5,.8)),Xm=Ss(Tt(260,.75,.35),Tt(80,1.5,.8)),eo=Tt();function Vm(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return eo.h=360*e-100,eo.s=1.5-1.5*t,eo.l=.8-.9*t,eo+""}var to=un(),b8=Math.PI/3,y8=Math.PI*2/3;function Km(e){var t;return e=(.5-e)*Math.PI,to.r=255*(t=Math.sin(e))*t,to.g=255*(t=Math.sin(e+b8))*t,to.b=255*(t=Math.sin(e+y8))*t,to+""}function Zm(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function Ra(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const Qm=Ra(ee("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var Jm=Ra(ee("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),eg=Ra(ee("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),tg=Ra(ee("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function ve(e){return function(){return e}}const ng=Math.cos,Fs=Math.min,Zo=Math.sin,be=Math.sqrt,ud=1e-12,Qo=Math.PI,Oa=2*Qo;function rg(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new P0(t)}function ig(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function og(e){this._context=e}og.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Di(e){return new og(e)}function ag(e){return e[0]}function fg(e){return e[1]}function ug(e,t){var n=ve(!0),r=null,i=Di,o=null,a=rg(f);e=typeof e=="function"?e:e===void 0?ag:ve(e),t=typeof t=="function"?t:t===void 0?fg:ve(t);function f(u){var s,c=(u=ig(u)).length,l,d=!1,h;for(r==null&&(o=i(h=a())),s=0;s<=c;++s)!(s<c&&n(l=u[s],s,u))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+e(l,s,u),+t(l,s,u));if(h)return o=null,h+""||null}return f.x=function(u){return arguments.length?(e=typeof u=="function"?u:ve(+u),f):e},f.y=function(u){return arguments.length?(t=typeof u=="function"?u:ve(+u),f):t},f.defined=function(u){return arguments.length?(n=typeof u=="function"?u:ve(!!u),f):n},f.curve=function(u){return arguments.length?(i=u,r!=null&&(o=i(r)),f):i},f.context=function(u){return arguments.length?(u==null?r=o=null:o=i(r=u),f):r},f}function v8(e,t,n){var r=null,i=ve(!0),o=null,a=Di,f=null,u=rg(s);e=typeof e=="function"?e:e===void 0?ag:ve(+e),t=typeof t=="function"?t:ve(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?fg:ve(+n);function s(l){var d,h,p,g=(l=ig(l)).length,m,y=!1,b,w=new Array(g),v=new Array(g);for(o==null&&(f=a(b=u())),d=0;d<=g;++d){if(!(d<g&&i(m=l[d],d,l))===y)if(y=!y)h=d,f.areaStart(),f.lineStart();else{for(f.lineEnd(),f.lineStart(),p=d-1;p>=h;--p)f.point(w[p],v[p]);f.lineEnd(),f.areaEnd()}y&&(w[d]=+e(m,d,l),v[d]=+t(m,d,l),f.point(r?+r(m,d,l):w[d],n?+n(m,d,l):v[d]))}if(b)return f=null,b+""||null}function c(){return ug().defined(i).curve(a).context(o)}return s.x=function(l){return arguments.length?(e=typeof l=="function"?l:ve(+l),r=null,s):e},s.x0=function(l){return arguments.length?(e=typeof l=="function"?l:ve(+l),s):e},s.x1=function(l){return arguments.length?(r=l==null?null:typeof l=="function"?l:ve(+l),s):r},s.y=function(l){return arguments.length?(t=typeof l=="function"?l:ve(+l),n=null,s):t},s.y0=function(l){return arguments.length?(t=typeof l=="function"?l:ve(+l),s):t},s.y1=function(l){return arguments.length?(n=l==null?null:typeof l=="function"?l:ve(+l),s):n},s.lineX0=s.lineY0=function(){return c().x(e).y(t)},s.lineY1=function(){return c().x(e).y(n)},s.lineX1=function(){return c().x(r).y(t)},s.defined=function(l){return arguments.length?(i=typeof l=="function"?l:ve(!!l),s):i},s.curve=function(l){return arguments.length?(a=l,o!=null&&(f=a(o)),s):a},s.context=function(l){return arguments.length?(l==null?o=f=null:f=a(o=l),s):o},s}class sg{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function w8(e){return new sg(e,!0)}function _8(e){return new sg(e,!1)}const x8=be(3),cg={draw(e,t){const n=be(t+Fs(t/28,.75))*.59436,r=n/2,i=r*x8;e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-i,-r),e.lineTo(i,r),e.moveTo(-i,r),e.lineTo(i,-r)}},qs={draw(e,t){const n=be(t/Qo);e.moveTo(n,0),e.arc(0,0,n,0,Oa)}},lg={draw(e,t){const n=be(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},dg=be(1/3),T8=dg*2,hg={draw(e,t){const n=be(t/T8),r=n*dg;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},pg={draw(e,t){const n=be(t)*.62625;e.moveTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.lineTo(-n,0),e.closePath()}},mg={draw(e,t){const n=be(t-Fs(t/7,2))*.87559;e.moveTo(-n,0),e.lineTo(n,0),e.moveTo(0,n),e.lineTo(0,-n)}},gg={draw(e,t){const n=be(t),r=-n/2;e.rect(r,r,n,n)}},bg={draw(e,t){const n=be(t)*.4431;e.moveTo(n,n),e.lineTo(n,-n),e.lineTo(-n,-n),e.lineTo(-n,n),e.closePath()}},S8=.8908130915292852,yg=Zo(Qo/10)/Zo(7*Qo/10),M8=Zo(Oa/10)*yg,$8=-ng(Oa/10)*yg,vg={draw(e,t){const n=be(t*S8),r=M8*n,i=$8*n;e.moveTo(0,-n),e.lineTo(r,i);for(let o=1;o<5;++o){const a=Oa*o/5,f=ng(a),u=Zo(a);e.lineTo(u*n,-f*n),e.lineTo(f*r-u*i,u*r+f*i)}e.closePath()}},Rf=be(3),wg={draw(e,t){const n=-be(t/(Rf*3));e.moveTo(0,n*2),e.lineTo(-Rf*n,-n),e.lineTo(Rf*n,-n),e.closePath()}},E8=be(3),_g={draw(e,t){const n=be(t)*.6824,r=n/2,i=n*E8/2;e.moveTo(0,-n),e.lineTo(i,r),e.lineTo(-i,r),e.closePath()}},Ue=-.5,He=be(3)/2,Zu=1/be(12),A8=(Zu/2+1)*3,xg={draw(e,t){const n=be(t/A8),r=n/2,i=n*Zu,o=r,a=n*Zu+n,f=-o,u=a;e.moveTo(r,i),e.lineTo(o,a),e.lineTo(f,u),e.lineTo(Ue*r-He*i,He*r+Ue*i),e.lineTo(Ue*o-He*a,He*o+Ue*a),e.lineTo(Ue*f-He*u,He*f+Ue*u),e.lineTo(Ue*r+He*i,Ue*i-He*r),e.lineTo(Ue*o+He*a,Ue*a-He*o),e.lineTo(Ue*f+He*u,Ue*u-He*f),e.closePath()}},Tg={draw(e,t){const n=be(t-Fs(t/6,1.7))*.6189;e.moveTo(-n,-n),e.lineTo(n,n),e.moveTo(-n,n),e.lineTo(n,-n)}},C8=[qs,lg,hg,gg,vg,wg,xg],k8=[qs,mg,Tg,_g,cg,bg,pg];function sn(){}function Jo(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Pa(e){this._context=e}Pa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Jo(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Jo(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function N8(e){return new Pa(e)}function Sg(e){this._context=e}Sg.prototype={areaStart:sn,areaEnd:sn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Jo(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function L8(e){return new Sg(e)}function Mg(e){this._context=e}Mg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Jo(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function D8(e){return new Mg(e)}function $g(e,t){this._basis=new Pa(e),this._beta=t}$g.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],o=e[n]-r,a=t[n]-i,f=-1,u;++f<=n;)u=f/n,this._basis.point(this._beta*e[f]+(1-this._beta)*(r+u*o),this._beta*t[f]+(1-this._beta)*(i+u*a));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const I8=function e(t){function n(r){return t===1?new Pa(r):new $g(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function ea(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function js(e,t){this._context=e,this._k=(1-t)/6}js.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ea(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:ea(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const R8=function e(t){function n(r){return new js(r,t)}return n.tension=function(r){return e(+r)},n}(0);function zs(e,t){this._context=e,this._k=(1-t)/6}zs.prototype={areaStart:sn,areaEnd:sn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:ea(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const O8=function e(t){function n(r){return new zs(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Bs(e,t){this._context=e,this._k=(1-t)/6}Bs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ea(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const P8=function e(t){function n(r){return new Bs(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Us(e,t,n){var r=e._x1,i=e._y1,o=e._x2,a=e._y2;if(e._l01_a>ud){var f=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*f-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*f-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>ud){var s=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*s+e._x1*e._l23_2a-t*e._l12_2a)/c,a=(a*s+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,o,a,e._x2,e._y2)}function Eg(e,t){this._context=e,this._alpha=t}Eg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Us(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const F8=function e(t){function n(r){return t?new Eg(r,t):new js(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Ag(e,t){this._context=e,this._alpha=t}Ag.prototype={areaStart:sn,areaEnd:sn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Us(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const q8=function e(t){function n(r){return t?new Ag(r,t):new zs(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Cg(e,t){this._context=e,this._alpha=t}Cg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Us(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const j8=function e(t){function n(r){return t?new Cg(r,t):new Bs(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function kg(e){this._context=e}kg.prototype={areaStart:sn,areaEnd:sn,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function z8(e){return new kg(e)}function sd(e){return e<0?-1:1}function cd(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),f=(o*i+a*r)/(r+i);return(sd(o)+sd(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(f))||0}function ld(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Of(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,f=(o-r)/3;e._context.bezierCurveTo(r+f,i+f*t,o-f,a-f*n,o,a)}function ta(e){this._context=e}ta.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Of(this,this._t0,ld(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Of(this,ld(this,n=cd(this,e,t)),n);break;default:Of(this,this._t0,n=cd(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Ng(e){this._context=new Lg(e)}(Ng.prototype=Object.create(ta.prototype)).point=function(e,t){ta.prototype.point.call(this,t,e)};function Lg(e){this._context=e}Lg.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function B8(e){return new ta(e)}function U8(e){return new Ng(e)}function Dg(e){this._context=e}Dg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=dd(e),i=dd(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[a],t[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function dd(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),a=new Array(n);for(i[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,a[t]-=r*a[t-1];for(i[n-1]=a[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function H8(e){return new Dg(e)}function Fa(e,t){this._context=e,this._t=t}Fa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Y8(e){return new Fa(e,.5)}function G8(e){return new Fa(e,0)}function W8(e){return new Fa(e,1)}function Wr(e,t,n){this.k=e,this.x=t,this.y=n}Wr.prototype={constructor:Wr,scale:function(e){return e===1?this:new Wr(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Wr(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Wr.prototype;function cn(e){return e!=null&&!Number.isNaN(e)}function ut(e,t){return+cn(t)-+cn(e)||Oe(e,t)}function na(e,t){return+cn(t)-+cn(e)||vi(e,t)}function Hs(e){return e!=null&&`${e}`!=""}function Ig(e){return isFinite(e)?e:NaN}function Ys(e){return e>0&&isFinite(e)?e:NaN}function Rg(e){return e<0&&isFinite(e)?e:NaN}function X8(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;const n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),o=e.getUTCMilliseconds();return`${V8(e.getUTCFullYear())}-${Rt(e.getUTCMonth()+1,2)}-${Rt(e.getUTCDate(),2)}${n||r||i||o?`T${Rt(n,2)}:${Rt(r,2)}${i||o?`:${Rt(i,2)}${o?`.${Rt(o,3)}`:""}`:""}Z`:""}`}function V8(e){return e<0?`-${Rt(-e,6)}`:e>9999?`+${Rt(e,6)}`:Rt(e,4)}function Rt(e,t){return`${e}`.padStart(t,"0")}const K8=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function Og(e,t){return K8.test(e+="")?new Date(e):typeof t=="function"?t(e):t}function pr(e){if(e==null)return;const t=e[0],n=e[e.length-1];return vi(t,n)}const Zn=1e3,rn=Zn*60,on=rn*60,St=on*24,mt=St*7,An=St*30,Jt=St*365,Pf=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",Zn],["5 seconds",5*Zn],["15 seconds",15*Zn],["30 seconds",30*Zn],["minute",rn],["5 minutes",5*rn],["15 minutes",15*rn],["30 minutes",30*rn],["hour",on],["3 hours",3*on],["6 hours",6*on],["12 hours",12*on],["day",St],["2 days",2*St],["week",mt],["2 weeks",2*mt],["month",An],["3 months",3*An],["6 months",6*An],["year",Jt],["2 years",2*Jt],["5 years",5*Jt],["10 years",10*Jt],["20 years",20*Jt],["50 years",50*Jt],["100 years",100*Jt]],Gs=new Map([["second",Zn],["minute",rn],["hour",on],["day",St],["monday",mt],["tuesday",mt],["wednesday",mt],["thursday",mt],["friday",mt],["saturday",mt],["sunday",mt],["week",mt],["month",An],["year",Jt]]),Pg=new Map([["second",nt],["minute",$i],["hour",Ai],["day",qn],["monday",ci],["tuesday",Np],["wednesday",Lp],["thursday",On],["friday",Dp],["saturday",Ip],["sunday",dr],["week",dr],["month",ki],["year",at]]),Ws=new Map([["second",nt],["minute",Ei],["hour",Ci],["day",La],["monday",li],["tuesday",Rp],["wednesday",Op],["thursday",Pn],["friday",Pp],["saturday",Fp],["sunday",hr],["week",hr],["month",Ni],["year",ft]]),Ii=Symbol("intervalDuration"),qa=Symbol("intervalType");for(const[e,t]of Pg)t[Ii]=Gs.get(e),t[qa]="time";for(const[e,t]of Ws)t[Ii]=Gs.get(e),t[qa]="utc";const Xr=[["year",ft,"utc"],["month",Ni,"utc"],["day",La,"utc",6*An],["hour",Ci,"utc",3*St],["minute",Ei,"utc",6*on],["second",nt,"utc",30*rn]],_o=[["year",at,"time"],["month",ki,"time"],["day",qn,"time",6*An],["hour",Ai,"time",3*St],["minute",$i,"time",6*on],["second",nt,"time",30*rn]],Z8=[Xr[0],_o[0],Xr[1],_o[1],Xr[2],_o[2],...Xr.slice(3)];function Fg(e){let t=`${e}`.toLowerCase();t.endsWith("s")&&(t=t.slice(0,-1));let n=1;const r=/^(?:(\d+)\s+)/.exec(t);switch(r&&(t=t.slice(r[0].length),n=+r[1]),t){case"quarter":t="month",n*=3;break;case"half":t="month",n*=6;break}let i=Ws.get(t);if(!i)throw new Error(`unknown interval: ${e}`);if(n>1&&!i.every)throw new Error(`non-periodic interval: ${t}`);return[t,n]}function qg(e){return jg(Fg(e),"time")}function Xs(e){return jg(Fg(e),"utc")}function jg([e,t],n){let r=(n==="time"?Pg:Ws).get(e);return t>1&&(r=r.every(t),r[Ii]=Gs.get(e)*t,r[qa]=n),r}function hd(e,t){if(!(t>1))return;const n=e[Ii];if(!Pf.some(([,i])=>i===n)||n%St===0&&St<n&&n<An)return;const[r]=Pf[pa(([,i])=>Math.log(i)).center(Pf,Math.log(n*t))];return(e[qa]==="time"?qg:Xs)(r)}function pd(e,t,n){const r=t==="time"?Os:Li;if(n==null)return r(e==="year"?"%Y":e==="month"?"%Y-%m":e==="day"?"%Y-%m-%d":e==="hour"||e==="minute"?"%Y-%m-%dT%H:%M":e==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const i=Q8(n);switch(e){case"millisecond":return Wn(r(".%L"),r(":%M:%S"),i);case"second":return Wn(r(":%S"),r("%-I:%M"),i);case"minute":return Wn(r("%-I:%M"),r("%p"),i);case"hour":return Wn(r("%-I %p"),r("%b %-d"),i);case"day":return Wn(r("%-d"),r("%b"),i);case"month":return Wn(r("%b"),r("%Y"),i);case"year":return r("%Y")}throw new Error("unable to format time ticks")}function Q8(e){return e==="left"||e==="right"?(t,n)=>`
${t}
${n}`:e==="top"?(t,n)=>`${n}
${t}`:(t,n)=>`${t}
${n}`}function J8(e){return e==="time"?_o:e==="utc"?Xr:Z8}function ex(e,t,n){const r=rt(V2(t,(i,o)=>Math.abs(o-i)));if(r<1e3)return pd("millisecond","utc",n);for(const[i,o,a,f]of J8(e)){if(r>f||i==="hour"&&!r)break;if(t.every(u=>o.floor(u)>=u))return pd(i,a,n)}}function Wn(e,t,n){return(r,i,o)=>{const a=e(r,i),f=t(r,i),u=i-pr(o);return i!==u&&o[u]!==void 0&&f===t(o[u],u)?a:n(a,f)}}const Vs=Object.getPrototypeOf(Uint8Array),tx=Object.prototype.toString;function pn(e){return e instanceof Array||e instanceof Vs}function zg(e){return e instanceof Vs&&!nx(e)}function Bg(e){return(e==null?void 0:e.prototype)instanceof Vs&&!rx(e)}function nx(e){return e instanceof BigInt64Array||e instanceof BigUint64Array}function rx(e){return e===BigInt64Array||e===BigUint64Array}const Ug=Symbol("reindex");function le(e,t,n){const r=typeof t;return r==="string"?Jg(e)?Ks(e.getChild(t),n):md(e,Hg(t),n):r==="function"?md(e,t,n):r==="number"||t instanceof Date||r==="boolean"?me(e,jt(t),n):typeof(t==null?void 0:t.transform)=="function"?Qu(t.transform(e),n):ix(Qu(t,n),e==null?void 0:e[Ug])}function ix(e,t){return e!=null&&t?tc(e,t):e}function md(e,t,n){return me(e,Bg(n)?(r,i)=>Qs(t(r,i)):t,n)}function Qu(e,t){return t===void 0?ln(e):e1(e)?Ks(e,t):e instanceof t?e:t.from(e,Bg(t)&&!zg(e)?Qs:void 0)}function Ks(e,t){return e==null?e:(t===void 0||t===Array)&&Mx(e.type)?Yg(e.toArray()):Qu(e.toArray(),t)}const xo=[null],Hg=e=>t=>{var r;const n=t[e];return n===void 0&&t.type==="Feature"?(r=t.properties)==null?void 0:r[e]:n},Ri={transform:Gt},xe={transform:e=>e},ox=()=>1,ax=()=>!0,De=e=>e==null?e:`${e}`,Ce=e=>e==null?e:+e,Zs=e=>e?e[0]:void 0,ra=e=>e?e[1]:void 0,jt=e=>()=>e;function fx(e){const t=+`${e}`.slice(1)/100;return(n,r)=>ir(n,t,r)}function mr(e){return zg(e)?e:me(e,Qs,Float64Array)}function Qs(e){return e==null?NaN:Number(e)}function Yg(e){return me(e,Gg)}function Gg(e){return e instanceof Date&&!isNaN(e)?e:typeof e=="string"?Og(e):e==null||isNaN(e=Number(e))?void 0:new Date(e)}function Qe(e,t){return e===void 0&&(e=t),e===null?[void 0,"none"]:za(e)?[void 0,e]:[e,void 0]}function qe(e,t){return e===void 0&&(e=t),e===null||typeof e=="number"?[void 0,e]:[e,void 0]}function Wg(e,t,n){if(e!=null)return ct(e,t,n)}function ct(e,t,n){const r=`${e}`.toLowerCase();if(!n.includes(r))throw new Error(`invalid ${t}: ${e}`);return r}function gr(e){return Jg(e)?e:ln(e)}function ln(e){if(e==null||pn(e))return e;if(e1(e))return Ks(e);switch(e.type){case"FeatureCollection":return e.features;case"GeometryCollection":return e.geometries;case"Feature":case"LineString":case"MultiLineString":case"MultiPoint":case"MultiPolygon":case"Point":case"Polygon":case"Sphere":return[e]}return Array.from(e)}function me(e,t,n=Array){return e==null?e:e instanceof n?e.map(t):n.from(e,t)}function di(e,t=Array){return e instanceof t?e.slice():t.from(e)}function ux({x:e,x1:t,x2:n}){return e!==void 0||t!==void 0||n!==void 0}function Xg({y:e,y1:t,y2:n}){return e!==void 0||t!==void 0||n!==void 0}function sx(e){return ux(e)||Xg(e)||e.interval!==void 0}function mn(e){return(e==null?void 0:e.toString)===tx}function Ju(e){return mn(e)&&(e.type!==void 0||e.domain!==void 0)}function ja(e){return mn(e)&&typeof e.transform!="function"}function br(e){return ja(e)&&e.value===void 0&&e.channel===void 0}function cx(e,t,n,r=xe){return t===void 0&&n===void 0?(t=0,n=e===void 0?r:e):t===void 0?t=e===void 0?0:e:n===void 0&&(n=e===void 0?0:e),[t,n]}function Js(e,t){return e===void 0&&t===void 0?[Zs,ra]:[e,t]}function ec({z:e,fill:t,stroke:n}={}){return e===void 0&&([e]=Qe(t)),e===void 0&&([e]=Qe(n)),e}function hi(e){return pn(e)?e.length:e==null?void 0:e.numRows}function Gt(e){const t=hi(e),n=new Uint32Array(t);for(let r=0;r<t;++r)n[r]=r;return n}function tc(e,t){return pn(e)?me(t,n=>e[n],e.constructor):me(t,n=>e.at(n))}function lx(e,t,n){return e.subarray?e.subarray(t,n):e.slice(t,n)}function zt(e){return e!==null&&typeof e=="object"?e.valueOf():e}function dx(e,t){if(t[e]!==void 0)return t[e];switch(e){case"x1":case"x2":e="x";break;case"y1":case"y2":e="y";break}return t[e]}function ia(e){let t;return[{transform:()=>t,label:gn(e)},n=>t=n]}function Re(e){return e==null?[e]:ia(e)}function gn(e,t){return typeof e=="string"?e:e&&e.label!==void 0?e.label:t}function es(e,t){return{transform(n){const r=e.transform(n),i=t.transform(n);return Fe(r)||Fe(i)?me(r,(o,a)=>new Date((+r[a]+ +i[a])/2)):me(r,(o,a)=>(+r[a]+ +i[a])/2,Float64Array)},label:e.label}}function oa(e,t){const n=Vg(t==null?void 0:t.interval,t==null?void 0:t.type);return n?me(e,n):e}function Vg(e,t){const n=nc(e,t);return n&&(r=>cn(r)?n.floor(r):r)}function nc(e,t){if(e!=null){if(typeof e=="number")return hx(e);if(typeof e=="string")return(t==="time"?qg:Xs)(e);if(typeof e.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof e.offset!="function")throw new Error("invalid interval; missing offset method");return e}}function hx(e){e=+e,0<e&&e<1&&Number.isInteger(1/e)&&(e=-1/e);const t=Math.abs(e);return e<0?{floor:n=>Math.floor(n*t)/t,offset:(n,r=1)=>(n*t+Math.floor(r))/t,range:(n,r)=>bu(Math.ceil(n*t),r*t).map(i=>i/t)}:{floor:n=>Math.floor(n/t)*t,offset:(n,r=1)=>n+t*Math.floor(r),range:(n,r)=>bu(Math.ceil(n/t),r/t).map(i=>i*t)}}function Mr(e,t){if(e=nc(e,t),e&&typeof e.range!="function")throw new Error("invalid interval: missing range method");return e}function px(e,t){if(e=Mr(e,t),e&&typeof e.ceil!="function")throw new Error("invalid interval: missing ceil method");return e}function mx(e){return Qn(e)&&typeof(e==null?void 0:e.floor)=="function"&&e.floor()instanceof Date}function Qn(e){return typeof(e==null?void 0:e.range)=="function"}function $r(e){return e===void 0||ja(e)?e:{value:e}}function gx(e){return e==null?null:{transform:t=>le(t,e,Float64Array),label:gn(e)}}function bn(e){return e&&typeof e[Symbol.iterator]=="function"}function Kg(e){for(const t of e)if(t!=null)return typeof t!="object"||t instanceof Date}function gd(e){for(const t of e){if(t==null)continue;const n=typeof t;return n==="string"||n==="boolean"}}function Fe(e){for(const t of e)if(t!=null)return t instanceof Date}function bx(e){for(const t of e)if(t!=null)return typeof t=="string"&&isNaN(t)&&Og(t)}function yx(e){for(const t of e)if(t!=null){if(typeof t!="string")return!1;if(t.trim())return!isNaN(t)}}function vx(e){for(const t of e)if(t!=null)return typeof t=="number"}function Ff(e,t){let n;for(const r of e)if(r!=null){if(!t(r))return!1;n=!0}return n}const wx=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function za(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(e)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(e)||wx.has(e))}function _x(e){return typeof e=="number"&&(0<=e&&e<=1||isNaN(e))}function Ee(e){return e==null||pi(e)}function pi(e){return/^\s*none\s*$/i.test(e)}function xx(e){return/^\s*round\s*$/i.test(e)}function ts(e,t){return Wg(e,t,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function rc(e="middle"){return ts(e,"frameAnchor")}function Tx(e={},...t){let n=e;for(const r of t)for(const i in r)if(n[i]===void 0){const o=r[i];n===e?n={...n,[i]:o}:n[i]=o}return n}function Sx(e){console.warn("named iterables are deprecated; please use an object instead");const t=new Set;return Object.fromEntries(Array.from(e,n=>{const{name:r}=n;if(r==null)throw new Error("missing name");const i=`${r}`;if(i==="__proto__")throw new Error(`illegal name: ${i}`);if(t.has(i))throw new Error(`duplicate name: ${i}`);return t.add(i),[r,n]}))}function Zg(e){return bn(e)?Sx(e):e}function Qg(e){return e===!0?e="frame":e===!1?e=null:e!=null&&(e=ct(e,"clip",["frame","sphere"])),e}function Jg(e){return e&&typeof e.getChild=="function"&&typeof e.toArray=="function"&&e.schema&&Array.isArray(e.schema.fields)}function e1(e){return e&&typeof e.toArray=="function"&&e.type}function Mx(e){return e&&(e.typeId===8||e.typeId===10)&&e.unit===1}const vt=Symbol("position"),Wt=Symbol("color"),Oi=Symbol("radius"),Pi=Symbol("length"),Fi=Symbol("opacity"),Ba=Symbol("symbol"),t1=Symbol("projection"),pe=new Map([["x",vt],["y",vt],["fx",vt],["fy",vt],["r",Oi],["color",Wt],["opacity",Fi],["symbol",Ba],["length",Pi],["projection",t1]]);function $x(e){return e===vt||e===t1}function Ex(e){return e===vt||e===Oi||e===Pi||e===Fi}const Ax=Math.sqrt(3),Cx=2/Ax,kx={draw(e,t){const n=Math.sqrt(t/Math.PI),r=n*Cx,i=r/2;e.moveTo(0,r),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(0,-r),e.lineTo(-n,-i),e.lineTo(-n,i),e.closePath()}},ic=new Map([["asterisk",cg],["circle",qs],["cross",lg],["diamond",hg],["diamond2",pg],["hexagon",kx],["plus",mg],["square",gg],["square2",bg],["star",vg],["times",Tg],["triangle",wg],["triangle2",_g],["wye",xg]]);function oc(e){return e&&typeof e.draw=="function"}function Nx(e){return oc(e)?!0:typeof e!="string"?!1:ic.has(e.toLowerCase())}function ac(e){if(e==null||oc(e))return e;const t=ic.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid symbol: ${e}`)}function ES(e){if(e==null||oc(e))return[void 0,e];if(typeof e=="string"){const t=ic.get(`${e}`.toLowerCase());if(t)return[void 0,t]}return[e,void 0]}function qi({filter:e,sort:t,reverse:n,transform:r,initializer:i,...o}={},a){if(r===void 0&&(e!=null&&(r=n1(e)),t!=null&&!br(t)&&(r=qf(r,fc(t))),n&&(r=qf(r,r1))),a!=null&&i!=null)throw new Error("transforms cannot be applied after initializers");return{...o,...(t===null||br(t))&&{sort:t},transform:qf(r,a)}}function yr({filter:e,sort:t,reverse:n,initializer:r,...i}={},o){return r===void 0&&(e!=null&&(r=n1(e)),t!=null&&!br(t)&&(r=jf(r,fc(t))),n&&(r=jf(r,r1))),{...i,...(t===null||br(t))&&{sort:t},initializer:jf(r,o)}}function qf(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i){return{data:n,facets:r}=e.call(this,n,r,i),t.call(this,gr(n),r,i)}}function jf(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i,...o){let a,f,u,s,c,l;return{data:f=n,facets:u=r,channels:a}=e.call(this,n,r,i,...o),{data:c=f,facets:l=u,channels:s}=t.call(this,f,u,{...i,...a},...o),{data:c,facets:l,channels:{...a,...s}}}}function Lx(e,t){return(e.initializer!=null?yr:qi)(e,t)}function n1(e){return(t,n)=>{const r=le(t,e);return{data:t,facets:n.map(i=>i.filter(o=>r[o]))}}}function r1(e,t){return{data:e,facets:t.map(n=>n.slice().reverse())}}function AS(e,{sort:t,...n}={}){return{...(ja(e)&&e.channel!==void 0?yr:Lx)(n,fc(e)),sort:br(t)?t:null}}function fc(e){return(typeof e=="function"&&e.length!==1?Dx:Ix)(e)}function Dx(e){return(t,n)=>{const r=pn(t)?(i,o)=>e(t[i],t[o]):(i,o)=>e(t.get(i),t.get(o));return{data:t,facets:n.map(i=>i.slice().sort(r))}}}function Ix(e){let t,n;({channel:t,value:e,order:n}={...$r(e)});const r=t==null?void 0:t.startsWith("-");if(r&&(t=t.slice(1)),n===void 0&&(n=r?na:ut),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=ut;break;case"descending":n=na;break;default:throw new Error(`invalid order: ${n}`)}return(i,o,a)=>{let f;if(t===void 0)f=le(i,e);else{if(a===void 0)throw new Error("channel sort requires an initializer");if(f=a[t],!f)return{};f=f.value}const u=(s,c)=>n(f[s],f[c]);return{data:i,facets:o.map(s=>s.slice().sort(u))}}}function i1(e={y:"count"},t={}){const{x:n=xe}=t;if(n==null)throw new Error("missing channel: x");return Rx(n,null,e,t)}function Rx(e,t,{data:n=cc,filter:r,sort:i,reverse:o,...a}={},f={}){a=Fx(a,f),n=u1(n,xe),i=i==null?void 0:a1("sort",i,f),r=r==null?void 0:f1("filter",r,f);const[u,s]=Re(e),[c,l]=Re(t),{z:d,fill:h,stroke:p,x1:g,x2:m,y1:y,y2:b,...w}=f,[v,T]=Re(d),[_]=Qe(h),[E]=Qe(p),[C,k]=Re(_),[R,$]=Re(E);return{..."z"in f&&{z:v||d},..."fill"in f&&{fill:C||h},..."stroke"in f&&{stroke:R||p},...qi(w,(S,x,A)=>{const M=oa(le(S,e),A==null?void 0:A.x),N=oa(le(S,t),A==null?void 0:A.y),L=le(S,d),B=le(S,_),H=le(S,E),O=s1(a,{z:L,fill:B,stroke:H}),j=[],P=[],F=M&&s([]),K=N&&l([]),Z=L&&T([]),W=B&&k([]),Y=H&&$([]);let z=0;for(const D of a)D.initialize(S);i&&i.initialize(S),r&&r.initialize(S);for(const D of x){const U=[];for(const G of a)G.scope("facet",D);i&&i.scope("facet",D),r&&r.scope("facet",D);for(const[G,I]of ni(D,O))for(const[ie,V]of ni(I,N))for(const[oe,ae]of ni(V,M)){const ce={data:S};if(M&&(ce.x=oe),N&&(ce.y=ie),O&&(ce.z=G),!(r&&!r.reduce(ae,ce))){U.push(z++),P.push(n.reduceIndex(ae,S,ce)),M&&F.push(oe),N&&K.push(ie),L&&Z.push(O===L?G:L[ae[0]]),B&&W.push(O===B?G:B[ae[0]]),H&&Y.push(O===H?G:H[ae[0]]);for(const lt of a)lt.reduce(ae,ce);i&&i.reduce(ae,ce)}}j.push(U)}return c1(j,i,o),{data:P,facets:j}}),...!ti(a,"x")&&(u?{x:u}:{x1:g,x2:m}),...!ti(a,"y")&&(c?{y:c}:{y1:y,y2:b}),...Object.fromEntries(a.map(({name:S,output:x})=>[S,x]))}}function ti(e,...t){for(const{name:n}of e)if(t.includes(n))return!0;return!1}function o1(e,t,n=uc){const r=Object.entries(e);return t.title!=null&&e.title===void 0&&r.push(["title",Bx]),t.href!=null&&e.href===void 0&&r.push(["href",lc]),r.filter(([,i])=>i!==void 0).map(([i,o])=>o===null?Ox(i):n(i,o,t))}function uc(e,t,n,r=sc){let i;mn(t)&&"reduce"in t&&(i=t.scale,t=t.reduce);const o=r(e,t,n),[a,f]=ia(o.label);let u;return{name:e,output:i===void 0?a:{value:a,scale:i},initialize(s){o.initialize(s),u=f([])},scope(s,c){o.scope(s,c)},reduce(s,c){u.push(o.reduce(s,c))}}}function Ox(e){return{name:e,initialize(){},scope(){},reduce(){}}}function sc(e,t,n,r=Ua){const i=dx(e,n),o=r(t,i);let a,f;return{label:gn(o===aa?null:i,o.label),initialize(u){a=i===void 0?u:le(u,i),o.scope==="data"&&(f=o.reduceIndex(Gt(u),a))},scope(u,s){o.scope===u&&(f=o.reduceIndex(s,a))},reduce(u,s){return o.scope==null?o.reduceIndex(u,a,s):o.reduceIndex(u,a,f,s)}}}function ni(e,t){return t?ba(e,n=>t[n]):[[,e]]}function Ua(e,t,n=Px){if(e==null)return n(e);if(typeof e.reduceIndex=="function")return e;if(typeof e.reduce=="function"&&mn(e))return jx(e);if(typeof e=="function")return zx(e);if(/^p\d{2}$/i.test(e))return It(fx(e));switch(`${e}`.toLowerCase()){case"first":return lc;case"last":return Ux;case"identity":return cc;case"count":return aa;case"distinct":return Hx;case"sum":return t==null?aa:Yx;case"proportion":return yd(t,"data");case"proportion-facet":return yd(t,"facet");case"deviation":return It(Gh);case"min":return It(Bt);case"min-index":return It(U2);case"max":return It(rt);case"max-index":return It(B2);case"mean":return bd(G2);case"median":return bd(gu);case"variance":return It(Yh);case"mode":return It(X2)}return n(e)}function Px(e){throw new Error(`invalid reduce: ${e}`)}function Fx(e,t){return o1(e,t,a1)}function a1(e,t,n){return uc(e,t,n,f1)}function f1(e,t,n){return sc(e,t,n,u1)}function u1(e,t){return Ua(e,t,qx)}function qx(e){switch(`${e}`.toLowerCase()){case"x":return Gx;case"y":return Wx;case"z":return l1}throw new Error(`invalid group reduce: ${e}`)}function s1(e,t){for(const n in t){const r=t[n];if(r!==void 0&&!e.some(i=>i.name===n))return r}}function c1(e,t,n){if(t){const r=t.output.transform(),i=(o,a)=>ut(r[o],r[a]);e.forEach(o=>o.sort(i))}n&&e.forEach(r=>r.reverse())}function jx(e){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...e,reduceIndex:e.reduce.bind(e)}}function zx(e){return{reduceIndex(t,n,r){return e(tc(n,t),r)}}}function It(e){return{reduceIndex(t,n){return e(t,r=>n[r])}}}function bd(e){return{reduceIndex(t,n){const r=e(t,i=>n[i]);return Fe(n)?new Date(r):r}}}const cc={reduceIndex(e,t){return tc(t,e)}},lc={reduceIndex(e,t){return t[e[0]]}},Bx={reduceIndex(e,t){const r=So(Jn(e,o=>o.length,o=>t[o]),ra),i=r.slice(-5).reverse();if(i.length<r.length){const o=r.slice(0,-4);i[4]=[`… ${o.length.toLocaleString("en-US")} more`,fn(o,ra)]}return i.map(([o,a])=>`${o} (${a.toLocaleString("en-US")})`).join(`
`)}},Ux={reduceIndex(e,t){return t[e[e.length-1]]}},aa={label:"Frequency",reduceIndex(e){return e.length}},Hx={label:"Distinct",reduceIndex(e,t){const n=new ga;for(const r of e)n.add(t[r]);return n.size}},Yx=It(fn);function yd(e,t){return e==null?{scope:t,label:"Frequency",reduceIndex:(n,r,i=1)=>n.length/i}:{scope:t,reduceIndex:(n,r,i=1)=>fn(n,o=>r[o])/i}}const Gx={reduceIndex(e,t,{x:n}){return n}},Wx={reduceIndex(e,t,{y:n}){return n}},l1={reduceIndex(e,t,{z:n}){return n}};function fa(e){if(typeof e!="function")throw new Error(`invalid test function: ${e}`);return{reduceIndex(t,n,{data:r}){return n[t.find(pn(r)?i=>e(r[i],i,r):i=>e(r.get(i),i,r))]}}}function mi(e,{scale:t,type:n,value:r,filter:i,hint:o,label:a=gn(r)},f){return o===void 0&&typeof(r==null?void 0:r.transform)=="function"&&(o=r.hint),d1(f,{scale:t,type:n,value:le(e,r),label:a,filter:i,hint:o})}function Xx(e,t){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,mi(t,r,n)]))}function Vx(e,t){const n=Object.fromEntries(Object.entries(e).map(([r,{scale:i,value:o}])=>{const a=i==null?null:t[i];return[r,a==null?o:me(o,a)]}));return n.channels=e,n}function d1(e,t){const{scale:n,value:r}=t;if(n===!0||n==="auto")switch(e){case"fill":case"stroke":case"color":t.scale=n!==!0&&Ff(r,za)?null:"color",t.defaultScale="color";break;case"fillOpacity":case"strokeOpacity":case"opacity":t.scale=n!==!0&&Ff(r,_x)?null:"opacity",t.defaultScale="opacity";break;case"symbol":n!==!0&&Ff(r,Nx)?(t.scale=null,t.value=me(r,ac)):t.scale="symbol",t.defaultScale="symbol";break;default:t.scale=pe.has(e)?e:null;break}else if(n===!1)t.scale=null;else if(n!=null&&!pe.has(n))throw new Error(`unknown scale: ${n}`);return t}function Kx(e,t,n,r,i){const{order:o,reverse:a,reduce:f=!0,limit:u}=i;for(const s in i){if(!pe.has(s))continue;let{value:c,order:l=o,reverse:d=a,reduce:h=f,limit:p=u}=$r(i[s]);const g=c==null?void 0:c.startsWith("-");if(g&&(c=c.slice(1)),l=l===void 0?g!==(c==="width"||c==="height")?p1:h1:Jx(l),h==null||h===!1)continue;const m=s==="fx"||s==="fy"?Qx(t,r[s]):Zx(n,s);if(!m)throw new Error(`missing channel for scale: ${s}`);const y=m.value,[b=0,w=1/0]=bn(p)?p:p<0?[p]:[0,p];if(c==null)m.domain=()=>{let v=Array.from(new ga(y));return d&&(v=v.reverse()),(b!==0||w!==1/0)&&(v=v.slice(b,w)),v};else{const v=c==="data"?e:c==="height"?vd(n,"y1","y2"):c==="width"?vd(n,"x1","x2"):ns(n,c,c==="y"?"y2":c==="x"?"x2":void 0),T=Ua(h===!0?"max":h,v);m.domain=()=>{let _=O2(Gt(y),E=>T.reduceIndex(E,v),E=>y[E]);return l&&_.sort(l),d&&_.reverse(),(b!==0||w!==1/0)&&(_=_.slice(b,w)),_.map(Zs)}}}}function Zx(e,t){for(const n in e){const r=e[n];if(r.scale===t)return r}}function Qx(e,t){const n=e.original;if(n===e)return t;const r=t.value,i=t.value=[];for(let o=0;o<n.length;++o){const a=r[n[o][0]];for(const f of e[o])i[f]=a}return t}function vd(e,t,n){const r=ns(e,t),i=ns(e,n);return me(i,(o,a)=>Math.abs(o-r[a]),Float64Array)}function ns(e,t,n){let r=e[t];if(!r&&n!==void 0&&(r=e[n]),r)return r.value;throw new Error(`missing channel: ${t}`)}function Jx(e){if(e==null||typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"ascending":return h1;case"descending":return p1}throw new Error(`invalid order: ${e}`)}function h1([e,t],[n,r]){return ut(t,r)||ut(e,n)}function p1([e,t],[n,r]){return na(t,r)||ut(e,n)}function wd(e,t){let n=e[t];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}const m1=new Map([["accent",f8],["category10",a8],["dark2",u8],["observable10",s8],["paired",c8],["pastel1",l8],["pastel2",d8],["set1",h8],["set2",p8],["set3",m8],["tableau10",g8]]);function e4(e){return e!=null&&m1.has(`${e}`.toLowerCase())}const _d=new Map([...m1,["brbg",kt(Vp,Kp)],["prgn",kt(Zp,Qp)],["piyg",kt(Jp,em)],["puor",kt(tm,nm)],["rdbu",kt(Vu,Vo)],["rdgy",kt(rm,im)],["rdylbu",kt(Ku,Ko)],["rdylgn",kt(om,am)],["spectral",kt(fm,um)],["burd",xd(Vu,Vo)],["buylrd",xd(Ku,Ko)],["blues",ye(Dm,Im)],["greens",ye(Rm,Om)],["greys",ye(Pm,Fm)],["oranges",ye(Um,Hm)],["purples",ye(qm,jm)],["reds",ye(zm,Bm)],["turbo",Nt(Zm)],["viridis",Nt(Qm)],["magma",Nt(Jm)],["inferno",Nt(eg)],["plasma",Nt(tg)],["cividis",Nt(Ym)],["cubehelix",Nt(Gm)],["warm",Nt(Wm)],["cool",Nt(Xm)],["bugn",ye(sm,cm)],["bupu",ye(lm,dm)],["gnbu",ye(hm,pm)],["orrd",ye(mm,gm)],["pubu",ye(vm,wm)],["pubugn",ye(bm,ym)],["purd",ye(_m,xm)],["rdpu",ye(Tm,Sm)],["ylgn",ye(Em,Am)],["ylgnbu",ye(Mm,$m)],["ylorbr",ye(Cm,km)],["ylorrd",ye(Nm,Lm)],["rainbow",Td(Vm)],["sinebow",Td(Km)]]);function ye(e,t){return({length:n})=>n===1?[e[3][1]]:n===2?[e[3][1],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?ot(t,n):e[n])}function kt(e,t){return({length:n})=>n===2?[e[3][0],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?ot(t,n):e[n])}function xd(e,t){return({length:n})=>n===2?[e[3][2],e[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?ot(r=>t(1-r),n):e[n].slice().reverse())}function Nt(e){return({length:t})=>ot(e,Math.max(2,Math.floor(t)))}function Td(e){return({length:t})=>ot(e,Math.floor(t)+1).slice(0,-1)}function g1(e){const t=`${e}`.toLowerCase();if(!_d.has(t))throw new Error(`unknown ordinal scheme: ${t}`);return _d.get(t)}function Ha(e,t){const n=g1(e),r=typeof n=="function"?n({length:t}):n;return r.length!==t?r.slice(0,t):r}function t4(e,t="greys"){const n=new Set,[r,i]=Ha(t,2);for(const o of e)if(o!=null)if(o===!0)n.add(i);else if(o===!1)n.add(r);else return;return[...n]}const Sd=new Map([["brbg",Kp],["prgn",Qp],["piyg",em],["puor",nm],["rdbu",Vo],["rdgy",im],["rdylbu",Ko],["rdylgn",am],["spectral",um],["burd",e=>Vo(1-e)],["buylrd",e=>Ko(1-e)],["blues",Im],["greens",Om],["greys",Fm],["purples",jm],["reds",Bm],["oranges",Hm],["turbo",Zm],["viridis",Qm],["magma",Jm],["inferno",eg],["plasma",tg],["cividis",Ym],["cubehelix",Gm],["warm",Wm],["cool",Xm],["bugn",cm],["bupu",dm],["gnbu",pm],["orrd",gm],["pubugn",ym],["pubu",wm],["purd",xm],["rdpu",Sm],["ylgnbu",$m],["ylgn",Am],["ylorbr",km],["ylorrd",Lm],["rainbow",Vm],["sinebow",Km]]);function dc(e){const t=`${e}`.toLowerCase();if(!Sd.has(t))throw new Error(`unknown quantitative scheme: ${t}`);return Sd.get(t)}const n4=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function r4(e){return e!=null&&n4.has(`${e}`.toLowerCase())}const b1=e=>t=>e(1-t),zf=[0,1],Md=new Map([["number",$e],["rgb",Dn],["hsl",v_],["hcl",x_],["lab",w_]]);function y1(e){const t=`${e}`.toLowerCase();if(!Md.has(t))throw new Error(`unknown interpolator: ${t}`);return Md.get(t)}function ji(e,t,n,{type:r,nice:i,clamp:o,zero:a,domain:f=w1(e,n),unknown:u,round:s,scheme:c,interval:l,range:d=pe.get(e)===Oi?p4(n,f):pe.get(e)===Pi?m4(n,f):pe.get(e)===Fi?zf:void 0,interpolate:h=pe.get(e)===Wt?c==null&&d!==void 0?Dn:dc(c!==void 0?c:r==="cyclical"?"rainbow":"turbo"):s?Ts:$e,reverse:p}){if(l=Mr(l,r),(r==="cyclical"||r==="sequential")&&(r="linear"),typeof h!="function"&&(h=y1(h)),p=!!p,d!==void 0){const g=(f=ln(f)).length,m=(d=ln(d)).length;if(g!==m){if(h.length===1)throw new Error("invalid piecewise interpolator");h=xa(h,d),d=void 0}}if(h.length===1?(p&&(h=b1(h),p=!1),d===void 0&&(d=Float64Array.from(f,(g,m)=>m/(f.length-1)),d.length===2&&(d=zf)),t.interpolate((d===zf?jt:pc)(h))):t.interpolate(h),a){const[g,m]=Ge(f);(g>0||m<0)&&(f=di(f),(pr(f)||1)===Math.sign(g)?f[0]=0:f[f.length-1]=0)}return p&&(f=Ao(f)),t.domain(f).unknown(u),i&&(t.nice(i4(i,r)),f=t.domain()),d!==void 0&&t.range(d),o&&t.clamp(o),{type:r,domain:f,range:d,scale:t,interpolate:h,interval:l}}function i4(e,t){return e===!0?void 0:typeof e=="number"?e:px(e,t)}function o4(e,t,n){return ji(e,Is(),t,n)}function a4(e,t,n){return v1(e,t,{...n,exponent:.5})}function v1(e,t,{exponent:n=1,...r}){return ji(e,Ap().exponent(n),t,{...r,type:"pow"})}function f4(e,t,{base:n=10,domain:r=g4(t),...i}){return ji(e,Sp().base(n),t,{...i,domain:r})}function u4(e,t,{constant:n=1,...r}){return ji(e,$p().constant(n),t,r)}function s4(e,t,{range:n,quantiles:r=n===void 0?5:(n=[...n]).length,n:i=r,scheme:o="rdylbu",domain:a=b4(t),unknown:f,interpolate:u,reverse:s}){return n===void 0&&(n=u!==void 0?ot(u,i):pe.get(e)===Wt?Ha(o,i):void 0),a.length>0&&(a=Cp(a,n===void 0?{length:i}:n).quantiles()),hc(e,t,{domain:a,range:n,reverse:s,unknown:f})}function c4(e,t,{range:n,n:r=n===void 0?5:(n=[...n]).length,scheme:i="rdylbu",domain:o=w1(e,t),unknown:a,interpolate:f,reverse:u}){const[s,c]=Ge(o);let l;return n===void 0?(l=ri(s,c,r),l[0]<=s&&l.splice(0,1),l[l.length-1]>=c&&l.pop(),r=l.length+1,n=f!==void 0?ot(f,r):pe.get(e)===Wt?Ha(i,r):void 0):(l=ot($e(s,c),r+1).slice(1,-1),s instanceof Date&&(l=l.map(d=>new Date(d)))),pr(ln(o))<0&&l.reverse(),hc(e,t,{domain:l,range:n,reverse:u,unknown:a})}function hc(e,t,{domain:n=[0],unknown:r,scheme:i="rdylbu",interpolate:o,range:a=o!==void 0?ot(o,n.length+1):pe.get(e)===Wt?Ha(i,n.length+1):void 0,reverse:f}){n=ln(n);const u=pr(n);if(!isNaN(u)&&!l4(n,u))throw new Error(`the ${e} scale has a non-monotonic domain`);return f&&(a=Ao(a)),{type:"threshold",scale:kp(u<0?Ao(n):n,a===void 0?[]:a).unknown(r),domain:n,range:a}}function l4(e,t){for(let n=1,r=e.length,i=e[0];n<r;++n){const o=vi(i,i=e[n]);if(o!==0&&o!==t)return!1}return!0}function d4(e){return{type:"identity",scale:Ex(pe.get(e))?_p():t=>t}}function gi(e,t=Ig){return e.length?[Bt(e,({value:n})=>n===void 0?n:Bt(n,t)),rt(e,({value:n})=>n===void 0?n:rt(n,t))]:[0,1]}function w1(e,t){const n=pe.get(e);return(n===Oi||n===Fi||n===Pi?h4:gi)(t)}function h4(e){return[0,e.length?rt(e,({value:t})=>t===void 0?t:rt(t,Ig)):1]}function p4(e,t){const n=e.find(({radius:a})=>a!==void 0);if(n!==void 0)return[0,n.radius];const r=ir(e,.5,({value:a})=>a===void 0?NaN:ir(a,.25,Ys)),i=t.map(a=>3*Math.sqrt(a/r)),o=30/rt(i);return o<1?i.map(a=>a*o):i}function m4(e,t){const n=gu(e,({value:o})=>o===void 0?NaN:gu(o,Math.abs)),r=t.map(o=>12*o/n),i=60/rt(r);return i<1?r.map(o=>o*i):r}function g4(e){for(const{value:t}of e)if(t!==void 0)for(let n of t){if(n>0)return gi(e,Ys);if(n<0)return gi(e,Rg)}return[1,10]}function b4(e){const t=[];for(const{value:n}of e)if(n!==void 0)for(const r of n)t.push(r);return t}function pc(e){return(t,n)=>r=>e(t+r*(n-t))}let rs=0,is;function y4(){const e=rs;return rs=0,is=void 0,e}function an(e){e!==is&&(is=e,console.warn(e),++rs)}function Ya(e,t,n,r,{type:i,nice:o,clamp:a,domain:f=gi(r),unknown:u,pivot:s=0,scheme:c,range:l,symmetric:d=!0,interpolate:h=pe.get(e)===Wt?c==null&&l!==void 0?Dn:dc(c!==void 0?c:"rdbu"):$e,reverse:p}){s=+s,f=ln(f);let[g,m]=f;if(f.length>2&&an(`Warning: the diverging ${e} scale domain contains extra elements.`),vi(g,m)<0&&([g,m]=[m,g],p=!p),g=Math.min(g,s),m=Math.max(m,s),typeof h!="function"&&(h=y1(h)),l!==void 0&&(h=h.length===1?pc(h)(...l):xa(h,l)),p&&(h=b1(h)),d){const y=n.apply(s),b=y-n.apply(g),w=n.apply(m)-y;b<w?g=n.invert(y-w):b>w&&(m=n.invert(y+b))}return t.domain([g,s,m]).unknown(u).interpolator(h),a&&t.clamp(a),o&&t.nice(o),{type:i,domain:[g,m],pivot:s,interpolate:h,scale:t}}function v4(e,t,n){return Ya(e,Yp(),T4,t,n)}function w4(e,t,n){return _1(e,t,{...n,exponent:.5})}function _1(e,t,{exponent:n=1,...r}){return Ya(e,Xp().exponent(n=+n),$4(n),t,{...r,type:"diverging-pow"})}function _4(e,t,{base:n=10,pivot:r=1,domain:i=gi(t,r<0?Rg:Ys),...o}){return Ya(e,Gp().base(n=+n),S4,t,{domain:i,pivot:r,...o})}function x4(e,t,{constant:n=1,...r}){return Ya(e,Wp().constant(n=+n),E4(n),t,r)}const T4={apply(e){return e},invert(e){return e}},S4={apply:Math.log,invert:Math.exp},M4={apply(e){return Math.sign(e)*Math.sqrt(Math.abs(e))},invert(e){return Math.sign(e)*(e*e)}};function $4(e){return e===.5?M4:{apply(t){return Math.sign(t)*Math.pow(Math.abs(t),e)},invert(t){return Math.sign(t)*Math.pow(Math.abs(t),1/e)}}}function E4(e){return{apply(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))},invert(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}}function x1(e,t,n,r){return ji(e,t,n,r)}function A4(e,t,n){return x1(e,i8(),t,n)}function C4(e,t,n){return x1(e,o8(),t,n)}const zi=Symbol("ordinal");function T1(e,t,n,{type:r,interval:i,domain:o,range:a,reverse:f,hint:u}){return i=Mr(i,r),o===void 0&&(o=M1(n,i,e)),(r==="categorical"||r===zi)&&(r="ordinal"),f&&(o=Ao(o)),o=t.domain(o).domain(),a!==void 0&&(typeof a=="function"&&(a=a(o)),t.range(a)),{type:r,domain:o,range:a,scale:t,hint:u,interval:i}}function k4(e,t,{type:n,interval:r,domain:i,range:o,scheme:a,unknown:f,...u}){r=Mr(r,n),i===void 0&&(i=M1(t,r,e));let s;if(pe.get(e)===Ba)s=D4(t),o=o===void 0?I4(s):me(o,ac);else if(pe.get(e)===Wt&&(o===void 0&&(n==="ordinal"||n===zi)&&(o=t4(i,a),o!==void 0&&(a=void 0)),a===void 0&&o===void 0&&(a=n==="ordinal"?"turbo":"observable10"),a!==void 0))if(o!==void 0){const c=dc(a),l=o[0],d=o[1]-o[0];o=({length:h})=>ot(p=>c(l+d*p),h)}else o=g1(a);if(f===Gu)throw new Error(`implicit unknown on ${e} scale is not supported`);return T1(e,Ds().unknown(f),t,{...u,type:n,domain:i,range:o,hint:s})}function N4(e,t,{align:n=.5,padding:r=.5,...i}){return S1(q3().align(n).padding(r),t,i,e)}function L4(e,t,{align:n=.5,padding:r=.1,paddingInner:i=r,paddingOuter:o=e==="fx"||e==="fy"?0:r,...a}){return S1(Ca().align(n).paddingInner(i).paddingOuter(o),t,a,e)}function S1(e,t,n,r){let{round:i}=n;return i!==void 0&&e.round(i=!!i),e=T1(r,e,t,n),e.round=i,e}function M1(e,t,n){const r=new ga;for(const{value:i,domain:o}of e){if(o!==void 0)return o();if(i!==void 0)for(const a of i)r.add(a)}if(t!==void 0){const[i,o]=Ge(r).map(t.floor,t);return t.range(i,t.offset(o))}if(r.size>1e4&&pe.get(n)===vt)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return So(r,ut)}function $d(e,t){let n;for(const{hint:r}of e){const i=r==null?void 0:r[t];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}function D4(e){return{fill:$d(e,"fill"),stroke:$d(e,"stroke")}}function I4(e){return Ee(e.fill)?k8:C8}function os(e,{label:t,inset:n=0,insetTop:r=n,insetRight:i=n,insetBottom:o=n,insetLeft:a=n,round:f,nice:u,clamp:s,zero:c,align:l,padding:d,projection:h,facet:{label:p=t}={},...g}={}){const m={};for(const[y,b]of e){const w=g[y],v=F4(y,b,{round:pe.get(y)===vt?f:void 0,nice:u,clamp:s,zero:c,align:l,padding:d,projection:h,...w});if(v){let{label:T=y==="fx"||y==="fy"?p:t,percent:_,transform:E,inset:C,insetTop:k=C!==void 0?C:y==="y"?r:0,insetRight:R=C!==void 0?C:y==="x"?i:0,insetBottom:$=C!==void 0?C:y==="y"?o:0,insetLeft:S=C!==void 0?C:y==="x"?a:0}=w||{};if(E==null)E=void 0;else if(typeof E!="function")throw new Error("invalid scale transform; not a function");v.percent=!!_,v.label=T===void 0?O4(b,v):T,v.transform=E,y==="x"||y==="fx"?(v.insetLeft=+S,v.insetRight=+R):(y==="y"||y==="fy")&&(v.insetTop=+k,v.insetBottom=+$),m[y]=v}}return m}function Ed(e){const t={},n={scales:t};for(const[r,i]of Object.entries(e)){const{scale:o,type:a,interval:f,label:u}=i;t[r]=U4(i),n[r]=o,o.type=a,f!=null&&(o.interval=f),u!=null&&(o.label=u)}return n}function R4(e,t){const{x:n,y:r,fx:i,fy:o}=e,a=i||o?mc(t):t;i&&Ad(i,a),o&&Cd(o,a);const f=i||o?E1(e,t):t;n&&Ad(n,f),r&&Cd(r,f)}function O4(e=[],t){let n;for(const{label:r}of e)if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}if(n!==void 0)return!Bn(t)&&t.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function $1(e){return Math.sign(pr(e.domain()))*Math.sign(pr(e.range()))}function mc(e){const{marginTop:t,marginRight:n,marginBottom:r,marginLeft:i,width:o,height:a,facet:{marginTop:f,marginRight:u,marginBottom:s,marginLeft:c}}=e;return{marginTop:Math.max(t,f),marginRight:Math.max(n,u),marginBottom:Math.max(r,s),marginLeft:Math.max(i,c),width:o,height:a}}function E1({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:o,marginLeft:a,width:f,height:u}=mc(n);return{marginTop:r,marginRight:i,marginBottom:o,marginLeft:a,width:e?e.scale.bandwidth()+a+i:f,height:t?t.scale.bandwidth()+r+o:u,facet:{width:f,height:u}}}function Ad(e,t){if(e.range===void 0){const{insetLeft:n,insetRight:r}=e,{width:i,marginLeft:o=0,marginRight:a=0}=t,f=o+n,u=i-a-r;e.range=[f,Math.max(f,u)],Bn(e)||(e.range=C1(e)),e.scale.range(e.range)}A1(e)}function Cd(e,t){if(e.range===void 0){const{insetTop:n,insetBottom:r}=e,{height:i,marginTop:o=0,marginBottom:a=0}=t,f=o+n,u=i-a-r;e.range=[Math.max(f,u),f],Bn(e)?e.range.reverse():e.range=C1(e),e.scale.range(e.range)}A1(e)}function A1(e){e.round===void 0&&j4(e)&&P4(e)<=30&&e.scale.round(!0)}function P4({scale:e}){const t=e.domain().length,[n,r]=e.range(),i=e.paddingInner?e.paddingInner():1,o=e.paddingOuter?e.paddingOuter():e.padding(),a=t-i,f=Math.abs(r-n)/Math.max(1,a+o*2);return(f-Math.floor(f))*a}function C1(e){const t=e.scale.domain().length+k1(e);if(!(t>2))return e.range;const[n,r]=e.range;return Array.from({length:t},(i,o)=>n+o/(t-1)*(r-n))}function F4(e,t=[],n={}){const r=q4(e,t,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&e!=="fx"&&e!=="fy"&&Bn({type:r})){const i=t.map(({value:o})=>o).filter(o=>o!==void 0);i.some(Fe)?an(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${Xn(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${Xn(r)}".`):i.some(bx)?an(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${Xn(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${Xn(r)}".`):i.some(yx)&&an(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${Xn(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${Xn(r)}".`)}switch(n.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=no(t,n,mr);break;case"identity":switch(pe.get(e)){case vt:n=no(t,n,mr);break;case Ba:n=no(t,n,z4);break}break;case"utc":case"time":n=no(t,n,Yg);break}switch(r){case"diverging":return v4(e,t,n);case"diverging-sqrt":return w4(e,t,n);case"diverging-pow":return _1(e,t,n);case"diverging-log":return _4(e,t,n);case"diverging-symlog":return x4(e,t,n);case"categorical":case"ordinal":case zi:return k4(e,t,n);case"cyclical":case"sequential":case"linear":return o4(e,t,n);case"sqrt":return a4(e,t,n);case"threshold":return hc(e,t,n);case"quantile":return s4(e,t,n);case"quantize":return c4(e,t,n);case"pow":return v1(e,t,n);case"log":return f4(e,t,n);case"symlog":return u4(e,t,n);case"utc":return C4(e,t,n);case"time":return A4(e,t,n);case"point":return N4(e,t,n);case"band":return L4(e,t,n);case"identity":return d4(e);case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function Xn(e){return typeof e=="symbol"?e.description:e}function kd(e){return typeof e=="string"?`${e}`.toLowerCase():e}const Nd={toString:()=>"projection"};function q4(e,t,{type:n,domain:r,range:i,scheme:o,pivot:a,projection:f}){if(n=kd(n),e==="fx"||e==="fy")return"band";(e==="x"||e==="y")&&f!=null&&(n=Nd);for(const s of t){const c=kd(s.type);if(c!==void 0){if(n===void 0)n=c;else if(n!==c)throw new Error(`scale incompatible with channel: ${n} !== ${c}`)}}if(n===Nd)return;if(n!==void 0)return n;if(r===void 0&&!t.some(({value:s})=>s!==void 0))return;const u=pe.get(e);if(u===Oi)return"sqrt";if(u===Fi||u===Pi)return"linear";if(u===Ba)return"ordinal";if((r||i||[]).length>2)return Bf(u);if(r!==void 0){if(gd(r))return Bf(u);if(Fe(r))return"utc"}else{const s=t.map(({value:c})=>c).filter(c=>c!==void 0);if(s.some(gd))return Bf(u);if(s.some(Fe))return"utc"}if(u===Wt){if(a!=null||r4(o))return"diverging";if(e4(o))return"categorical"}return"linear"}function Bf(e){switch(e){case vt:return"point";case Wt:return zi;default:return"ordinal"}}function Bn({type:e}){return e==="ordinal"||e==="point"||e==="band"||e===zi}function k1({type:e}){return e==="threshold"}function j4({type:e}){return e==="point"||e==="band"}function vr(e){if(e===void 0)return!0;const t=e.domain(),n=e(t[0]);for(let r=1,i=t.length;r<i;++r)if(e(t[r])-n)return!1;return!0}function no(e,{domain:t,...n},r){var i;for(const o of e)o.value!==void 0&&(t===void 0&&(t=(i=o.value)==null?void 0:i.domain),o.value=r(o.value));return{domain:t===void 0?t:r(t),...n}}function z4(e){return me(e,ac)}function B4(e){return t=>{if(!pe.has(t=`${t}`))throw new Error(`unknown scale: ${t}`);return e[t]}}function U4({scale:e,type:t,domain:n,range:r,interpolate:i,interval:o,transform:a,percent:f,pivot:u}){if(t==="identity")return{type:"identity",apply:c=>c,invert:c=>c};const s=e.unknown?e.unknown():void 0;return{type:t,domain:di(n),...r!==void 0&&{range:di(r)},...a!==void 0&&{transform:a},...f&&{percent:f},...s!==void 0&&{unknown:s},...o!==void 0&&{interval:o},...i!==void 0&&{interpolate:i},...e.clamp&&{clamp:e.clamp()},...u!==void 0&&{pivot:u,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:c=>e(c),...e.invert&&{invert:c=>e.invert(c)}}}function H4(e,t){const{fx:n,fy:r}=os(e,t),i=n==null?void 0:n.scale.domain(),o=r==null?void 0:r.scale.domain();return i&&o?I2(i,o).map(([a,f],u)=>({x:a,y:f,i:u})):i?i.map((a,f)=>({x:a,i:f})):o?o.map((a,f)=>({y:a,i:f})):void 0}function Y4(e,{x:t,y:n}){return t&&(t=as(t)),n&&(n=as(n)),e.filter(t&&n?r=>t.has(r.x)&&n.has(r.y):t?r=>t.has(r.x):r=>n.has(r.y)).sort(t&&n?(r,i)=>t.get(r.x)-t.get(i.x)||n.get(r.y)-n.get(i.y):t?(r,i)=>t.get(r.x)-t.get(i.x):(r,i)=>n.get(r.y)-n.get(i.y))}function gc(e,{fx:t,fy:n}){const r=Gt(e),i=t==null?void 0:t.value,o=n==null?void 0:n.value;return t&&n?Jn(r,a=>(a.fx=i[a[0]],a.fy=o[a[0]],a),a=>i[a],a=>o[a]):t?Jn(r,a=>(a.fx=i[a[0]],a),a=>i[a]):Jn(r,a=>(a.fy=o[a[0]],a),a=>o[a])}function G4(e,t,{marginTop:n,marginLeft:r}){return e&&t?({x:i,y:o})=>`translate(${e(i)-r},${t(o)-n})`:e?({x:i})=>`translate(${e(i)-r},0)`:({y:i})=>`translate(0,${t(i)-n})`}function W4(e){const t=[],n=new Uint32Array(fn(e,r=>r.length));for(const r of e){let i=0;for(const o of e)r!==o&&(n.set(o,i),i+=o.length);t.push(n.slice(0,i))}return t}const X4=new Map([["top",Uf],["right",Gf],["bottom",Hf],["left",Yf],["top-left",ro(Uf,Yf)],["top-right",ro(Uf,Gf)],["bottom-left",ro(Hf,Yf)],["bottom-right",ro(Hf,Gf)],["top-empty",Z4],["right-empty",e7],["bottom-empty",Q4],["left-empty",J4],["empty",t7]]);function V4(e){if(e==null)return null;const t=X4.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid facet anchor: ${e}`)}const Ld=new WeakMap;function as(e){let t=Ld.get(e);return t||Ld.set(e,t=new kn(me(e,(n,r)=>[n,r]))),t}function yn(e,t){return as(e).get(t)}function K4(e,t,n){return t=zt(t),n=zt(n),e.find(r=>Object.is(zt(r.x),t)&&Object.is(zt(r.y),n))}function Ga(e,t,n){var r;return(r=K4(e,t,n))==null?void 0:r.empty}function Uf(e,{y:t},{y:n}){return t?yn(t,n)===0:!0}function Hf(e,{y:t},{y:n}){return t?yn(t,n)===t.length-1:!0}function Yf(e,{x:t},{x:n}){return t?yn(t,n)===0:!0}function Gf(e,{x:t},{x:n}){return t?yn(t,n)===t.length-1:!0}function Z4(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const o=yn(t,r);if(o>0)return Ga(e,n,t[o-1])}function Q4(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const o=yn(t,r);if(o<t.length-1)return Ga(e,n,t[o+1])}function J4(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const o=yn(t,n);if(o>0)return Ga(e,t[o-1],r)}function e7(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const o=yn(t,n);if(o<t.length-1)return Ga(e,t[o+1],r)}function t7(e,t,{empty:n}){return n}function ro(e,t){return function(){return e.apply(null,arguments)&&t.apply(null,arguments)}}function Wf(e,{channels:{fx:t,fy:n},groups:r}){return t&&n?e.map(({x:i,y:o})=>{var a;return((a=r.get(i))==null?void 0:a.get(o))??[]}):t?e.map(({x:i})=>r.get(i)??[]):e.map(({y:i})=>r.get(i)??[])}const N1=Math.PI,Lt=2*N1,Xf=.618;function n7({projection:e,inset:t=0,insetTop:n=t,insetRight:r=t,insetBottom:i=t,insetLeft:o=t}={},a){if(e==null)return;if(typeof e.stream=="function")return e;let f,u,s="frame";if(mn(e)){let T;if({type:e,domain:u,inset:T,insetTop:n=T!==void 0?T:n,insetRight:r=T!==void 0?T:r,insetBottom:i=T!==void 0?T:i,insetLeft:o=T!==void 0?T:o,clip:s=s,...f}=e,e==null)return}typeof e!="function"&&({type:e}=fs(e));const{width:c,height:l,marginLeft:d,marginRight:h,marginTop:p,marginBottom:g}=a,m=c-d-h-o-r,y=l-p-g-n-i;if(e=e==null?void 0:e({width:m,height:y,clip:s,...f}),e==null)return;s=r7(s,d,p,c-h,l-g);let b=d+o,w=p+n,v;if(u!=null){const[[T,_],[E,C]]=Ma(e).bounds(u),k=Math.min(m/(E-T),y/(C-_));k>0?(b-=(k*(T+E)-m)/2,w-=(k*(_+C)-y)/2,v=Hu({point(R,$){this.stream.point(R*k+b,$*k+w)}})):an("Warning: the projection could not be fit to the specified domain; using the default scale.")}return v??(v=b===0&&w===0?L1():Hu({point(T,_){this.stream.point(T+b,_+w)}})),{stream:T=>e.stream(v.stream(s(T)))}}function fs(e){switch(`${e}`.toLowerCase()){case"albers-usa":return et(S3,.7463,.4673);case"albers":return io(sp,.7463,.4673);case"azimuthal-equal-area":return et(M3,4,4);case"azimuthal-equidistant":return et($3,Lt,Lt);case"conic-conformal":return io(C3,Lt,Lt);case"conic-equal-area":return io(Yo,6.1702,2.9781);case"conic-equidistant":return io(L3,7.312,3.6282);case"equal-earth":return et(I3,5.4133,2.6347);case"equirectangular":return et(k3,Lt,N1);case"gnomonic":return et(R3,3.4641,3.4641);case"identity":return{type:L1};case"reflect-y":return{type:i7};case"mercator":return et(E3,Lt,Lt);case"orthographic":return et(O3,2,2);case"stereographic":return et(P3,2,2);case"transverse-mercator":return et(F3,Lt,Lt);default:throw new Error(`unknown projection type: ${e}`)}}function r7(e,t,n,r,i){if(e===!1||e==null||typeof e=="number")return o=>o;switch(e===!0&&(e="frame"),`${e}`.toLowerCase()){case"frame":return W0(t,n,r,i);default:throw new Error(`unknown projection clip type: ${e}`)}}function et(e,t,n){return{type:({width:r,height:i,rotate:o,precision:a=.15,clip:f})=>{var s,c,l;const u=e();return a!=null&&((s=u.precision)==null||s.call(u,a)),o!=null&&((c=u.rotate)==null||c.call(u,o)),typeof f=="number"&&((l=u.clipAngle)==null||l.call(u,f)),r!=null&&(u.scale(Math.min(r/t,i/n)),u.translate([r/2,i/2])),u},aspectRatio:n/t}}function io(e,t,n){const{type:r,aspectRatio:i}=et(e,t,n);return{type:o=>{const{parallels:a,domain:f,width:u,height:s}=o,c=r(o);return a!=null&&(c.parallels(a),f===void 0&&u!=null&&c.fitSize([u,s],{type:"Sphere"})),c},aspectRatio:i}}const L1=jt({stream:e=>e}),i7=jt(Hu({point(e,t){this.stream.point(e,-t)}}));function o7(e,t,n,r){const i=n[e],o=n[t],a=i.length,f=n[e]=new Float64Array(a).fill(NaN),u=n[t]=new Float64Array(a).fill(NaN);let s;const c=r.stream({point(l,d){f[s]=l,u[s]=d}});for(s=0;s<a;++s)c.point(i[s],o[s])}function a7({projection:e}={}){return e==null?!1:typeof e.stream=="function"?!0:(mn(e)&&(e=e.type),e!=null)}function f7(e){if(typeof(e==null?void 0:e.stream)=="function")return Xf;if(mn(e)){let t,n;if({domain:t,type:e,...n}=e,t!=null&&e!=null){const r=typeof e=="string"?fs(e).type:e,[[i,o],[a,f]]=Ma(r({...n,width:100,height:100})).bounds(t),u=(f-o)/(a-i);return u&&isFinite(u)?u<.2?.2:u>5?5:u:Xf}}if(e!=null){if(typeof e!="function"){const{aspectRatio:t}=fs(e);if(t)return t}return Xf}}function u7(e){const t=[],n=[],r={scale:"x",value:t},i={scale:"y",value:n},o={point(a,f){t.push(a),n.push(f)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const a of e.value)Sn(a,o);return[r,i]}function bc(e={}){const{document:t=typeof window<"u"?window.document:void 0,clip:n}=e;return{document:t,clip:Qg(n)}}function Te(e,{document:t}){return er(va(e).call(t.documentElement))}const us=Symbol("unset");function yc(e){return(e.length===1?s7:c7)(e)}function s7(e){let t,n=us;return r=>(Object.is(n,r)||(n=r,t=e(r)),t)}function c7(e){let t,n;return(...r)=>(((n==null?void 0:n.length)!==r.length||n.some((i,o)=>!Object.is(i,r[o])))&&(n=r,t=e(...r)),t)}const l7=yc(e=>new Intl.NumberFormat(e));yc((e,t)=>new Intl.DateTimeFormat(e,{timeZone:"UTC",...t&&{month:t}}));yc((e,t)=>new Intl.DateTimeFormat(e,{timeZone:"UTC",...t&&{weekday:t}}));function d7(e="en-US"){const t=l7(e);return n=>n!=null&&!isNaN(n)?t.format(n):void 0}function h7(e){return X8(e,"Invalid Date")}function p7(e="en-US"){const t=d7(e);return n=>(n instanceof Date?h7:typeof n=="number"?t:De)(n)}const wr=p7(),je=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let m7=0;function D1(){return`plot-clip-${++m7}`}function g7(e,{title:t,href:n,ariaLabel:r,ariaDescription:i,ariaHidden:o,target:a,fill:f,fillOpacity:u,stroke:s,strokeWidth:c,strokeOpacity:l,strokeLinejoin:d,strokeLinecap:h,strokeMiterlimit:p,strokeDasharray:g,strokeDashoffset:m,opacity:y,mixBlendMode:b,imageFilter:w,paintOrder:v,pointerEvents:T,shapeRendering:_,channels:E},{ariaLabel:C,fill:k="currentColor",fillOpacity:R,stroke:$="none",strokeOpacity:S,strokeWidth:x,strokeLinecap:A,strokeLinejoin:M,strokeMiterlimit:N,paintOrder:L}){k===null&&(f=null,u=null),$===null&&(s=null,l=null),Ee(k)?!Ee($)&&(!Ee(f)||E!=null&&E.fill)&&($="none"):Ee($)&&(!Ee(s)||E!=null&&E.stroke)&&(k="none");const[B,H]=Qe(f,k),[O,j]=qe(u,R),[P,F]=Qe(s,$),[K,Z]=qe(l,S),[W,Y]=qe(y);pi(F)||(c===void 0&&(c=x),h===void 0&&(h=A),d===void 0&&(d=M),p===void 0&&!xx(d)&&(p=N),!pi(H)&&v===void 0&&(v=L));const[z,D]=qe(c);return k!==null&&(e.fill=Me(H,"currentColor"),e.fillOpacity=Ir(j,1)),$!==null&&(e.stroke=Me(F,"none"),e.strokeWidth=Ir(D,1),e.strokeOpacity=Ir(Z,1),e.strokeLinejoin=Me(d,"miter"),e.strokeLinecap=Me(h,"butt"),e.strokeMiterlimit=Ir(p,4),e.strokeDasharray=Me(g,"none"),e.strokeDashoffset=Me(m,"0")),e.target=De(a),e.ariaLabel=De(C),e.ariaDescription=De(i),e.ariaHidden=De(o),e.opacity=Ir(Y,1),e.mixBlendMode=Me(b,"normal"),e.imageFilter=Me(w,"none"),e.paintOrder=Me(v,"normal"),e.pointerEvents=Me(T,"auto"),e.shapeRendering=Me(_,"auto"),{title:{value:t,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:B,scale:"auto",optional:!0},fillOpacity:{value:O,scale:"auto",optional:!0},stroke:{value:P,scale:"auto",optional:!0},strokeOpacity:{value:K,scale:"auto",optional:!0},strokeWidth:{value:z,optional:!0},opacity:{value:W,scale:"auto",optional:!0}}}function b7(e,t){t&&e.filter(n=>Hs(t[n])).append("title").call(v7,t)}function y7(e,t){t&&e.filter(([n])=>Hs(t[n])).append("title").call(w7,t)}function v7(e,t){t&&e.text(n=>wr(t[n]))}function w7(e,t){t&&e.text(([n])=>wr(t[n]))}function Fn(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:o,fillOpacity:a,stroke:f,strokeOpacity:u,strokeWidth:s,opacity:c,href:l}){r&&Q(e,"aria-label",d=>r[d]),o&&Q(e,"fill",d=>o[d]),a&&Q(e,"fill-opacity",d=>a[d]),f&&Q(e,"stroke",d=>f[d]),u&&Q(e,"stroke-opacity",d=>u[d]),s&&Q(e,"stroke-width",d=>s[d]),c&&Q(e,"opacity",d=>c[d]),l&&P1(e,d=>l[d],t),n||b7(e,i)}function I1(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:o,fillOpacity:a,stroke:f,strokeOpacity:u,strokeWidth:s,opacity:c,href:l}){r&&Q(e,"aria-label",([d])=>r[d]),o&&Q(e,"fill",([d])=>o[d]),a&&Q(e,"fill-opacity",([d])=>a[d]),f&&Q(e,"stroke",([d])=>f[d]),u&&Q(e,"stroke-opacity",([d])=>u[d]),s&&Q(e,"stroke-width",([d])=>s[d]),c&&Q(e,"opacity",([d])=>c[d]),l&&P1(e,([d])=>l[d],t),n||y7(e,i)}function _7({ariaLabel:e,title:t,fill:n,fillOpacity:r,stroke:i,strokeOpacity:o,strokeWidth:a,opacity:f,href:u},{tip:s}){return[e,s?void 0:t,n,r,i,o,a,f,u].filter(c=>c!==void 0)}function x7(e,t,n){const r=ba(e,i=>t[i]);return n===void 0&&r.size>1+e.length>>1&&an("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),r.values()}function*R1(e,t,n,r){const{z:i}=n,{z:o}=r,a=_7(r,n),f=[...t,...a];for(const u of o?x7(e,o,i):[e]){let s,c;e:for(const l of u){for(const d of f)if(!cn(d[l])){c&&c.push(-1);continue e}if(s===void 0){c&&(yield c),s=a.map(d=>zt(d[l])),c=[l];continue}c.push(l);for(let d=0;d<a.length;++d)if(zt(a[d][l])!==s[d]){yield c,s=a.map(p=>zt(p[l])),c=[l];continue e}}c&&(yield c)}}function T7(e,t,n,r){let i;const{clip:o=r.clip}=t;switch(o){case"frame":{e=Te("svg:g",r).each(function(){this.appendChild(e.node()),e.node=()=>this}),i=S7(r,n);break}case"sphere":{i=M7(r);break}}Q(e,"aria-label",t.ariaLabel),Q(e,"aria-description",t.ariaDescription),Q(e,"aria-hidden",t.ariaHidden),Q(e,"clip-path",i)}function O1(e){const t=new WeakMap;return(n,r)=>{let i=t.get(n);if(!i){const o=D1();er(n.ownerSVGElement).append("clipPath").attr("id",o).call(e,n,r),t.set(n,i=`url(#${o})`)}return i}}const S7=O1((e,t,n)=>{const{width:r,height:i,marginLeft:o,marginRight:a,marginTop:f,marginBottom:u}=n;e.append("rect").attr("x",o).attr("y",f).attr("width",r-a-o).attr("height",i-f-u)}),M7=O1((e,t)=>{const{projection:n}=t;if(!n)throw new Error('the "sphere" clip option requires a projection');e.append("path").attr("d",Ma(n)({type:"Sphere"}))});function Xt(e,t,n,r){T7(e,t,n,r),Q(e,"class",t.className),Q(e,"fill",t.fill),Q(e,"fill-opacity",t.fillOpacity),Q(e,"stroke",t.stroke),Q(e,"stroke-width",t.strokeWidth),Q(e,"stroke-opacity",t.strokeOpacity),Q(e,"stroke-linejoin",t.strokeLinejoin),Q(e,"stroke-linecap",t.strokeLinecap),Q(e,"stroke-miterlimit",t.strokeMiterlimit),Q(e,"stroke-dasharray",t.strokeDasharray),Q(e,"stroke-dashoffset",t.strokeDashoffset),Q(e,"shape-rendering",t.shapeRendering),Q(e,"filter",t.imageFilter),Q(e,"paint-order",t.paintOrder);const{pointerEvents:i=r.pointerSticky===!1?"none":void 0}=t;Q(e,"pointer-events",i)}function Mt(e,t){$7(e,"mix-blend-mode",t.mixBlendMode),Q(e,"opacity",t.opacity)}function P1(e,t,n){e.each(function(r){const i=t(r);if(i!=null){const o=this.ownerDocument.createElementNS(or.svg,"a");o.setAttribute("fill","inherit"),o.setAttributeNS(or.xlink,"href",i),n!=null&&o.setAttribute("target",n),this.parentNode.insertBefore(o,this).appendChild(this)}})}function Q(e,t,n){n!=null&&e.attr(t,n)}function $7(e,t,n){n!=null&&e.style(t,n)}function Vt(e,t,{x:n,y:r},i=je,o=je){i+=t.dx,o+=t.dy,n!=null&&n.bandwidth&&(i+=n.bandwidth()/2),r!=null&&r.bandwidth&&(o+=r.bandwidth()/2),(i||o)&&e.attr("transform",`translate(${i},${o})`)}function Me(e,t){if((e=De(e))!==t)return e}function Ir(e,t){if((e=Ce(e))!==t)return e}const E7=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function Wa(e){if(e===void 0)return"plot-d6a7b5";if(e=`${e}`,!E7.test(e))throw new Error(`invalid class name: ${e}`);return e}function vc(e,t){if(typeof t=="string")e.property("style",t);else if(t!=null)for(const n of e)Object.assign(n.style,t)}function Xa({frameAnchor:e},{width:t,height:n,marginTop:r,marginRight:i,marginBottom:o,marginLeft:a}){return[/left$/.test(e)?a:/right$/.test(e)?t-i:(a+t-i)/2,/^top/.test(e)?r:/^bottom/.test(e)?n-o:(r+n-o)/2]}class Je{constructor(t,n={},r={},i){const{facet:o="auto",facetAnchor:a,fx:f,fy:u,sort:s,dx:c=0,dy:l=0,margin:d=0,marginTop:h=d,marginRight:p=d,marginBottom:g=d,marginLeft:m=d,className:y,clip:b=i==null?void 0:i.clip,channels:w,tip:v,render:T}=r;if(this.data=t,this.sort=br(s)?s:null,this.initializer=yr(r).initializer,this.transform=this.initializer?r.transform:qi(r).transform,o===null||o===!1?this.facet=null:(this.facet=ct(o===!0?"include":o,"facet",["auto","include","exclude","super"]),this.fx=t===xo&&typeof f=="string"?[f]:f,this.fy=t===xo&&typeof u=="string"?[u]:u),this.facetAnchor=V4(a),n=Zg(n),w!==void 0&&(n={...A7(w),...n}),i!==void 0&&(n={...g7(this,r,i),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([_,E])=>{if(ja(E.value)){const{value:C,label:k=E.label,scale:R=E.scale}=E.value;E={...E,label:k,scale:R,value:C}}if(t===xo&&typeof E.value=="string"){const{value:C}=E;E={...E,value:[C]}}return[_,E]}).filter(([_,{value:E,optional:C}])=>{if(E!=null)return!0;if(C)return!1;throw new Error(`missing channel value: ${_}`)})),this.dx=+c,this.dy=+l,this.marginTop=+h,this.marginRight=+p,this.marginBottom=+g,this.marginLeft=+m,this.clip=Qg(b),this.tip=C7(v),this.className=y?Wa(y):null,this.facet==="super"){if(f||u)throw new Error("super-faceting cannot use fx or fy");for(const _ in this.channels){const{scale:E}=n[_];if(!(E!=="x"&&E!=="y"))throw new Error("super-faceting cannot use x or y")}}T!=null&&(this.render=ua(T,this.render))}initialize(t,n,r){let i=gr(this.data);t===void 0&&i!=null&&(t=[Gt(i)]);const o=t;this.transform!=null&&({facets:t,data:i}=this.transform(i,t,r),i=gr(i)),t!==void 0&&(t.original=o);const a=Xx(this.channels,i);return this.sort!=null&&Kx(i,t,a,n,this.sort),{data:i,facets:t,channels:a}}filter(t,n,r){for(const i in n){const{filter:o=cn}=n[i];if(o!==null){const a=r[i];t=t.filter(f=>o(a[f]))}}return t}project(t,n,r){for(const i in t)if(t[i].scale==="x"&&/^x|x$/.test(i)){const o=i.replace(/^x|x$/,"y");o in t&&t[o].scale==="y"&&o7(i,o,n,r.projection)}}scale(t,n,r){const i=Vx(t,n);return r.projection&&this.project(t,i,r),i}}function Un(...e){return e.plot=Je.prototype.plot,e}function ua(e,t){if(e==null)return t===null?void 0:t;if(t==null)return e===null?void 0:e;if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);return function(n,r,i,o,a,f){return e.call(this,n,r,i,o,a,(u,s,c,l,d)=>t.call(this,u,s,c,l,d,f))}}function A7(e){return Object.fromEntries(Object.entries(Zg(e)).map(([t,n])=>(n=typeof n=="string"?{value:n,label:t}:$r(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[t,n])))}function C7(e){return e===!0?"xy":e===!1||e==null?null:typeof e=="string"?ct(e,"tip",["x","y","xy"]):e}function Bi(e,t){return(e==null?void 0:e.tip)===!0?{...e,tip:t}:mn(e==null?void 0:e.tip)&&e.tip.pointer===void 0?{...e,tip:{...e.tip,pointer:t}}:e}function k7(e,t,n={}){let r=.5-je,i=.5+je,o=.5+je,a=.5-je;for(const{marginTop:g,marginRight:m,marginBottom:y,marginLeft:b}of t)g>r&&(r=g),m>i&&(i=m),y>o&&(o=y),b>a&&(a=b);let{margin:f,marginTop:u=f!==void 0?f:r,marginRight:s=f!==void 0?f:i,marginBottom:c=f!==void 0?f:o,marginLeft:l=f!==void 0?f:a}=n;u=+u,s=+s,c=+c,l=+l;let{width:d=640,height:h=N7(e,n,{width:d,marginTopDefault:r,marginRightDefault:i,marginBottomDefault:o,marginLeftDefault:a})+Math.max(0,u-r+c-o)}=n;d=+d,h=+h;const p={width:d,height:h,marginTop:u,marginRight:s,marginBottom:c,marginLeft:l};if(e.fx||e.fy){let{margin:g,marginTop:m=g!==void 0?g:u,marginRight:y=g!==void 0?g:s,marginBottom:b=g!==void 0?g:c,marginLeft:w=g!==void 0?g:l}=n.facet??{};m=+m,y=+y,b=+b,w=+w,p.facet={marginTop:m,marginRight:y,marginBottom:b,marginLeft:w}}return p}function N7({x:e,y:t,fy:n,fx:r},{projection:i,aspectRatio:o},{width:a,marginTopDefault:f,marginRightDefault:u,marginBottomDefault:s,marginLeftDefault:c}){const l=n&&n.scale.domain().length||1,d=f7(i);if(d){const p=r?r.scale.domain().length:1,g=(1.1*l-.1)/(1.1*p-.1)*d,m=Math.max(.1,Math.min(10,g));return Math.round((a-c-u)*m+f+s)}const h=t?Bn(t)?t.scale.domain().length||1:Math.max(7,17/l):1;if(o!=null){if(o=+o,!(isFinite(o)&&o>0))throw new Error(`invalid aspectRatio: ${o}`);const p=Dd("y",t)/(Dd("x",e)*o),g=r?r.scale.bandwidth():1,m=n?n.scale.bandwidth():1,y=g*(a-c-u)-e.insetLeft-e.insetRight;return(p*y+t.insetTop+t.insetBottom)/m+f+s}return!!(t||n)*Math.max(1,Math.min(60,h*l))*20+!!r*30+60}function Dd(e,t){if(!t)throw new Error(`aspectRatio requires ${e} scale`);const{type:n,domain:r}=t;let i;switch(n){case"linear":case"utc":case"time":i=Number;break;case"pow":{const f=t.scale.exponent();i=u=>Math.pow(u,f);break}case"log":i=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${e} scale for aspectRatio: ${n}`)}const[o,a]=Ge(r);return Math.abs(i(a)-i(o))}const Id=new WeakMap;function wc(e,t,{x:n,y:r,px:i,py:o,maxRadius:a=40,channels:f,render:u,...s}={}){return a=+a,i!=null&&(n??(n=null),f={...f,px:{value:i,scale:"x"}}),o!=null&&(r??(r=null),f={...f,py:{value:o,scale:"y"}}),{x:n,y:r,channels:f,...s,render:ua(function(c,l,d,h,p,g){p={...p,pointerSticky:!1};const m=p.ownerSVGElement,{data:y}=p.getMarkState(this);let b=Id.get(m);b||Id.set(m,b={sticky:!1,roots:[],renders:[]});let w=b.renders.push(F)-1;const{x:v,y:T,fx:_,fy:E}=l;let C=_?_(c.fx)-h.marginLeft:0,k=E?E(c.fy)-h.marginTop:0;v!=null&&v.bandwidth&&(C+=v.bandwidth()/2),T!=null&&T.bandwidth&&(k+=T.bandwidth()/2);const R=c.fi!=null;let $;if(R){let Y=b.facetStates;Y||(b.facetStates=Y=new Map),$=Y.get(this),$||Y.set(this,$=new Map)}const[S,x]=Xa(this,h),{px:A,py:M}=d,N=A?Y=>A[Y]:F1(d,S),L=M?Y=>M[Y]:q1(d,x);let B,H,O,j;function P(Y,z){if(R)if(j&&(j=cancelAnimationFrame(j)),Y==null)$.delete(c.fi);else{$.set(c.fi,z),j=requestAnimationFrame(()=>{j=null;for(const[D,U]of $)if(U<z||U===z&&D<c.fi){Y=null;break}F(Y)});return}F(Y)}function F(Y){if(B===Y&&O===b.sticky)return;B=Y,O=p.pointerSticky=b.sticky;const z=B==null?[]:[B];R&&(z.fx=c.fx,z.fy=c.fy,z.fi=c.fi);const D=g(z,l,d,h,p);if(H){if(R){const U=H.parentNode,G=H.getAttribute("transform"),I=D.getAttribute("transform");G?D.setAttribute("transform",G):D.removeAttribute("transform"),I?U.setAttribute("transform",I):U.removeAttribute("transform"),D.removeAttribute("aria-label"),D.removeAttribute("aria-description"),D.removeAttribute("aria-hidden")}H.replaceWith(D)}if(b.roots[w]=H=D,!(B==null&&($==null?void 0:$.size)>1)){const U=B==null?null:pn(y)?y[B]:y.get(B);p.dispatchValue(U)}return D}function K(Y){if(b.sticky||Y.pointerType==="mouse"&&Y.buttons===1)return;let[z,D]=zw(Y);z-=C,D-=k;const U=z<h.marginLeft||z>h.width-h.marginRight?1:e,G=D<h.marginTop||D>h.height-h.marginBottom?1:t;let I=null,ie=a*a;for(const V of c){const oe=U*(N(V)-z),ae=G*(L(V)-D),ce=oe*oe+ae*ae;ce<=ie&&(I=V,ie=ce)}if(I!=null&&(e!==1||t!==1)){const V=N(I)-z,oe=L(I)-D;ie=V*V+oe*oe}P(I,ie)}function Z(Y){Y.pointerType==="mouse"&&B!=null&&(b.sticky&&b.roots.some(z=>z==null?void 0:z.contains(Y.target))||(b.sticky?(b.sticky=!1,b.renders.forEach(z=>z(null))):(b.sticky=!0,F(B)),Y.stopImmediatePropagation()))}function W(Y){Y.pointerType==="mouse"&&(b.sticky||P(null))}return m.addEventListener("pointerenter",K),m.addEventListener("pointermove",K),m.addEventListener("pointerdown",Z),m.addEventListener("pointerleave",W),F(null)},u)}}function L7(e){return wc(1,1,e)}function D7(e){return wc(1,.01,e)}function Rd(e){return wc(.01,1,e)}function F1({x1:e,x2:t,x:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function q1({y1:e,y2:t,y:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function j1(e){return Bn(e)&&e.interval===void 0?void 0:"tabular-nums"}function I7(e,t){let{label:n=e.label,tickSize:r=6,width:i=240,height:o=44+r,marginTop:a=18,marginRight:f=0,marginBottom:u=16+r,marginLeft:s=0,style:c,ticks:l=(i-s-f)/64,tickFormat:d,fontVariant:h=j1(e),round:p=!0,opacity:g,className:m}=t;const y=bc(t);m=Wa(m),g=qe(g)[1],d===null&&(d=()=>null);const b=Te("svg",y).attr("class",`${m}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",o).attr("viewBox",`0 0 ${i} ${o}`).call(S=>S.append("style").text(`:where(.${m}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${m}-ramp text) {
  white-space: pre;
}`)).call(vc,c);let w=S=>S.selectAll(".tick line").attr("y1",a+u-o),v;const T=p?(S,x)=>S.rangeRound(x):(S,x)=>S.range(x),{type:_,domain:E,range:C,interpolate:k,scale:R,pivot:$}=e;if(k){const S=C===void 0?k:xa(k.length===1?pc(k):k,C);v=T(R.copy(),ot($e(s,i-f),Math.min(E.length+($!==void 0),C===void 0?1/0:C.length)));const x=256,A=y.document.createElement("canvas");A.width=x,A.height=1;const M=A.getContext("2d");for(let N=0,L=x-1;N<x;++N)M.fillStyle=S(N/L),M.fillRect(N,0,1,1);b.append("image").attr("opacity",g).attr("x",s).attr("y",a).attr("width",i-s-f).attr("height",o-a-u).attr("preserveAspectRatio","none").attr("xlink:href",A.toDataURL())}else if(_==="threshold"){const S=E,x=d===void 0?A=>A:typeof d=="string"?Tr(d):d;v=T(Is().domain([-1,C.length-1]),[s,i-f]),b.append("g").attr("fill-opacity",g).selectAll().data(C).enter().append("rect").attr("x",(A,M)=>v(M-1)).attr("y",a).attr("width",(A,M)=>v(M)-v(M-1)).attr("height",o-a-u).attr("fill",A=>A),l=me(S,(A,M)=>M),d=A=>x(S[A],A)}else v=T(Ca().domain(E),[s,i-f]),b.append("g").attr("fill-opacity",g).selectAll().data(E).enter().append("rect").attr("x",v).attr("y",a).attr("width",Math.max(0,v.bandwidth()-1)).attr("height",o-a-u).attr("fill",R),w=()=>{};return b.append("g").attr("transform",`translate(0,${o-u})`).call(iv(v).ticks(Array.isArray(l)?null:l,typeof d=="string"?d:void 0).tickFormat(typeof d=="function"?d:void 0).tickSize(r).tickValues(Array.isArray(l)?l:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",Me(h,"normal")).call(w).call(S=>S.select(".domain").remove()),n!==void 0&&b.append("text").attr("x",s).attr("y",a-6).attr("fill","currentColor").attr("font-weight","bold").text(n),b.node()}const z1=Math.PI/180;function _c(e,{marker:t,markerStart:n=t,markerMid:r=t,markerEnd:i=t}={}){e.markerStart=Vf(n),e.markerMid=Vf(r),e.markerEnd=Vf(i)}function Vf(e){if(e==null||e===!1)return null;if(e===!0)return Pd;if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"none":return null;case"arrow":return Od("auto");case"arrow-reverse":return Od("auto-start-reverse");case"dot":return R7;case"circle":case"circle-fill":return Pd;case"circle-stroke":return O7;case"tick":return Kf("auto");case"tick-x":return Kf(90);case"tick-y":return Kf(0)}throw new Error(`invalid marker: ${e}`)}function Od(e){return(t,n)=>Te("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",e).attr("fill","none").attr("stroke",t).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(r=>r.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function R7(e,t){return Te("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function Pd(e,t){return Te("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function O7(e,t){return Te("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",e).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function Kf(e){return(t,n)=>Te("svg:marker",n).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",e).attr("stroke",t).call(r=>r.append("path").attr("d","M0,-3v6")).node()}let P7=0;function B1(e,t,{stroke:n},r){return H1(e,t,n&&(i=>n[i]),null,r)}function F7(e,t,{stroke:n,z:r},i){return H1(e,t,n&&(([o])=>n[o]),r,i)}const ss=1,U1=2;function q7(e,t){const n=new Uint8Array(t.length),r=e.data().filter(o=>o.length>1),i=r.length;for(let o=0,a=us;o<i;++o){const f=r[o];if(f.length>1){const u=f[0];a!==(a=zt(t[u]))&&(n[u]|=ss)}}for(let o=i-1,a=us;o>=0;--o){const f=r[o];if(f.length>1){const u=f[0];a!==(a=zt(t[u]))&&(n[u]|=U1)}}return([o])=>n[o]}function H1(e,{markerStart:t,markerMid:n,markerEnd:r,stroke:i},o=()=>i,a,f){if(!t&&!n&&!r)return;const u=new Map,s=a&&q7(e,a);function c(l,d,h){return function(p){if(h&&!h(p))return;const g=o(p);let m=u.get(d);m||u.set(d,m=new Map);let y=m.get(g);if(!y){const b=this.parentNode.insertBefore(d(g,f),this),w=`plot-marker-${++P7}`;b.setAttribute("id",w),m.set(g,y=`url(#${w})`)}this.setAttribute(l,y)}}t&&e.each(c("marker-start",t,s&&(l=>s(l)&ss))),n&&s&&e.each(c("marker-start",n,l=>!(s(l)&ss))),n&&e.each(c("marker-mid",n)),r&&e.each(c("marker-end",r,s&&(l=>s(l)&U1)))}function Va({inset:e,insetLeft:t,insetRight:n,...r}={}){return[t,n]=G1(e,t,n),{inset:e,insetLeft:t,insetRight:n,...r}}function Y1({inset:e,insetTop:t,insetBottom:n,...r}={}){return[t,n]=G1(e,t,n),{inset:e,insetTop:t,insetBottom:n,...r}}function G1(e,t,n){return e===void 0&&t===void 0&&n===void 0?je?[1,0]:[.5,.5]:[t,n]}function W1(e,{interval:t}){return e={...$r(e)},e.interval=nc(e.interval===void 0?t:e.interval),e}function xc(e,t,n,r){const{[e]:i,[`${e}1`]:o,[`${e}2`]:a}=n,{value:f,interval:u}=W1(i,n);if(f==null||u==null&&!r)return n;const s=gn(i);if(u==null){let h;const p={transform:g=>h||(h=le(g,f)),label:s};return{...n,[e]:void 0,[`${e}1`]:o===void 0?p:o,[`${e}2`]:a===void 0&&!(o===a&&r)?p:a}}let c,l;function d(h){return l!==void 0&&h===c?l:l=me(le(c=h,f),p=>u.floor(p))}return t({...n,[e]:void 0,[`${e}1`]:o===void 0?{transform:d,label:s}:o,[`${e}2`]:a===void 0?{transform:h=>d(h).map(p=>u.offset(p)),label:s}:a})}function X1(e,t,n){const{[e]:r}=n,{value:i,interval:o}=W1(r,n);return i==null||o==null?n:t({...n,[e]:{label:gn(r),transform:a=>{const f=me(le(a,i),s=>o.floor(s)),u=f.map(s=>o.offset(s));return f.map(Fe(f)?(s,c)=>s==null||isNaN(s=+s)||(c=u[c],c==null)||isNaN(c=+c)?void 0:new Date((s+c)/2):(s,c)=>s==null||(c=u[c],c==null)?NaN:(+s+ +c)/2)}}})}function j7(e={}){return xc("x",Va,e,!0)}function z7(e={}){return xc("x",Va,e)}function B7(e={}){return xc("y",Y1,e)}function U7(e={}){return X1("x",Va,e)}function H7(e={}){return X1("y",Y1,e)}const V1={ariaLabel:"rule",fill:null,stroke:"currentColor"};class Y7 extends Je{constructor(t,n={}){const{x:r,y1:i,y2:o,inset:a=0,insetTop:f=a,insetBottom:u=a}=n;super(t,{x:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:o,scale:"y",optional:!0}},Bi(n,"x"),V1),this.insetTop=Ce(f),this.insetBottom=Ce(u),_c(this,n)}render(t,n,r,i,o){const{x:a,y:f}=n,{x:u,y1:s,y2:c}=r,{width:l,height:d,marginTop:h,marginRight:p,marginLeft:g,marginBottom:m}=i,{insetTop:y,insetBottom:b}=this;return Te("svg:g",o).call(Xt,this,i,o).call(Vt,this,{x:u&&a},je,0).call(w=>w.selectAll().data(t).enter().append("line").call(Mt,this).attr("x1",u?v=>u[v]:(g+l-p)/2).attr("x2",u?v=>u[v]:(g+l-p)/2).attr("y1",s&&!vr(f)?v=>s[v]+y:h+y).attr("y2",c&&!vr(f)?f.bandwidth?v=>c[v]+f.bandwidth()-b:v=>c[v]-b:d-m-b).call(Fn,this,r).call(B1,this,r,o)).node()}}class G7 extends Je{constructor(t,n={}){const{x1:r,x2:i,y:o,inset:a=0,insetRight:f=a,insetLeft:u=a}=n;super(t,{y:{value:o,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},Bi(n,"y"),V1),this.insetRight=Ce(f),this.insetLeft=Ce(u),_c(this,n)}render(t,n,r,i,o){const{x:a,y:f}=n,{y:u,x1:s,x2:c}=r,{width:l,height:d,marginTop:h,marginRight:p,marginLeft:g,marginBottom:m}=i,{insetLeft:y,insetRight:b}=this;return Te("svg:g",o).call(Xt,this,i,o).call(Vt,this,{y:u&&f},0,je).call(w=>w.selectAll().data(t).enter().append("line").call(Mt,this).attr("x1",s&&!vr(a)?v=>s[v]+y:g+y).attr("x2",c&&!vr(a)?a.bandwidth?v=>c[v]+a.bandwidth()-b:v=>c[v]-b:l-p-b).attr("y1",u?v=>u[v]:(h+d-m)/2).attr("y2",u?v=>u[v]:(h+d-m)/2).call(Fn,this,r).call(B1,this,r,o)).node()}}function K1(e,t){let{x:n=xe,y:r,y1:i,y2:o,...a}=B7(t);return[i,o]=Z1(r,i,o),new Y7(e,{...a,x:n,y1:i,y2:o})}function Ka(e,t){let{y:n=xe,x:r,x1:i,x2:o,...a}=z7(t);return[i,o]=Z1(r,i,o),new G7(e,{...a,y:n,x1:i,x2:o})}function Z1(e,t,n){if(e==null){if(t===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,t]}else{if(t===void 0)return n===void 0?[0,e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}function Q1(e,...t){let n=t.length;for(let r=0,i=!0;r<n;++r)typeof t[r]!="function"&&(i&&(e=e.slice(),i=!1),e.splice(r,2,e[r]+t[r]+e[r+1]),t.splice(r,1),--r,--n);return r=>{let i=e[0];for(let o=0;o<n;++o)i+=t[o](r)+e[o+1];return i}}const W7={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},J1="­";class Tc extends Je{constructor(t,n={}){const{x:r,y:i,text:o=bn(t)&&Kg(t)?xe:Ri,frameAnchor:a,textAnchor:f=/right$/i.test(a)?"end":/left$/i.test(a)?"start":"middle",lineAnchor:u=/^top/i.test(a)?"top":/^bottom/i.test(a)?"bottom":"middle",lineHeight:s=1,lineWidth:c=1/0,textOverflow:l,monospace:d,fontFamily:h=d?"ui-monospace, monospace":void 0,fontSize:p,fontStyle:g,fontVariant:m,fontWeight:y,rotate:b}=n,[w,v]=qe(b,0),[T,_]=Q7(p);if(super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:T,optional:!0},rotate:{value:gx(w),optional:!0},text:{value:o,filter:Hs,optional:!0}},n,W7),this.rotate=v,this.textAnchor=Me(f,"middle"),this.lineAnchor=ct(u,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+s,this.lineWidth=+c,this.textOverflow=eb(l),this.monospace=!!d,this.fontFamily=De(h),this.fontSize=_,this.fontStyle=De(g),this.fontVariant=De(m),this.fontWeight=De(y),this.frameAnchor=rc(a),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${c}`);this.splitLines=ib(this),this.clipLine=ob(this)}render(t,n,r,i,o){const{x:a,y:f}=n,{x:u,y:s,rotate:c,text:l,title:d,fontSize:h}=r,{rotate:p}=this,[g,m]=Xa(this,i);return Te("svg:g",o).call(Xt,this,i,o).call(rb,this,l,i).call(Vt,this,{x:u&&a,y:s&&f}).call(y=>y.selectAll().data(t).enter().append("text").call(Mt,this).call(X7,this,l,d).attr("transform",Q1`translate(${u?b=>u[b]:g},${s?b=>s[b]:m})${c?b=>` rotate(${c[b]})`:p?` rotate(${p})`:""}`).call(Q,"font-size",h&&(b=>h[b])).call(Fn,this,r)).node()}}function eb(e){return e==null?null:ct(e,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function X7(e,t,n,r){if(!n)return;const{lineAnchor:i,lineHeight:o,textOverflow:a,splitLines:f,clipLine:u}=t;e.each(function(s){const c=f(wr(n[s])??"").map(u),l=c.length,d=i==="top"?.71:i==="bottom"?1-l:(164-l*100)/200;if(l>1){let h=0;for(let p=0;p<l;++p){if(++h,!c[p])continue;const g=this.ownerDocument.createElementNS(or.svg,"tspan");g.setAttribute("x",0),p===h-1?g.setAttribute("y",`${(d+p)*o}em`):g.setAttribute("dy",`${h*o}em`),g.textContent=c[p],this.appendChild(g),h=0}}else d&&this.setAttribute("y",`${d*o}em`),this.textContent=c[0];if(a&&!r&&c[0]!==n[s]){const h=this.ownerDocument.createElementNS(or.svg,"title");h.textContent=n[s],this.appendChild(h)}})}function tb(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Js(t,n)),new Tc(e,{...r,x:t,y:n})}function nb(e,{x:t=xe,...n}={}){return new Tc(e,H7({...n,x:t}))}function V7(e,{y:t=xe,...n}={}){return new Tc(e,U7({...n,y:t}))}function rb(e,t,n){Q(e,"text-anchor",t.textAnchor),Q(e,"font-family",t.fontFamily),Q(e,"font-size",t.fontSize),Q(e,"font-style",t.fontStyle),Q(e,"font-variant",t.fontVariant===void 0?K7(n):t.fontVariant),Q(e,"font-weight",t.fontWeight)}function K7(e){return e&&(vx(e)||Fe(e))?"tabular-nums":void 0}const Z7=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function Q7(e){return e==null||typeof e=="number"?[void 0,e]:typeof e!="string"?[e,void 0]:(e=e.trim().toLowerCase(),Z7.has(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(e)?[void 0,e]:[e,void 0])}function J7(e,t,n){const r=[];let i,o=0;for(const[a,f,u]of e9(e)){if(i===void 0&&(i=a),o>i&&n(e,i,f)>t&&(r.push(e.slice(i,o)+(e[o-1]===J1?"-":"")),i=a),u){r.push(e.slice(i,f)),i=void 0;continue}o=f}return r}function*e9(e){let t=0,n=0;const r=e.length;for(;n<r;){let i=1;switch(e[n]){case J1:case"-":++n,yield[t,n,!1],t=n;break;case" ":for(yield[t,n,!1];e[++n]===" ";);t=n;break;case"\r":e[n+1]===`
`&&++i;case`
`:yield[t,n,!0],n+=i,t=n;break;default:++n;break}}yield[t,n,!0]}const Fd={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"‘":31,"’":31,"“":47,"”":47,"…":82};function Sc(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=Er(e,i))r+=Fd[e[i]]??(fb(e,i)?120:Fd.e);return r}function Mc(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=Er(e,i))r+=fb(e,i)?126:63;return r}function ib({monospace:e,lineWidth:t,textOverflow:n}){if(n!=null||t==1/0)return o=>o.split(/\r\n?|\n/g);const r=e?Mc:Sc,i=t*100;return o=>J7(o,i,r)}function ob({monospace:e,lineWidth:t,textOverflow:n}){if(n==null||t==1/0)return o=>o;const r=e?Mc:Sc,i=t*100;switch(n){case"clip-start":return o=>jd(o,i,r,"");case"clip-end":return o=>qd(o,i,r,"");case"ellipsis-start":return o=>jd(o,i,r,rr);case"ellipsis-middle":return o=>t9(o,i,r,rr);case"ellipsis-end":return o=>qd(o,i,r,rr)}}const rr="…";function _r(e,t,n,r){const i=[];let o=0;for(let a=0,f=0,u=e.length;a<u;a=f){f=Er(e,a);const s=n(e,a,f);if(o+s>t){for(o+=r;o>t&&a>0;)f=a,a=i.pop(),o-=n(e,a,f);return[a,t-o]}o+=s,i.push(a)}return[-1,0]}function qd(e,t,n,r){e=e.trim();const i=n(r),[o]=_r(e,t,n,i);return o<0?e:e.slice(0,o).trimEnd()+r}function t9(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const o=n(r)/2,[a,f]=_r(e,t/2,n,o),[u]=_r(e,i-t/2-f+o,n,-o);return u<0?r:e.slice(0,a).trimEnd()+r+e.slice(Er(e,u)).trimStart()}function jd(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const o=n(r),[a]=_r(e,i-t+o,n,-o);return a<0?r:r+e.slice(Er(e,a)).trimStart()}const cs=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,zd=new RegExp("\\p{Extended_Pictographic}","uy");function Er(e,t){return t+=n9(e,t)?2:1,i9(e,t)&&(t=cs.lastIndex),r9(e,t)?Er(e,t+1):t}function ab(e,t){return e.charCodeAt(t)<128}function n9(e,t){const n=e.charCodeAt(t);if(n>=55296&&n<56320){const r=e.charCodeAt(t+1);return r>=56320&&r<57344}return!1}function r9(e,t){return e.charCodeAt(t)===8205}function i9(e,t){return ab(e,t)?!1:(cs.lastIndex=t,cs.test(e))}function fb(e,t){return ab(e,t)?!1:(zd.lastIndex=t,zd.test(e))}const o9={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},ub=3.5,a9=ub*5,sb={draw(e,t,n){const r=t*n/a9;e.moveTo(0,0),e.lineTo(0,-t),e.moveTo(-r,r-t),e.lineTo(0,-t),e.lineTo(r,r-t)}},f9={draw(e,t,n){e.moveTo(-n,0),e.lineTo(0,-t),e.lineTo(n,0)}},u9=new Map([["arrow",sb],["spike",f9]]);function s9(e){return e&&typeof e.draw=="function"}function c9(e){if(s9(e))return e;const t=u9.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid shape: ${e}`)}class cb extends Je{constructor(t,n={}){const{x:r,y:i,r:o=ub,length:a,rotate:f,shape:u=sb,anchor:s="middle",frameAnchor:c}=n,[l,d]=qe(a,12),[h,p]=qe(f,0);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:l,scale:"length",optional:!0},rotate:{value:h,optional:!0}},n,o9),this.r=+o,this.length=d,this.rotate=p,this.shape=c9(u),this.anchor=ct(s,"anchor",["start","middle","end"]),this.frameAnchor=rc(c)}render(t,n,r,i,o){const{x:a,y:f}=n,{x:u,y:s,length:c,rotate:l}=r,{length:d,rotate:h,anchor:p,shape:g,r:m}=this,[y,b]=Xa(this,i);return Te("svg:g",o).call(Xt,this,i,o).call(Vt,this,{x:u&&a,y:s&&f}).call(w=>w.selectAll().data(t).enter().append("path").call(Mt,this).attr("transform",Q1`translate(${u?v=>u[v]:y},${s?v=>s[v]:b})${l?v=>` rotate(${l[v]})`:h?` rotate(${h})`:""}${p==="start"?"":p==="end"?c?v=>` translate(0,${c[v]})`:` translate(0,${d})`:c?v=>` translate(0,${c[v]/2})`:` translate(0,${d/2})`}`).attr("d",c?v=>{const T=Cu();return g.draw(T,c[v],m),T}:(()=>{const v=Cu();return g.draw(v,d,m),v})()).call(Fn,this,r)).node()}}function l9(e,t={}){const{x:n=xe,...r}=t;return new cb(e,{...r,x:n})}function d9(e,t={}){const{y:n=xe,...r}=t;return new cb(e,{...r,y:n})}function vn(e,t){return arguments.length<2&&!bn(e)&&(t=e,e=null),t===void 0&&(t={}),[e,t]}function Za({anchor:e}={},t){return e===void 0?t[0]:ct(e,"anchor",t)}function lb(e){return Za(e,["left","right"])}function db(e){return Za(e,["right","left"])}function hb(e){return Za(e,["bottom","top"])}function pb(e){return Za(e,["top","bottom"])}function mb(){const[e,t]=vn(...arguments);return bb("y",lb(t),e,t)}function h9(){const[e,t]=vn(...arguments);return bb("fy",db(t),e,t)}function gb(){const[e,t]=vn(...arguments);return yb("x",hb(t),e,t)}function p9(){const[e,t]=vn(...arguments);return yb("fx",pb(t),e,t)}function bb(e,t,n,{color:r="currentColor",opacity:i=1,stroke:o=r,strokeOpacity:a=i,strokeWidth:f=1,fill:u=r,fillOpacity:s=i,textAnchor:c,textStroke:l,textStrokeOpacity:d,textStrokeWidth:h,tickSize:p=e==="y"?6:0,tickPadding:g,tickRotate:m,x:y,margin:b,marginTop:w=b===void 0?20:b,marginRight:v=b===void 0?t==="right"?40:0:b,marginBottom:T=b===void 0?20:b,marginLeft:_=b===void 0?t==="left"?40:0:b,label:E,labelAnchor:C,labelArrow:k,labelOffset:R,...$}){return p=Ce(p),g=Ce(g),m=Ce(m),C!==void 0&&(C=ct(C,"labelAnchor",["center","top","bottom"])),k=$b(k),Un(p&&!Ee(o)?m9(e,t,n,{stroke:o,strokeOpacity:a,strokeWidth:f,tickSize:p,tickPadding:g,tickRotate:m,x:y,...$}):null,Ee(u)?null:b9(e,t,n,{fill:u,fillOpacity:s,stroke:l,strokeOpacity:d,strokeWidth:h,textAnchor:c,tickSize:p,tickPadding:g,tickRotate:m,x:y,marginTop:w,marginRight:v,marginBottom:T,marginLeft:_,...$}),!Ee(u)&&E!==null?tb([],xb({fill:u,fillOpacity:s,...$},function(S,x,A,M,N){const L=M[e],{marginTop:B,marginRight:H,marginBottom:O,marginLeft:j}=e==="y"&&N.inset||N,P=C??(L.bandwidth?"center":"top"),F=R??(t==="right"?H:j)-3;return P==="center"?(this.textAnchor=void 0,this.lineAnchor=t==="right"?"bottom":"top",this.frameAnchor=t,this.rotate=-90):(this.textAnchor=t==="right"?"end":"start",this.lineAnchor=P,this.frameAnchor=`${P}-${t}`,this.rotate=0),this.dy=P==="top"?3-B:P==="bottom"?O-3:0,this.dx=t==="right"?F:-F,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[Mb(e,L,{anchor:t,label:E,labelAnchor:P,labelArrow:k})]}}}})):null)}function yb(e,t,n,{color:r="currentColor",opacity:i=1,stroke:o=r,strokeOpacity:a=i,strokeWidth:f=1,fill:u=r,fillOpacity:s=i,textAnchor:c,textStroke:l,textStrokeOpacity:d,textStrokeWidth:h,tickSize:p=e==="x"?6:0,tickPadding:g,tickRotate:m,y,margin:b,marginTop:w=b===void 0?t==="top"?30:0:b,marginRight:v=b===void 0?20:b,marginBottom:T=b===void 0?t==="bottom"?30:0:b,marginLeft:_=b===void 0?20:b,label:E,labelAnchor:C,labelArrow:k,labelOffset:R,...$}){return p=Ce(p),g=Ce(g),m=Ce(m),C!==void 0&&(C=ct(C,"labelAnchor",["center","left","right"])),k=$b(k),Un(p&&!Ee(o)?g9(e,t,n,{stroke:o,strokeOpacity:a,strokeWidth:f,tickSize:p,tickPadding:g,tickRotate:m,y,...$}):null,Ee(u)?null:y9(e,t,n,{fill:u,fillOpacity:s,stroke:l,strokeOpacity:d,strokeWidth:h,textAnchor:c,tickSize:p,tickPadding:g,tickRotate:m,y,marginTop:w,marginRight:v,marginBottom:T,marginLeft:_,...$}),!Ee(u)&&E!==null?tb([],xb({fill:u,fillOpacity:s,...$},function(S,x,A,M,N){const L=M[e],{marginTop:B,marginRight:H,marginBottom:O,marginLeft:j}=e==="x"&&N.inset||N,P=C??(L.bandwidth?"center":"right"),F=R??(t==="top"?B:O)-3;return P==="center"?(this.frameAnchor=t,this.textAnchor=void 0):(this.frameAnchor=`${t}-${P}`,this.textAnchor=P==="right"?"end":"start"),this.lineAnchor=t,this.dy=t==="top"?-F:F,this.dx=P==="right"?H-3:P==="left"?3-j:0,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[Mb(e,L,{anchor:t,label:E,labelAnchor:P,labelArrow:k})]}}}})):null)}function m9(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:o=null,facetAnchor:a=t+(e==="y"?"-empty":""),frameAnchor:f=t,tickSize:u,inset:s=0,insetLeft:c=s,insetRight:l=s,dx:d=0,y:h=e==="y"?void 0:null,...p}){return Ar(d9,e,n,{ariaLabel:`${e}-axis tick`,ariaHidden:!0},{strokeWidth:r,strokeLinecap:i,strokeLinejoin:o,facetAnchor:a,frameAnchor:f,y:h,...p,dx:t==="left"?+d-je+ +c:+d+je-l,anchor:"start",length:u,shape:t==="left"?$9:E9})}function g9(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:o=null,facetAnchor:a=t+(e==="x"?"-empty":""),frameAnchor:f=t,tickSize:u,inset:s=0,insetTop:c=s,insetBottom:l=s,dy:d=0,x:h=e==="x"?void 0:null,...p}){return Ar(l9,e,n,{ariaLabel:`${e}-axis tick`,ariaHidden:!0},{strokeWidth:r,strokeLinejoin:o,strokeLinecap:i,facetAnchor:a,frameAnchor:f,x:h,...p,dy:t==="bottom"?+d-je-l:+d+je+ +c,anchor:"start",length:u,shape:t==="bottom"?S9:M9})}function b9(e,t,n,{facetAnchor:r=t+(e==="y"?"-empty":""),frameAnchor:i=t,tickSize:o,tickRotate:a=0,tickPadding:f=Math.max(3,9-o)+(Math.abs(a)>60?4*Math.cos(a*z1):0),text:u,textAnchor:s=Math.abs(a)>60?"middle":t==="left"?"end":"start",lineAnchor:c=a>60?"top":a<-60?"bottom":"middle",fontVariant:l,inset:d=0,insetLeft:h=d,insetRight:p=d,dx:g=0,y:m=e==="y"?void 0:null,...y}){return Ar(V7,e,n,{ariaLabel:`${e}-axis tick label`},{facetAnchor:r,frameAnchor:i,text:u,textAnchor:s,lineAnchor:c,fontVariant:l,rotate:a,y:m,...y,dx:t==="left"?+g-o-f+ +h:+g+ +o+ +f-p},function(b,w,v,T,_){l===void 0&&(this.fontVariant=Sb(b)),u===void 0&&(_.text=Tb(b,w,v,T,t))})}function y9(e,t,n,{facetAnchor:r=t+(e==="x"?"-empty":""),frameAnchor:i=t,tickSize:o,tickRotate:a=0,tickPadding:f=Math.max(3,9-o)+(Math.abs(a)>=10?4*Math.cos(a*z1):0),text:u,textAnchor:s=Math.abs(a)>=10?a<0^t==="bottom"?"start":"end":"middle",lineAnchor:c=Math.abs(a)>=10?"middle":t==="bottom"?"top":"bottom",fontVariant:l,inset:d=0,insetTop:h=d,insetBottom:p=d,dy:g=0,x:m=e==="x"?void 0:null,...y}){return Ar(nb,e,n,{ariaLabel:`${e}-axis tick label`},{facetAnchor:r,frameAnchor:i,text:u===void 0?null:u,textAnchor:s,lineAnchor:c,fontVariant:l,rotate:a,x:m,...y,dy:t==="bottom"?+g+ +o+ +f-p:+g-o-f+ +h},function(b,w,v,T,_){l===void 0&&(this.fontVariant=Sb(b)),u===void 0&&(_.text=Tb(b,w,v,T,t))})}function v9(){const[e,t]=vn(...arguments);return vb("y",lb(t),e,t)}function w9(){const[e,t]=vn(...arguments);return vb("fy",db(t),e,t)}function _9(){const[e,t]=vn(...arguments);return wb("x",hb(t),e,t)}function x9(){const[e,t]=vn(...arguments);return wb("fx",pb(t),e,t)}function vb(e,t,n,{y:r=e==="y"?void 0:null,x:i=null,x1:o=t==="left"?i:null,x2:a=t==="right"?i:null,...f}){return Ar(Ka,e,n,{ariaLabel:`${e}-grid`,ariaHidden:!0},{y:r,x1:o,x2:a,..._b(f)})}function wb(e,t,n,{x:r=e==="x"?void 0:null,y:i=null,y1:o=t==="top"?i:null,y2:a=t==="bottom"?i:null,...f}){return Ar(K1,e,n,{ariaLabel:`${e}-grid`,ariaHidden:!0},{x:r,y1:o,y2:a,..._b(f)})}function _b({color:e="currentColor",opacity:t=.1,stroke:n=e,strokeOpacity:r=t,strokeWidth:i=1,...o}){return{stroke:n,strokeOpacity:r,strokeWidth:i,...o}}function xb({fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:o,fontWeight:a,monospace:f,pointerEvents:u,shapeRendering:s,clip:c=!1},l){return[,e]=Qe(e),[,t]=qe(t),{facet:"super",x:null,y:null,fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:o,fontWeight:a,monospace:f,pointerEvents:u,shapeRendering:s,clip:c,initializer:l}}function Ar(e,t,n,r,i,o){let a;function f(c,l,d,h,p,g){const m=c==null&&(t==="fx"||t==="fy"),{[t]:y}=h;if(!y)throw new Error(`missing scale: ${t}`);const b=y.domain();let{interval:w,ticks:v,tickFormat:T,tickSpacing:_=t==="x"?80:35}=i;if(typeof v=="string"&&Eb(y)&&(w=v,v=void 0),v===void 0&&(v=Mr(w,y.type)??T9(y,_)),c==null){if(bn(v))c=ln(v);else if(Qn(v))c=Zf(v,...Ge(b));else if(y.interval){let C=y.interval;if(y.ticks){const[k,R]=Ge(b),$=(R-k)/C[Ii];C=hd(C,$/v)??C,c=Zf(C,k,R)}else{c=b;const k=c.length;C=hd(C,k/v)??C,C!==y.interval&&(c=Zf(C,...Ge(c)))}if(C===y.interval){const k=Math.round(c.length/v);k>1&&(c=c.filter((R,$)=>$%k===0))}}else y.ticks?c=y.ticks(v):c=b;if(!y.ticks&&c.length&&c!==b){const C=new ga(b);c=c.filter(k=>C.has(k)),c.length||an(`Warning: the ${t}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}t==="y"||t==="x"?l=[Gt(c)]:a[t]={scale:t,value:xe}}o==null||o.call(this,y,c,v,T,a);const E=Object.fromEntries(Object.entries(a).map(([C,k])=>[C,{...k,value:le(c,k.value)}]));return m&&(l=g.filterFacets(c,E)),{data:c,facets:l,channels:E}}const u=yr(i).initializer,s=e(n,yr({...i,initializer:f},u));return n==null?(a=s.channels,s.channels={}):a={},r!==void 0&&Object.assign(s,r),s.clip===void 0&&(s.clip=!1),s}function T9(e,t){const[n,r]=Ge(e.range());return(r-n)/t}function Tb(e,t,n,r,i){return{value:$c(e,t,n,r,i)}}function $c(e,t,n,r,i){return typeof r=="function"&&!(e.type==="log"&&e.tickFormat)?r:r===void 0&&t&&Fe(t)?ex(e.type,t,i)??wr:e.tickFormat?e.tickFormat(typeof n=="number"?n:null,r):r===void 0?wr:typeof r=="string"?(Fe(e.domain())?Li:Tr)(r):jt(r)}function Zf(e,t,n){return e.range(t,e.offset(e.floor(n)))}const S9={draw(e,t){e.moveTo(0,0),e.lineTo(0,t)}},M9={draw(e,t){e.moveTo(0,0),e.lineTo(0,-t)}},$9={draw(e,t){e.moveTo(0,0),e.lineTo(-t,0)}},E9={draw(e,t){e.moveTo(0,0),e.lineTo(t,0)}};function Sb(e){return e.bandwidth&&!e.interval?void 0:"tabular-nums"}function Mb(e,t,{anchor:n,label:r=t.label,labelAnchor:i,labelArrow:o}={}){if(!(r==null||r.inferred&&Eb(t)&&/^(date|time|year)$/i.test(r))){if(r=String(r),o==="auto"&&(o=(!t.bandwidth||t.interval)&&!/[↑↓→←]/.test(r)),!o)return r;if(o===!0){const a=$1(t);a&&(o=/x$/.test(e)||i==="center"?/x$/.test(e)===a<0?"left":"right":a<0?"up":"down")}switch(o){case"left":return`← ${r}`;case"right":return`${r} →`;case"up":return n==="right"?`${r} ↑`:`↑ ${r}`;case"down":return n==="right"?`${r} ↓`:`↓ ${r}`}return r}}function $b(e="auto"){return Ee(e)?!1:typeof e=="boolean"?e:ct(e,"labelArrow",["auto","up","right","down","left"])}function Eb(e){return Fe(e.domain())}function Bd(e,t){if(t==null)return t;const n=e(t);if(!n)throw new Error(`scale not found: ${t}`);return n}function A9(e,{opacity:t,...n}={}){if(!Bn(e)&&!k1(e))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${e.type})`);return Ab(e,n,(r,i,o,a)=>r.append("svg").attr("width",o).attr("height",a).attr("fill",i.scale).attr("fill-opacity",qe(t)[1]).append("rect").attr("width","100%").attr("height","100%"))}function C9(e,{fill:t=(s=>(s=e.hint)==null?void 0:s.fill)()!==void 0?e.hint.fill:"none",fillOpacity:n=1,stroke:r=(c=>(c=e.hint)==null?void 0:c.stroke)()!==void 0?e.hint.stroke:Ee(t)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:o=1.5,r:a=4.5,...f}={},u){const[l,d]=Qe(t),[h,p]=Qe(r),g=Bd(u,l),m=Bd(u,h),y=a*a*Math.PI;return n=qe(n)[1],i=qe(i)[1],o=qe(o)[1],Ab(e,f,(b,w,v,T)=>b.append("svg").attr("viewBox","-8 -8 16 16").attr("width",v).attr("height",T).attr("fill",l==="color"?_=>g.scale(_):d).attr("fill-opacity",n).attr("stroke",h==="color"?_=>m.scale(_):p).attr("stroke-opacity",i).attr("stroke-width",o).append("path").attr("d",_=>{const E=Cu();return e.scale(_).draw(E,y),E}))}function Ab(e,t={},n){let{columns:r,tickFormat:i,fontVariant:o=j1(e),swatchSize:a=15,swatchWidth:f=a,swatchHeight:u=a,marginLeft:s=0,className:c,style:l,width:d}=t;const h=bc(t);c=Wa(c),i=$c(e.scale,e.domain,void 0,i);const p=Te("div",h).attr("class",`${c}-swatches ${c}-swatches-${r!=null?"columns":"wrap"}`);let g;return r!=null?(g=`:where(.${c}-swatches-columns .${c}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${c}-swatches-columns .${c}-swatch::before) {
  flex-shrink: 0;
}
:where(.${c}-swatches-columns .${c}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,p.style("columns",r).selectAll().data(e.domain).enter().append("div").attr("class",`${c}-swatch`).call(n,e,f,u).call(m=>m.append("div").attr("class",`${c}-swatch-label`).attr("title",i).text(i))):(g=`:where(.${c}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${c}-swatches-wrap .${c}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,p.selectAll().data(e.domain).enter().append("span").attr("class",`${c}-swatch`).call(n,e,f,u).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),p.call(m=>m.insert("style","*").text(`:where(.${c}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${c}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
${g}`)).style("margin-left",s?`${+s}px`:null).style("width",d===void 0?null:`${+d}px`).style("font-variant",Me(o,"normal")).call(vc,l).node()}const ls=new Map([["symbol",C9],["color",kb],["opacity",N9]]);function k9(e,t,n={}){return(r,i)=>{if(!ls.has(r))throw new Error(`unknown legend type: ${r}`);if(r in e)return ls.get(r)(e[r],Cb(t,n[r],i),o=>e[o])}}function Cb({className:e,...t},{label:n,ticks:r,tickFormat:i}={},o){return Tx(o,{className:e,...t},{label:n,ticks:r,tickFormat:i})}function kb(e,{legend:t=!0,...n}){if(t===!0&&(t=e.type==="ordinal"?"swatches":"ramp"),e.domain!==void 0)switch(`${t}`.toLowerCase()){case"swatches":return A9(e,n);case"ramp":return I7(e,n);default:throw new Error(`unknown legend type: ${t}`)}}function N9({type:e,interpolate:t,...n},{legend:r=!0,color:i=un(0,0,0),...o}){if(!t)throw new Error(`${e} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return kb({type:e,...n,interpolate:L9(i)},{legend:r,...o})}function L9(e){const{r:t,g:n,b:r}=un(e)||un(0,0,0);return i=>`rgba(${t},${n},${r},${i})`}function D9(e,t,n){const r=[];for(const[i,o]of ls){const a=n[i];if(a!=null&&a.legend&&i in e){const f=o(e[i],Cb(t,e[i],a),u=>e[u]);f!=null&&r.push(f)}}return r}function Nb(e={}){return Xg(e)?e:{...e,y:xe}}function I9(e,t){if(t.length===1)return{data:e,facets:t};const n=hi(e),r=new Uint8Array(n);let i=0;for(const f of t)for(const u of f)r[u]&&++i,r[u]=1;if(i===0)return{data:e,facets:t};e=di(e);const o=e[Ug]=new Uint32Array(n+i);t=t.map(f=>di(f,Uint32Array));let a=n;r.fill(0);for(const f of t)for(let u=0,s=f.length;u<s;++u){const c=f[u];r[c]?(f[u]=a,e[a]=e[c],o[a]=c,++a):o[c]=c,r[c]=1}return{data:e,facets:t}}function R9(e={},t={}){arguments.length===1&&([e,t]=O9(e));const{x1:n,x:r=n,y:i,...o}=t,[a,f,u,s]=F9(r,i,"x","y",e,o);return{...a,x1:n,x:f,y1:u,y2:s,y:es(u,s)}}function Lb({y:e,y1:t,y2:n,...r}={}){return r=Bi(r,"x"),t===void 0&&n===void 0?R9({y:e,...r}):([t,n]=cx(e,t,n),{...r,y1:t,y2:n})}function O9(e){const{offset:t,order:n,reverse:r,...i}=e;return[{offset:t,order:n,reverse:r},i]}const P9={length:!0};function F9(e,t=ox,n,r,{offset:i,order:o,reverse:a},f){if(t===null)throw new Error(`stack requires ${r}`);const u=ec(f),[s,c]=Re(e),[l,d]=ia(t),[h,p]=ia(t);return l.hint=h.hint=P9,i=q9(i),o=B9(o,i,r),[qi(f,(g,m,y)=>{({data:g,facets:m}=I9(g,m));const b=e==null?void 0:c(oa(le(g,e),y==null?void 0:y[n])),w=le(g,t,Float64Array),v=le(g,u),T=o&&o(g,b,w,v),_=hi(g),E=d(new Float64Array(_)),C=p(new Float64Array(_)),k=[];for(const R of m){const $=b?Array.from(ba(R,S=>b[S]).values()):[R];if(T)for(const S of $)S.sort(T);for(const S of $){let x=0,A=0;a&&S.reverse();for(const M of S){const N=w[M];N<0?x=C[M]=(E[M]=x)+N:N>0?A=C[M]=(E[M]=A)+N:C[M]=E[M]=A}}k.push($)}return i&&i(k,E,C,v),{data:g,facets:m}}),s,l,h]}function q9(e){if(e!=null){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return j9;case"center":case"silhouette":return z9;case"wiggle":return Ib}throw new Error(`unknown offset: ${e}`)}}function Db(e,t){let n=0,r=0;for(const i of e){const o=t[i];o<n&&(n=o),o>r&&(r=o)}return[n,r]}function j9(e,t,n){for(const r of e)for(const i of r){const[o,a]=Db(i,n);for(const f of i){const u=1/(a-o||1);t[f]=u*(t[f]-o),n[f]=u*(n[f]-o)}}}function z9(e,t,n){for(const r of e){for(const i of r){const[o,a]=Db(i,n);for(const f of i){const u=(a+o)/2;t[f]-=u,n[f]-=u}}Rb(r,t,n)}Ob(e,t,n)}function Ib(e,t,n,r){for(const i of e){const o=new kn;let a=0;for(const f of i){let u=-1;const s=f.map(h=>Math.abs(n[h]-t[h])),c=f.map(h=>{u=r?r[h]:++u;const p=n[h]-t[h],g=o.has(u)?p-o.get(u):0;return o.set(u,p),g}),l=[0,...R2(c)];for(const h of f)t[h]+=a,n[h]+=a;const d=fn(s);d&&(a-=fn(s,(h,p)=>(c[p]/2+l[p])*h)/d)}Rb(i,t,n)}Ob(e,t,n)}function Rb(e,t,n){const r=Bt(e,i=>Bt(i,o=>t[o]));for(const i of e)for(const o of i)t[o]-=r,n[o]-=r}function Ob(e,t,n){const r=e.length;if(r===1)return;const i=e.map(f=>f.flat()),o=i.map(f=>(Bt(f,u=>t[u])+rt(f,u=>n[u]))/2),a=Bt(o);for(let f=0;f<r;f++){const u=a-o[f];for(const s of i[f])t[s]+=u,n[s]+=u}}function B9(e,t,n){if(e===void 0&&t===Ib)return Ud(ut);if(e!=null){if(typeof e=="string"){const r=e.startsWith("-"),i=r?na:ut;switch((r?e.slice(1):e).toLowerCase()){case"value":case n:return U9(i);case"z":return H9(i);case"sum":return Y9(i);case"appearance":return G9(i);case"inside-out":return Ud(i)}return Hd(Hg(e))}if(typeof e=="function")return(e.length===1?Hd:W9)(e);if(pn(e))return X9(e);throw new Error(`invalid order: ${e}`)}}function U9(e){return(t,n,r)=>(i,o)=>e(r[i],r[o])}function H9(e){return(t,n,r,i)=>(o,a)=>e(i[o],i[a])}function Y9(e){return Qa(e,(t,n,r,i)=>gs(Gt(t),o=>fn(o,a=>r[a]),o=>i[o]))}function G9(e){return Qa(e,(t,n,r,i)=>gs(Gt(t),o=>n[Qh(o,a=>r[a])],o=>i[o]))}function Ud(e){return Qa(e,(t,n,r,i)=>{const o=Gt(t),a=gs(o,l=>n[Qh(l,d=>r[d])],l=>i[l]),f=Jn(o,l=>fn(l,d=>r[d]),l=>i[l]),u=[],s=[];let c=0;for(const l of a)c<0?(c+=f.get(l),u.push(l)):(c-=f.get(l),s.push(l));return s.reverse().concat(u)})}function Hd(e){return t=>{const n=le(t,e);return(r,i)=>ut(n[r],n[i])}}function W9(e){return t=>pn(t)?(n,r)=>e(t[n],t[r]):(n,r)=>e(t.get(n),t.get(r))}function X9(e){return Qa(ut,()=>e)}function Qa(e,t){return(n,r,i,o)=>{if(!o)throw new Error("missing channel: z");const a=new kn(t(n,r,i,o).map((f,u)=>[f,u]));return(f,u)=>e(a.get(o[f]),a.get(o[u]))}}const V9={ariaLabel:"rect"};class K9 extends Je{constructor(t,n={}){const{x1:r,y1:i,x2:o,y2:a}=n;super(t,{x1:{value:r,scale:"x",type:r!=null&&o==null?"band":void 0,optional:!0},y1:{value:i,scale:"y",type:i!=null&&a==null?"band":void 0,optional:!0},x2:{value:o,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0}},n,V9),Pb(this,n),Fb(this,n)}render(t,n,r,i,o){const{x:a,y:f}=n;let{x1:u,y1:s,x2:c,y2:l}=r;const{marginTop:d,marginRight:h,marginBottom:p,marginLeft:g,width:m,height:y}=i,{projection:b}=o,{insetTop:w,insetRight:v,insetBottom:T,insetLeft:_}=this,{rx:E,ry:C,rx1y1:k,rx1y2:R,rx2y1:$,rx2y2:S}=this;(u||c)&&!b&&vr(a)&&(u=c=null),(s||l)&&!b&&vr(f)&&(s=l=null);const x=a!=null&&a.bandwidth?a.bandwidth():0,A=f!=null&&f.bandwidth?f.bandwidth():0;return Te("svg:g",o).call(Xt,this,i,o).call(Vt,this,{},0,0).call(M=>M.selectAll().data(t).enter().call(k||R||$||S?N=>N.append("path").call(Mt,this).call(qb,u&&c?L=>u[L]+(c[L]<u[L]?-v:_):u?L=>u[L]+_:g+_,s&&l?L=>s[L]+(l[L]<s[L]?-T:w):s?L=>s[L]+w:d+w,u&&c?L=>c[L]-(c[L]<u[L]?-_:v):u?L=>u[L]+x-v:m-h-v,s&&l?L=>l[L]-(l[L]<s[L]?-w:T):s?L=>s[L]+A-T:y-p-T,this).call(Fn,this,r):N=>N.append("rect").call(Mt,this).attr("x",u?c?L=>Math.min(u[L],c[L])+_:L=>u[L]+_:g+_).attr("y",s?l?L=>Math.min(s[L],l[L])+w:L=>s[L]+w:d+w).attr("width",u?c?L=>Math.max(0,Math.abs(c[L]-u[L])+x-_-v):x-_-v:m-h-g-v-_).attr("height",s?l?L=>Math.max(0,Math.abs(s[L]-l[L])+A-w-T):A-w-T:y-d-p-w-T).call(Q,"rx",E).call(Q,"ry",C).call(Fn,this,r))).node()}}function Pb(e,{inset:t=0,insetTop:n=t,insetRight:r=t,insetBottom:i=t,insetLeft:o=t}={}){e.insetTop=Ce(n),e.insetRight=Ce(r),e.insetBottom=Ce(i),e.insetLeft=Ce(o)}function Fb(e,{r:t,rx:n,ry:r,rx1:i=t,ry1:o=t,rx2:a=t,ry2:f=t,rx1y1:u=i!==void 0?+i:o!==void 0?+o:0,rx1y2:s=i!==void 0?+i:f!==void 0?+f:0,rx2y1:c=a!==void 0?+a:o!==void 0?+o:0,rx2y2:l=a!==void 0?+a:f!==void 0?+f:0}={}){u||s||c||l?(e.rx1y1=u,e.rx1y2=s,e.rx2y1=c,e.rx2y2=l):(e.rx=Me(n,"auto"),e.ry=Me(r,"auto"))}function qb(e,t,n,r,i,o){const{rx1y1:a,rx1y2:f,rx2y1:u,rx2y2:s}=o;typeof t!="function"&&(t=jt(t)),typeof n!="function"&&(n=jt(n)),typeof r!="function"&&(r=jt(r)),typeof i!="function"&&(i=jt(i));const c=Math.max(Math.abs(a+u),Math.abs(f+s)),l=Math.max(Math.abs(a+f),Math.abs(u+s));e.attr("d",d=>{const h=t(d),p=n(d),g=r(d),m=i(d),y=h>g,b=p>m,w=y?g:h,v=y?h:g,T=b?m:p,_=b?p:m,E=Math.min(1,(v-w)/c,(_-T)/l),C=E*(y?b?s:u:b?f:a),k=E*(y?b?f:a:b?s:u),R=E*(y?b?a:f:b?u:s),$=E*(y?b?u:s:b?a:f);return`M${w},${T+ao(C,$)}A${C},${C} 0 0 ${C<0?0:1} ${w+oo(C,$)},${T}H${v-oo(k,R)}A${k},${k} 0 0 ${k<0?0:1} ${v},${T+ao(k,R)}V${_-ao(R,k)}A${R},${R} 0 0 ${R<0?0:1} ${v-oo(R,k)},${_}H${w+oo($,C)}A${$},${$} 0 0 ${$<0?0:1} ${w},${_-ao($,C)}Z`})}function oo(e,t){return t<0?e:Math.abs(e)}function ao(e,t){return t<0?Math.abs(e):e}function CS(e,t={}){return sx(t)||(t={...t,x:Ri,y2:xe,interval:1}),new K9(e,Lb(j7(Nb(t))))}const Z9={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},Q9={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class J9 extends Je{constructor(t={}){const{anchor:n=null}=t;super(xo,void 0,t,n==null?Z9:Q9),this.anchor=Wg(n,"anchor",["top","right","bottom","left"]),Pb(this,t),n||Fb(this,t)}render(t,n,r,i,o){const{marginTop:a,marginRight:f,marginBottom:u,marginLeft:s,width:c,height:l}=i,{anchor:d,insetTop:h,insetRight:p,insetBottom:g,insetLeft:m}=this,{rx:y,ry:b,rx1y1:w,rx1y2:v,rx2y1:T,rx2y2:_}=this,E=s+m,C=c-f-p,k=a+h,R=l-u-g;return Te(d?"svg:line":w||v||T||_?"svg:path":"svg:rect",o).datum(0).call(Xt,this,i,o).call(Mt,this).call(Fn,this,r).call(Vt,this,{}).call(d==="left"?$=>$.attr("x1",E).attr("x2",E).attr("y1",k).attr("y2",R):d==="right"?$=>$.attr("x1",C).attr("x2",C).attr("y1",k).attr("y2",R):d==="top"?$=>$.attr("x1",E).attr("x2",C).attr("y1",k).attr("y2",k):d==="bottom"?$=>$.attr("x1",E).attr("x2",C).attr("y1",R).attr("y2",R):w||v||T||_?$=>$.call(qb,E,k,C,R,this):$=>$.attr("x",E).attr("y",k).attr("width",C-E).attr("height",R-k).attr("rx",y).attr("ry",b)).node()}}function eT(e){return new J9(e)}const Qf={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},tT=new Set(["geometry","href","src","ariaLabel","scales"]);class nT extends Je{constructor(t,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&bn(t)&&Kg(t)&&(n={...n,title:xe});const{x:r,y:i,x1:o,x2:a,y1:f,y2:u,anchor:s,preferredAnchor:c="bottom",monospace:l,fontFamily:d=l?"ui-monospace, monospace":void 0,fontSize:h,fontStyle:p,fontVariant:g,fontWeight:m,lineHeight:y=1,lineWidth:b=20,frameAnchor:w,format:v,textAnchor:T="start",textOverflow:_,textPadding:E=8,title:C,pointerSize:k=12,pathFilter:R="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(t,{x:{value:o!=null&&a!=null?null:r,scale:"x",optional:!0},y:{value:f!=null&&u!=null?null:i,scale:"y",optional:!0},x1:{value:o,scale:"x",optional:a==null},y1:{value:f,scale:"y",optional:u==null},x2:{value:a,scale:"x",optional:o==null},y2:{value:u,scale:"y",optional:f==null},title:{value:C,optional:!0}},n,Qf),this.anchor=ts(s,"anchor"),this.preferredAnchor=ts(c,"preferredAnchor"),this.frameAnchor=rc(w),this.textAnchor=Me(T,"middle"),this.textPadding=+E,this.pointerSize=+k,this.pathFilter=De(R),this.lineHeight=+y,this.lineWidth=+b,this.textOverflow=eb(_),this.monospace=!!l,this.fontFamily=De(d),this.fontSize=Ce(h),this.fontStyle=De(p),this.fontVariant=De(g),this.fontWeight=De(m);for(const $ in Qf)$ in this.channels&&(this[$]=Qf[$]);this.splitLines=ib(this),this.clipLine=ob(this),this.format=typeof v=="string"||typeof v=="function"?{title:v}:{...v}}render(t,n,r,i,o){const a=this,{x:f,y:u,fx:s,fy:c}=n,{ownerSVGElement:l,document:d}=o,{anchor:h,monospace:p,lineHeight:g,lineWidth:m}=this,{textPadding:y,pointerSize:b,pathFilter:w}=this,{marginTop:v,marginLeft:T}=i,{x1:_,y1:E,x2:C,y2:k,x:R=_??C,y:$=E??k}=r,S=s?s(t.fx)-T:0,x=c?c(t.fy)-v:0,[A,M]=Xa(this,i),N=F1(r,A),L=q1(r,M),B=p?Mc:Sc,H=B(rr);let O,j;"title"in r?(O=Yd.call(this,{title:r.channels.title},n),j=fT):(O=Yd.call(this,r.channels,n),j=uT);const P=Te("svg:g",o).call(Xt,this,i,o).call(rb,this).call(Vt,this,{x:R&&f,y:$&&u}).call(Z=>Z.selectAll().data(t).enter().append("g").attr("transform",W=>`translate(${Math.round(N(W))},${Math.round(L(W))})`).call(Mt,this).call(W=>W.append("path").attr("filter",w)).call(W=>W.append("text").each(function(Y){const z=er(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const D=j.call(a,Y,t,O,n,r);if(typeof D=="string")for(const U of a.splitLines(D))F(z,{value:a.clipLine(U)});else{const U=new Set;for(const G of D){const{label:I=""}=G;I&&U.has(I)||(U.add(I),F(z,G))}}})));function F(Z,{label:W,value:Y,color:z,opacity:D}){W??(W=""),Y??(Y="");const U=z!=null||D!=null;let G,I=m*100;const[ie]=_r(W,I,B,H);if(ie>=0)W=W.slice(0,ie).trimEnd()+rr,G=Y.trim(),Y="";else{(W||!Y&&!U)&&(Y=" "+Y);const[oe]=_r(Y,I-B(W),B,H);oe>=0&&(G=Y.trim(),Y=Y.slice(0,oe).trimEnd()+rr)}const V=Z.append("tspan").attr("x",0).attr("dy",`${g}em`).text("​");W&&V.append("tspan").attr("font-weight","bold").text(W),Y&&V.append(()=>d.createTextNode(Y)),U&&V.append("tspan").text(" ■").attr("fill",z).attr("fill-opacity",D).style("user-select","none"),G&&V.append("title").text(G)}function K(){const{width:Z,height:W}=i.facet??i;P.selectChildren().each(function(Y){let{x:z,width:D,height:U}=this.getBBox();D=Math.round(D),U=Math.round(U);let G=h;if(G===void 0){const V=N(Y)+S,oe=L(Y)+x,ae=V+D+b+y*2<Z,ce=V-D-b-y*2>0,lt=oe+U+b+y*2<W,wn=oe-U-b-y*2>0;G=ae&&ce?lt&&wn?a.preferredAnchor:wn?"bottom":"top":lt&&wn?ae?"left":"right":(ae||ce)&&(lt||wn)?`${wn?"bottom":"top"}-${ae?"left":"right"}`:a.preferredAnchor}const I=this.firstChild,ie=this.lastChild;if(I.setAttribute("d",aT(G,b,y,D,U)),z)for(const V of ie.childNodes)V.setAttribute("x",-z);ie.setAttribute("y",`${+iT(G,ie.childNodes.length,g).toFixed(6)}em`),ie.setAttribute("transform",`translate(${oT(G,b,y,D,U)})`)}),P.attr("visibility",null)}return t.length&&(P.attr("visibility","hidden"),l.isConnected?Promise.resolve().then(K):typeof requestAnimationFrame<"u"&&requestAnimationFrame(K)),P.node()}}function rT(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Js(t,n)),new nT(e,{...r,x:t,y:n})}function iT(e,t,n){return/^top(?:-|$)/.test(e)?.94-n:-.29-t*n}function oT(e,t,n,r,i){switch(e){case"middle":return[-r/2,i/2];case"top-left":return[n,t+n];case"top":return[-r/2,t/2+n];case"top-right":return[-r-n,t+n];case"right":return[-t/2-r-n,i/2];case"bottom-left":return[n,-t-n];case"bottom":return[-r/2,-t/2-n];case"bottom-right":return[-r-n,-t-n];case"left":return[n+t/2,i/2]}}function aT(e,t,n,r,i){const o=r+n*2,a=i+n*2;switch(e){case"middle":return`M${-o/2},${-a/2}h${o}v${a}h${-o}z`;case"top-left":return`M0,0l${t},${t}h${o-t}v${a}h${-o}z`;case"top":return`M0,0l${t/2},${t/2}h${(o-t)/2}v${a}h${-o}v${-a}h${(o-t)/2}z`;case"top-right":return`M0,0l${-t},${t}h${t-o}v${a}h${o}z`;case"right":return`M0,0l${-t/2},${-t/2}v${t/2-a/2}h${-o}v${a}h${o}v${t/2-a/2}z`;case"bottom-left":return`M0,0l${t},${-t}h${o-t}v${-a}h${-o}z`;case"bottom":return`M0,0l${t/2},${-t/2}h${(o-t)/2}v${-a}h${-o}v${a}h${(o-t)/2}z`;case"bottom-right":return`M0,0l${-t},${-t}h${t-o}v${-a}h${o}z`;case"left":return`M0,0l${t/2},${-t/2}v${t/2-a/2}h${o}v${a}h${-o}v${t/2-a/2}z`}}function Yd(e,t){var i,o;const n={};let r=this.format;r=Gd(r,e,"x"),r=Gd(r,e,"y"),this.format=r;for(const a in r){const f=r[a];if(!(f===null||f===!1))if(a==="fx"||a==="fy")n[a]=!0;else{const u=wd(e,a);u&&(n[a]=u)}}for(const a in e){if(a in n||a in r||tT.has(a)||(a==="x"||a==="y")&&e.geometry)continue;const f=wd(e,a);if(f){if(f.scale==null&&f.defaultScale==="color")continue;n[a]=f}}this.facet&&(t.fx&&!("fx"in r)&&(n.fx=!0),t.fy&&!("fy"in r)&&(n.fy=!0));for(const a in n){const f=this.format[a];if(typeof f=="string"){const u=((i=n[a])==null?void 0:i.value)??((o=t[a])==null?void 0:o.domain())??[];this.format[a]=(Fe(u)?Li:Tr)(f)}else if(f===void 0||f===!0){const u=t[a];this.format[a]=u!=null&&u.bandwidth?$c(u,u.domain()):wr}}return n}function Gd(e,t,n){if(!(n in e))return e;const r=`${n}1`,i=`${n}2`;if((r in e||!(r in t))&&(i in e||!(i in t)))return e;const o=Object.entries(e),a=e[n];return o.splice(o.findIndex(([f])=>f===n)+1,0,[r,a],[i,a]),Object.fromEntries(o)}function fT(e,t,{title:n}){return this.format.title(n.value[e],e)}function*uT(e,t,n,r,i){for(const o in n){if(o==="fx"||o==="fy"){yield{label:sa(r,n,o),value:this.format[o](t[o],e)};continue}if(o==="x1"&&"x2"in n||o==="y1"&&"y2"in n)continue;const a=n[o];if(o==="x2"&&"x1"in n)yield{label:Xd(r,n,"x"),value:Wd(this.format.x2,n.x1,a,e)};else if(o==="y2"&&"y1"in n)yield{label:Xd(r,n,"y"),value:Wd(this.format.y2,n.y1,a,e)};else{const f=a.value[e],u=a.scale;if(!cn(f)&&u==null)continue;yield{label:sa(r,n,o),value:this.format[o](f,e),color:u==="color"?i[o][e]:null,opacity:u==="opacity"?i[o][e]:null}}}}function Wd(e,t,n,r){var i;return(i=n.hint)!=null&&i.length?`${e(n.value[r]-t.value[r],r)}`:`${e(t.value[r],r)}–${e(n.value[r],r)}`}function Xd(e,t,n){const r=sa(e,t,`${n}1`,n),i=sa(e,t,`${n}2`,n);return r===i?r:`${r}–${i}`}function sa(e,t,n,r=n){const i=t[n],o=e[(i==null?void 0:i.scale)??n];return String((o==null?void 0:o.label)??(i==null?void 0:i.label)??r)}function sT(e={}){var H;const{facet:t,style:n,title:r,subtitle:i,caption:o,ariaLabel:a,ariaDescription:f}=e,u=Wa(e.className),s=e.marks===void 0?[]:Kd(e.marks);s.push(...gT(s));const c=pT(t,e),l=new Map;for(const O of s){const j=Zd(O,c,e);j&&l.set(O,j)}const d=new Map;c&&Rr(d,[c],e),Rr(d,l,e);const h=Kd(bT(s,d,e));for(const O of h){const j=Zd(O,c,e);j&&l.set(O,j)}s.unshift(...h);let p=H4(d,e);if(p!==void 0){const O=c?Wf(p,c):void 0;for(const P of s){if(P.facet===null||P.facet==="super")continue;const F=l.get(P);F!==void 0&&(F.facetsIndex=P.fx!=null||P.fy!=null?Wf(p,F):O)}const j=new Set;for(const{facetsIndex:P}of l.values())P==null||P.forEach((F,K)=>{(F==null?void 0:F.length)>0&&j.add(K)});p.forEach(0<j.size&&j.size<p.length?(P,F)=>P.empty=!j.has(F):P=>P.empty=!1);for(const P of s)if(P.facet==="exclude"){const F=l.get(P);F!==void 0&&(F.facetsIndex=W4(F.facetsIndex))}}for(const O of pe.keys())Ju(e[O])&&O!=="fx"&&O!=="fy"&&d.set(O,[]);const g=new Map;for(const O of s){if(g.has(O))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:j,channels:P}=l.get(O)??{},{data:F,facets:K,channels:Z}=O.initialize(j,P,e);Ec(Z,e),g.set(O,{data:F,facets:K,channels:Z})}const m=os(Rr(d,g,e),e),y=k7(m,s,e);R4(m,y);const b=Ed(m),{fx:w,fy:v}=b,T=w||v?E1(m,y):y,_=w||v?ST(b,y):y,E=bc(e),C=E.document,k=va("svg").call(C.documentElement);let R=k;E.ownerSVGElement=k,E.className=u,E.projection=n7(e,T),E.filterFacets=(O,j)=>Wf(p,{channels:j,groups:gc(O,j)}),E.getMarkState=O=>{const j=g.get(O),P=l.get(O);return{...j,channels:{...j.channels,...P==null?void 0:P.channels}}},E.dispatchValue=O=>{R.value!==O&&(R.value=O,R.dispatchEvent(new Event("input",{bubbles:!0})))};const $=new Set;for(const[O,j]of g)if(O.initializer!=null){const P=O.facet==="super"?_:T,F=O.initializer(j.data,j.facets,j.channels,b,P,E);if(F.data!==void 0&&(j.data=F.data),F.facets!==void 0&&(j.facets=F.facets),F.channels!==void 0){const{fx:K,fy:Z,...W}=F.channels;hT(W),Object.assign(j.channels,W);for(const Y of Object.values(W)){const{scale:z}=Y;z!=null&&!$x(pe.get(z))&&(jb(Y,e),$.add(z))}(K!=null||Z!=null)&&l.set(O,!0)}}if($.size){const O=new Map;Rr(O,g,e,K=>$.has(K)),Rr(d,g,e,K=>$.has(K));const j=TT(os(O,e),m),{scales:P,...F}=Ed(j);Object.assign(m,j),Object.assign(b,F),Object.assign(b.scales,P)}let S,x;p!==void 0&&(S={x:w==null?void 0:w.domain(),y:v==null?void 0:v.domain()},p=Y4(p,S),x=G4(w,v,y));for(const[O,j]of g)j.values=O.scale(j.channels,b,E);const{width:A,height:M}=y;er(k).attr("class",u).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",A).attr("height",M).attr("viewBox",`0 0 ${A} ${M}`).attr("aria-label",a).attr("aria-description",f).call(O=>O.append("style").text(`:where(.${u}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${u} text),
:where(.${u} tspan) {
  white-space: pre;
}`)).call(vc,n);for(const O of s){const{channels:j,values:P,facets:F}=g.get(O);if(p===void 0||O.facet==="super"){let K=null;if(F&&(K=F[0],K=O.filter(K,j,P),K.length===0))continue;const Z=O.render(K,b,P,_,E);if(Z==null)continue;k.appendChild(Z)}else{let K;for(const Z of p){if(!(((H=O.facetAnchor)==null?void 0:H.call(O,p,S,Z))??!Z.empty))continue;let W=null;if(F){const z=l.has(O);if(W=F[z?Z.i:0],W=O.filter(W,j,P),W.length===0)continue;!z&&W===F[0]&&(W=lx(W)),W.fx=Z.x,W.fy=Z.y,W.fi=Z.i}const Y=O.render(W,b,P,T,E);if(Y!=null){(K??(K=er(k).append("g"))).append(()=>Y).datum(Z);for(const z of["aria-label","aria-description","aria-hidden","transform"])Y.hasAttribute(z)&&(K.attr(z,Y.getAttribute(z)),Y.removeAttribute(z))}}K==null||K.selectChildren().attr("transform",x)}}const N=D9(m,E,e),{figure:L=r!=null||i!=null||o!=null||N.length>0}=e;L&&(R=C.createElement("figure"),R.className=`${u}-figure`,R.style.maxWidth="initial",r!=null&&R.append(Vd(C,r,"h2")),i!=null&&R.append(Vd(C,i,"h3")),R.append(...N,k),o!=null&&R.append(cT(C,o)),"value"in k&&(R.value=k.value,delete k.value)),R.scale=B4(b.scales),R.legend=k9(m,E,e);const B=y4();return B>0&&er(k).append("text").attr("x",A).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("⚠️").append("title").text(`${B.toLocaleString("en-US")} warning${B===1?"":"s"}. Please check the console.`),R}function Vd(e,t,n){if(t.ownerDocument)return t;const r=e.createElement(n);return r.append(t),r}function cT(e,t){const n=e.createElement("figcaption");return n.append(t),n}function Kd(e){return e.flat(1/0).filter(t=>t!=null).map(lT)}function lT(e){return typeof e.render=="function"?e:new dT(e)}class dT extends Je{constructor(t){if(typeof t!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}}function Ec(e,t){for(const n in e)jb(e[n],t);return e}function jb(e,t){const{scale:n,transform:r=!0}=e;if(n==null||!r)return;const{type:i,percent:o,interval:a,transform:f=o?u=>u==null?NaN:u*100:Vg(a,i)}=t[n]??{};f!=null&&(e.value=me(e.value,f),e.transform=!1)}function hT(e){for(const t in e)d1(t,e[t])}function Rr(e,t,n,r=ax){var i,o;for(const{channels:a}of t.values())for(const f in a){const u=a[f],{scale:s}=u;if(s!=null&&r(s))if(s==="projection"){if(!a7(n)){const c=((i=n.x)==null?void 0:i.domain)===void 0,l=((o=n.y)==null?void 0:o.domain)===void 0;if(c||l){const[d,h]=u7(u);c&&Jf(e,"x",d),l&&Jf(e,"y",h)}}}else Jf(e,s,u)}return e}function Jf(e,t,n){const r=e.get(t);r!==void 0?r.push(n):e.set(t,[n])}function pT(e,t){if(e==null)return;const{x:n,y:r}=e;if(n==null&&r==null)return;const i=gr(e.data);if(i==null)throw new Error("missing facet data");const o={};n!=null&&(o.fx=mi(i,{value:n,scale:"fx"})),r!=null&&(o.fy=mi(i,{value:r,scale:"fy"})),Ec(o,t);const a=gc(i,o);return{channels:o,groups:a,data:e.data}}function Zd(e,t,n){if(e.facet===null||e.facet==="super")return;const{fx:r,fy:i}=e;if(r!=null||i!=null){const u=gr(e.data??r??i);if(u===void 0)throw new Error(`missing facet data in ${e.ariaLabel}`);if(u===null)return;const s={};return r!=null&&(s.fx=mi(u,{value:r,scale:"fx"})),i!=null&&(s.fy=mi(u,{value:i,scale:"fy"})),Ec(s,n),{channels:s,groups:gc(u,s)}}if(t===void 0)return;const{channels:o,groups:a,data:f}=t;if(e.facet!=="auto"||e.data===f)return{channels:o,groups:a};f.length>0&&(a.size>1||a.size===1&&o.fx&&o.fy&&[...a][0][1].size>1)&&hi(gr(e.data))===hi(f)&&an(`Warning: the ${e.ariaLabel} mark appears to use faceted data, but isn’t faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function mT(e,t={}){return yr({...t,x:null,y:null},(n,r,i,o,a,f)=>f.getMarkState(e))}function gT(e){const t=[];for(const n of e){let r=n.tip;if(r){r===!0?r={}:typeof r=="string"&&(r={pointer:r});let{pointer:i,preferredAnchor:o}=r;i=/^x$/i.test(i)?D7:/^y$/i.test(i)?Rd:L7,r=i(mT(n,r)),r.title=null,o===void 0&&(r.preferredAnchor=i===Rd?"left":"bottom");const a=rT(n.data,r);a.facet=n.facet,a.facetAnchor=n.facetAnchor,t.push(a)}}return t}function bT(e,t,n){let{projection:r,x:i={},y:o={},fx:a={},fy:f={},axis:u,grid:s,facet:c={},facet:{axis:l=u,grid:d}=c,x:{axis:h=u,grid:p=h===null?null:s}=i,y:{axis:g=u,grid:m=g===null?null:s}=o,fx:{axis:y=l,grid:b=y===null?null:d}=a,fy:{axis:w=l,grid:v=w===null?null:d}=f}=n;(r||!Ju(i)&&!Qd("x",e))&&(h=p=null),(r||!Ju(o)&&!Qd("y",e))&&(g=m=null),t.has("fx")||(y=b=null),t.has("fy")||(w=v=null),h===void 0&&(h=!so(e,"x")),g===void 0&&(g=!so(e,"y")),y===void 0&&(y=!so(e,"fx")),w===void 0&&(w=!so(e,"fy")),h===!0&&(h="bottom"),g===!0&&(g="left"),y===!0&&(y=h==="top"||h===null?"bottom":"top"),w===!0&&(w=g==="right"||g===null?"left":"right");const T=[];return uo(T,v,w9,f),fo(T,w,h9,"right","left",c,f),uo(T,b,x9,a),fo(T,y,p9,"top","bottom",c,a),uo(T,m,v9,o),fo(T,g,mb,"left","right",n,o),uo(T,p,_9,i),fo(T,h,gb,"bottom","top",n,i),T}function fo(e,t,n,r,i,o,a){if(!t)return;const f=yT(t);a=vT(f?r:t,o,a);const{line:u}=a;(n===mb||n===gb)&&u&&!pi(u)&&e.push(eT(wT(a))),e.push(n(a)),f&&e.push(n({...a,anchor:i,label:null}))}function uo(e,t,n,r){!t||pi(t)||e.push(n(_T(t,r)))}function yT(e){return/^\s*both\s*$/i.test(e)}function vT(e,t,{line:n=t.line,ticks:r,tickSize:i,tickSpacing:o,tickPadding:a,tickFormat:f,tickRotate:u,fontVariant:s,ariaLabel:c,ariaDescription:l,label:d=t.label,labelAnchor:h,labelArrow:p=t.labelArrow,labelOffset:g}){return{anchor:e,line:n,ticks:r,tickSize:i,tickSpacing:o,tickPadding:a,tickFormat:f,tickRotate:u,fontVariant:s,ariaLabel:c,ariaDescription:l,label:d,labelAnchor:h,labelArrow:p,labelOffset:g}}function wT(e){const{anchor:t,line:n}=e;return{anchor:t,facetAnchor:t+"-empty",stroke:n===!0?void 0:n}}function _T(e,{stroke:t=za(e)?e:void 0,ticks:n=xT(e)?e:void 0,tickSpacing:r,ariaLabel:i,ariaDescription:o}){return{stroke:t,ticks:n,tickSpacing:r,ariaLabel:i,ariaDescription:o}}function xT(e){switch(typeof e){case"number":return!0;case"string":return!za(e)}return bn(e)||typeof(e==null?void 0:e.range)=="function"}function so(e,t){const n=`${t}-axis `;return e.some(r=>{var i;return(i=r.ariaLabel)==null?void 0:i.startsWith(n)})}function Qd(e,t){for(const n of t)for(const r in n.channels){const{scale:i}=n.channels[r];if(i===e||i==="projection")return!0}return!1}function TT(e,t){for(const n in e){const r=e[n],i=t[n];r.label===void 0&&i&&(r.label=i.label)}return e}function ST({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:o,marginLeft:a,width:f,height:u}=mc(n),s=e&&Jd(e),c=t&&Jd(t);return{marginTop:t?c[0]:r,marginRight:e?f-s[1]:i,marginBottom:t?u-c[1]:o,marginLeft:e?s[0]:a,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:f,height:u}}function Jd(e){const t=e.domain();if(t.length===0)return[0,e.bandwidth()];let n=e(t[0]),r=e(t[t.length-1]);return r<n&&([n,r]=[r,n]),[n,r+e.bandwidth()]}const MT=new Map([["basis",N8],["basis-closed",L8],["basis-open",D8],["bundle",I8],["bump-x",w8],["bump-y",_8],["cardinal",R8],["cardinal-closed",O8],["cardinal-open",P8],["catmull-rom",F8],["catmull-rom-closed",q8],["catmull-rom-open",j8],["linear",Di],["linear-closed",z8],["monotone-x",B8],["monotone-y",U8],["natural",H8],["step",Y8],["step-after",W8],["step-before",G8]]);function zb(e=Di,t){if(typeof e=="function")return e;const n=MT.get(`${e}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${e}`);if(t!==void 0){if("beta"in n)return n.beta(t);if("tension"in n)return n.tension(t);if("alpha"in n)return n.alpha(t)}return n}function $T(e=ca,t){return typeof e!="function"&&`${e}`.toLowerCase()==="auto"?ca:zb(e,t)}function ca(e){return Di(e)}function ET(e={y:"count"},t={}){[e,t]=kT(e,t);const{x:n,y:r}=t;return CT(NT(n,t,xe),null,null,r,e,Va(t))}function AT(e,t,n={}){if((n==null?void 0:n.interval)==null)return n;const{reduce:r=lc}=n,i={filter:null};return n[t]!=null&&(i[t]=r),n[`${t}1`]!=null&&(i[`${t}1`]=r),n[`${t}2`]!=null&&(i[`${t}2`]=r),e(i,n)}function Bb(e={}){return AT(ET,"y",Bi(e,"x"))}function CT(e,t,n,r,{data:i=cc,filter:o=aa,sort:a,reverse:f,...u}={},s={}){e=eh(e),t=eh(t),u=DT(u,s),i=Yb(i,xe),a=a==null?void 0:Ub("sort",a,s),o=o==null?void 0:Hb("filter",o,s),r!=null&&ti(u,"y","y1","y2")&&(r=null);const[c,l]=Re(e),[d,h]=Re(e),[p,g]=Re(t),[m,y]=Re(t),[b,w]=r!=null?[r,"y"]:[],[v,T]=Re(b),{x:_,y:E,z:C,fill:k,stroke:R,x1:$,x2:S,y1:x,y2:A,domain:M,cumulative:N,thresholds:L,interval:B,...H}=s,[O,j]=Re(C),[P]=Qe(k),[F]=Qe(R),[K,Z]=Re(P),[W,Y]=Re(F);return{..."z"in s&&{z:O||C},..."fill"in s&&{fill:K||k},..."stroke"in s&&{stroke:W||R},...qi(H,(z,D,U)=>{const G=oa(le(z,b),U==null?void 0:U[w]),I=le(z,C),ie=le(z,P),V=le(z,F),oe=s1(u,{z:I,fill:ie,stroke:V}),ae=[],ce=[],lt=G&&T([]),wn=I&&j([]),sy=ie&&Z([]),cy=V&&Y([]),kc=e&&l([]),ly=e&&h([]),Nc=t&&g([]),dy=t&&y([]),hy=OT(e,t,z);let py=0;for(const Hn of u)Hn.initialize(z);a&&a.initialize(z),o&&o.initialize(z);for(const Hn of D){const Lc=[];for(const Yn of u)Yn.scope("facet",Hn);a&&a.scope("facet",Hn),o&&o.scope("facet",Hn);for(const[Yn,my]of ni(Hn,oe))for(const[gy,Ui]of ni(my,G))for(const[dt,At]of hy(Ui))if(oe&&(At.z=Yn),!(o&&!o.reduce(dt,At))){Lc.push(py++),ce.push(i.reduceIndex(dt,z,At)),G&&lt.push(gy),I&&wn.push(oe===I?Yn:I[(dt.length>0?dt:Ui)[0]]),ie&&sy.push(oe===ie?Yn:ie[(dt.length>0?dt:Ui)[0]]),V&&cy.push(oe===V?Yn:V[(dt.length>0?dt:Ui)[0]]),kc&&(kc.push(At.x1),ly.push(At.x2)),Nc&&(Nc.push(At.y1),dy.push(At.y2));for(const by of u)by.reduce(dt,At);a&&a.reduce(dt,At)}ae.push(Lc)}return c1(ae,a,f),{data:ce,facets:ae}}),...!ti(u,"x")&&(c?{x1:c,x2:d,x:es(c,d)}:{x:_,x1:$,x2:S}),...!ti(u,"y")&&(p?{y1:p,y2:m,y:es(p,m)}:{y:E,y1:x,y2:A}),...v&&{[w]:v},...Object.fromEntries(u.map(({name:z,output:D})=>[z,D]))}}function kT({cumulative:e,domain:t,thresholds:n,interval:r,...i},o){return[i,{cumulative:e,domain:t,thresholds:n,interval:r,...o}]}function NT(e,{cumulative:t,domain:n,thresholds:r,interval:i},o){return e={...$r(e)},e.domain===void 0&&(e.domain=n),e.cumulative===void 0&&(e.cumulative=t),e.thresholds===void 0&&(e.thresholds=r),e.interval===void 0&&(e.interval=i),e.value===void 0&&(e.value=o),e.thresholds=LT(e.thresholds,e.interval),e}function eh(e){if(e==null)return;const{value:t,cumulative:n,domain:r=Ge,thresholds:i}=e,o=a=>{let f=le(a,t),u;if(Fe(f)||RT(i)){f=me(f,Gg,Float64Array);let[c,l]=typeof r=="function"?r(f):r,d=typeof i=="function"&&!Qn(i)?i(f,c,l):i;typeof d=="number"&&(d=jp(c,l,d)),Qn(d)&&(r===Ge&&(c=d.floor(c),l=d.offset(d.floor(l))),d=d.range(c,d.offset(l))),u=d}else{f=mr(f);let[c,l]=typeof r=="function"?r(f):r,d=typeof i=="function"&&!Qn(i)?i(f,c,l):i;if(typeof d=="number")if(r===Ge){let h=Eo(c,l,d);if(isFinite(h))if(h>0){let p=Math.round(c/h),g=Math.round(l/h);p*h<=c||--p,g*h>l||++g;let m=g-p+1;d=new Float64Array(m);for(let y=0;y<m;++y)d[y]=(p+y)*h}else if(h<0){h=-h;let p=Math.round(c*h),g=Math.round(l*h);p/h<=c||--p,g/h>l||++g;let m=g-p+1;d=new Float64Array(m);for(let y=0;y<m;++y)d[y]=(p+y)/h}else d=[c];else d=[c]}else d=ri(c,l,d);else Qn(d)&&(r===Ge&&(c=d.floor(c),l=d.offset(d.floor(l))),d=d.range(c,d.offset(l)));u=d}const s=[];if(u.length===1)s.push([u[0],u[0]]);else for(let c=1;c<u.length;++c)s.push([u[c-1],u[c]]);return s.bin=(n<0?FT:n>0?PT:Ac)(s,u,f),s};return o.label=gn(t),o}function LT(e,t,n=th){if(e===void 0)return t===void 0?n:Mr(t);if(typeof e=="string"){switch(e.toLowerCase()){case"freedman-diaconis":return Y2;case"scott":return Jh;case"sturges":return z2;case"auto":return th}return Xs(e)}return e}function DT(e,t){return o1(e,t,Ub)}function Ub(e,t,n){return uc(e,t,n,Hb)}function Hb(e,t,n){return sc(e,t,n,Yb)}function Yb(e,t){return Ua(e,t,IT)}function IT(e){switch(`${e}`.toLowerCase()){case"x":return qT;case"x1":return zT;case"x2":return BT;case"y":return jT;case"y1":return UT;case"y2":return HT;case"z":return l1}throw new Error(`invalid bin reduce: ${e}`)}function th(e,t,n){return Math.min(200,Jh(e,t,n))}function RT(e){return mx(e)||bn(e)&&Fe(e)}function OT(e,t,n){const r=e==null?void 0:e(n),i=t==null?void 0:t(n);return r&&i?function*(o){const a=r.bin(o);for(const[f,[u,s]]of r.entries()){const c=i.bin(a[f]);for(const[l,[d,h]]of i.entries())yield[c[l],{data:n,x1:u,y1:d,x2:s,y2:h}]}}:r?function*(o){const a=r.bin(o);for(const[f,[u,s]]of r.entries())yield[a[f],{data:n,x1:u,x2:s}]}:function*(o){const a=i.bin(o);for(const[f,[u,s]]of i.entries())yield[a[f],{data:n,y1:u,y2:s}]}}function Ac(e,t,n){return t=mr(t),r=>{var o;const i=e.map(()=>[]);for(const a of r)(o=i[ma(t,n[a])-1])==null||o.push(a);return i}}function PT(e,t,n){const r=Ac(e,t,n);return i=>{const o=r(i);for(let a=1,f=o.length;a<f;++a){const u=o[a-1],s=o[a];for(const c of u)s.push(c)}return o}}function FT(e,t,n){const r=Ac(e,t,n);return i=>{const o=r(i);for(let a=o.length-2;a>=0;--a){const f=o[a+1],u=o[a];for(const s of f)u.push(s)}return o}}function Gb(e,t){const n=(+e+ +t)/2;return e instanceof Date?new Date(n):n}const qT={reduceIndex(e,t,{x1:n,x2:r}){return Gb(n,r)}},jT={reduceIndex(e,t,{y1:n,y2:r}){return Gb(n,r)}},zT={reduceIndex(e,t,{x1:n}){return n}},BT={reduceIndex(e,t,{x2:n}){return n}},UT={reduceIndex(e,t,{y1:n}){return n}},HT={reduceIndex(e,t,{y2:n}){return n}},YT={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Wb extends Je{constructor(t,n={}){const{x1:r,y1:i,x2:o,y2:a,z:f,curve:u,tension:s}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0},z:{value:ec(n),optional:!0}},n,YT),this.z=f,this.curve=zb(u,s)}filter(t){return t}render(t,n,r,i,o){const{x1:a,y1:f,x2:u=a,y2:s=f}=r;return Te("svg:g",o).call(Xt,this,i,o).call(Vt,this,n,0,0).call(c=>c.selectAll().data(R1(t,[a,f,u,s],this,r)).enter().append("path").call(Mt,this).call(I1,this,r).attr("d",v8().curve(this.curve).defined(l=>l>=0).x0(l=>a[l]).y0(l=>f[l]).x1(l=>u[l]).y1(l=>s[l]))).node()}}function nh(e,t){return t===void 0?Cc(e,{x:Zs,y:ra}):new Wb(e,t)}function Cc(e,t){const{x:n=Ri,...r}=Bb(t);return new Wb(e,Lb(Nb({...r,x1:n,x2:void 0})))}const GT={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Xb extends Je{constructor(t,n={}){const{x:r,y:i,z:o,curve:a,tension:f}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:ec(n),optional:!0}},n,GT),this.z=o,this.curve=$T(a,f),_c(this,n)}filter(t){return t}project(t,n,r){this.curve!==ca&&super.project(t,n,r)}render(t,n,r,i,o){const{x:a,y:f}=r,{curve:u}=this;return Te("svg:g",o).call(Xt,this,i,o).call(Vt,this,n).call(s=>s.selectAll().data(R1(t,[a,f],this,r)).enter().append("path").call(Mt,this).call(I1,this,r).call(F7,this,r,o).attr("d",u===ca&&o.projection?WT(o.projection,a,f):ug().curve(u).defined(c=>c>=0).x(c=>a[c]).y(c=>f[c]))).node()}}function WT(e,t,n){const r=Ma(e);return t=mr(t),n=mr(n),i=>{let o=[];const a=[o];for(const f of i)f===-1?(o=[],a.push(o)):o.push([t[f],n[f]]);return r({type:"MultiLineString",coordinates:a})}}function XT(e,{x:t,y:n,...r}={}){return[t,n]=Js(t,n),new Xb(e,{...r,x:t,y:n})}function Ja(e,{x:t=Ri,y:n=xe,...r}={}){return new Xb(e,Bb({...r,x:t,y:n}))}function Vb(e,t){return VT("y",e,t)}function VT(e,t,{x1:n,x2:r,y1:i,y2:o,x:a=n===void 0&&r===void 0?Ri:void 0,y:f=i===void 0&&o===void 0?xe:void 0,fill:u,positiveFill:s="#3ca951",negativeFill:c="#4269d0",fillOpacity:l=1,positiveFillOpacity:d=l,negativeFillOpacity:h=l,stroke:p,strokeOpacity:g,z:m=Qe(p)[0],clip:y,tip:b,render:w,...v}={}){return[n,r]=rh(a,n,r),[i,o]=rh(f,i,o),n===r&&i===o&&(i=en(0)),{tip:b}=Bi({tip:b},"x"),Un(Ee(s)?null:Object.assign(nh(t,{x1:n,x2:r,y1:i,y2:o,z:m,fill:s,fillOpacity:d,render:ua(w,ih(e,!0)),clip:y,...v}),{ariaLabel:"positive difference"}),Ee(c)?null:Object.assign(nh(t,{x1:n,x2:r,y1:i,y2:o,z:m,fill:c,fillOpacity:h,render:ua(w,ih(e,!1)),clip:y,...v}),{ariaLabel:"negative difference"}),XT(t,{x:r,y:o,z:m,stroke:p,strokeOpacity:g,tip:b,clip:!0,...v}))}function rh(e,t,n){return t===void 0&&n===void 0?t=n=en(e):t===void 0?(n=en(n),t=e===void 0?n:en(e)):n===void 0?(t=en(t),n=e===void 0?t:en(e)):(t=en(t),n=en(n)),[t,n]}function en(e){let t;const{value:n,label:r=gn(n)}=$r(e);return{transform:i=>t||(t=le(i,n)),label:r}}function ih(e,t){const n="x",r=`${n}1`,i=`${n}2`,o=`${e}1`,a=`${e}2`;return(f,u,s,c,l,d)=>{const{[r]:h,[i]:p}=s,g=new Float32Array(h.length),m=new Float32Array(p.length),y=c.height;(t===$1(u[e])<0?g:m).fill(y);const b=d(f,u,{...s,[i]:h,[a]:m},c,l),w=d(f,u,{...s,[r]:p,[o]:g},c,l),v=b.querySelector("g")??b,T=w.querySelector("g")??w;for(let _=0;v.firstChild;_+=2){const E=D1(),C=Te("svg:clipPath",l).attr("id",E).node();C.appendChild(v.firstChild),T.childNodes[_].setAttribute("clip-path",`url(#${E})`),T.insertBefore(C,T.childNodes[_])}return w}}Je.prototype.plot=function({marks:e=[],...t}={}){return sT({...t,marks:[...e,this]})};function oh(e){const t=document.createElement("template");return t.innerHTML=e,document.importNode(t.content,!0)}function ah(e){const t=document.createElementNS("http://www.w3.org/2000/svg","g");return t.innerHTML=e,t}Object.assign(da(oh,e=>{if(e.firstChild===null)return null;if(e.firstChild===e.lastChild)return e.removeChild(e.firstChild);const t=document.createElement("span");return t.appendChild(e),t}),{fragment:da(oh,e=>e)});const KT=Object.assign(da(ah,e=>e.firstChild===null?null:e.firstChild===e.lastChild?e.removeChild(e.firstChild):e),{fragment:da(ah,e=>{const t=document.createDocumentFragment();for(;e.firstChild;)t.appendChild(e.firstChild);return t})}),ZT=9,QT=10,JT=12,eS=13,tS=32,nS=65,rS=90,iS=97,oS=122,co=60,ke=62,Kt=47,ht=45,eu=33,tu=61,fh=34,uh=39,aS=63,Se=1,sh=2,ch=3,nu=4,lo=5,Zt=6,ru=7,ho=8,po=9,iu=10,ou=11,mo=12,au=13,Or=14,lh=15,dh=16,Dt=17,hh=18,ph=19,mh=20,gh=21,fu=22,Pr=23,bh=24,yh=25,pt=26,vh=27,wh=28,_h=29,fS=128,xh=1,uS=8,sS=1,Kb="http://www.w3.org/2000/svg",_n="http://www.w3.org/1999/xlink",Th="http://www.w3.org/XML/1998/namespace",Sh="http://www.w3.org/2000/xmlns/",Zb=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),la=new Map([["xlink:actuate",_n],["xlink:arcrole",_n],["xlink:href",_n],["xlink:role",_n],["xlink:show",_n],["xlink:title",_n],["xlink:type",_n],["xml:lang",Th],["xml:space",Th],["xmlns",Sh],["xmlns:xlink",Sh]]);function da(e,t){return function({raw:n}){let r=Se,i="",o,a,f,u,s=0;for(let h=0,p=arguments.length;h<p;++h){const g=n[h];if(h>0){const m=arguments[h];switch(r){case pt:{if(m!=null){const y=`${m}`;if(Qb(a))i+=y.replace(/[<]/g,Vn);else{if(new RegExp(`</${a}[\\s>/]`,"i").test(i.slice(-a.length-2)+y))throw new Error("unsafe raw text");i+=y}}break}case Se:{m==null||(m instanceof Node||typeof m!="string"&&m[Symbol.iterator]||/(?:^|>)$/.test(n[h-1])&&/^(?:<|$)/.test(g)?(i+="<!--::"+h+"-->",s|=fS):i+=`${m}`.replace(/[<&]/g,Vn));break}case po:{r=mo;let y;if(/^[\s>]/.test(g)){if(m==null||m===!1){i=i.slice(0,f-n[h-1].length);break}if(m===!0||(y=`${m}`)==""){i+="''";break}if(n[h-1].slice(f,u)==="style"&&uu(m)||typeof m=="function"){i+="::"+h,s|=xh;break}}if(y===void 0&&(y=`${m}`),y==="")throw new Error("unsafe unquoted empty string");i+=y.replace(/^['"]|[\s>&]/g,Vn);break}case mo:{i+=`${m}`.replace(/[\s>&]/g,Vn);break}case ou:{i+=`${m}`.replace(/['&]/g,Vn);break}case iu:{i+=`${m}`.replace(/["&]/g,Vn);break}case Zt:{if(uu(m)){i+="::"+h+"=''",s|=xh;break}throw new Error("invalid binding")}case Dt:break;default:throw new Error("invalid binding")}}for(let m=0,y=g.length;m<y;++m){const b=g.charCodeAt(m);switch(r){case Se:{b===co&&(r=sh);break}case sh:{b===eu?r=yh:b===Kt?r=ch:go(b)?(o=m,a=void 0,r=nu,--m):b===aS?(r=lo,--m):(r=Se,--m);break}case ch:{go(b)?(r=nu,--m):b===ke?r=Se:(r=lo,--m);break}case nu:{Qt(b)?(r=Zt,a=qr(g,o,m)):b===Kt?r=Or:b===ke&&(a=qr(g,o,m),r=Fr(a)?pt:Se);break}case Zt:{Qt(b)||(b===Kt||b===ke?(r=ru,--m):b===tu?(r=ho,f=m+1,u=void 0):(r=ho,--m,f=m+1,u=void 0));break}case ho:{Qt(b)||b===Kt||b===ke?(r=ru,--m,u=m):b===tu&&(r=po,u=m);break}case ru:{Qt(b)||(b===Kt?r=Or:b===tu?r=po:b===ke?r=Fr(a)?pt:Se:(r=ho,--m,f=m+1,u=void 0));break}case po:{Qt(b)||(b===fh?r=iu:b===uh?r=ou:b===ke?r=Fr(a)?pt:Se:(r=mo,--m));break}case iu:{b===fh&&(r=au);break}case ou:{b===uh&&(r=au);break}case mo:{Qt(b)?r=Zt:b===ke&&(r=Fr(a)?pt:Se);break}case au:{Qt(b)?r=Zt:b===Kt?r=Or:b===ke?r=Fr(a)?pt:Se:(r=Zt,--m);break}case Or:{b===ke?r=Se:(r=Zt,--m);break}case lo:{b===ke&&(r=Se);break}case lh:{b===ht?r=dh:b===ke?r=Se:(r=Dt,--m);break}case dh:{b===ht?r=Pr:b===ke?r=Se:(r=Dt,--m);break}case Dt:{b===co?r=hh:b===ht&&(r=fu);break}case hh:{b===eu?r=ph:b!==co&&(r=Dt,--m);break}case ph:{b===ht?r=mh:(r=Dt,--m);break}case mh:{b===ht?r=gh:(r=Pr,--m);break}case gh:{r=Pr,--m;break}case fu:{b===ht?r=Pr:(r=Dt,--m);break}case Pr:{b===ke?r=Se:b===eu?r=bh:b!==ht&&(r=Dt,--m);break}case bh:{b===ht?r=fu:b===ke?r=Se:(r=Dt,--m);break}case yh:{b===ht&&g.charCodeAt(m+1)===ht?(r=lh,++m):(r=lo,--m);break}case pt:{b===co&&(r=vh);break}case vh:{b===Kt?r=wh:(r=pt,--m);break}case wh:{go(b)?(o=m,r=_h,--m):(r=pt,--m);break}case _h:{Qt(b)&&a===qr(g,o,m)?r=Zt:b===Kt&&a===qr(g,o,m)?r=Or:b===ke&&a===qr(g,o,m)?r=Se:go(b)||(r=pt,--m);break}default:{r=void 0;break}}}i+=g}const c=e(i),l=document.createTreeWalker(c,s,null,!1),d=[];for(;l.nextNode();){const h=l.currentNode;switch(h.nodeType){case sS:{const p=h.attributes;for(let g=0,m=p.length;g<m;++g){const{name:y,value:b}=p[g];if(/^::/.test(y)){const w=arguments[+y.slice(2)];Mh(h,y),--g,--m;for(const v in w){const T=w[v];T==null||T===!1||(typeof T=="function"?h[v]=T:v==="style"&&uu(T)?$h(h[v],T):cS(h,v,T===!0?"":T))}}else if(/^::/.test(b)){const w=arguments[+b.slice(2)];Mh(h,y),--g,--m,typeof w=="function"?h[y]=w:$h(h[y],w)}}break}case uS:{if(/^::/.test(h.data)){const p=h.parentNode,g=arguments[+h.data.slice(2)];if(g instanceof Node)p.insertBefore(g,h);else if(typeof g!="string"&&g[Symbol.iterator])if(g instanceof NodeList||g instanceof HTMLCollection)for(let m=g.length-1,y=h;m>=0;--m)y=p.insertBefore(g[m],y);else for(const m of g)m!=null&&p.insertBefore(m instanceof Node?m:document.createTextNode(m),h);else p.insertBefore(document.createTextNode(g),h);d.push(h)}break}}}for(const h of d)h.parentNode.removeChild(h);return t(c)}}function Vn(e){return`&#${e.charCodeAt(0).toString()};`}function go(e){return nS<=e&&e<=rS||iS<=e&&e<=oS}function Qt(e){return e===ZT||e===QT||e===JT||e===tS||e===eS}function uu(e){return e&&e.toString===Object.prototype.toString}function Fr(e){return e==="script"||e==="style"||Qb(e)}function Qb(e){return e==="textarea"||e==="title"}function qr(e,t,n){return e.slice(t,n).toLowerCase()}function cS(e,t,n){if(e.namespaceURI===Kb&&(t=t.toLowerCase(),t=Zb.get(t)||t,la.has(t))){e.setAttributeNS(la.get(t),t,n);return}e.setAttribute(t,n)}function Mh(e,t){if(e.namespaceURI===Kb&&(t=t.toLowerCase(),t=Zb.get(t)||t,la.has(t))){e.removeAttributeNS(la.get(t),t);return}e.removeAttribute(t)}function $h(e,t){for(const n in t){const r=t[n];n.startsWith("--")?e.setProperty(n,r):e[n]=r}}function Jb(e){return[Ka([0]),K1(e,{x:t=>new Date(t.date),stroke:yt.slate[500],opacity:.3}),nb(e,{x:t=>new Date(t.date),text:t=>t.name,frameAnchor:"top",textAnchor:"start",fill:yt.slate[500],stroke:yt.slate[950],strokeWidth:5,dx:1,dy:-17})]}const ey={stroke:yt.slate[700],fill:yt.slate[800],fillOpacity:.9,format:{x:!1,y:!1,z:!1,amount:e=>e.toLocaleString("en-AU",{style:"currency",currency:"AUD"}),date:e=>Ah(e).format("D MMMM, YYYY")}},ty={marginTop:20,marginBottom:30,marginLeft:60,marginRight:20,x:{grid:!1},y:{grid:!0,transform:e=>e/1e3,label:"AUD (K)",labelArrow:"none",labelOffset:47}};function ny({width:e,height:t,timeseries:n,scenarioEvents:r,color:i=yt.violet[700],opacity:o=.5}){const a=X.useRef(null);return X.useEffect(()=>{var u;const f=Un([()=>KT`<defs>
        <linearGradient id="gradient" gradientTransform="rotate(90)">
          <stop offset="20%" stop-color="${i}" stop-opacity="0.5" />
          <stop offset="100%" stop-color="${i}" stop-opacity="0" />
        </linearGradient>
      </defs>`,...Jb(r),Cc(n,{x:s=>new Date(s.date),y:"amount",fill:"url(#gradient)",opacity:o}),Ja(n,{x:s=>new Date(s.date),y:"amount",stroke:i,marker:"dot",channels:{amount:{label:"",value:"amount"},date:{label:"",value:"date"}},tip:ey})]).plot({...ty,width:e,height:t});return(u=a.current)==null||u.append(f),()=>f.remove()},[i,n,t,o,r,e]),q.jsx("div",{ref:a,className:"h-full w-full"})}ny.__docgenInfo={description:"",methods:[],displayName:"AreaChart",props:{width:{required:!0,tsType:{name:"number"},description:""},height:{required:!0,tsType:{name:"number"},description:""},timeseries:{required:!0,tsType:{name:"TimeSeriesData"},description:""},scenarioEvents:{required:!0,tsType:{name:"ScenarioStartEvents"},description:""},color:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"twColors.violet[700]",computed:!0}},opacity:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0.5",computed:!1}}}};const wt={primaryLight:yt.violet[600],primary:yt.violet[700],secondary:yt.amber[400],secondaryDark:yt.amber[500]};function ry({width:e,height:t,timeseries:n,scenarioEvents:r}){const i=X.useRef(null);return X.useEffect(()=>{var a;const o=Un([...Jb(r),Vb(n,i1({y1:fa(f=>f.name==="highlighted"),y2:fa(f=>f.name==="pinned")},{x:f=>new Date(f.date),y:"amount",positiveFill:wt.secondary,negativeFill:wt.primary,fillOpacity:.2})),Ja(n,{x:f=>new Date(f.date),y:"amount",stroke:f=>f.name==="highlighted"?wt.primaryLight:wt.secondary,marker:"dot",channels:{amount:{label:"",value:"amount"},date:{label:"",value:"date"}},tip:ey})]).plot({...ty,width:e,height:t});return(a=i.current)==null||a.append(o),()=>o.remove()},[n,t,e,r]),q.jsx("div",{ref:i,className:"h-full w-full"})}ry.__docgenInfo={description:"",methods:[],displayName:"DifferenceChart",props:{width:{required:!0,tsType:{name:"number"},description:""},height:{required:!0,tsType:{name:"number"},description:""},timeseries:{required:!0,tsType:{name:"TimeSeriesData"},description:""},scenarioEvents:{required:!0,tsType:{name:"ScenarioStartEvents"},description:""}}};function lS(e,t){if(e.length<=2)return e;const[n,r]=t;let i=Math.floor((e.length-1)*(n/100)),o=Math.floor((e.length-1)*(r/100));if(o-i===0)if(o+1<e.length)o+=1;else if(i-1>=0)i-=1;else throw new Error("Invalid selection (should have at least two data points)");const a=e[i].date,f=e[o].date;return e.filter(u=>u.date>=a&&u.date<=f)}function dS(e,t){if(t.length<2)return[];const n=t[0].date,r=t[t.length-1].date;return e.filter(i=>i.date>=n&&i.date<=r)}function iy({type:e,timeseries:t,scenarioEvents:n,selection:r}){const i=X.useMemo(()=>lS(t,r),[t,r]),o=X.useMemo(()=>dS(n,i),[n,i]);if(i.length<2){const a=i.length===0?"No data":"Insufficient data";return q.jsx("div",{className:"flex h-full items-center justify-center text-lg font-medium text-slate-600",children:a})}return q.jsx("div",{className:"h-full pt-1",children:q.jsx(hs,{children:({width:a,height:f})=>e==="area"?q.jsx(ny,{width:a,height:f,timeseries:i,scenarioEvents:o}):q.jsx(ry,{width:a,height:f,timeseries:i,scenarioEvents:o})})})}iy.__docgenInfo={description:"",methods:[],displayName:"ScenarioChart",props:{type:{required:!0,tsType:{name:"union",raw:"'area' | 'difference'",elements:[{name:"literal",value:"'area'"},{name:"literal",value:"'difference'"}]},description:""},timeseries:{required:!0,tsType:{name:"TimeSeriesData"},description:""},scenarioEvents:{required:!0,tsType:{name:"ScenarioStartEvents"},description:""},selection:{required:!0,tsType:{name:"TimeScrubberSelection"},description:""}}};function oy({width:e,height:t,data:n}){const r=X.useRef(null);return X.useEffect(()=>{var o;const i=Un([Ka([0]),Cc(n,{x:a=>new Date(a.date),y:"amount",fill:wt.primary,opacity:.5}),Ja(n,{x:a=>new Date(a.date),y:"amount",stroke:wt.primary})]).plot({width:e,height:t,marginLeft:0,marginRight:0,marginTop:16,y:{axis:null}});return(o=r.current)==null||o.append(i),()=>i.remove()},[n,t,e]),q.jsx("div",{ref:r,className:"h-full w-full"})}oy.__docgenInfo={description:"",methods:[],displayName:"TimelineAreaChart",props:{width:{required:!0,tsType:{name:"number"},description:""},height:{required:!0,tsType:{name:"number"},description:""},data:{required:!1,tsType:{name:"Plot.Data"},description:""}}};function ay({width:e,height:t,data:n}){const r=X.useRef(null);return X.useEffect(()=>{var o;const i=Un([Ka([0]),Vb(n,i1({y1:fa(a=>a.name==="highlighted"),y2:fa(a=>a.name==="pinned")},{x:a=>new Date(a.date),y:"amount",positiveFill:wt.secondary,negativeFill:wt.primary,fillOpacity:.2})),Ja(n,{x:a=>new Date(a.date),y:"amount",stroke:a=>a.name==="highlighted"?wt.primaryLight:wt.secondary})]).plot({width:e,height:t,marginLeft:0,marginRight:0,marginTop:16,y:{axis:null}});return(o=r.current)==null||o.append(i),()=>i.remove()},[n,t,e]),q.jsx("div",{ref:r,className:"h-full w-full"})}ay.__docgenInfo={description:"",methods:[],displayName:"TimelineDifferenceChart",props:{width:{required:!0,tsType:{name:"number"},description:""},height:{required:!0,tsType:{name:"number"},description:""},data:{required:!1,tsType:{name:"Plot.Data"},description:""}}};function hS({disabled:e=!1,leftPanelRef:t,rightPanelRef:n,selection:r,onUpdateSelection:i}){const[o,a]=r,f=X.useCallback(c=>{i&&i([c,a])},[i,a]),u=X.useCallback(c=>{i&&i([o,100-c])},[i,o]),s=X.useCallback(()=>{var l,d;a-o!==100&&((l=t.current)==null||l.resize(0),(d=n.current)==null||d.resize(0),i&&i([0,100]))},[o,a,t,n,i]);return X.useEffect(()=>{var c,l;e&&((c=t.current)==null||c.resize(o),(l=n.current)==null||l.resize(100-a))},[e,a,t,n,o]),{start:o,end:a,updateStart:f,updateEnd:u,maximize:s}}function fy({disabled:e=!1,selection:t,onUpdateSelection:n}){const r=X.useRef(null),i=X.useRef(null),{start:o,end:a,updateStart:f,updateEnd:u,maximize:s}=hS({leftPanelRef:r,rightPanelRef:i,selection:t,onUpdateSelection:n,disabled:e}),c=a-o===999;return q.jsxs(My,{direction:"horizontal",onDoubleClick:s,children:[q.jsx(ef,{className:"bg-gradient-to-tr from-slate-600/5 to-slate-600/20 backdrop-blur-[1px]",ref:r,defaultSize:o,onResize:f}),q.jsx(Oc,{className:"flex w-[5px] flex-col items-center justify-center bg-slate-700",disabled:e,children:q.jsx(Rc,{className:"text-slate-950",size:16})}),q.jsx(ef,{className:`border-b border-t border-slate-700 ${c&&"cursor-grab"}`}),q.jsx(Oc,{className:"flex w-[5px] flex-col items-center justify-center bg-slate-700",disabled:e,children:q.jsx(Rc,{className:"text-slate-950",size:16})}),q.jsx(ef,{className:"border-t-slate-50/5x border-b border-b-slate-800 bg-gradient-to-tr from-slate-600/5 to-slate-600/20 backdrop-blur-[1px]",ref:i,defaultSize:100-a,onResize:u})]})}fy.__docgenInfo={description:"",methods:[],displayName:"TimelineSelector",props:{disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},selection:{required:!0,tsType:{name:"TimeScrubberSelection"},description:""},onUpdateSelection:{required:!1,tsType:{name:"signature",type:"function",raw:"(selection: TimeScrubberSelection) => void",signature:{arguments:[{type:{name:"TimeScrubberSelection"},name:"selection"}],return:{name:"void"}}},description:""}}};function uy({data:e,type:t,selection:n,onUpdateSelection:r}){const i=e&&Array.from(e).length<2;return q.jsxs("div",{className:"relative h-20 bg-slate-900",children:[!i&&q.jsx(hs,{children:({width:o,height:a})=>t==="area"?q.jsx(oy,{width:o,height:a,data:e}):q.jsx(ay,{width:o,height:a,data:e})}),q.jsx("div",{className:"absolute bottom-0 left-0 right-0 top-0",children:q.jsx(fy,{selection:n,onUpdateSelection:r,disabled:i})})]})}uy.__docgenInfo={description:"",methods:[],displayName:"TimelineScrubber",props:{type:{required:!0,tsType:{name:"union",raw:"'area' | 'difference'",elements:[{name:"literal",value:"'area'"},{name:"literal",value:"'difference'"}]},description:""},data:{required:!1,tsType:{name:"Plot.Data"},description:""},selection:{required:!0,tsType:{name:"TimeScrubberSelection"},description:""},onUpdateSelection:{required:!1,tsType:{name:"signature",type:"function",raw:"(selection: TimeScrubberSelection) => void",signature:{arguments:[{type:{name:"TimeScrubberSelection"},name:"selection"}],return:{name:"void"}}},description:""}}};export{K1 as A,tb as B,yr as C,L7 as D,wd as E,Cc as F,Vb as G,u2 as H,Ja as I,i1 as J,fa as K,nb as L,Je as M,R9 as N,KT as O,hs as R,Uh as S,uy as T,Bh as a,iy as b,Uy as c,M2 as d,$2 as e,CS as f,ET as g,U7 as h,xe as i,ES as j,rc as k,Te as l,Un as m,Xt as n,Vt as o,Ys as p,Mt as q,Ka as r,Cu as s,Q1 as t,Fn as u,AS as v,qs as w,qe as x,Xa as y,Rg as z};
