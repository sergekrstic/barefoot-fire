import{j as U}from"./jsx-runtime-D_zvdyIk.js";import{F as by,M as yy,E as $h,C as vy,D as Ic}from"./CollapsibleTree.component-30vHkhqS.js";import{M as Vr,a as De}from"./DropdownMenu.component-2YZdI-ss.js";import{r as V,c as Hi,g as wy}from"./index-PahMPgEy.js";import{e as _y,f as xy,i as Ty,u as Le,p as Dc,h as Eh,j as su,k as Ah}from"./ScenarioGraph.component-D4ACKses.js";import{t as yt}from"./colors-Cuw9ST8W.js";import{P as Sy,a as ef,b as Rc}from"./react-resizable-panels.browser.esm-zIh8wNIw.js";const My={scenarioGraph:_y,scenarioMap:xy,budgetMap:Ty};function xn(){xn=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(S,x,A){S[x]=A.value},i=typeof Symbol=="function"?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",f=i.toStringTag||"@@toStringTag";function u(S,x,A){return Object.defineProperty(S,x,{value:A,enumerable:!0,configurable:!0,writable:!0}),S[x]}try{u({},"")}catch{u=function(x,A,M){return x[A]=M}}function s(S,x,A,M){var N=x&&x.prototype instanceof d?x:d,L=Object.create(N.prototype),z=new k(M||[]);return r(L,"_invoke",{value:T(S,A,z)}),L}function c(S,x,A){try{return{type:"normal",arg:S.call(x,A)}}catch(M){return{type:"throw",arg:M}}}e.wrap=s;var l={};function d(){}function h(){}function p(){}var g={};u(g,o,function(){return this});var m=Object.getPrototypeOf,y=m&&m(m(R([])));y&&y!==t&&n.call(y,o)&&(g=y);var b=p.prototype=d.prototype=Object.create(g);function w(S){["next","throw","return"].forEach(function(x){u(S,x,function(A){return this._invoke(x,A)})})}function v(S,x){function A(N,L,z,H){var O=c(S[N],S,L);if(O.type!=="throw"){var q=O.arg,P=q.value;return P&&typeof P=="object"&&n.call(P,"__await")?x.resolve(P.__await).then(function(F){A("next",F,z,H)},function(F){A("throw",F,z,H)}):x.resolve(P).then(function(F){q.value=F,z(q)},function(F){return A("throw",F,z,H)})}H(O.arg)}var M;r(this,"_invoke",{value:function(N,L){function z(){return new x(function(H,O){A(N,L,H,O)})}return M=M?M.then(z,z):z()}})}function T(S,x,A){var M="suspendedStart";return function(N,L){if(M==="executing")throw new Error("Generator is already running");if(M==="completed"){if(N==="throw")throw L;return $()}for(A.method=N,A.arg=L;;){var z=A.delegate;if(z){var H=_(z,A);if(H){if(H===l)continue;return H}}if(A.method==="next")A.sent=A._sent=A.arg;else if(A.method==="throw"){if(M==="suspendedStart")throw M="completed",A.arg;A.dispatchException(A.arg)}else A.method==="return"&&A.abrupt("return",A.arg);M="executing";var O=c(S,x,A);if(O.type==="normal"){if(M=A.done?"completed":"suspendedYield",O.arg===l)continue;return{value:O.arg,done:A.done}}O.type==="throw"&&(M="completed",A.method="throw",A.arg=O.arg)}}}function _(S,x){var A=x.method,M=S.iterator[A];if(M===void 0)return x.delegate=null,A==="throw"&&S.iterator.return&&(x.method="return",x.arg=void 0,_(S,x),x.method==="throw")||A!=="return"&&(x.method="throw",x.arg=new TypeError("The iterator does not provide a '"+A+"' method")),l;var N=c(M,S.iterator,x.arg);if(N.type==="throw")return x.method="throw",x.arg=N.arg,x.delegate=null,l;var L=N.arg;return L?L.done?(x[S.resultName]=L.value,x.next=S.nextLoc,x.method!=="return"&&(x.method="next",x.arg=void 0),x.delegate=null,l):L:(x.method="throw",x.arg=new TypeError("iterator result is not an object"),x.delegate=null,l)}function E(S){var x={tryLoc:S[0]};1 in S&&(x.catchLoc=S[1]),2 in S&&(x.finallyLoc=S[2],x.afterLoc=S[3]),this.tryEntries.push(x)}function C(S){var x=S.completion||{};x.type="normal",delete x.arg,S.completion=x}function k(S){this.tryEntries=[{tryLoc:"root"}],S.forEach(E,this),this.reset(!0)}function R(S){if(S){var x=S[o];if(x)return x.call(S);if(typeof S.next=="function")return S;if(!isNaN(S.length)){var A=-1,M=function N(){for(;++A<S.length;)if(n.call(S,A))return N.value=S[A],N.done=!1,N;return N.value=void 0,N.done=!0,N};return M.next=M}}return{next:$}}function $(){return{value:void 0,done:!0}}return h.prototype=p,r(b,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:h,configurable:!0}),h.displayName=u(p,f,"GeneratorFunction"),e.isGeneratorFunction=function(S){var x=typeof S=="function"&&S.constructor;return!!x&&(x===h||(x.displayName||x.name)==="GeneratorFunction")},e.mark=function(S){return Object.setPrototypeOf?Object.setPrototypeOf(S,p):(S.__proto__=p,u(S,f,"GeneratorFunction")),S.prototype=Object.create(b),S},e.awrap=function(S){return{__await:S}},w(v.prototype),u(v.prototype,a,function(){return this}),e.AsyncIterator=v,e.async=function(S,x,A,M,N){N===void 0&&(N=Promise);var L=new v(s(S,x,A,M),N);return e.isGeneratorFunction(x)?L:L.next().then(function(z){return z.done?z.value:L.next()})},w(b),u(b,f,"Generator"),u(b,o,function(){return this}),u(b,"toString",function(){return"[object Generator]"}),e.keys=function(S){var x=Object(S),A=[];for(var M in x)A.push(M);return A.reverse(),function N(){for(;A.length;){var L=A.pop();if(L in x)return N.value=L,N.done=!1,N}return N.done=!0,N}},e.values=R,k.prototype={constructor:k,reset:function(S){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!S)for(var x in this)x.charAt(0)==="t"&&n.call(this,x)&&!isNaN(+x.slice(1))&&(this[x]=void 0)},stop:function(){this.done=!0;var S=this.tryEntries[0].completion;if(S.type==="throw")throw S.arg;return this.rval},dispatchException:function(S){if(this.done)throw S;var x=this;function A(O,q){return L.type="throw",L.arg=S,x.next=O,q&&(x.method="next",x.arg=void 0),!!q}for(var M=this.tryEntries.length-1;M>=0;--M){var N=this.tryEntries[M],L=N.completion;if(N.tryLoc==="root")return A("end");if(N.tryLoc<=this.prev){var z=n.call(N,"catchLoc"),H=n.call(N,"finallyLoc");if(z&&H){if(this.prev<N.catchLoc)return A(N.catchLoc,!0);if(this.prev<N.finallyLoc)return A(N.finallyLoc)}else if(z){if(this.prev<N.catchLoc)return A(N.catchLoc,!0)}else{if(!H)throw new Error("try statement without catch or finally");if(this.prev<N.finallyLoc)return A(N.finallyLoc)}}}},abrupt:function(S,x){for(var A=this.tryEntries.length-1;A>=0;--A){var M=this.tryEntries[A];if(M.tryLoc<=this.prev&&n.call(M,"finallyLoc")&&this.prev<M.finallyLoc){var N=M;break}}N&&(S==="break"||S==="continue")&&N.tryLoc<=x&&x<=N.finallyLoc&&(N=null);var L=N?N.completion:{};return L.type=S,L.arg=x,N?(this.method="next",this.next=N.finallyLoc,l):this.complete(L)},complete:function(S,x){if(S.type==="throw")throw S.arg;return S.type==="break"||S.type==="continue"?this.next=S.arg:S.type==="return"?(this.rval=this.arg=S.arg,this.method="return",this.next="end"):S.type==="normal"&&x&&(this.next=x),l},finish:function(S){for(var x=this.tryEntries.length-1;x>=0;--x){var A=this.tryEntries[x];if(A.finallyLoc===S)return this.complete(A.completion,A.afterLoc),C(A),l}},catch:function(S){for(var x=this.tryEntries.length-1;x>=0;--x){var A=this.tryEntries[x];if(A.tryLoc===S){var M=A.completion;if(M.type==="throw"){var N=M.arg;C(A)}return N}}throw new Error("illegal catch attempt")},delegateYield:function(S,x,A){return this.delegate={iterator:R(S),resultName:x,nextLoc:A},this.method==="next"&&(this.arg=void 0),l}},e}function Oc(e,t,n,r,i,o,a){try{var f=e[o](a),u=f.value}catch(s){n(s);return}f.done?t(u):Promise.resolve(u).then(r,i)}function tf(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(u){Oc(o,r,i,a,f,"next",u)}function f(u){Oc(o,r,i,a,f,"throw",u)}a(void 0)})}}function Kr(){return Kr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kr.apply(this,arguments)}function $y(e){if(e==null)throw new TypeError("Cannot destructure "+e)}function bi(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function f(c){try{s(r.next(c))}catch(l){a(l)}}function u(c){try{s(r.throw(c))}catch(l){a(l)}}function s(c){c.done?o(c.value):i(c.value).then(f,u)}s((r=r.apply(e,t||[])).next())})}function yi(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=f(0),a.throw=f(1),a.return=f(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function f(s){return function(c){return u([s,c])}}function u(s){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(n=0)),n;)try{if(r=1,i&&(o=s[0]&2?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[s[0]&2,o.value]),s[0]){case 0:case 1:o=s;break;case 4:return n.label++,{value:s[1],done:!1};case 5:n.label++,i=s[1],s=[0];continue;case 7:s=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!o||s[1]>o[0]&&s[1]<o[3])){n.label=s[1];break}if(s[0]===6&&n.label<o[1]){n.label=o[1],o=s;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(s);break}o[2]&&n.ops.pop(),n.trys.pop();continue}s=t.call(e,n)}catch(c){s=[6,c],i=0}finally{r=o=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}function Ey(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(f){a={error:f}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o}function Ay(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ey(arguments[t]));return e}var Cy=new Map([["avi","video/avi"],["gif","image/gif"],["ico","image/x-icon"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["mkv","video/x-matroska"],["mov","video/quicktime"],["mp4","video/mp4"],["pdf","application/pdf"],["png","image/png"],["zip","application/zip"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"]]);function ha(e,t){var n=ky(e);if(typeof n.path!="string"){var r=e.webkitRelativePath;Object.defineProperty(n,"path",{value:typeof t=="string"?t:typeof r=="string"&&r.length>0?r:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}function ky(e){var t=e.name,n=t&&t.lastIndexOf(".")!==-1;if(n&&!e.type){var r=t.split(".").pop().toLowerCase(),i=Cy.get(r);i&&Object.defineProperty(e,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return e}var Ny=[".DS_Store","Thumbs.db"];function Ly(e){return bi(this,void 0,void 0,function(){return yi(this,function(t){return[2,Iy(e)&&e.dataTransfer?Oy(e.dataTransfer,e.type):Dy(e)]})})}function Iy(e){return!!e.dataTransfer}function Dy(e){var t=Ry(e.target)?e.target.files?cu(e.target.files):[]:[];return t.map(function(n){return ha(n)})}function Ry(e){return e!==null}function Oy(e,t){return bi(this,void 0,void 0,function(){var n,r;return yi(this,function(i){switch(i.label){case 0:return e.items?(n=cu(e.items).filter(function(o){return o.kind==="file"}),t!=="drop"?[2,n]:[4,Promise.all(n.map(Py))]):[3,2];case 1:return r=i.sent(),[2,Pc(Ch(r))];case 2:return[2,Pc(cu(e.files).map(function(o){return ha(o)}))]}})})}function Pc(e){return e.filter(function(t){return Ny.indexOf(t.name)===-1})}function cu(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r)}return t}function Py(e){if(typeof e.webkitGetAsEntry!="function")return Fc(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?kh(t):Fc(e)}function Ch(e){return e.reduce(function(t,n){return Ay(t,Array.isArray(n)?Ch(n):[n])},[])}function Fc(e){var t=e.getAsFile();if(!t)return Promise.reject(e+" is not a File");var n=ha(t);return Promise.resolve(n)}function Fy(e){return bi(this,void 0,void 0,function(){return yi(this,function(t){return[2,e.isDirectory?kh(e):qy(e)]})})}function kh(e){var t=e.createReader();return new Promise(function(n,r){var i=[];function o(){var a=this;t.readEntries(function(f){return bi(a,void 0,void 0,function(){var u,s,c;return yi(this,function(l){switch(l.label){case 0:if(f.length)return[3,5];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return u=l.sent(),n(u),[3,4];case 3:return s=l.sent(),r(s),[3,4];case 4:return[3,6];case 5:c=Promise.all(f.map(Fy)),i.push(c),o(),l.label=6;case 6:return[2]}})})},function(f){r(f)})}o()})}function qy(e){return bi(this,void 0,void 0,function(){return yi(this,function(t){return[2,new Promise(function(n,r){e.file(function(i){var o=ha(i,e.fullPath);n(o)},function(i){r(i)})})]})})}function jy(e,t,n,r){var i=document.createElement("input");i.style.display="none",document.body.appendChild(i),i.type="file",e!=="*"&&(i.accept=e),i.multiple=t,i.addEventListener("change",function(o){n(o),document.body.removeChild(i)}),r&&r(i),i.dispatchEvent(new MouseEvent("click"))}var zy=function(t){var n=t.onFilesSelected,r=t.onFilesSuccessfullySelected,i=t.onFilesRejected,o=t.onClear,a=t.validators,f=V.useCallback(function(l){n==null||n(l),a==null||a.forEach(function(d){d.onFilesSelected(l)})},[n,a]),u=V.useCallback(function(l){r==null||r(l),a==null||a.forEach(function(d){d.onFilesSuccessfullySelected(l)})},[a,r]),s=V.useCallback(function(l){i==null||i(l),a==null||a.forEach(function(d){d.onFilesRejected(l)})},[a,i]),c=V.useCallback(function(){o==null||o(),a==null||a.forEach(function(l){l.onClear==null||l.onClear()})},[a,o]);return{onFilesSelected:f,onFilesSuccessfullySelected:u,onFilesRejected:s,onClear:c}},By=[];function Uy(e){var t=e.accept,n=t===void 0?"*":t,r=e.multiple,i=r===void 0?!0:r,o=e.readAs,a=o===void 0?"Text":o,f=e.readFilesContent,u=f===void 0?!0:f,s=e.validators,c=s===void 0?By:s,l=e.initializeWithCustomParameters,d=V.useState([]),h=d[0],p=d[1],g=V.useState([]),m=g[0],y=g[1],b=V.useState([]),w=b[0],v=b[1],T=V.useState(!1),_=T[0],E=T[1],C=zy(e),k=C.onFilesSelected,R=C.onFilesSuccessfullySelected,$=C.onFilesRejected,S=C.onClear,x=V.useCallback(function(){p([]),y([]),v([])},[]),A=V.useCallback(function(){x(),S==null||S()},[x,S]),M=V.useCallback(function(L){return new Promise(function(){var z=tf(xn().mark(function H(O,q){var P,F,K;return xn().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:P=new FileReader,F=P["readAs"+a],F.call(P,L),K=function(j){var I=Kr({},($y(j),j));q(Kr({},I))},P.onload=tf(xn().mark(function Y(){return xn().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.abrupt("return",Promise.all(c.map(function(B){return B.validateAfterParsing(e,L,P).catch(function(G){return Promise.reject(K(G))})})).then(function(){return O(Kr({},L,{content:P.result,name:L.name,lastModified:L.lastModified}))}).catch(function(){}));case 1:case"end":return I.stop()}},Y)})),P.onerror=function(){K({name:"FileReaderError",readerError:P.error,causedByFile:L})};case 6:case"end":return W.stop()}},H)}));return function(H,O){return z.apply(this,arguments)}}())},[e,a,c]),N=V.useCallback(function(){var L=n instanceof Array?n.join(","):n;jy(L,i,function(){var z=tf(xn().mark(function H(O){var q,P,F,K,Z,W;return xn().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return x(),q=O.target,P=q.files?Array.from(q.files):[],E(!0),j.next=6,Promise.all(c.map(function(I){return I.validateBeforeParsing(e,P).catch(function(B){return Array.isArray(B)?B:[B]})}));case 6:if(F=j.sent.flat(1).filter(Boolean),p(P),v(F),!F.length){j.next=15;break}return E(!1),p([]),$==null||$({errors:F}),k==null||k({errors:F}),j.abrupt("return");case 15:if(u){j.next=19;break}return E(!1),k==null||k({plainFiles:P,filesContent:[]}),j.abrupt("return");case 19:return j.next=21,Ly(O);case 21:return K=j.sent,Z=[],j.next=25,Promise.all(K.map(function(I){return M(I).catch(function(B){Z.push.apply(Z,Array.isArray(B)?B:[B])})}));case 25:if(W=j.sent,E(!1),!Z.length){j.next=34;break}return p([]),y([]),v(function(I){return[].concat(I,Z)}),$==null||$({errors:Z}),k==null||k({errors:F.concat(Z)}),j.abrupt("return");case 34:y(W),p(P),v([]),R==null||R({filesContent:W,plainFiles:P}),k==null||k({plainFiles:P,filesContent:W});case 39:case"end":return j.stop()}},H)}));return function(H){return z.apply(this,arguments)}}(),l)},[e,n,x,l,i,$,k,R,M,u,c]);return{openFilePicker:N,filesContent:m,errors:w,loading:_,plainFiles:h,clear:A}}function Hy(){const e=Le(s=>s.reset),t=Le(s=>s.saveAs),n=Le(s=>s.load),{openFilePicker:r,filesContent:i}=Uy({accept:".json",multiple:!1});V.useEffect(()=>{i.length&&n(JSON.parse(i[0].content))},[i,n]);const o=V.useCallback(()=>{n(My)},[n]),a="rounded-md border border-transparent px-2 py-1 text-sm text-violet-400 outline-none hover:border-violet-500 hover:bg-violet-600 hover:text-violet-300 data-[open]:border-violet-400 data-[open]:bg-violet-600 data-[open]:text-violet-200",f="rounded-md border border-slate-300 bg-slate-200 py-1 text-slate-800 outline-none drop-shadow-lg",u="flex w-full min-w-40 items-center justify-between px-4 py-1 text-sm outline-none focus:bg-violet-600 focus:text-slate-100 disabled:text-slate-400";return U.jsxs("div",{className:"flex items-center border-b border-violet-600 bg-violet-900 bg-gradient-to-tr from-violet-900 to-violet-600 px-4 py-2",children:[U.jsx(by,{className:"pr-2 text-violet-400 data-[open]:text-violet-200",size:20}),U.jsx("div",{className:"grow text-xl font-semibold tracking-widest text-violet-400",children:"Barefoot FIRE"}),U.jsxs(Vr,{menuButtonClasses:a,menuContainerClasses:f,label:U.jsx(yy,{className:"text-violet-400",size:20}),children:[U.jsx(De,{className:u,label:"New",onClick:e}),U.jsx(De,{className:u,label:"Open",onClick:r}),U.jsx(De,{className:u,label:"Save",onClick:t}),U.jsxs(Vr,{menuContainerClasses:f,menuItemClasses:u,label:"Export",children:[U.jsx(De,{className:u,label:"CSV",disabled:!0}),U.jsx(De,{className:u,label:"JSON",disabled:!0}),U.jsx(De,{className:u,label:"Excel",disabled:!0})]}),U.jsxs(Vr,{menuContainerClasses:f,menuItemClasses:u,label:"Examples",children:[U.jsx(De,{className:u,label:"Simple example",disabled:!0}),U.jsx(De,{className:u,label:"Detailed example",onClick:o}),U.jsx(De,{className:u,label:"Rent vs Mortgage",disabled:!0}),U.jsx(De,{className:u,label:"Petrol vs Hybrid vs Electric",disabled:!0}),U.jsx(De,{className:u,label:"Median vs Professional vs Elite",disabled:!0})]})]})]})}Hy.__docgenInfo={description:"",methods:[],displayName:"Header"};var nf,qc;function Nh(){if(qc)return nf;qc=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return nf=e,nf}var rf,jc;function Yy(){if(jc)return rf;jc=1;var e=typeof Hi=="object"&&Hi&&Hi.Object===Object&&Hi;return rf=e,rf}var of,zc;function Lh(){if(zc)return of;zc=1;var e=Yy(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return of=n,of}var af,Bc;function Gy(){if(Bc)return af;Bc=1;var e=Lh(),t=function(){return e.Date.now()};return af=t,af}var ff,Uc;function Wy(){if(Uc)return ff;Uc=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return ff=t,ff}var uf,Hc;function Xy(){if(Hc)return uf;Hc=1;var e=Wy(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return uf=n,uf}var sf,Yc;function Ih(){if(Yc)return sf;Yc=1;var e=Lh(),t=e.Symbol;return sf=t,sf}var cf,Gc;function Vy(){if(Gc)return cf;Gc=1;var e=Ih(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;function o(a){var f=n.call(a,i),u=a[i];try{a[i]=void 0;var s=!0}catch{}var c=r.call(a);return s&&(f?a[i]=u:delete a[i]),c}return cf=o,cf}var lf,Wc;function Ky(){if(Wc)return lf;Wc=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return lf=n,lf}var df,Xc;function Zy(){if(Xc)return df;Xc=1;var e=Ih(),t=Vy(),n=Ky(),r="[object Null]",i="[object Undefined]",o=e?e.toStringTag:void 0;function a(f){return f==null?f===void 0?i:r:o&&o in Object(f)?t(f):n(f)}return df=a,df}var hf,Vc;function Qy(){if(Vc)return hf;Vc=1;function e(t){return t!=null&&typeof t=="object"}return hf=e,hf}var pf,Kc;function Jy(){if(Kc)return pf;Kc=1;var e=Zy(),t=Qy(),n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return pf=r,pf}var mf,Zc;function e2(){if(Zc)return mf;Zc=1;var e=Xy(),t=Nh(),n=Jy(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,f=parseInt;function u(s){if(typeof s=="number")return s;if(n(s))return r;if(t(s)){var c=typeof s.valueOf=="function"?s.valueOf():s;s=t(c)?c+"":c}if(typeof s!="string")return s===0?s:+s;s=e(s);var l=o.test(s);return l||a.test(s)?f(s.slice(2),l?2:8):i.test(s)?r:+s}return mf=u,mf}var gf,Qc;function t2(){if(Qc)return gf;Qc=1;var e=Nh(),t=Gy(),n=e2(),r="Expected a function",i=Math.max,o=Math.min;function a(f,u,s){var c,l,d,h,p,g,m=0,y=!1,b=!1,w=!0;if(typeof f!="function")throw new TypeError(r);u=n(u)||0,e(s)&&(y=!!s.leading,b="maxWait"in s,d=b?i(n(s.maxWait)||0,u):d,w="trailing"in s?!!s.trailing:w);function v(x){var A=c,M=l;return c=l=void 0,m=x,h=f.apply(M,A),h}function T(x){return m=x,p=setTimeout(C,u),y?v(x):h}function _(x){var A=x-g,M=x-m,N=u-A;return b?o(N,d-M):N}function E(x){var A=x-g,M=x-m;return g===void 0||A>=u||A<0||b&&M>=d}function C(){var x=t();if(E(x))return k(x);p=setTimeout(C,_(x))}function k(x){return p=void 0,w&&c?v(x):(c=l=void 0,h)}function R(){p!==void 0&&clearTimeout(p),m=0,c=g=l=p=void 0}function $(){return p===void 0?h:k(t())}function S(){var x=t(),A=E(x);if(c=arguments,l=this,g=x,A){if(p===void 0)return T(g);if(b)return clearTimeout(p),p=setTimeout(C,u),v(g)}return p===void 0&&(p=setTimeout(C,u)),h}return S.cancel=R,S.flush=$,S}return gf=a,gf}var n2=t2();const r2=wy(n2),i2=[],Jc={width:0,height:0,top:0,left:0};function o2({initialSize:e=Jc,debounceTime:t=300,ignoreDimensions:n=i2,enableDebounceLeadingCall:r=!0,resizeObserverPolyfill:i}={}){const o=V.useRef(null),a=V.useRef(0),[f,u]=V.useState({...Jc,...e}),s=V.useMemo(()=>{const c=Array.isArray(n)?n:[n];return r2(l=>{u(d=>Object.keys(d).filter(m=>d[m]!==l[m]).every(m=>c.includes(m))?d:l)},t,{leading:r})},[t,r,n]);return V.useEffect(()=>{const c=i||window.ResizeObserver,l=new c(d=>{d.forEach(h=>{const{left:p,top:g,width:m,height:y}=(h==null?void 0:h.contentRect)??{};a.current=window.requestAnimationFrame(()=>{s({width:m,height:y,top:g,left:p})})})});return o.current&&l.observe(o.current),()=>{window.cancelAnimationFrame(a.current),l.disconnect(),s.cancel()}},[s,i]),{parentRef:o,resize:s,...f}}const a2={width:"100%",height:"100%"};function ds({className:e,children:t,debounceTime:n,ignoreDimensions:r,initialSize:i,parentSizeStyles:o=a2,enableDebounceLeadingCall:a=!0,resizeObserverPolyfill:f,...u}){const{parentRef:s,resize:c,...l}=o2({initialSize:i,debounceTime:n,ignoreDimensions:r,enableDebounceLeadingCall:a,resizeObserverPolyfill:f});return U.jsx("div",{style:o,ref:s,className:e,...u,children:t({...l,ref:s.current,resize:c})})}ds.__docgenInfo={description:"",methods:[],displayName:"ResponsiveContainer",props:{className:{required:!1,tsType:{name:"string"},description:"Optional `className` to add to the parent `div` wrapper used for size measurement."},parentSizeStyles:{required:!1,tsType:{name:"ReactCSSProperties",raw:"React.CSSProperties"},description:"@deprecated - use `style` prop as all other props are passed directly to the parent `div`.\n@TODO remove in the next major version.\nOptional `style` object to apply to the parent `div` wrapper used for size measurement.",defaultValue:{value:"{ width: '100%', height: '100%' }",computed:!1}},children:{required:!0,tsType:{name:"signature",type:"function",raw:"(args: ParentSizeProvidedProps) => React.ReactNode",signature:{arguments:[{type:{name:"intersection",raw:`ParentSizeState & {
  ref: HTMLDivElement | null
  resize: (state: ParentSizeState) => void
}`,elements:[{name:"signature",type:"object",raw:`{
  width: number
  height: number
  top: number
  left: number
}`,signature:{properties:[{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}},{key:"top",value:{name:"number",required:!0}},{key:"left",value:{name:"number",required:!0}}]}},{name:"signature",type:"object",raw:`{
  ref: HTMLDivElement | null
  resize: (state: ParentSizeState) => void
}`,signature:{properties:[{key:"ref",value:{name:"union",raw:"HTMLDivElement | null",elements:[{name:"HTMLDivElement"},{name:"null"}],required:!0}},{key:"resize",value:{name:"signature",type:"function",raw:"(state: ParentSizeState) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  width: number
  height: number
  top: number
  left: number
}`,signature:{properties:[{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}},{key:"top",value:{name:"number",required:!0}},{key:"left",value:{name:"number",required:!0}}]}},name:"state"}],return:{name:"void"}},required:!0}}]}}]},name:"args"}],return:{name:"ReactReactNode",raw:"React.ReactNode"}}},description:"Child render function `({ width, height, top, left, ref, resize }) => ReactNode`."},initialSize:{required:!1,tsType:{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  width: number
  height: number
  top: number
  left: number
}`,signature:{properties:[{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}},{key:"top",value:{name:"number",required:!0}},{key:"left",value:{name:"number",required:!0}}]}}],raw:"Partial<ParentSizeState>"},description:"Initial size before measuring the parent."},resizeObserverPolyfill:{required:!1,tsType:{name:"ResizeObserverPolyfill"},description:"Optionally inject a ResizeObserver polyfill, else this *must* be globally available."},ignoreDimensions:{required:!1,tsType:{name:"union",raw:"keyof ParentSizeState | (keyof ParentSizeState)[]",elements:[{name:"signature",type:"object",raw:`{
  width: number
  height: number
  top: number
  left: number
}`,signature:{properties:[{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}},{key:"top",value:{name:"number",required:!0}},{key:"left",value:{name:"number",required:!0}}]}},{name:"Array",elements:[{name:"unknown"}],raw:"(keyof ParentSizeState)[]"}]},description:"Optional dimensions provided won't trigger a state change when changed."},debounceTime:{required:!1,tsType:{name:"number"},description:"Child render updates upon resize are delayed until `debounceTime` milliseconds _after_ the last resize event is observed. Defaults to `300`."},enableDebounceLeadingCall:{required:!1,tsType:{name:"boolean"},description:"Optional flag to toggle leading debounce calls. When set to true this will ensure that the component always renders immediately. Defaults to `true`.",defaultValue:{value:"true",computed:!1}}}};function f2(){const e=Le(a=>a.timeScrubberSelection),t=Le(a=>a.setTimeScrubberSelection),n=Le(a=>a.scenarioStartEvents),r=Le(a=>a.highlightedPlotData),i=Le(a=>a.pinnedPlotData),o=V.useMemo(()=>{const f="month",u=Dc({data:r,interval:f,cumulative:!0}),s=i?Dc({data:i,interval:f,cumulative:!0}):[];return[...u,...s].sort((l,d)=>Eh(l.date).diff(d.date))},[r,i]);return U.jsxs(U.Fragment,{children:[U.jsx(fy,{type:i?"difference":"area",data:o,selection:e,onUpdateSelection:t}),U.jsx(ry,{type:i?"difference":"area",timeseries:o,scenarioEvents:n,selection:e})]})}f2.__docgenInfo={description:"",methods:[],displayName:"ScenarioBrushChart"};function Dh({showDelete:e,onAddBranch:t,onDelete:n}){const r="rounded-sm border border-transparent outline-none hover:border-slate-700 data-[open]:border-slate-600",i="rounded-md border border-slate-300 bg-slate-200 py-1 text-slate-800 outline-none drop-shadow-lg",o="flex w-full min-w-28 items-center justify-between px-4 py-1 text-sm outline-none focus:bg-violet-600 focus:text-slate-100 disabled:text-slate-400",a=f=>{f.stopPropagation()};return U.jsxs(Vr,{menuButtonClasses:r,menuContainerClasses:i,label:U.jsx("div",{onClick:a,children:U.jsx($h,{className:"flex h-5 w-5 items-center justify-center text-slate-500",size:14})}),children:[U.jsx(De,{className:o,label:"Add branch",onClick:t}),e&&U.jsx(De,{className:o,label:"Delete",disabled:!0,onClick:n})]})}Dh.__docgenInfo={description:"",methods:[],displayName:"ScenarioBudgetMenu",props:{showDelete:{required:!1,tsType:{name:"boolean"},description:""},onAddBranch:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onDelete:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};function lu(){return lu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lu.apply(null,arguments)}var Rh=["shift","alt","meta","mod","ctrl"],u2={esc:"escape",return:"enter",".":"period",",":"comma","-":"slash"," ":"space","`":"backquote","#":"backslash","+":"bracketright",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function tn(e){return(e&&u2[e]||e||"").trim().toLowerCase().replace(/key|digit|numpad|arrow/,"")}function s2(e){return Rh.includes(e)}function bf(e,t){return t===void 0&&(t=","),e.split(t)}function yf(e,t,n){t===void 0&&(t="+");var r=e.toLocaleLowerCase().split(t).map(function(a){return tn(a)}),i={alt:r.includes("alt"),ctrl:r.includes("ctrl")||r.includes("control"),shift:r.includes("shift"),meta:r.includes("meta"),mod:r.includes("mod")},o=r.filter(function(a){return!Rh.includes(a)});return lu({},i,{keys:o,description:n,hotkey:e})}(function(){typeof document<"u"&&(document.addEventListener("keydown",function(e){e.key!==void 0&&Oh([tn(e.key),tn(e.code)])}),document.addEventListener("keyup",function(e){e.key!==void 0&&Ph([tn(e.key),tn(e.code)])})),typeof window<"u"&&window.addEventListener("blur",function(){nn.clear()})})();var nn=new Set;function hs(e){return Array.isArray(e)}function c2(e,t){t===void 0&&(t=",");var n=hs(e)?e:e.split(t);return n.every(function(r){return nn.has(r.trim().toLowerCase())})}function Oh(e){var t=Array.isArray(e)?e:[e];nn.has("meta")&&nn.forEach(function(n){return!s2(n)&&nn.delete(n.toLowerCase())}),t.forEach(function(n){return nn.add(n.toLowerCase())})}function Ph(e){var t=Array.isArray(e)?e:[e];e==="meta"?nn.clear():t.forEach(function(n){return nn.delete(n.toLowerCase())})}function l2(e,t,n){(typeof n=="function"&&n(e,t)||n===!0)&&e.preventDefault()}function d2(e,t,n){return typeof n=="function"?n(e,t):n===!0||n===void 0}function h2(e){return Fh(e,["input","textarea","select"])}function Fh(e,t){t===void 0&&(t=!1);var n=e.target,r=e.composed,i=null;return p2(n)&&r?i=e.composedPath()[0]&&e.composedPath()[0].tagName:i=n&&n.tagName,hs(t)?!!(i&&t&&t.some(function(o){var a;return o.toLowerCase()===((a=i)==null?void 0:a.toLowerCase())})):!!(i&&t&&t)}function p2(e){return!!e.tagName&&!e.tagName.startsWith("-")&&e.tagName.includes("-")}function m2(e,t){return e.length===0&&t?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):t?e.some(function(n){return t.includes(n)})||e.includes("*"):!0}var g2=function(t,n,r){r===void 0&&(r=!1);var i=n.alt,o=n.meta,a=n.mod,f=n.shift,u=n.ctrl,s=n.keys,c=t.key,l=t.code,d=t.ctrlKey,h=t.metaKey,p=t.shiftKey,g=t.altKey,m=tn(l),y=c.toLowerCase();if(!(s!=null&&s.includes(m))&&!(s!=null&&s.includes(y))&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(m))return!1;if(!r){if(i===!g&&y!=="alt"||f===!p&&y!=="shift")return!1;if(a){if(!h&&!d)return!1}else if(o===!h&&y!=="meta"&&y!=="os"||u===!d&&y!=="ctrl"&&y!=="control")return!1}return s&&s.length===1&&(s.includes(y)||s.includes(m))?!0:s?c2(s):!s},b2=V.createContext(void 0),y2=function(){return V.useContext(b2)};function qh(e,t){return e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(e).length===Object.keys(t).length&&Object.keys(e).reduce(function(n,r){return n&&qh(e[r],t[r])},!0):e===t}var v2=V.createContext({hotkeys:[],enabledScopes:[],toggleScope:function(){},enableScope:function(){},disableScope:function(){}}),w2=function(){return V.useContext(v2)};function _2(e){var t=V.useRef(void 0);return qh(t.current,e)||(t.current=e),t.current}var el=function(t){t.stopPropagation(),t.preventDefault(),t.stopImmediatePropagation()},x2=typeof window<"u"?V.useLayoutEffect:V.useEffect;function T2(e,t,n,r){var i=V.useState(null),o=i[0],a=i[1],f=V.useRef(!1),u=n instanceof Array?r instanceof Array?void 0:r:n,s=hs(e)?e.join(u==null?void 0:u.splitKey):e,c=n instanceof Array?n:r instanceof Array?r:void 0,l=V.useCallback(t,c??[]),d=V.useRef(l);c?d.current=l:d.current=t;var h=_2(u),p=w2(),g=p.enabledScopes,m=y2();return x2(function(){if(!((h==null?void 0:h.enabled)===!1||!m2(g,h==null?void 0:h.scopes))){var y=function(_,E){var C;if(E===void 0&&(E=!1),!(h2(_)&&!Fh(_,h==null?void 0:h.enableOnFormTags))){if(o!==null){var k=o.getRootNode();if((k instanceof Document||k instanceof ShadowRoot)&&k.activeElement!==o&&!o.contains(k.activeElement)){el(_);return}}(C=_.target)!=null&&C.isContentEditable&&!(h!=null&&h.enableOnContentEditable)||bf(s,h==null?void 0:h.splitKey).forEach(function(R){var $,S=yf(R,h==null?void 0:h.combinationKey);if(g2(_,S,h==null?void 0:h.ignoreModifiers)||($=S.keys)!=null&&$.includes("*")){if(h!=null&&h.ignoreEventWhen!=null&&h.ignoreEventWhen(_)||E&&f.current)return;if(l2(_,S,h==null?void 0:h.preventDefault),!d2(_,S,h==null?void 0:h.enabled)){el(_);return}d.current(_,S),E||(f.current=!0)}})}},b=function(_){_.key!==void 0&&(Oh(tn(_.code)),((h==null?void 0:h.keydown)===void 0&&(h==null?void 0:h.keyup)!==!0||h!=null&&h.keydown)&&y(_))},w=function(_){_.key!==void 0&&(Ph(tn(_.code)),f.current=!1,h!=null&&h.keyup&&y(_,!0))},v=o||(u==null?void 0:u.document)||document;return v.addEventListener("keyup",w),v.addEventListener("keydown",b),m&&bf(s,h==null?void 0:h.splitKey).forEach(function(T){return m.addHotkey(yf(T,h==null?void 0:h.combinationKey,h==null?void 0:h.description))}),function(){v.removeEventListener("keyup",w),v.removeEventListener("keydown",b),m&&bf(s,h==null?void 0:h.splitKey).forEach(function(T){return m.removeHotkey(yf(T,h==null?void 0:h.combinationKey,h==null?void 0:h.description))})}}},[o,s,h,g]),a}function To({textClassName:e,inputClassName:t,value:n,onChange:r,onBlur:i,onCancel:o,rightAlign:a=!1}){const f=V.useRef(null),[u,s]=V.useState(!1);return T2(["esc","return"],(c,l)=>{if(f.current)switch(l.hotkey){case"esc":o&&o(),s(!1);break;case"return":i&&i(c.target.value),s(!1);break}},{enableOnFormTags:["input"]},[n,u]),U.jsxs("div",{className:"relative grow",children:[u&&U.jsx("input",{ref:f,type:typeof n=="string"?"text":"number",autoFocus:!0,className:su("absolute rounded-md border border-violet-500 bg-slate-800 px-2 py-1 text-slate-300 outline-0",{"-bottom-1 -top-1":!0,"-left-[9px] right-3 text-left":!a,"-right-[9px] left-3 text-right":a,"appearance-none":typeof n=="number"},t),value:n,onBlur:c=>{s(!1),i&&i(c.target.value)},onChange:c=>{r&&r(c.target.value)}}),U.jsx("span",{className:su("cursor-text",e),onClick:c=>{c.stopPropagation(),s(!0)},children:u?".":S2(n)})]})}function S2(e){if(typeof e=="number")return Ah(e);if(typeof e=="string")return e||"No name";throw new Error("Invalid value type")}To.__docgenInfo={description:"",methods:[],displayName:"EditableText",props:{textClassName:{required:!1,tsType:{name:"string"},description:""},inputClassName:{required:!1,tsType:{name:"string"},description:""},rightAlign:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},value:{required:!0,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},onBlur:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},onCancel:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};function jh({onDelete:e}){const t="ml-3 rounded-sm border border-transparent outline-none hover:border-slate-700 data-[open]:border-slate-600",n="rounded-md border border-slate-300 bg-slate-200 py-1 text-slate-800 outline-none drop-shadow-lg",r="flex w-full min-w-28 items-center justify-between px-4 py-1 text-sm outline-none focus:bg-violet-600 focus:text-slate-100 disabled:text-slate-400",i=o=>{o.stopPropagation()};return U.jsx(Vr,{menuButtonClasses:t,menuContainerClasses:n,label:U.jsx("div",{onClick:i,children:U.jsx($h,{className:"flex h-5 w-5 items-center justify-center text-slate-500",size:14})}),children:U.jsx(De,{className:r,label:"Delete",onClick:e})})}jh.__docgenInfo={description:"",methods:[],displayName:"ScenarioBudgetItemMenu",props:{onDelete:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};function zh({type:e,budget:t,onUpdateName:n,onUpdateAmount:r,onDelete:i}){const[o,a]=V.useState(t.name),[f,u]=V.useState(t.amount);return U.jsxs("div",{className:"flex w-full flex-row items-center justify-center py-2",children:[U.jsx("div",{className:"grow",children:U.jsx(To,{value:o,onChange:a,onBlur:n,onCancel:()=>a(t.name)})}),U.jsx("div",{className:su("relative min-w-14 text-right",{"text-gray-500":e==="parent"}),children:e==="parent"?U.jsx("span",{children:Ah(f)}):U.jsx(To,{value:f,onChange:s=>u(Number(s)),onBlur:s=>r(Number(s)),onCancel:()=>u(t.amount),rightAlign:!0})}),U.jsx("div",{className:"flex items-center justify-center",children:U.jsx(jh,{onDelete:i})})]})}zh.__docgenInfo={description:"",methods:[],displayName:"ScenarioBudgetItem",props:{type:{required:!0,tsType:{name:"union",raw:"'parent' | 'leaf'",elements:[{name:"literal",value:"'parent'"},{name:"literal",value:"'leaf'"}]},description:""},budget:{required:!0,tsType:{name:"Budget"},description:""},onUpdateName:{required:!0,tsType:{name:"signature",type:"function",raw:"(name: string) => void",signature:{arguments:[{type:{name:"string"},name:"name"}],return:{name:"void"}}},description:""},onUpdateAmount:{required:!0,tsType:{name:"signature",type:"function",raw:"(amount: number) => void",signature:{arguments:[{type:{name:"number"},name:"amount"}],return:{name:"void"}}},description:""},onDelete:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};function du({id:e,type:t}){const n=Le(o=>o.budgetMap[e]),r=Le(o=>o.updateBudget),i=Le(o=>o.deleteBudget);return U.jsx(zh,{type:t,budget:n,onUpdateName:o=>r(n.id,{name:o}),onUpdateAmount:o=>r(n.id,{amount:o}),onDelete:()=>i(n.id)})}du.__docgenInfo={description:"",methods:[],displayName:"ScenarioBudgetItem",props:{id:{required:!0,tsType:{name:"string"},description:""},type:{required:!0,tsType:{name:"union",raw:"'parent' | 'leaf'",elements:[{name:"literal",value:"'parent'"},{name:"literal",value:"'leaf'"}]},description:""}}};function Bh({scenario:e,onAddBranch:t,onUpdateScenarioName:n}){return U.jsxs("div",{className:"flex h-full w-full select-none flex-col bg-slate-900 text-slate-300",children:[U.jsx("div",{className:"bg-slate-800 px-4 py-1 text-sm font-medium text-slate-600",children:"Scenario Budget"}),e?U.jsxs("div",{className:"flex-grow overflow-y-auto pb-4",children:[U.jsxs("div",{className:"flex items-center justify-between px-4 pb-2 pt-4 text-lg font-medium text-slate-500",children:[U.jsx(To,{value:e.name,onChange:n}),U.jsx(Dh,{onAddBranch:t,onDelete:()=>{},showDelete:e.id!=="root"})]}),U.jsx(vy,{tree:e.budgets,expanded:!0,parentContainerClasses:"cursor-pointer hover:bg-slate-800 px-4",childContainerClasses:"cursor-default px-4",renderCollapsibleItemContent:r=>U.jsx(du,{id:r.id,type:"parent"}),renderLeafItemContent:r=>U.jsx(du,{id:r.id,type:"leaf"})},e.name)]}):U.jsx("div",{className:"px-4 pb-2 pt-4 text-lg font-medium text-slate-600",children:"No budget selected"})]})}Bh.__docgenInfo={description:"",methods:[],displayName:"ScenarioBudget",props:{scenario:{required:!0,tsType:{name:"union",raw:"Scenario | null",elements:[{name:"Scenario"},{name:"null"}]},description:""},onAddBranch:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onUpdateScenarioName:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""}}};function M2(){const e=Le(i=>i.selectedScenarioId),t=Le(i=>i.scenarioMap[e]),n=Le(i=>i.addScenario),r=Le(i=>i.updateScenarioName);return U.jsx(Bh,{scenario:t,onAddBranch:()=>n(e),onUpdateScenarioName:i=>r(t.id,i)})}M2.__docgenInfo={description:"",methods:[],displayName:"ScenarioBudget"};function Oe(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function vi(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function pa(e){let t,n,r;e.length!==2?(t=Oe,n=(f,u)=>Oe(e(f),u),r=(f,u)=>e(f)-u):(t=e===Oe||e===vi?e:$2,n=e,r=e);function i(f,u,s=0,c=f.length){if(s<c){if(t(u,u)!==0)return c;do{const l=s+c>>>1;n(f[l],u)<0?s=l+1:c=l}while(s<c)}return s}function o(f,u,s=0,c=f.length){if(s<c){if(t(u,u)!==0)return c;do{const l=s+c>>>1;n(f[l],u)<=0?s=l+1:c=l}while(s<c)}return s}function a(f,u,s=0,c=f.length){const l=i(f,u,s,c-1);return l>s&&r(f[l-1],u)>-r(f[l],u)?l-1:l}return{left:i,center:a,right:o}}function $2(){return 0}function Uh(e){return e===null?NaN:+e}function*E2(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const A2=pa(Oe),ma=A2.right;pa(Uh).center;function ps(e,t){let n=0;for(let r of e)r!=null&&(r=+r)>=r&&++n;return n}function C2(e){return e.length|0}function k2(e){return!(e>0)}function N2(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function L2(e){return t=>e(...t)}function I2(...e){const t=typeof e[e.length-1]=="function"&&L2(e.pop());e=e.map(N2);const n=e.map(C2),r=e.length-1,i=new Array(r+1).fill(0),o=[];if(r<0||n.some(k2))return o;for(;;){o.push(i.map((f,u)=>e[u][f]));let a=r;for(;++i[a]===n[a];){if(a===0)return t?o.map(t):o;i[a--]=0}}}function D2(e,t){var n=0;return Float64Array.from(e,r=>n+=+r||0)}function Hh(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let a of e)a!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i));else{let a=-1;for(let f of e)(f=t(f,++a,e))!=null&&(f=+f)>=f&&(r=f-i,i+=r/++n,o+=r*(f-i))}if(n>1)return o/(n-1)}function Yh(e,t){const n=Hh(e,t);return n&&Math.sqrt(n)}function Ge(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(n===void 0?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}class Cn{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],a=t+o,f=Math.abs(t)<Math.abs(o)?t-(a-o):o-(a-t);f&&(n[r++]=f),t=a}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,o,a=0;if(n>0){for(a=t[--n];n>0&&(r=a,i=t[--n],a=r+i,o=i-(a-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=a+i,i==r-a&&(a=r))}return a}}class kn extends Map{constructor(t,n=Xh){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(hu(this,t))}has(t){return super.has(hu(this,t))}set(t,n){return super.set(Gh(this,t),n)}delete(t){return super.delete(Wh(this,t))}}class ga extends Set{constructor(t,n=Xh){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(hu(this,t))}add(t){return super.add(Gh(this,t))}delete(t){return super.delete(Wh(this,t))}}function hu({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Gh({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Wh({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Xh(e){return e!==null&&typeof e=="object"?e.valueOf():e}function pu(e){return e}function ba(e,...t){return ms(e,pu,pu,t)}function Jn(e,t,...n){return ms(e,pu,t,n)}function R2(e,t,...n){return ms(e,Array.from,t,n)}function ms(e,t,n,r){return function i(o,a){if(a>=r.length)return n(o);const f=new kn,u=r[a++];let s=-1;for(const c of o){const l=u(c,++s,o),d=f.get(l);d?d.push(c):f.set(l,[c])}for(const[c,l]of f)f.set(c,i(l,a));return t(f)}(e,0)}function O2(e,t){return Array.from(t,n=>e[n])}function So(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const r=Uint32Array.from(e,(i,o)=>o);return t.length>1?(t=t.map(i=>e.map(i)),r.sort((i,o)=>{for(const a of t){const f=Mo(a[i],a[o]);if(f)return f}})):(n=e.map(n),r.sort((i,o)=>Mo(n[i],n[o]))),O2(e,r)}return e.sort(Vh(n))}function Vh(e=Oe){if(e===Oe)return Mo;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function Mo(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function gs(e,t,n){return(t.length!==2?So(Jn(e,t,n),([r,i],[o,a])=>Oe(i,a)||Oe(r,o)):So(ba(e,n),([r,i],[o,a])=>t(i,a)||Oe(r,o))).map(([r])=>r)}const P2=Math.sqrt(50),F2=Math.sqrt(10),q2=Math.sqrt(2);function $o(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=P2?10:o>=F2?5:o>=q2?2:1;let f,u,s;return i<0?(s=Math.pow(10,-i)/a,f=Math.round(e*s),u=Math.round(t*s),f/s<e&&++f,u/s>t&&--u,s=-s):(s=Math.pow(10,i)*a,f=Math.round(e/s),u=Math.round(t/s),f*s<e&&++f,u*s>t&&--u),u<f&&.5<=n&&n<2?$o(e,t,n*2):[f,u,s]}function ri(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,a]=r?$o(t,e,n):$o(e,t,n);if(!(o>=i))return[];const f=o-i+1,u=new Array(f);if(r)if(a<0)for(let s=0;s<f;++s)u[s]=(o-s)/-a;else for(let s=0;s<f;++s)u[s]=(o-s)*a;else if(a<0)for(let s=0;s<f;++s)u[s]=(i+s)/-a;else for(let s=0;s<f;++s)u[s]=(i+s)*a;return u}function Eo(e,t,n){return t=+t,e=+e,n=+n,$o(e,t,n)[2]}function mu(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Eo(t,e,n):Eo(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function j2(e){return Math.max(1,Math.ceil(Math.log(ps(e))/Math.LN2)+1)}function rt(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function z2(e,t){let n,r=-1,i=-1;if(t===void 0)for(const o of e)++i,o!=null&&(n<o||n===void 0&&o>=o)&&(n=o,r=i);else for(let o of e)(o=t(o,++i,e))!=null&&(n<o||n===void 0&&o>=o)&&(n=o,r=i);return r}function Bt(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function B2(e,t){let n,r=-1,i=-1;if(t===void 0)for(const o of e)++i,o!=null&&(n>o||n===void 0&&o>=o)&&(n=o,r=i);else for(let o of e)(o=t(o,++i,e))!=null&&(n>o||n===void 0&&o>=o)&&(n=o,r=i);return r}function Kh(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?Mo:Vh(i);r>n;){if(r-n>600){const u=r-n+1,s=t-n+1,c=Math.log(u),l=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*l*(u-l)/u)*(s-u/2<0?-1:1),h=Math.max(n,Math.floor(t-s*l/u+d)),p=Math.min(r,Math.floor(t+(u-s)*l/u+d));Kh(e,t,h,p,i)}const o=e[t];let a=n,f=r;for(Cr(e,n,t),i(e[r],o)>0&&Cr(e,n,r);a<f;){for(Cr(e,a,f),++a,--f;i(e[a],o)<0;)++a;for(;i(e[f],o)>0;)--f}i(e[n],o)===0?Cr(e,n,f):(++f,Cr(e,f,r)),f<=t&&(n=f+1),t<=f&&(r=f-1)}return e}function Cr(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Zh(e,t=Oe){let n,r=!1;if(t.length===1){let i;for(const o of e){const a=t(o);(r?Oe(a,i)>0:Oe(a,a)===0)&&(n=o,i=a,r=!0)}}else for(const i of e)(r?t(i,n)>0:t(i,i)===0)&&(n=i,r=!0);return n}function ir(e,t,n){if(e=Float64Array.from(E2(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return Bt(e);if(t>=1)return rt(e);var r,i=(r-1)*t,o=Math.floor(i),a=rt(Kh(e,o).subarray(0,o+1)),f=Bt(e.subarray(o+1));return a+(f-a)*(i-o)}}function U2(e,t,n=Uh){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e),f=+n(e[o+1],o+1,e);return a+(f-a)*(i-o)}}function H2(e,t,n){const r=ps(e),i=ir(e,.75)-ir(e,.25);return r&&i?Math.ceil((n-t)/(2*i*Math.pow(r,-1/3))):1}function Qh(e,t,n){const r=ps(e),i=Yh(e);return r&&i?Math.ceil((n-t)*Math.cbrt(r)/(3.49*i)):1}function Y2(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function gu(e,t){return ir(e,.5,t)}function*G2(e){for(const t of e)yield*t}function Jh(e){return Array.from(G2(e))}function W2(e,t){const n=new kn;if(t===void 0)for(let o of e)o!=null&&o>=o&&n.set(o,(n.get(o)||0)+1);else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&a>=a&&n.set(a,(n.get(a)||0)+1)}let r,i=0;for(const[o,a]of n)a>i&&(i=a,r=o);return r}function X2(e,t=V2){const n=[];let r,i=!1;for(const o of e)i&&n.push(t(r,o)),r=o,i=!0;return n}function V2(e,t){return[e,t]}function bu(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function fn(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function Ao(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function K2(e){return e}var Z2=3,tl=1e-6;function Q2(e){return"translate("+e+",0)"}function J2(e){return t=>+e(t)}function ev(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function tv(){return!this.__axis}function nv(e,t){var n=[],r=null,i=null,o=6,a=6,f=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,s=1,c="y",l=Q2;function d(h){var p=r??(t.ticks?t.ticks.apply(t,n):t.domain()),g=i??(t.tickFormat?t.tickFormat.apply(t,n):K2),m=Math.max(o,0)+f,y=t.range(),b=+y[0]+u,w=+y[y.length-1]+u,v=(t.bandwidth?ev:J2)(t.copy(),u),T=h.selection?h.selection():h,_=T.selectAll(".domain").data([null]),E=T.selectAll(".tick").data(p,t).order(),C=E.exit(),k=E.enter().append("g").attr("class","tick"),R=E.select("line"),$=E.select("text");_=_.merge(_.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),E=E.merge(k),R=R.merge(k.append("line").attr("stroke","currentColor").attr(c+"2",s*o)),$=$.merge(k.append("text").attr("fill","currentColor").attr(c,s*m).attr("dy","0.71em")),h!==T&&(_=_.transition(h),E=E.transition(h),R=R.transition(h),$=$.transition(h),C=C.transition(h).attr("opacity",tl).attr("transform",function(S){return isFinite(S=v(S))?l(S+u):this.getAttribute("transform")}),k.attr("opacity",tl).attr("transform",function(S){var x=this.parentNode.__axis;return l((x&&isFinite(x=x(S))?x:v(S))+u)})),C.remove(),_.attr("d",a?"M"+b+","+s*a+"V"+u+"H"+w+"V"+s*a:"M"+b+","+u+"H"+w),E.attr("opacity",1).attr("transform",function(S){return l(v(S)+u)}),R.attr(c+"2",s*o),$.attr(c,s*m).text(g),T.filter(tv).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","middle"),T.each(function(){this.__axis=v})}return d.scale=function(h){return arguments.length?(t=h,d):t},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(h){return arguments.length?(n=h==null?[]:Array.from(h),d):n.slice()},d.tickValues=function(h){return arguments.length?(r=h==null?null:Array.from(h),d):r&&r.slice()},d.tickFormat=function(h){return arguments.length?(i=h,d):i},d.tickSize=function(h){return arguments.length?(o=a=+h,d):o},d.tickSizeInner=function(h){return arguments.length?(o=+h,d):o},d.tickSizeOuter=function(h){return arguments.length?(a=+h,d):a},d.tickPadding=function(h){return arguments.length?(f=+h,d):f},d.offset=function(h){return arguments.length?(u=+h,d):u},d}function rv(e){return nv(Z2,e)}var iv={value:()=>{}};function e0(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new bo(n)}function bo(e){this._=e}function ov(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}bo.prototype=e0.prototype={constructor:bo,on:function(e,t){var n=this._,r=ov(e+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(e=r[o]).type)&&(i=av(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(i=(e=r[o]).type)n[i]=nl(n[i],e.name,t);else if(t==null)for(i in n)n[i]=nl(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new bo(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function av(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function nl(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=iv,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var yu="http://www.w3.org/1999/xhtml";const or={svg:"http://www.w3.org/2000/svg",xhtml:yu,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ya(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),or.hasOwnProperty(t)?{space:or[t],local:e}:e}function fv(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===yu&&t.documentElement.namespaceURI===yu?t.createElement(e):t.createElementNS(n,e)}}function uv(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function va(e){var t=ya(e);return(t.local?uv:fv)(t)}function sv(){}function bs(e){return e==null?sv:function(){return this.querySelector(e)}}function cv(e){typeof e!="function"&&(e=bs(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,f=r[i]=new Array(a),u,s,c=0;c<a;++c)(u=o[c])&&(s=e.call(u,u.__data__,c,o))&&("__data__"in u&&(s.__data__=u.__data__),f[c]=s);return new ze(r,this._parents)}function lv(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function dv(){return[]}function t0(e){return e==null?dv:function(){return this.querySelectorAll(e)}}function hv(e){return function(){return lv(e.apply(this,arguments))}}function pv(e){typeof e=="function"?e=hv(e):e=t0(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a=t[o],f=a.length,u,s=0;s<f;++s)(u=a[s])&&(r.push(e.call(u,u.__data__,s,a)),i.push(u));return new ze(r,i)}function n0(e){return function(){return this.matches(e)}}function r0(e){return function(t){return t.matches(e)}}var mv=Array.prototype.find;function gv(e){return function(){return mv.call(this.children,e)}}function bv(){return this.firstElementChild}function yv(e){return this.select(e==null?bv:gv(typeof e=="function"?e:r0(e)))}var vv=Array.prototype.filter;function wv(){return Array.from(this.children)}function _v(e){return function(){return vv.call(this.children,e)}}function xv(e){return this.selectAll(e==null?wv:_v(typeof e=="function"?e:r0(e)))}function Tv(e){typeof e!="function"&&(e=n0(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,f=r[i]=[],u,s=0;s<a;++s)(u=o[s])&&e.call(u,u.__data__,s,o)&&f.push(u);return new ze(r,this._parents)}function i0(e){return new Array(e.length)}function Sv(){return new ze(this._enter||this._groups.map(i0),this._parents)}function Co(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Co.prototype={constructor:Co,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Mv(e){return function(){return e}}function $v(e,t,n,r,i,o){for(var a=0,f,u=t.length,s=o.length;a<s;++a)(f=t[a])?(f.__data__=o[a],r[a]=f):n[a]=new Co(e,o[a]);for(;a<u;++a)(f=t[a])&&(i[a]=f)}function Ev(e,t,n,r,i,o,a){var f,u,s=new Map,c=t.length,l=o.length,d=new Array(c),h;for(f=0;f<c;++f)(u=t[f])&&(d[f]=h=a.call(u,u.__data__,f,t)+"",s.has(h)?i[f]=u:s.set(h,u));for(f=0;f<l;++f)h=a.call(e,o[f],f,o)+"",(u=s.get(h))?(r[f]=u,u.__data__=o[f],s.delete(h)):n[f]=new Co(e,o[f]);for(f=0;f<c;++f)(u=t[f])&&s.get(d[f])===u&&(i[f]=u)}function Av(e){return e.__data__}function Cv(e,t){if(!arguments.length)return Array.from(this,Av);var n=t?Ev:$v,r=this._parents,i=this._groups;typeof e!="function"&&(e=Mv(e));for(var o=i.length,a=new Array(o),f=new Array(o),u=new Array(o),s=0;s<o;++s){var c=r[s],l=i[s],d=l.length,h=kv(e.call(c,c&&c.__data__,s,r)),p=h.length,g=f[s]=new Array(p),m=a[s]=new Array(p),y=u[s]=new Array(d);n(c,l,g,m,y,h,t);for(var b=0,w=0,v,T;b<p;++b)if(v=g[b]){for(b>=w&&(w=b+1);!(T=m[w])&&++w<p;);v._next=T||null}}return a=new ze(a,r),a._enter=f,a._exit=u,a}function kv(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Nv(){return new ze(this._exit||this._groups.map(i0),this._parents)}function Lv(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Iv(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,a=Math.min(i,o),f=new Array(i),u=0;u<a;++u)for(var s=n[u],c=r[u],l=s.length,d=f[u]=new Array(l),h,p=0;p<l;++p)(h=s[p]||c[p])&&(d[p]=h);for(;u<i;++u)f[u]=n[u];return new ze(f,this._parents)}function Dv(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function Rv(e){e||(e=Ov);function t(l,d){return l&&d?e(l.__data__,d.__data__):!l-!d}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],f=a.length,u=i[o]=new Array(f),s,c=0;c<f;++c)(s=a[c])&&(u[c]=s);u.sort(t)}return new ze(i,this._parents).order()}function Ov(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Pv(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Fv(){return Array.from(this)}function qv(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function jv(){let e=0;for(const t of this)++e;return e}function zv(){return!this.node()}function Bv(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,a=i.length,f;o<a;++o)(f=i[o])&&e.call(f,f.__data__,o,i);return this}function Uv(e){return function(){this.removeAttribute(e)}}function Hv(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Yv(e,t){return function(){this.setAttribute(e,t)}}function Gv(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Wv(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Xv(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Vv(e,t){var n=ya(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Hv:Uv:typeof t=="function"?n.local?Xv:Wv:n.local?Gv:Yv)(n,t))}function o0(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Kv(e){return function(){this.style.removeProperty(e)}}function Zv(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Qv(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Jv(e,t,n){return arguments.length>1?this.each((t==null?Kv:typeof t=="function"?Qv:Zv)(e,t,n??"")):ar(this.node(),e)}function ar(e,t){return e.style.getPropertyValue(t)||o0(e).getComputedStyle(e,null).getPropertyValue(t)}function ew(e){return function(){delete this[e]}}function tw(e,t){return function(){this[e]=t}}function nw(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function rw(e,t){return arguments.length>1?this.each((t==null?ew:typeof t=="function"?nw:tw)(e,t)):this.node()[e]}function a0(e){return e.trim().split(/^|\s+/)}function ys(e){return e.classList||new f0(e)}function f0(e){this._node=e,this._names=a0(e.getAttribute("class")||"")}f0.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function u0(e,t){for(var n=ys(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function s0(e,t){for(var n=ys(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function iw(e){return function(){u0(this,e)}}function ow(e){return function(){s0(this,e)}}function aw(e,t){return function(){(t.apply(this,arguments)?u0:s0)(this,e)}}function fw(e,t){var n=a0(e+"");if(arguments.length<2){for(var r=ys(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?aw:t?iw:ow)(n,t))}function uw(){this.textContent=""}function sw(e){return function(){this.textContent=e}}function cw(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function lw(e){return arguments.length?this.each(e==null?uw:(typeof e=="function"?cw:sw)(e)):this.node().textContent}function dw(){this.innerHTML=""}function hw(e){return function(){this.innerHTML=e}}function pw(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function mw(e){return arguments.length?this.each(e==null?dw:(typeof e=="function"?pw:hw)(e)):this.node().innerHTML}function gw(){this.nextSibling&&this.parentNode.appendChild(this)}function bw(){return this.each(gw)}function yw(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function vw(){return this.each(yw)}function ww(e){var t=typeof e=="function"?e:va(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function _w(){return null}function xw(e,t){var n=typeof e=="function"?e:va(e),r=t==null?_w:typeof t=="function"?t:bs(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Tw(){var e=this.parentNode;e&&e.removeChild(this)}function Sw(){return this.each(Tw)}function Mw(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function $w(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ew(e){return this.select(e?$w:Mw)}function Aw(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Cw(e){return function(t){e.call(this,t,this.__data__)}}function kw(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Nw(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function Lw(e,t,n){return function(){var r=this.__on,i,o=Cw(t);if(r){for(var a=0,f=r.length;a<f;++a)if((i=r[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Iw(e,t,n){var r=kw(e+""),i,o=r.length,a;if(arguments.length<2){var f=this.node().__on;if(f){for(var u=0,s=f.length,c;u<s;++u)for(i=0,c=f[u];i<o;++i)if((a=r[i]).type===c.type&&a.name===c.name)return c.value}return}for(f=t?Lw:Nw,i=0;i<o;++i)this.each(f(r[i],t,n));return this}function c0(e,t,n){var r=o0(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Dw(e,t){return function(){return c0(this,e,t)}}function Rw(e,t){return function(){return c0(this,e,t.apply(this,arguments))}}function Ow(e,t){return this.each((typeof t=="function"?Rw:Dw)(e,t))}function*Pw(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var l0=[null];function ze(e,t){this._groups=e,this._parents=t}function wi(){return new ze([[document.documentElement]],l0)}function Fw(){return this}ze.prototype=wi.prototype={constructor:ze,select:cv,selectAll:pv,selectChild:yv,selectChildren:xv,filter:Tv,data:Cv,enter:Sv,exit:Nv,join:Lv,merge:Iv,selection:Fw,order:Dv,sort:Rv,call:Pv,nodes:Fv,node:qv,size:jv,empty:zv,each:Bv,attr:Vv,style:Jv,property:rw,classed:fw,text:lw,html:mw,raise:bw,lower:vw,append:ww,insert:xw,remove:Sw,clone:Ew,datum:Aw,on:Iw,dispatch:Ow,[Symbol.iterator]:Pw};function er(e){return typeof e=="string"?new ze([[document.querySelector(e)]],[document.documentElement]):new ze([[e]],l0)}function qw(e){let t;for(;t=e.sourceEvent;)e=t;return e}function jw(e,t){if(e=qw(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function xr(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function _i(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function dn(){}var Nn=.7,fr=1/Nn,tr="\\s*([+-]?\\d+)\\s*",ii="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",zw=/^#([0-9a-f]{3,8})$/,Bw=new RegExp(`^rgb\\(${tr},${tr},${tr}\\)$`),Uw=new RegExp(`^rgb\\(${_t},${_t},${_t}\\)$`),Hw=new RegExp(`^rgba\\(${tr},${tr},${tr},${ii}\\)$`),Yw=new RegExp(`^rgba\\(${_t},${_t},${_t},${ii}\\)$`),Gw=new RegExp(`^hsl\\(${ii},${_t},${_t}\\)$`),Ww=new RegExp(`^hsla\\(${ii},${_t},${_t},${ii}\\)$`),rl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};xr(dn,Ln,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:il,formatHex:il,formatHex8:Xw,formatHsl:Vw,formatRgb:ol,toString:ol});function il(){return this.rgb().formatHex()}function Xw(){return this.rgb().formatHex8()}function Vw(){return d0(this).formatHsl()}function ol(){return this.rgb().formatRgb()}function Ln(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=zw.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?al(t):n===3?new we(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Yi(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Yi(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Bw.exec(e))?new we(t[1],t[2],t[3],1):(t=Uw.exec(e))?new we(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Hw.exec(e))?Yi(t[1],t[2],t[3],t[4]):(t=Yw.exec(e))?Yi(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Gw.exec(e))?sl(t[1],t[2]/100,t[3]/100,1):(t=Ww.exec(e))?sl(t[1],t[2]/100,t[3]/100,t[4]):rl.hasOwnProperty(e)?al(rl[e]):e==="transparent"?new we(NaN,NaN,NaN,0):null}function al(e){return new we(e>>16&255,e>>8&255,e&255,1)}function Yi(e,t,n,r){return r<=0&&(e=t=n=NaN),new we(e,t,n,r)}function vs(e){return e instanceof dn||(e=Ln(e)),e?(e=e.rgb(),new we(e.r,e.g,e.b,e.opacity)):new we}function un(e,t,n,r){return arguments.length===1?vs(e):new we(e,t,n,r??1)}function we(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}xr(we,un,_i(dn,{brighter(e){return e=e==null?fr:Math.pow(fr,e),new we(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Nn:Math.pow(Nn,e),new we(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new we($n(this.r),$n(this.g),$n(this.b),ko(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fl,formatHex:fl,formatHex8:Kw,formatRgb:ul,toString:ul}));function fl(){return`#${Mn(this.r)}${Mn(this.g)}${Mn(this.b)}`}function Kw(){return`#${Mn(this.r)}${Mn(this.g)}${Mn(this.b)}${Mn((isNaN(this.opacity)?1:this.opacity)*255)}`}function ul(){const e=ko(this.opacity);return`${e===1?"rgb(":"rgba("}${$n(this.r)}, ${$n(this.g)}, ${$n(this.b)}${e===1?")":`, ${e})`}`}function ko(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function $n(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Mn(e){return e=$n(e),(e<16?"0":"")+e.toString(16)}function sl(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new tt(e,t,n,r)}function d0(e){if(e instanceof tt)return new tt(e.h,e.s,e.l,e.opacity);if(e instanceof dn||(e=Ln(e)),!e)return new tt;if(e instanceof tt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,f=o-i,u=(o+i)/2;return f?(t===o?a=(n-r)/f+(n<r)*6:n===o?a=(r-t)/f+2:a=(t-n)/f+4,f/=u<.5?o+i:2-o-i,a*=60):f=u>0&&u<1?0:a,new tt(a,f,u,e.opacity)}function vu(e,t,n,r){return arguments.length===1?d0(e):new tt(e,t,n,r??1)}function tt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}xr(tt,vu,_i(dn,{brighter(e){return e=e==null?fr:Math.pow(fr,e),new tt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Nn:Math.pow(Nn,e),new tt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new we(vf(e>=240?e-240:e+120,i,r),vf(e,i,r),vf(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new tt(cl(this.h),Gi(this.s),Gi(this.l),ko(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ko(this.opacity);return`${e===1?"hsl(":"hsla("}${cl(this.h)}, ${Gi(this.s)*100}%, ${Gi(this.l)*100}%${e===1?")":`, ${e})`}`}}));function cl(e){return e=(e||0)%360,e<0?e+360:e}function Gi(e){return Math.max(0,Math.min(1,e||0))}function vf(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const h0=Math.PI/180,p0=180/Math.PI,No=18,m0=.96422,g0=1,b0=.82521,y0=4/29,nr=6/29,v0=3*nr*nr,Zw=nr*nr*nr;function w0(e){if(e instanceof xt)return new xt(e.l,e.a,e.b,e.opacity);if(e instanceof Pt)return _0(e);e instanceof we||(e=vs(e));var t=Tf(e.r),n=Tf(e.g),r=Tf(e.b),i=wf((.2225045*t+.7168786*n+.0606169*r)/g0),o,a;return t===n&&n===r?o=a=i:(o=wf((.4360747*t+.3850649*n+.1430804*r)/m0),a=wf((.0139322*t+.0971045*n+.7141733*r)/b0)),new xt(116*i-16,500*(o-i),200*(i-a),e.opacity)}function wu(e,t,n,r){return arguments.length===1?w0(e):new xt(e,t,n,r??1)}function xt(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}xr(xt,wu,_i(dn,{brighter(e){return new xt(this.l+No*(e??1),this.a,this.b,this.opacity)},darker(e){return new xt(this.l-No*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=m0*_f(t),e=g0*_f(e),n=b0*_f(n),new we(xf(3.1338561*t-1.6168667*e-.4906146*n),xf(-.9787684*t+1.9161415*e+.033454*n),xf(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function wf(e){return e>Zw?Math.pow(e,1/3):e/v0+y0}function _f(e){return e>nr?e*e*e:v0*(e-y0)}function xf(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Tf(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Qw(e){if(e instanceof Pt)return new Pt(e.h,e.c,e.l,e.opacity);if(e instanceof xt||(e=w0(e)),e.a===0&&e.b===0)return new Pt(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*p0;return new Pt(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function _u(e,t,n,r){return arguments.length===1?Qw(e):new Pt(e,t,n,r??1)}function Pt(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function _0(e){if(isNaN(e.h))return new xt(e.l,0,0,e.opacity);var t=e.h*h0;return new xt(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}xr(Pt,_u,_i(dn,{brighter(e){return new Pt(this.h,this.c,this.l+No*(e??1),this.opacity)},darker(e){return new Pt(this.h,this.c,this.l-No*(e??1),this.opacity)},rgb(){return _0(this).rgb()}}));var x0=-.14861,ws=1.78277,_s=-.29227,wa=-.90649,oi=1.97294,ll=oi*wa,dl=oi*ws,hl=ws*_s-wa*x0;function Jw(e){if(e instanceof En)return new En(e.h,e.s,e.l,e.opacity);e instanceof we||(e=vs(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(hl*r+ll*t-dl*n)/(hl+ll-dl),o=r-i,a=(oi*(n-i)-_s*o)/wa,f=Math.sqrt(a*a+o*o)/(oi*i*(1-i)),u=f?Math.atan2(a,o)*p0-120:NaN;return new En(u<0?u+360:u,f,i,e.opacity)}function Tt(e,t,n,r){return arguments.length===1?Jw(e):new En(e,t,n,r??1)}function En(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}xr(En,Tt,_i(dn,{brighter(e){return e=e==null?fr:Math.pow(fr,e),new En(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Nn:Math.pow(Nn,e),new En(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*h0,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new we(255*(t+n*(x0*r+ws*i)),255*(t+n*(_s*r+wa*i)),255*(t+n*(oi*r)),this.opacity)}}));function e_(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}function t_(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,f=r<t-1?e[r+2]:2*o-i;return e_((n-r/t)*t,a,i,o,f)}}const _a=e=>()=>e;function T0(e,t){return function(n){return e+n*t}}function n_(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function xs(e,t){var n=t-e;return n?T0(e,n>180||n<-180?n-360*Math.round(n/360):n):_a(isNaN(e)?t:e)}function r_(e){return(e=+e)==1?Ae:function(t,n){return n-t?n_(t,n,e):_a(isNaN(t)?n:t)}}function Ae(e,t){var n=t-e;return n?T0(e,n):_a(isNaN(e)?t:e)}const In=function e(t){var n=r_(t);function r(i,o){var a=n((i=un(i)).r,(o=un(o)).r),f=n(i.g,o.g),u=n(i.b,o.b),s=Ae(i.opacity,o.opacity);return function(c){return i.r=a(c),i.g=f(c),i.b=u(c),i.opacity=s(c),i+""}}return r.gamma=e,r}(1);function i_(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),a,f;for(a=0;a<n;++a)f=un(t[a]),r[a]=f.r||0,i[a]=f.g||0,o[a]=f.b||0;return r=e(r),i=e(i),o=e(o),f.opacity=1,function(u){return f.r=r(u),f.g=i(u),f.b=o(u),f+""}}}var o_=i_(t_);function a_(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function f_(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function u_(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=xi(e[a],t[a]);for(;a<n;++a)o[a]=t[a];return function(f){for(a=0;a<r;++a)o[a]=i[a](f);return o}}function s_(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function $e(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function c_(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=xi(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var xu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Sf=new RegExp(xu.source,"g");function l_(e){return function(){return e}}function d_(e){return function(t){return e(t)+""}}function S0(e,t){var n=xu.lastIndex=Sf.lastIndex=0,r,i,o,a=-1,f=[],u=[];for(e=e+"",t=t+"";(r=xu.exec(e))&&(i=Sf.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),f[a]?f[a]+=o:f[++a]=o),(r=r[0])===(i=i[0])?f[a]?f[a]+=i:f[++a]=i:(f[++a]=null,u.push({i:a,x:$e(r,i)})),n=Sf.lastIndex;return n<t.length&&(o=t.slice(n),f[a]?f[a]+=o:f[++a]=o),f.length<2?u[0]?d_(u[0].x):l_(t):(t=u.length,function(s){for(var c=0,l;c<t;++c)f[(l=u[c]).i]=l.x(s);return f.join("")})}function xi(e,t){var n=typeof t,r;return t==null||n==="boolean"?_a(t):(n==="number"?$e:n==="string"?(r=Ln(t))?(t=r,In):S0:t instanceof Ln?In:t instanceof Date?s_:f_(t)?a_:Array.isArray(t)?u_:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?c_:$e)(e,t)}function Ts(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var pl=180/Math.PI,Tu={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function M0(e,t,n,r,i,o){var a,f,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(f=Math.sqrt(n*n+r*r))&&(n/=f,r/=f,u/=f),e*r<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*pl,skewX:Math.atan(u)*pl,scaleX:a,scaleY:f}}var Wi;function h_(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Tu:M0(t.a,t.b,t.c,t.d,t.e,t.f)}function p_(e){return e==null||(Wi||(Wi=document.createElementNS("http://www.w3.org/2000/svg","g")),Wi.setAttribute("transform",e),!(e=Wi.transform.baseVal.consolidate()))?Tu:(e=e.matrix,M0(e.a,e.b,e.c,e.d,e.e,e.f))}function $0(e,t,n,r){function i(s){return s.length?s.pop()+" ":""}function o(s,c,l,d,h,p){if(s!==l||c!==d){var g=h.push("translate(",null,t,null,n);p.push({i:g-4,x:$e(s,l)},{i:g-2,x:$e(c,d)})}else(l||d)&&h.push("translate("+l+t+d+n)}function a(s,c,l,d){s!==c?(s-c>180?c+=360:c-s>180&&(s+=360),d.push({i:l.push(i(l)+"rotate(",null,r)-2,x:$e(s,c)})):c&&l.push(i(l)+"rotate("+c+r)}function f(s,c,l,d){s!==c?d.push({i:l.push(i(l)+"skewX(",null,r)-2,x:$e(s,c)}):c&&l.push(i(l)+"skewX("+c+r)}function u(s,c,l,d,h,p){if(s!==l||c!==d){var g=h.push(i(h)+"scale(",null,",",null,")");p.push({i:g-4,x:$e(s,l)},{i:g-2,x:$e(c,d)})}else(l!==1||d!==1)&&h.push(i(h)+"scale("+l+","+d+")")}return function(s,c){var l=[],d=[];return s=e(s),c=e(c),o(s.translateX,s.translateY,c.translateX,c.translateY,l,d),a(s.rotate,c.rotate,l,d),f(s.skewX,c.skewX,l,d),u(s.scaleX,s.scaleY,c.scaleX,c.scaleY,l,d),s=c=null,function(h){for(var p=-1,g=d.length,m;++p<g;)l[(m=d[p]).i]=m.x(h);return l.join("")}}}var m_=$0(h_,"px, ","px)","deg)"),g_=$0(p_,", ",")",")");function b_(e){return function(t,n){var r=e((t=vu(t)).h,(n=vu(n)).h),i=Ae(t.s,n.s),o=Ae(t.l,n.l),a=Ae(t.opacity,n.opacity);return function(f){return t.h=r(f),t.s=i(f),t.l=o(f),t.opacity=a(f),t+""}}}const y_=b_(xs);function v_(e,t){var n=Ae((e=wu(e)).l,(t=wu(t)).l),r=Ae(e.a,t.a),i=Ae(e.b,t.b),o=Ae(e.opacity,t.opacity);return function(a){return e.l=n(a),e.a=r(a),e.b=i(a),e.opacity=o(a),e+""}}function w_(e){return function(t,n){var r=e((t=_u(t)).h,(n=_u(n)).h),i=Ae(t.c,n.c),o=Ae(t.l,n.l),a=Ae(t.opacity,n.opacity);return function(f){return t.h=r(f),t.c=i(f),t.l=o(f),t.opacity=a(f),t+""}}}const __=w_(xs);function E0(e){return function t(n){n=+n;function r(i,o){var a=e((i=Tt(i)).h,(o=Tt(o)).h),f=Ae(i.s,o.s),u=Ae(i.l,o.l),s=Ae(i.opacity,o.opacity);return function(c){return i.h=a(c),i.s=f(c),i.l=u(Math.pow(c,n)),i.opacity=s(c),i+""}}return r.gamma=t,r}(1)}E0(xs);var Ss=E0(Ae);function xa(e,t){t===void 0&&(t=e,e=xi);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(a){var f=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return o[f](a-f)}}function ot(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}var ur=0,jr=0,kr=0,A0=1e3,Lo,zr,Io=0,Dn=0,Ta=0,ai=typeof performance=="object"&&performance.now?performance:Date,C0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ms(){return Dn||(C0(x_),Dn=ai.now()+Ta)}function x_(){Dn=0}function Do(){this._call=this._time=this._next=null}Do.prototype=k0.prototype={constructor:Do,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Ms():+n)+(t==null?0:+t),!this._next&&zr!==this&&(zr?zr._next=this:Lo=this,zr=this),this._call=e,this._time=n,Su()},stop:function(){this._call&&(this._call=null,this._time=1/0,Su())}};function k0(e,t,n){var r=new Do;return r.restart(e,t,n),r}function T_(){Ms(),++ur;for(var e=Lo,t;e;)(t=Dn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ur}function ml(){Dn=(Io=ai.now())+Ta,ur=jr=0;try{T_()}finally{ur=0,M_(),Dn=0}}function S_(){var e=ai.now(),t=e-Io;t>A0&&(Ta-=t,Io=e)}function M_(){for(var e,t=Lo,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Lo=n);zr=e,Su(r)}function Su(e){if(!ur){jr&&(jr=clearTimeout(jr));var t=e-Dn;t>24?(e<1/0&&(jr=setTimeout(ml,e-ai.now()-Ta)),kr&&(kr=clearInterval(kr))):(kr||(Io=ai.now(),kr=setInterval(S_,A0)),ur=1,C0(ml))}}function gl(e,t,n){var r=new Do;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var $_=e0("start","end","cancel","interrupt"),E_=[],N0=0,bl=1,Mu=2,yo=3,yl=4,$u=5,vo=6;function Sa(e,t,n,r,i,o){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;A_(e,n,{name:t,index:r,group:i,on:$_,tween:E_,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:N0})}function $s(e,t){var n=st(e,t);if(n.state>N0)throw new Error("too late; already scheduled");return n}function $t(e,t){var n=st(e,t);if(n.state>yo)throw new Error("too late; already running");return n}function st(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function A_(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=k0(o,0,n.time);function o(s){n.state=bl,n.timer.restart(a,n.delay,n.time),n.delay<=s&&a(s-n.delay)}function a(s){var c,l,d,h;if(n.state!==bl)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===yo)return gl(a);h.state===yl?(h.state=vo,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=vo,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(gl(function(){n.state===yo&&(n.state=yl,n.timer.restart(f,n.delay,n.time),f(s))}),n.state=Mu,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Mu){for(n.state=yo,i=new Array(d=n.tween.length),c=0,l=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++l]=h);i.length=l+1}}function f(s){for(var c=s<n.duration?n.ease.call(null,s/n.duration):(n.timer.restart(u),n.state=$u,1),l=-1,d=i.length;++l<d;)i[l].call(e,c);n.state===$u&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=vo,n.timer.stop(),delete r[t];for(var s in r)return;delete e.__transition}}function C_(e,t){var n=e.__transition,r,i,o=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){o=!1;continue}i=r.state>Mu&&r.state<$u,r.state=vo,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}o&&delete e.__transition}}function k_(e){return this.each(function(){C_(this,e)})}function N_(e,t){var n,r;return function(){var i=$t(this,e),o=i.tween;if(o!==n){r=n=o;for(var a=0,f=r.length;a<f;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function L_(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=$t(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var f={name:t,value:n},u=0,s=i.length;u<s;++u)if(i[u].name===t){i[u]=f;break}u===s&&i.push(f)}o.tween=i}}function I_(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=st(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===e)return a.value;return null}return this.each((t==null?N_:L_)(n,e,t))}function Es(e,t,n){var r=e._id;return e.each(function(){var i=$t(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return st(i,r).value[t]}}function L0(e,t){var n;return(typeof t=="number"?$e:t instanceof Ln?In:(n=Ln(t))?(t=n,In):S0)(e,t)}function D_(e){return function(){this.removeAttribute(e)}}function R_(e){return function(){this.removeAttributeNS(e.space,e.local)}}function O_(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttribute(e);return a===i?null:a===r?o:o=t(r=a,n)}}function P_(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?o:o=t(r=a,n)}}function F_(e,t,n){var r,i,o;return function(){var a,f=n(this),u;return f==null?void this.removeAttribute(e):(a=this.getAttribute(e),u=f+"",a===u?null:a===r&&u===i?o:(i=u,o=t(r=a,f)))}}function q_(e,t,n){var r,i,o;return function(){var a,f=n(this),u;return f==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),u=f+"",a===u?null:a===r&&u===i?o:(i=u,o=t(r=a,f)))}}function j_(e,t){var n=ya(e),r=n==="transform"?g_:L0;return this.attrTween(e,typeof t=="function"?(n.local?q_:F_)(n,r,Es(this,"attr."+e,t)):t==null?(n.local?R_:D_)(n):(n.local?P_:O_)(n,r,t))}function z_(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function B_(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function U_(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&B_(e,o)),n}return i._value=t,i}function H_(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&z_(e,o)),n}return i._value=t,i}function Y_(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=ya(e);return this.tween(n,(r.local?U_:H_)(r,t))}function G_(e,t){return function(){$s(this,e).delay=+t.apply(this,arguments)}}function W_(e,t){return t=+t,function(){$s(this,e).delay=t}}function X_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?G_:W_)(t,e)):st(this.node(),t).delay}function V_(e,t){return function(){$t(this,e).duration=+t.apply(this,arguments)}}function K_(e,t){return t=+t,function(){$t(this,e).duration=t}}function Z_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?V_:K_)(t,e)):st(this.node(),t).duration}function Q_(e,t){if(typeof t!="function")throw new Error;return function(){$t(this,e).ease=t}}function J_(e){var t=this._id;return arguments.length?this.each(Q_(t,e)):st(this.node(),t).ease}function e6(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;$t(this,e).ease=n}}function t6(e){if(typeof e!="function")throw new Error;return this.each(e6(this._id,e))}function n6(e){typeof e!="function"&&(e=n0(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,f=r[i]=[],u,s=0;s<a;++s)(u=o[s])&&e.call(u,u.__data__,s,o)&&f.push(u);return new Ut(r,this._parents,this._name,this._id)}function r6(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),f=0;f<o;++f)for(var u=t[f],s=n[f],c=u.length,l=a[f]=new Array(c),d,h=0;h<c;++h)(d=u[h]||s[h])&&(l[h]=d);for(;f<r;++f)a[f]=t[f];return new Ut(a,this._parents,this._name,this._id)}function i6(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function o6(e,t,n){var r,i,o=i6(t)?$s:$t;return function(){var a=o(this,e),f=a.on;f!==r&&(i=(r=f).copy()).on(t,n),a.on=i}}function a6(e,t){var n=this._id;return arguments.length<2?st(this.node(),n).on.on(e):this.each(o6(n,e,t))}function f6(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function u6(){return this.on("end.remove",f6(this._id))}function s6(e){var t=this._name,n=this._id;typeof e!="function"&&(e=bs(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var f=r[a],u=f.length,s=o[a]=new Array(u),c,l,d=0;d<u;++d)(c=f[d])&&(l=e.call(c,c.__data__,d,f))&&("__data__"in c&&(l.__data__=c.__data__),s[d]=l,Sa(s[d],t,n,d,s,st(c,n)));return new Ut(o,this._parents,t,n)}function c6(e){var t=this._name,n=this._id;typeof e!="function"&&(e=t0(e));for(var r=this._groups,i=r.length,o=[],a=[],f=0;f<i;++f)for(var u=r[f],s=u.length,c,l=0;l<s;++l)if(c=u[l]){for(var d=e.call(c,c.__data__,l,u),h,p=st(c,n),g=0,m=d.length;g<m;++g)(h=d[g])&&Sa(h,t,n,g,d,p);o.push(d),a.push(c)}return new Ut(o,a,t,n)}var l6=wi.prototype.constructor;function d6(){return new l6(this._groups,this._parents)}function h6(e,t){var n,r,i;return function(){var o=ar(this,e),a=(this.style.removeProperty(e),ar(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}function I0(e){return function(){this.style.removeProperty(e)}}function p6(e,t,n){var r,i=n+"",o;return function(){var a=ar(this,e);return a===i?null:a===r?o:o=t(r=a,n)}}function m6(e,t,n){var r,i,o;return function(){var a=ar(this,e),f=n(this),u=f+"";return f==null&&(u=f=(this.style.removeProperty(e),ar(this,e))),a===u?null:a===r&&u===i?o:(i=u,o=t(r=a,f))}}function g6(e,t){var n,r,i,o="style."+t,a="end."+o,f;return function(){var u=$t(this,e),s=u.on,c=u.value[o]==null?f||(f=I0(t)):void 0;(s!==n||i!==c)&&(r=(n=s).copy()).on(a,i=c),u.on=r}}function b6(e,t,n){var r=(e+="")=="transform"?m_:L0;return t==null?this.styleTween(e,h6(e,r)).on("end.style."+e,I0(e)):typeof t=="function"?this.styleTween(e,m6(e,r,Es(this,"style."+e,t))).each(g6(this._id,e)):this.styleTween(e,p6(e,r,t),n).on("end.style."+e,null)}function y6(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function v6(e,t,n){var r,i;function o(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&y6(e,a,n)),r}return o._value=t,o}function w6(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,v6(e,t,n??""))}function _6(e){return function(){this.textContent=e}}function x6(e){return function(){var t=e(this);this.textContent=t??""}}function T6(e){return this.tween("text",typeof e=="function"?x6(Es(this,"text",e)):_6(e==null?"":e+""))}function S6(e){return function(t){this.textContent=e.call(this,t)}}function M6(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&S6(i)),t}return r._value=e,r}function $6(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,M6(e))}function E6(){for(var e=this._name,t=this._id,n=D0(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],f=a.length,u,s=0;s<f;++s)if(u=a[s]){var c=st(u,t);Sa(u,e,n,s,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Ut(r,this._parents,e,n)}function A6(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var f={value:a},u={value:function(){--i===0&&o()}};n.each(function(){var s=$t(this,r),c=s.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(f),t._.interrupt.push(f),t._.end.push(u)),s.on=t}),i===0&&o()})}var C6=0;function Ut(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function D0(){return++C6}var Ct=wi.prototype;Ut.prototype={constructor:Ut,select:s6,selectAll:c6,selectChild:Ct.selectChild,selectChildren:Ct.selectChildren,filter:n6,merge:r6,selection:d6,transition:E6,call:Ct.call,nodes:Ct.nodes,node:Ct.node,size:Ct.size,empty:Ct.empty,each:Ct.each,on:a6,attr:j_,attrTween:Y_,style:b6,styleTween:w6,text:T6,textTween:$6,remove:u6,tween:I_,delay:X_,duration:Z_,ease:J_,easeVarying:t6,end:A6,[Symbol.iterator]:Ct[Symbol.iterator]};function k6(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var N6={time:null,delay:0,duration:250,ease:k6};function L6(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function I6(e){var t,n;e instanceof Ut?(t=e._id,e=e._name):(t=D0(),(n=N6).time=Ms(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],f=a.length,u,s=0;s<f;++s)(u=a[s])&&Sa(u,e,t,s,a,n||L6(u,t));return new Ut(r,this._parents,e,t)}wi.prototype.interrupt=k_;wi.prototype.transition=I6;const Eu=Math.PI,Au=2*Eu,Tn=1e-6,D6=Au-Tn;function R0(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function R6(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return R0;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class O0{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?R0:R6(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,a){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,f=this._y1,u=r-t,s=i-n,c=a-t,l=f-n,d=c*c+l*l;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Tn)if(!(Math.abs(l*u-s*c)>Tn)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-a,p=i-f,g=u*u+s*s,m=h*h+p*p,y=Math.sqrt(g),b=Math.sqrt(d),w=o*Math.tan((Eu-Math.acos((g+d-m)/(2*y*b)))/2),v=w/b,T=w/y;Math.abs(v-1)>Tn&&this._append`L${t+v*c},${n+v*l}`,this._append`A${o},${o},0,0,${+(l*h>c*p)},${this._x1=t+T*u},${this._y1=n+T*s}`}}arc(t,n,r,i,o,a){if(t=+t,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let f=r*Math.cos(i),u=r*Math.sin(i),s=t+f,c=n+u,l=1^a,d=a?i-o:o-i;this._x1===null?this._append`M${s},${c}`:(Math.abs(this._x1-s)>Tn||Math.abs(this._y1-c)>Tn)&&this._append`L${s},${c}`,r&&(d<0&&(d=d%Au+Au),d>D6?this._append`A${r},${r},0,1,${l},${t-f},${n-u}A${r},${r},0,1,${l},${this._x1=s},${this._y1=c}`:d>Tn&&this._append`A${r},${r},0,${+(d>=Eu)},${l},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Cu(e=3){return new O0(+e)}function O6(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ro(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function sr(e){return e=Ro(Math.abs(e)),e?e[1]:NaN}function P6(e,t){return function(n,r){for(var i=n.length,o=[],a=0,f=e[0],u=0;i>0&&f>0&&(u+f+1>r&&(f=Math.max(1,r-u)),o.push(n.substring(i-=f,i+f)),!((u+=f+1)>r));)f=e[a=(a+1)%e.length];return o.reverse().join(t)}}function F6(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var q6=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function fi(e){if(!(t=q6.exec(e)))throw new Error("invalid format: "+e);var t;return new As({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}fi.prototype=As.prototype;function As(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}As.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function j6(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var P0;function z6(e,t){var n=Ro(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(P0=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Ro(e,Math.max(0,t+o-1))[0]}function vl(e,t){var n=Ro(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const wl={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:O6,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>vl(e*100,t),r:vl,s:z6,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function _l(e){return e}var xl=Array.prototype.map,Tl=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function B6(e){var t=e.grouping===void 0||e.thousands===void 0?_l:P6(xl.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?_l:F6(xl.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",f=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function s(l){l=fi(l);var d=l.fill,h=l.align,p=l.sign,g=l.symbol,m=l.zero,y=l.width,b=l.comma,w=l.precision,v=l.trim,T=l.type;T==="n"?(b=!0,T="g"):wl[T]||(w===void 0&&(w=12),v=!0,T="g"),(m||d==="0"&&h==="=")&&(m=!0,d="0",h="=");var _=g==="$"?n:g==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",E=g==="$"?r:/[%p]/.test(T)?a:"",C=wl[T],k=/[defgprs%]/.test(T);w=w===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function R($){var S=_,x=E,A,M,N;if(T==="c")x=C($)+x,$="";else{$=+$;var L=$<0||1/$<0;if($=isNaN($)?u:C(Math.abs($),w),v&&($=j6($)),L&&+$==0&&p!=="+"&&(L=!1),S=(L?p==="("?p:f:p==="-"||p==="("?"":p)+S,x=(T==="s"?Tl[8+P0/3]:"")+x+(L&&p==="("?")":""),k){for(A=-1,M=$.length;++A<M;)if(N=$.charCodeAt(A),48>N||N>57){x=(N===46?i+$.slice(A+1):$.slice(A))+x,$=$.slice(0,A);break}}}b&&!m&&($=t($,1/0));var z=S.length+$.length+x.length,H=z<y?new Array(y-z+1).join(d):"";switch(b&&m&&($=t(H+$,H.length?y-x.length:1/0),H=""),h){case"<":$=S+$+x+H;break;case"=":$=S+H+$+x;break;case"^":$=H.slice(0,z=H.length>>1)+S+$+x+H.slice(z);break;default:$=H+S+$+x;break}return o($)}return R.toString=function(){return l+""},R}function c(l,d){var h=s((l=fi(l),l.type="f",l)),p=Math.max(-8,Math.min(8,Math.floor(sr(d)/3)))*3,g=Math.pow(10,-p),m=Tl[8+p/3];return function(y){return h(g*y)+m}}return{format:s,formatPrefix:c}}var Xi,Tr,F0;U6({thousands:",",grouping:[3],currency:["$",""]});function U6(e){return Xi=B6(e),Tr=Xi.format,F0=Xi.formatPrefix,Xi}function H6(e){return Math.max(0,-sr(Math.abs(e)))}function Y6(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(sr(t)/3)))*3-sr(Math.abs(e)))}function G6(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,sr(t)-sr(e))+1}var te=1e-6,q0=1e-12,re=Math.PI,he=re/2,Sl=re/4,Be=re*2,Ne=180/re,de=re/180,ue=Math.abs,Sr=Math.atan,Ht=Math.atan2,ne=Math.cos,j0=Math.exp,Oo=Math.log,Mf=Math.pow,J=Math.sin,We=Math.sign||function(e){return e>0?1:e<0?-1:0},Pe=Math.sqrt,Cs=Math.tan;function z0(e){return e>1?0:e<-1?re:Math.acos(e)}function Ze(e){return e>1?he:e<-1?-he:Math.asin(e)}function Xe(){}function Po(e,t){e&&$l.hasOwnProperty(e.type)&&$l[e.type](e,t)}var Ml={Feature:function(e,t){Po(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Po(n[r].geometry,t)}},$l={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){ku(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)ku(n[r],t,0)},Polygon:function(e,t){El(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)El(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Po(n[r],t)}};function ku(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function El(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)ku(e[n],t,1);t.polygonEnd()}function Sn(e,t){e&&Ml.hasOwnProperty(e.type)?Ml[e.type](e,t):Po(e,t)}function Nu(e){return[Ht(e[1],e[0]),Ze(e[2])]}function cr(e){var t=e[0],n=e[1],r=ne(n);return[r*ne(t),r*J(t),J(n)]}function Vi(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Fo(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function $f(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Ki(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Lu(e){var t=Pe(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Iu(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function Du(e,t){return ue(e)>re&&(e-=Math.round(e/Be)*Be),[e,t]}Du.invert=Du;function B0(e,t,n){return(e%=Be)?t||n?Iu(Cl(e),kl(t,n)):Cl(e):t||n?kl(t,n):Du}function Al(e){return function(t,n){return t+=e,ue(t)>re&&(t-=Math.round(t/Be)*Be),[t,n]}}function Cl(e){var t=Al(e);return t.invert=Al(-e),t}function kl(e,t){var n=ne(e),r=J(e),i=ne(t),o=J(t);function a(f,u){var s=ne(u),c=ne(f)*s,l=J(f)*s,d=J(u),h=d*n+c*r;return[Ht(l*i-h*o,c*n-d*r),Ze(h*i+l*o)]}return a.invert=function(f,u){var s=ne(u),c=ne(f)*s,l=J(f)*s,d=J(u),h=d*i-l*o;return[Ht(l*i+d*o,c*n+h*r),Ze(h*n-c*r)]},a}function W6(e){e=B0(e[0]*de,e[1]*de,e.length>2?e[2]*de:0);function t(n){return n=e(n[0]*de,n[1]*de),n[0]*=Ne,n[1]*=Ne,n}return t.invert=function(n){return n=e.invert(n[0]*de,n[1]*de),n[0]*=Ne,n[1]*=Ne,n},t}function X6(e,t,n,r,i,o){if(n){var a=ne(t),f=J(t),u=r*n;i==null?(i=t+r*Be,o=t-u/2):(i=Nl(a,i),o=Nl(a,o),(r>0?i<o:i>o)&&(i+=r*Be));for(var s,c=i;r>0?c>o:c<o;c-=u)s=Nu([a,-f*ne(c),-f*J(c)]),e.point(s[0],s[1])}}function Nl(e,t){t=cr(t),t[0]-=e,Lu(t);var n=z0(-t[1]);return((-t[2]<0?-n:n)+Be-te)%Be}function U0(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Xe,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function wo(e,t){return ue(e[0]-t[0])<te&&ue(e[1]-t[1])<te}function Zi(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function H0(e,t,n,r,i){var o=[],a=[],f,u;if(e.forEach(function(p){if(!((g=p.length-1)<=0)){var g,m=p[0],y=p[g],b;if(wo(m,y)){if(!m[2]&&!y[2]){for(i.lineStart(),f=0;f<g;++f)i.point((m=p[f])[0],m[1]);i.lineEnd();return}y[0]+=2*te}o.push(b=new Zi(m,p,null,!0)),a.push(b.o=new Zi(m,null,b,!1)),o.push(b=new Zi(y,p,null,!1)),a.push(b.o=new Zi(y,null,b,!0))}}),!!o.length){for(a.sort(t),Ll(o),Ll(a),f=0,u=a.length;f<u;++f)a[f].e=n=!n;for(var s=o[0],c,l;;){for(var d=s,h=!0;d.v;)if((d=d.n)===s)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(f=0,u=c.length;f<u;++f)i.point((l=c[f])[0],l[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,f=c.length-1;f>=0;--f)i.point((l=c[f])[0],l[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function Ll(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function Ef(e){return ue(e[0])<=re?e[0]:We(e[0])*((ue(e[0])+re)%Be-re)}function V6(e,t){var n=Ef(t),r=t[1],i=J(r),o=[J(n),-ne(n),0],a=0,f=0,u=new Cn;i===1?r=he+te:i===-1&&(r=-he-te);for(var s=0,c=e.length;s<c;++s)if(d=(l=e[s]).length)for(var l,d,h=l[d-1],p=Ef(h),g=h[1]/2+Sl,m=J(g),y=ne(g),b=0;b<d;++b,p=v,m=_,y=E,h=w){var w=l[b],v=Ef(w),T=w[1]/2+Sl,_=J(T),E=ne(T),C=v-p,k=C>=0?1:-1,R=k*C,$=R>re,S=m*_;if(u.add(Ht(S*k*J(R),y*E+S*ne(R))),a+=$?C+k*Be:C,$^p>=n^v>=n){var x=Fo(cr(h),cr(w));Lu(x);var A=Fo(o,x);Lu(A);var M=($^C>=0?-1:1)*Ze(A[2]);(r>M||r===M&&(x[0]||x[1]))&&(f+=$^C>=0?1:-1)}}return(a<-te||a<te&&u<-q0)^f&1}function Y0(e,t,n,r){return function(i){var o=t(i),a=U0(),f=t(a),u=!1,s,c,l,d={point:h,lineStart:g,lineEnd:m,polygonStart:function(){d.point=y,d.lineStart=b,d.lineEnd=w,c=[],s=[]},polygonEnd:function(){d.point=h,d.lineStart=g,d.lineEnd=m,c=Jh(c);var v=V6(s,r);c.length?(u||(i.polygonStart(),u=!0),H0(c,Z6,v,n,i)):v&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=s=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(v,T){e(v,T)&&i.point(v,T)}function p(v,T){o.point(v,T)}function g(){d.point=p,o.lineStart()}function m(){d.point=h,o.lineEnd()}function y(v,T){l.push([v,T]),f.point(v,T)}function b(){f.lineStart(),l=[]}function w(){y(l[0][0],l[0][1]),f.lineEnd();var v=f.clean(),T=a.result(),_,E=T.length,C,k,R;if(l.pop(),s.push(l),l=null,!!E){if(v&1){if(k=T[0],(C=k.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),_=0;_<C;++_)i.point((R=k[_])[0],R[1]);i.lineEnd()}return}E>1&&v&2&&T.push(T.pop().concat(T.shift())),c.push(T.filter(K6))}}return d}}function K6(e){return e.length>1}function Z6(e,t){return((e=e.x)[0]<0?e[1]-he-te:he-e[1])-((t=t.x)[0]<0?t[1]-he-te:he-t[1])}const Il=Y0(function(){return!0},Q6,e3,[-re,-he]);function Q6(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,a){var f=o>0?re:-re,u=ue(o-t);ue(u-re)<te?(e.point(t,n=(n+a)/2>0?he:-he),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(f,n),e.point(o,n),i=0):r!==f&&u>=re&&(ue(t-r)<te&&(t-=r*te),ue(o-f)<te&&(o-=f*te),n=J6(t,n,o,a),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(f,n),i=0),e.point(t=o,n=a),r=f},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function J6(e,t,n,r){var i,o,a=J(e-n);return ue(a)>te?Sr((J(t)*(o=ne(r))*J(n)-J(r)*(i=ne(t))*J(e))/(i*o*a)):(t+r)/2}function e3(e,t,n,r){var i;if(e==null)i=n*he,r.point(-re,i),r.point(0,i),r.point(re,i),r.point(re,0),r.point(re,-i),r.point(0,-i),r.point(-re,-i),r.point(-re,0),r.point(-re,i);else if(ue(e[0]-t[0])>te){var o=e[0]<t[0]?re:-re;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function t3(e){var t=ne(e),n=2*de,r=t>0,i=ue(t)>te;function o(c,l,d,h){X6(h,e,n,d,c,l)}function a(c,l){return ne(c)*ne(l)>t}function f(c){var l,d,h,p,g;return{lineStart:function(){p=h=!1,g=1},point:function(m,y){var b=[m,y],w,v=a(m,y),T=r?v?0:s(m,y):v?s(m+(m<0?re:-re),y):0;if(!l&&(p=h=v)&&c.lineStart(),v!==h&&(w=u(l,b),(!w||wo(l,w)||wo(b,w))&&(b[2]=1)),v!==h)g=0,v?(c.lineStart(),w=u(b,l),c.point(w[0],w[1])):(w=u(l,b),c.point(w[0],w[1],2),c.lineEnd()),l=w;else if(i&&l&&r^v){var _;!(T&d)&&(_=u(b,l,!0))&&(g=0,r?(c.lineStart(),c.point(_[0][0],_[0][1]),c.point(_[1][0],_[1][1]),c.lineEnd()):(c.point(_[1][0],_[1][1]),c.lineEnd(),c.lineStart(),c.point(_[0][0],_[0][1],3)))}v&&(!l||!wo(l,b))&&c.point(b[0],b[1]),l=b,h=v,d=T},lineEnd:function(){h&&c.lineEnd(),l=null},clean:function(){return g|(p&&h)<<1}}}function u(c,l,d){var h=cr(c),p=cr(l),g=[1,0,0],m=Fo(h,p),y=Vi(m,m),b=m[0],w=y-b*b;if(!w)return!d&&c;var v=t*y/w,T=-t*b/w,_=Fo(g,m),E=Ki(g,v),C=Ki(m,T);$f(E,C);var k=_,R=Vi(E,k),$=Vi(k,k),S=R*R-$*(Vi(E,E)-1);if(!(S<0)){var x=Pe(S),A=Ki(k,(-R-x)/$);if($f(A,E),A=Nu(A),!d)return A;var M=c[0],N=l[0],L=c[1],z=l[1],H;N<M&&(H=M,M=N,N=H);var O=N-M,q=ue(O-re)<te,P=q||O<te;if(!q&&z<L&&(H=L,L=z,z=H),P?q?L+z>0^A[1]<(ue(A[0]-M)<te?L:z):L<=A[1]&&A[1]<=z:O>re^(M<=A[0]&&A[0]<=N)){var F=Ki(k,(-R+x)/$);return $f(F,E),[A,Nu(F)]}}}function s(c,l){var d=r?e:re-e,h=0;return c<-d?h|=1:c>d&&(h|=2),l<-d?h|=4:l>d&&(h|=8),h}return Y0(a,f,o,r?[0,-e]:[-re,e-re])}function n3(e,t,n,r,i,o){var a=e[0],f=e[1],u=t[0],s=t[1],c=0,l=1,d=u-a,h=s-f,p;if(p=n-a,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<l&&(l=p)}else if(d>0){if(p>l)return;p>c&&(c=p)}if(p=i-a,!(!d&&p<0)){if(p/=d,d<0){if(p>l)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<l&&(l=p)}if(p=r-f,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<l&&(l=p)}else if(h>0){if(p>l)return;p>c&&(c=p)}if(p=o-f,!(!h&&p<0)){if(p/=h,h<0){if(p>l)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<l&&(l=p)}return c>0&&(e[0]=a+c*d,e[1]=f+c*h),l<1&&(t[0]=a+l*d,t[1]=f+l*h),!0}}}}}var Br=1e9,Qi=-Br;function G0(e,t,n,r){function i(s,c){return e<=s&&s<=n&&t<=c&&c<=r}function o(s,c,l,d){var h=0,p=0;if(s==null||(h=a(s,l))!==(p=a(c,l))||u(s,c)<0^l>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+l+4)%4)!==p);else d.point(c[0],c[1])}function a(s,c){return ue(s[0]-e)<te?c>0?0:3:ue(s[0]-n)<te?c>0?2:1:ue(s[1]-t)<te?c>0?1:0:c>0?3:2}function f(s,c){return u(s.x,c.x)}function u(s,c){var l=a(s,1),d=a(c,1);return l!==d?l-d:l===0?c[1]-s[1]:l===1?s[0]-c[0]:l===2?s[1]-c[1]:c[0]-s[0]}return function(s){var c=s,l=U0(),d,h,p,g,m,y,b,w,v,T,_,E={point:C,lineStart:S,lineEnd:x,polygonStart:R,polygonEnd:$};function C(M,N){i(M,N)&&c.point(M,N)}function k(){for(var M=0,N=0,L=h.length;N<L;++N)for(var z=h[N],H=1,O=z.length,q=z[0],P,F,K=q[0],Z=q[1];H<O;++H)P=K,F=Z,q=z[H],K=q[0],Z=q[1],F<=r?Z>r&&(K-P)*(r-F)>(Z-F)*(e-P)&&++M:Z<=r&&(K-P)*(r-F)<(Z-F)*(e-P)&&--M;return M}function R(){c=l,d=[],h=[],_=!0}function $(){var M=k(),N=_&&M,L=(d=Jh(d)).length;(N||L)&&(s.polygonStart(),N&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),L&&H0(d,f,M,o,s),s.polygonEnd()),c=s,d=h=p=null}function S(){E.point=A,h&&h.push(p=[]),T=!0,v=!1,b=w=NaN}function x(){d&&(A(g,m),y&&v&&l.rejoin(),d.push(l.result())),E.point=C,v&&c.lineEnd()}function A(M,N){var L=i(M,N);if(h&&p.push([M,N]),T)g=M,m=N,y=L,T=!1,L&&(c.lineStart(),c.point(M,N));else if(L&&v)c.point(M,N);else{var z=[b=Math.max(Qi,Math.min(Br,b)),w=Math.max(Qi,Math.min(Br,w))],H=[M=Math.max(Qi,Math.min(Br,M)),N=Math.max(Qi,Math.min(Br,N))];n3(z,H,e,t,n,r)?(v||(c.lineStart(),c.point(z[0],z[1])),c.point(H[0],H[1]),L||c.lineEnd(),_=!1):L&&(c.lineStart(),c.point(M,N),_=!1)}b=M,w=N,v=L}return E}}const Ru=e=>e;var Af=new Cn,Ou=new Cn,W0,X0,Pu,Fu,Ot={point:Xe,lineStart:Xe,lineEnd:Xe,polygonStart:function(){Ot.lineStart=r3,Ot.lineEnd=o3},polygonEnd:function(){Ot.lineStart=Ot.lineEnd=Ot.point=Xe,Af.add(ue(Ou)),Ou=new Cn},result:function(){var e=Af/2;return Af=new Cn,e}};function r3(){Ot.point=i3}function i3(e,t){Ot.point=V0,W0=Pu=e,X0=Fu=t}function V0(e,t){Ou.add(Fu*e-Pu*t),Pu=e,Fu=t}function o3(){V0(W0,X0)}var lr=1/0,qo=lr,ui=-lr,jo=ui,zo={point:a3,lineStart:Xe,lineEnd:Xe,polygonStart:Xe,polygonEnd:Xe,result:function(){var e=[[lr,qo],[ui,jo]];return ui=jo=-(qo=lr=1/0),e}};function a3(e,t){e<lr&&(lr=e),e>ui&&(ui=e),t<qo&&(qo=t),t>jo&&(jo=t)}var qu=0,ju=0,Ur=0,Bo=0,Uo=0,Kn=0,zu=0,Bu=0,Hr=0,K0,Z0,gt,bt,Ye={point:Rn,lineStart:Dl,lineEnd:Rl,polygonStart:function(){Ye.lineStart=s3,Ye.lineEnd=c3},polygonEnd:function(){Ye.point=Rn,Ye.lineStart=Dl,Ye.lineEnd=Rl},result:function(){var e=Hr?[zu/Hr,Bu/Hr]:Kn?[Bo/Kn,Uo/Kn]:Ur?[qu/Ur,ju/Ur]:[NaN,NaN];return qu=ju=Ur=Bo=Uo=Kn=zu=Bu=Hr=0,e}};function Rn(e,t){qu+=e,ju+=t,++Ur}function Dl(){Ye.point=f3}function f3(e,t){Ye.point=u3,Rn(gt=e,bt=t)}function u3(e,t){var n=e-gt,r=t-bt,i=Pe(n*n+r*r);Bo+=i*(gt+e)/2,Uo+=i*(bt+t)/2,Kn+=i,Rn(gt=e,bt=t)}function Rl(){Ye.point=Rn}function s3(){Ye.point=l3}function c3(){Q0(K0,Z0)}function l3(e,t){Ye.point=Q0,Rn(K0=gt=e,Z0=bt=t)}function Q0(e,t){var n=e-gt,r=t-bt,i=Pe(n*n+r*r);Bo+=i*(gt+e)/2,Uo+=i*(bt+t)/2,Kn+=i,i=bt*e-gt*t,zu+=i*(gt+e),Bu+=i*(bt+t),Hr+=i*3,Rn(gt=e,bt=t)}function J0(e){this._context=e}J0.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Be);break}}},result:Xe};var Uu=new Cn,Cf,ep,tp,Yr,Gr,si={point:Xe,lineStart:function(){si.point=d3},lineEnd:function(){Cf&&np(ep,tp),si.point=Xe},polygonStart:function(){Cf=!0},polygonEnd:function(){Cf=null},result:function(){var e=+Uu;return Uu=new Cn,e}};function d3(e,t){si.point=np,ep=Yr=e,tp=Gr=t}function np(e,t){Yr-=e,Gr-=t,Uu.add(Pe(Yr*Yr+Gr*Gr)),Yr=e,Gr=t}let Ol,Ho,Pl,Fl;class ql{constructor(t){this._append=t==null?rp:h3(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Pl||this._append!==Ho){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Pl=r,Ho=this._append,Fl=this._,this._=i}this._+=Fl;break}}}result(){const t=this._;return this._="",t.length?t:null}}function rp(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function h3(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return rp;if(t!==Ol){const n=10**t;Ol=t,Ho=function(i){let o=1;this._+=i[0];for(const a=i.length;o<a;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return Ho}function Ma(e,t){let n=3,r=4.5,i,o;function a(f){return f&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),Sn(f,i(o))),o.result()}return a.area=function(f){return Sn(f,i(Ot)),Ot.result()},a.measure=function(f){return Sn(f,i(si)),si.result()},a.bounds=function(f){return Sn(f,i(zo)),zo.result()},a.centroid=function(f){return Sn(f,i(Ye)),Ye.result()},a.projection=function(f){return arguments.length?(i=f==null?(e=null,Ru):(e=f).stream,a):e},a.context=function(f){return arguments.length?(o=f==null?(t=null,new ql(n)):new J0(t=f),typeof r!="function"&&o.pointRadius(r),a):t},a.pointRadius=function(f){return arguments.length?(r=typeof f=="function"?f:(o.pointRadius(+f),+f),a):r},a.digits=function(f){if(!arguments.length)return n;if(f==null)n=null;else{const u=Math.floor(f);if(!(u>=0))throw new RangeError(`invalid digits: ${f}`);n=u}return t===null&&(o=new ql(n)),a},a.projection(e).digits(n).context(t)}function Hu(e){return{stream:$a(e)}}function $a(e){return function(t){var n=new Yu;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Yu(){}Yu.prototype={constructor:Yu,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function ks(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Sn(n,e.stream(zo)),t(zo.result()),r!=null&&e.clipExtent(r),e}function Ns(e,t,n){return ks(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],a=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),f=+t[0][0]+(i-a*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(o-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([f,u])},n)}function ip(e,t,n){return Ns(e,[[0,0],t],n)}function op(e,t,n){return ks(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),a=(i-o*(r[1][0]+r[0][0]))/2,f=-o*r[0][1];e.scale(150*o).translate([a,f])},n)}function ap(e,t,n){return ks(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),a=-o*r[0][0],f=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,f])},n)}var jl=16,p3=ne(30*de);function zl(e,t){return+t?g3(e,t):m3(e)}function m3(e){return $a({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function g3(e,t){function n(r,i,o,a,f,u,s,c,l,d,h,p,g,m){var y=s-r,b=c-i,w=y*y+b*b;if(w>4*t&&g--){var v=a+d,T=f+h,_=u+p,E=Pe(v*v+T*T+_*_),C=Ze(_/=E),k=ue(ue(_)-1)<te||ue(o-l)<te?(o+l)/2:Ht(T,v),R=e(k,C),$=R[0],S=R[1],x=$-r,A=S-i,M=b*x-y*A;(M*M/w>t||ue((y*x+b*A)/w-.5)>.3||a*d+f*h+u*p<p3)&&(n(r,i,o,a,f,u,$,S,k,v/=E,T/=E,_,g,m),m.point($,S),n($,S,k,v,T,_,s,c,l,d,h,p,g,m))}}return function(r){var i,o,a,f,u,s,c,l,d,h,p,g,m={point:y,lineStart:b,lineEnd:v,polygonStart:function(){r.polygonStart(),m.lineStart=T},polygonEnd:function(){r.polygonEnd(),m.lineStart=b}};function y(C,k){C=e(C,k),r.point(C[0],C[1])}function b(){l=NaN,m.point=w,r.lineStart()}function w(C,k){var R=cr([C,k]),$=e(C,k);n(l,d,c,h,p,g,l=$[0],d=$[1],c=C,h=R[0],p=R[1],g=R[2],jl,r),r.point(l,d)}function v(){m.point=y,r.lineEnd()}function T(){b(),m.point=_,m.lineEnd=E}function _(C,k){w(i=C,k),o=l,a=d,f=h,u=p,s=g,m.point=w}function E(){n(l,d,c,h,p,g,o,a,i,f,u,s,jl,r),m.lineEnd=v,v()}return m}}var b3=$a({point:function(e,t){this.stream.point(e*de,t*de)}});function y3(e){return $a({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function v3(e,t,n,r,i){function o(a,f){return a*=r,f*=i,[t+e*a,n-e*f]}return o.invert=function(a,f){return[(a-t)/e*r,(n-f)/e*i]},o}function Bl(e,t,n,r,i,o){if(!o)return v3(e,t,n,r,i);var a=ne(o),f=J(o),u=a*e,s=f*e,c=a/e,l=f/e,d=(f*n-a*t)/e,h=(f*t+a*n)/e;function p(g,m){return g*=r,m*=i,[u*g-s*m+t,n-s*g-u*m]}return p.invert=function(g,m){return[r*(c*g-l*m+d),i*(h-l*g-c*m)]},p}function hn(e){return fp(function(){return e})()}function fp(e){var t,n=150,r=480,i=250,o=0,a=0,f=0,u=0,s=0,c,l=0,d=1,h=1,p=null,g=Il,m=null,y,b,w,v=Ru,T=.5,_,E,C,k,R;function $(M){return C(M[0]*de,M[1]*de)}function S(M){return M=C.invert(M[0],M[1]),M&&[M[0]*Ne,M[1]*Ne]}$.stream=function(M){return k&&R===M?k:k=b3(y3(c)(g(_(v(R=M)))))},$.preclip=function(M){return arguments.length?(g=M,p=void 0,A()):g},$.postclip=function(M){return arguments.length?(v=M,m=y=b=w=null,A()):v},$.clipAngle=function(M){return arguments.length?(g=+M?t3(p=M*de):(p=null,Il),A()):p*Ne},$.clipExtent=function(M){return arguments.length?(v=M==null?(m=y=b=w=null,Ru):G0(m=+M[0][0],y=+M[0][1],b=+M[1][0],w=+M[1][1]),A()):m==null?null:[[m,y],[b,w]]},$.scale=function(M){return arguments.length?(n=+M,x()):n},$.translate=function(M){return arguments.length?(r=+M[0],i=+M[1],x()):[r,i]},$.center=function(M){return arguments.length?(o=M[0]%360*de,a=M[1]%360*de,x()):[o*Ne,a*Ne]},$.rotate=function(M){return arguments.length?(f=M[0]%360*de,u=M[1]%360*de,s=M.length>2?M[2]%360*de:0,x()):[f*Ne,u*Ne,s*Ne]},$.angle=function(M){return arguments.length?(l=M%360*de,x()):l*Ne},$.reflectX=function(M){return arguments.length?(d=M?-1:1,x()):d<0},$.reflectY=function(M){return arguments.length?(h=M?-1:1,x()):h<0},$.precision=function(M){return arguments.length?(_=zl(E,T=M*M),A()):Pe(T)},$.fitExtent=function(M,N){return Ns($,M,N)},$.fitSize=function(M,N){return ip($,M,N)},$.fitWidth=function(M,N){return op($,M,N)},$.fitHeight=function(M,N){return ap($,M,N)};function x(){var M=Bl(n,0,0,d,h,l).apply(null,t(o,a)),N=Bl(n,r-M[0],i-M[1],d,h,l);return c=B0(f,u,s),E=Iu(t,N),C=Iu(c,E),_=zl(E,T),A()}function A(){return k=R=null,$}return function(){return t=e.apply(this,arguments),$.invert=t.invert&&S,x()}}function Ls(e){var t=0,n=re/3,r=fp(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*de,n=o[1]*de):[t*Ne,n*Ne]},i}function w3(e){var t=ne(e);function n(r,i){return[r*t,J(i)/t]}return n.invert=function(r,i){return[r/t,Ze(i*t)]},n}function _3(e,t){var n=J(e),r=(n+J(t))/2;if(ue(r)<te)return w3(e);var i=1+n*(2*r-n),o=Pe(i)/r;function a(f,u){var s=Pe(i-2*r*J(u))/r;return[s*J(f*=r),o-s*ne(f)]}return a.invert=function(f,u){var s=o-u,c=Ht(f,ue(s))*We(s);return s*r<0&&(c-=re*We(f)*We(s)),[c/r,Ze((i-(f*f+s*s)*r*r)/(2*r))]},a}function Yo(){return Ls(_3).scale(155.424).center([0,33.6442])}function up(){return Yo().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function x3(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function T3(){var e,t,n=up(),r,i=Yo().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=Yo().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f,u,s={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(o.point(h,p),u)||(f.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),g=(d[0]-p[0])/h,m=(d[1]-p[1])/h;return(m>=.12&&m<.234&&g>=-.425&&g<-.214?i:m>=.166&&m<.234&&g>=-.214&&g<-.115?a:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=x3([n.stream(t=d),i.stream(d),a.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),a.precision(d),l()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),a.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],g=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,g-.238*h],[p+.455*h,g+.238*h]]).stream(s),o=i.translate([p-.307*h,g+.201*h]).clipExtent([[p-.425*h+te,g+.12*h+te],[p-.214*h-te,g+.234*h-te]]).stream(s),f=a.translate([p-.205*h,g+.212*h]).clipExtent([[p-.214*h+te,g+.166*h+te],[p-.115*h-te,g+.234*h-te]]).stream(s),l()},c.fitExtent=function(d,h){return Ns(c,d,h)},c.fitSize=function(d,h){return ip(c,d,h)},c.fitWidth=function(d,h){return op(c,d,h)},c.fitHeight=function(d,h){return ap(c,d,h)};function l(){return e=t=null,c}return c.scale(1070)}function sp(e){return function(t,n){var r=ne(t),i=ne(n),o=e(r*i);return o===1/0?[2,0]:[o*i*J(t),o*J(n)]}}function Ti(e){return function(t,n){var r=Pe(t*t+n*n),i=e(r),o=J(i),a=ne(i);return[Ht(t*o,r*a),Ze(r&&n*o/r)]}}var cp=sp(function(e){return Pe(2/(1+e))});cp.invert=Ti(function(e){return 2*Ze(e/2)});function S3(){return hn(cp).scale(124.75).clipAngle(180-.001)}var lp=sp(function(e){return(e=z0(e))&&e/J(e)});lp.invert=Ti(function(e){return e});function M3(){return hn(lp).scale(79.4188).clipAngle(180-.001)}function Ea(e,t){return[e,Oo(Cs((he+t)/2))]}Ea.invert=function(e,t){return[e,2*Sr(j0(t))-he]};function $3(){return dp(Ea).scale(961/Be)}function dp(e){var t=hn(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,a=null,f,u,s;t.scale=function(l){return arguments.length?(r(l),c()):r()},t.translate=function(l){return arguments.length?(i(l),c()):i()},t.center=function(l){return arguments.length?(n(l),c()):n()},t.clipExtent=function(l){return arguments.length?(l==null?a=f=u=s=null:(a=+l[0][0],f=+l[0][1],u=+l[1][0],s=+l[1][1]),c()):a==null?null:[[a,f],[u,s]]};function c(){var l=re*r(),d=t(W6(t.rotate()).invert([0,0]));return o(a==null?[[d[0]-l,d[1]-l],[d[0]+l,d[1]+l]]:e===Ea?[[Math.max(d[0]-l,a),f],[Math.min(d[0]+l,u),s]]:[[a,Math.max(d[1]-l,f)],[u,Math.min(d[1]+l,s)]])}return c()}function Ji(e){return Cs((he+e)/2)}function E3(e,t){var n=ne(e),r=e===t?J(e):Oo(n/ne(t))/Oo(Ji(t)/Ji(e)),i=n*Mf(Ji(e),r)/r;if(!r)return Ea;function o(a,f){i>0?f<-he+te&&(f=-he+te):f>he-te&&(f=he-te);var u=i/Mf(Ji(f),r);return[u*J(r*a),i-u*ne(r*a)]}return o.invert=function(a,f){var u=i-f,s=We(r)*Pe(a*a+u*u),c=Ht(a,ue(u))*We(u);return u*r<0&&(c-=re*We(a)*We(u)),[c/r,2*Sr(Mf(i/s,1/r))-he]},o}function A3(){return Ls(E3).scale(109.5).parallels([30,30])}function Go(e,t){return[e,t]}Go.invert=Go;function C3(){return hn(Go).scale(152.63)}function k3(e,t){var n=ne(e),r=e===t?J(e):(n-ne(t))/(t-e),i=n/r+e;if(ue(r)<te)return Go;function o(a,f){var u=i-f,s=r*a;return[u*J(s),i-u*ne(s)]}return o.invert=function(a,f){var u=i-f,s=Ht(a,ue(u))*We(u);return u*r<0&&(s-=re*We(a)*We(u)),[s/r,i-We(r)*Pe(a*a+u*u)]},o}function N3(){return Ls(k3).scale(131.154).center([0,13.9389])}var Zr=1.340264,Qr=-.081106,Jr=893e-6,ei=.003796,Wo=Pe(3)/2,L3=12;function hp(e,t){var n=Ze(Wo*J(t)),r=n*n,i=r*r*r;return[e*ne(n)/(Wo*(Zr+3*Qr*r+i*(7*Jr+9*ei*r))),n*(Zr+Qr*r+i*(Jr+ei*r))]}hp.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,a,f,u;o<L3&&(f=n*(Zr+Qr*r+i*(Jr+ei*r))-t,u=Zr+3*Qr*r+i*(7*Jr+9*ei*r),n-=a=f/u,r=n*n,i=r*r*r,!(ue(a)<q0));++o);return[Wo*e*(Zr+3*Qr*r+i*(7*Jr+9*ei*r))/ne(n),Ze(J(n)/Wo)]};function I3(){return hn(hp).scale(177.158)}function pp(e,t){var n=ne(t),r=ne(e)*n;return[n*J(e)/r,J(t)/r]}pp.invert=Ti(Sr);function D3(){return hn(pp).scale(144.049).clipAngle(60)}function mp(e,t){return[ne(t)*J(e),J(t)]}mp.invert=Ti(Ze);function R3(){return hn(mp).scale(249.5).clipAngle(90+te)}function gp(e,t){var n=ne(t),r=1+ne(e)*n;return[n*J(e)/r,J(t)/r]}gp.invert=Ti(function(e){return 2*Sr(e)});function O3(){return hn(gp).scale(250).clipAngle(142)}function bp(e,t){return[Oo(Cs((he+t)/2)),-e]}bp.invert=function(e,t){return[-t,2*Sr(j0(e))-he]};function P3(){var e=dp(bp),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function Et(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Aa(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Gu=Symbol("implicit");function Is(){var e=new kn,t=[],n=[],r=Gu;function i(o){let a=e.get(o);if(a===void 0){if(r!==Gu)return r;e.set(o,a=t.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new kn;for(const a of o)e.has(a)||e.set(a,t.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Is(t,n).unknown(r)},Et.apply(i,arguments),i}function Ca(){var e=Is().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,o,a,f=!1,u=0,s=0,c=.5;delete e.unknown;function l(){var d=t().length,h=i<r,p=h?i:r,g=h?r:i;o=(g-p)/Math.max(1,d-u+s*2),f&&(o=Math.floor(o)),p+=(g-p-o*(d-u))*c,a=o*(1-u),f&&(p=Math.round(p),a=Math.round(a));var m=bu(d).map(function(y){return p+o*y});return n(h?m.reverse():m)}return e.domain=function(d){return arguments.length?(t(d),l()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,l()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,f=!0,l()},e.bandwidth=function(){return a},e.step=function(){return o},e.round=function(d){return arguments.length?(f=!!d,l()):f},e.padding=function(d){return arguments.length?(u=Math.min(1,s=+d),l()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),l()):u},e.paddingOuter=function(d){return arguments.length?(s=+d,l()):s},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),l()):c},e.copy=function(){return Ca(t(),[r,i]).round(f).paddingInner(u).paddingOuter(s).align(c)},Et.apply(l(),arguments)}function yp(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return yp(t())},e}function F3(){return yp(Ca.apply(null,arguments).paddingInner(1))}function q3(e){return function(){return e}}function Wu(e){return+e}var Ul=[0,1];function Ve(e){return e}function Xu(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:q3(isNaN(t)?NaN:.5)}function j3(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function z3(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=Xu(i,r),o=n(a,o)):(r=Xu(r,i),o=n(o,a)),function(f){return o(r(f))}}function B3(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=Xu(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(f){var u=ma(e,f,1,r)-1;return o[u](i[u](f))}}function Si(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function ka(){var e=Ul,t=Ul,n=xi,r,i,o,a=Ve,f,u,s;function c(){var d=Math.min(e.length,t.length);return a!==Ve&&(a=j3(e[0],e[d-1])),f=d>2?B3:z3,u=s=null,l}function l(d){return d==null||isNaN(d=+d)?o:(u||(u=f(e.map(r),t,n)))(r(a(d)))}return l.invert=function(d){return a(i((s||(s=f(t,e.map(r),$e)))(d)))},l.domain=function(d){return arguments.length?(e=Array.from(d,Wu),c()):e.slice()},l.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},l.rangeRound=function(d){return t=Array.from(d),n=Ts,c()},l.clamp=function(d){return arguments.length?(a=d?!0:Ve,c()):a!==Ve},l.interpolate=function(d){return arguments.length?(n=d,c()):n},l.unknown=function(d){return arguments.length?(o=d,l):o},function(d,h){return r=d,i=h,c()}}function vp(){return ka()(Ve,Ve)}function U3(e,t,n,r){var i=mu(e,t,n),o;switch(r=fi(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=Y6(i,a))&&(r.precision=o),F0(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=G6(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=H6(i))&&(r.precision=o-(r.type==="%")*2);break}}return Tr(r)}function Mi(e){var t=e.domain;return e.ticks=function(n){var r=t();return ri(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return U3(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,a=r[i],f=r[o],u,s,c=10;for(f<a&&(s=a,a=f,f=s,s=i,i=o,o=s);c-- >0;){if(s=Eo(a,f,n),s===u)return r[i]=a,r[o]=f,t(r);if(s>0)a=Math.floor(a/s)*s,f=Math.ceil(f/s)*s;else if(s<0)a=Math.ceil(a*s)/s,f=Math.floor(f*s)/s;else break;u=s}return e},e}function Ds(){var e=vp();return e.copy=function(){return Si(e,Ds())},Et.apply(e,arguments),Mi(e)}function wp(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Wu),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return wp(e).unknown(t)},e=arguments.length?Array.from(e,Wu):[0,1],Mi(n)}function _p(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),e[n]=t.floor(i),e[r]=t.ceil(o),e}function Hl(e){return Math.log(e)}function Yl(e){return Math.exp(e)}function H3(e){return-Math.log(-e)}function Y3(e){return-Math.exp(-e)}function G3(e){return isFinite(e)?+("1e"+e):e<0?0:e}function W3(e){return e===10?G3:e===Math.E?Math.exp:t=>Math.pow(e,t)}function X3(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Gl(e){return(t,n)=>-e(-t,n)}function xp(e){const t=e(Hl,Yl),n=t.domain;let r=10,i,o;function a(){return i=X3(r),o=W3(r),n()[0]<0?(i=Gl(i),o=Gl(o),e(H3,Y3)):e(Hl,Yl),t}return t.base=function(f){return arguments.length?(r=+f,a()):r},t.domain=function(f){return arguments.length?(n(f),a()):n()},t.ticks=f=>{const u=n();let s=u[0],c=u[u.length-1];const l=c<s;l&&([s,c]=[c,s]);let d=i(s),h=i(c),p,g;const m=f==null?10:+f;let y=[];if(!(r%1)&&h-d<m){if(d=Math.floor(d),h=Math.ceil(h),s>0){for(;d<=h;++d)for(p=1;p<r;++p)if(g=d<0?p/o(-d):p*o(d),!(g<s)){if(g>c)break;y.push(g)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(g=d>0?p/o(-d):p*o(d),!(g<s)){if(g>c)break;y.push(g)}y.length*2<m&&(y=ri(s,c,m))}else y=ri(d,h,Math.min(h-d,m)).map(o);return l?y.reverse():y},t.tickFormat=(f,u)=>{if(f==null&&(f=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=fi(u)).precision==null&&(u.trim=!0),u=Tr(u)),f===1/0)return u;const s=Math.max(1,r*f/t.ticks().length);return c=>{let l=c/o(Math.round(i(c)));return l*r<r-.5&&(l*=r),l<=s?u(c):""}},t.nice=()=>n(_p(n(),{floor:f=>o(Math.floor(i(f))),ceil:f=>o(Math.ceil(i(f)))})),t}function Tp(){const e=xp(ka()).domain([1,10]);return e.copy=()=>Si(e,Tp()).base(e.base()),Et.apply(e,arguments),e}function Wl(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Xl(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Sp(e){var t=1,n=e(Wl(t),Xl(t));return n.constant=function(r){return arguments.length?e(Wl(t=+r),Xl(t)):t},Mi(n)}function Mp(){var e=Sp(ka());return e.copy=function(){return Si(e,Mp()).constant(e.constant())},Et.apply(e,arguments)}function Vl(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function V3(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function K3(e){return e<0?-e*e:e*e}function $p(e){var t=e(Ve,Ve),n=1;function r(){return n===1?e(Ve,Ve):n===.5?e(V3,K3):e(Vl(n),Vl(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Mi(t)}function Ep(){var e=$p(ka());return e.copy=function(){return Si(e,Ep()).exponent(e.exponent())},Et.apply(e,arguments),e}function Ap(){var e=[],t=[],n=[],r;function i(){var a=0,f=Math.max(1,t.length);for(n=new Array(f-1);++a<f;)n[a-1]=U2(e,a/f);return o}function o(a){return a==null||isNaN(a=+a)?r:t[ma(n,a)]}return o.invertExtent=function(a){var f=t.indexOf(a);return f<0?[NaN,NaN]:[f>0?n[f-1]:e[0],f<n.length?n[f]:e[e.length-1]]},o.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let f of a)f!=null&&!isNaN(f=+f)&&e.push(f);return e.sort(Oe),i()},o.range=function(a){return arguments.length?(t=Array.from(a),i()):t.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return Ap().domain(e).range(t).unknown(r)},Et.apply(o,arguments)}function Cp(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[ma(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var a=t.indexOf(o);return[e[a-1],e[a]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return Cp().domain(e).range(t).unknown(n)},Et.apply(i,arguments)}const kf=new Date,Nf=new Date;function ge(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const a=i(o),f=i.ceil(o);return o-a<f-o?a:f},i.offset=(o,a)=>(t(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,f)=>{const u=[];if(o=i.ceil(o),f=f==null?1:Math.floor(f),!(o<a)||!(f>0))return u;let s;do u.push(s=new Date(+o)),t(o,f),e(o);while(s<o&&o<a);return u},i.filter=o=>ge(a=>{if(a>=a)for(;e(a),!o(a);)a.setTime(a-1)},(a,f)=>{if(a>=a)if(f<0)for(;++f<=0;)for(;t(a,-1),!o(a););else for(;--f>=0;)for(;t(a,1),!o(a););}),n&&(i.count=(o,a)=>(kf.setTime(+o),Nf.setTime(+a),e(kf),e(Nf),Math.floor(n(kf,Nf))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const Xo=ge(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Xo.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ge(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Xo);Xo.range;const Ft=1e3,Ke=Ft*60,qt=Ke*60,Yt=qt*24,Rs=Yt*7,Kl=Yt*30,Lf=Yt*365,nt=ge(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ft)},(e,t)=>(t-e)/Ft,e=>e.getUTCSeconds());nt.range;const $i=ge(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ft)},(e,t)=>{e.setTime(+e+t*Ke)},(e,t)=>(t-e)/Ke,e=>e.getMinutes());$i.range;const Ei=ge(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ke)},(e,t)=>(t-e)/Ke,e=>e.getUTCMinutes());Ei.range;const Ai=ge(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ft-e.getMinutes()*Ke)},(e,t)=>{e.setTime(+e+t*qt)},(e,t)=>(t-e)/qt,e=>e.getHours());Ai.range;const Ci=ge(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*qt)},(e,t)=>(t-e)/qt,e=>e.getUTCHours());Ci.range;const qn=ge(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ke)/Yt,e=>e.getDate()-1);qn.range;const Na=ge(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Yt,e=>e.getUTCDate()-1);Na.range;const La=ge(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Yt,e=>Math.floor(e/Yt));La.range;function jn(e){return ge(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Ke)/Rs)}const dr=jn(0),ci=jn(1),kp=jn(2),Np=jn(3),On=jn(4),Lp=jn(5),Ip=jn(6);dr.range;ci.range;kp.range;Np.range;On.range;Lp.range;Ip.range;function zn(e){return ge(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Rs)}const hr=zn(0),li=zn(1),Dp=zn(2),Rp=zn(3),Pn=zn(4),Op=zn(5),Pp=zn(6);hr.range;li.range;Dp.range;Rp.range;Pn.range;Op.range;Pp.range;const ki=ge(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());ki.range;const Ni=ge(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Ni.range;const at=ge(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());at.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ge(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});at.range;const ft=ge(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ft.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ge(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});ft.range;function Fp(e,t,n,r,i,o){const a=[[nt,1,Ft],[nt,5,5*Ft],[nt,15,15*Ft],[nt,30,30*Ft],[o,1,Ke],[o,5,5*Ke],[o,15,15*Ke],[o,30,30*Ke],[i,1,qt],[i,3,3*qt],[i,6,6*qt],[i,12,12*qt],[r,1,Yt],[r,2,2*Yt],[n,1,Rs],[t,1,Kl],[t,3,3*Kl],[e,1,Lf]];function f(s,c,l){const d=c<s;d&&([s,c]=[c,s]);const h=l&&typeof l.range=="function"?l:u(s,c,l),p=h?h.range(s,+c+1):[];return d?p.reverse():p}function u(s,c,l){const d=Math.abs(c-s)/l,h=pa(([,,m])=>m).right(a,d);if(h===a.length)return e.every(mu(s/Lf,c/Lf,l));if(h===0)return Xo.every(Math.max(mu(s,c,l),1));const[p,g]=a[d/a[h-1][2]<a[h][2]/d?h-1:h];return p.every(g)}return[f,u]}const[Z3,qp]=Fp(ft,Ni,hr,La,Ci,Ei),[Q3,J3]=Fp(at,ki,dr,qn,Ai,$i);function If(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Df(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Nr(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function e5(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,f=e.months,u=e.shortMonths,s=Lr(i),c=Ir(i),l=Lr(o),d=Ir(o),h=Lr(a),p=Ir(a),g=Lr(f),m=Ir(f),y=Lr(u),b=Ir(u),w={a:L,A:z,b:H,B:O,c:null,d:nd,e:nd,f:T5,g:I5,G:R5,H:w5,I:_5,j:x5,L:jp,m:S5,M:M5,p:q,q:P,Q:od,s:ad,S:$5,u:E5,U:A5,V:C5,w:k5,W:N5,x:null,X:null,y:L5,Y:D5,Z:O5,"%":id},v={a:F,A:K,b:Z,B:W,c:null,d:rd,e:rd,f:j5,g:K5,G:Q5,H:P5,I:F5,j:q5,L:Bp,m:z5,M:B5,p:Y,q:j,Q:od,s:ad,S:U5,u:H5,U:Y5,V:G5,w:W5,W:X5,x:null,X:null,y:V5,Y:Z5,Z:J5,"%":id},T={a:R,A:$,b:S,B:x,c:A,d:ed,e:ed,f:g5,g:Jl,G:Ql,H:td,I:td,j:d5,L:m5,m:l5,M:h5,p:k,q:c5,Q:y5,s:v5,S:p5,u:o5,U:a5,V:f5,w:i5,W:u5,x:M,X:N,y:Jl,Y:Ql,Z:s5,"%":b5};w.x=_(n,w),w.X=_(r,w),w.c=_(t,w),v.x=_(n,v),v.X=_(r,v),v.c=_(t,v);function _(I,B){return function(G){var D=[],ie=-1,X=0,oe=I.length,ae,ce,lt;for(G instanceof Date||(G=new Date(+G));++ie<oe;)I.charCodeAt(ie)===37&&(D.push(I.slice(X,ie)),(ce=Zl[ae=I.charAt(++ie)])!=null?ae=I.charAt(++ie):ce=ae==="e"?" ":"0",(lt=B[ae])&&(ae=lt(G,ce)),D.push(ae),X=ie+1);return D.push(I.slice(X,ie)),D.join("")}}function E(I,B){return function(G){var D=Nr(1900,void 0,1),ie=C(D,I,G+="",0),X,oe;if(ie!=G.length)return null;if("Q"in D)return new Date(D.Q);if("s"in D)return new Date(D.s*1e3+("L"in D?D.L:0));if(B&&!("Z"in D)&&(D.Z=0),"p"in D&&(D.H=D.H%12+D.p*12),D.m===void 0&&(D.m="q"in D?D.q:0),"V"in D){if(D.V<1||D.V>53)return null;"w"in D||(D.w=1),"Z"in D?(X=Df(Nr(D.y,0,1)),oe=X.getUTCDay(),X=oe>4||oe===0?li.ceil(X):li(X),X=Na.offset(X,(D.V-1)*7),D.y=X.getUTCFullYear(),D.m=X.getUTCMonth(),D.d=X.getUTCDate()+(D.w+6)%7):(X=If(Nr(D.y,0,1)),oe=X.getDay(),X=oe>4||oe===0?ci.ceil(X):ci(X),X=qn.offset(X,(D.V-1)*7),D.y=X.getFullYear(),D.m=X.getMonth(),D.d=X.getDate()+(D.w+6)%7)}else("W"in D||"U"in D)&&("w"in D||(D.w="u"in D?D.u%7:"W"in D?1:0),oe="Z"in D?Df(Nr(D.y,0,1)).getUTCDay():If(Nr(D.y,0,1)).getDay(),D.m=0,D.d="W"in D?(D.w+6)%7+D.W*7-(oe+5)%7:D.w+D.U*7-(oe+6)%7);return"Z"in D?(D.H+=D.Z/100|0,D.M+=D.Z%100,Df(D)):If(D)}}function C(I,B,G,D){for(var ie=0,X=B.length,oe=G.length,ae,ce;ie<X;){if(D>=oe)return-1;if(ae=B.charCodeAt(ie++),ae===37){if(ae=B.charAt(ie++),ce=T[ae in Zl?B.charAt(ie++):ae],!ce||(D=ce(I,G,D))<0)return-1}else if(ae!=G.charCodeAt(D++))return-1}return D}function k(I,B,G){var D=s.exec(B.slice(G));return D?(I.p=c.get(D[0].toLowerCase()),G+D[0].length):-1}function R(I,B,G){var D=h.exec(B.slice(G));return D?(I.w=p.get(D[0].toLowerCase()),G+D[0].length):-1}function $(I,B,G){var D=l.exec(B.slice(G));return D?(I.w=d.get(D[0].toLowerCase()),G+D[0].length):-1}function S(I,B,G){var D=y.exec(B.slice(G));return D?(I.m=b.get(D[0].toLowerCase()),G+D[0].length):-1}function x(I,B,G){var D=g.exec(B.slice(G));return D?(I.m=m.get(D[0].toLowerCase()),G+D[0].length):-1}function A(I,B,G){return C(I,t,B,G)}function M(I,B,G){return C(I,n,B,G)}function N(I,B,G){return C(I,r,B,G)}function L(I){return a[I.getDay()]}function z(I){return o[I.getDay()]}function H(I){return u[I.getMonth()]}function O(I){return f[I.getMonth()]}function q(I){return i[+(I.getHours()>=12)]}function P(I){return 1+~~(I.getMonth()/3)}function F(I){return a[I.getUTCDay()]}function K(I){return o[I.getUTCDay()]}function Z(I){return u[I.getUTCMonth()]}function W(I){return f[I.getUTCMonth()]}function Y(I){return i[+(I.getUTCHours()>=12)]}function j(I){return 1+~~(I.getUTCMonth()/3)}return{format:function(I){var B=_(I+="",w);return B.toString=function(){return I},B},parse:function(I){var B=E(I+="",!1);return B.toString=function(){return I},B},utcFormat:function(I){var B=_(I+="",v);return B.toString=function(){return I},B},utcParse:function(I){var B=E(I+="",!0);return B.toString=function(){return I},B}}}var Zl={"-":"",_:" ",0:"0"},_e=/^\s*\d+/,t5=/^%/,n5=/[\\^$*+?|[\]().{}]/g;function fe(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function r5(e){return e.replace(n5,"\\$&")}function Lr(e){return new RegExp("^(?:"+e.map(r5).join("|")+")","i")}function Ir(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function i5(e,t,n){var r=_e.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function o5(e,t,n){var r=_e.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function a5(e,t,n){var r=_e.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function f5(e,t,n){var r=_e.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function u5(e,t,n){var r=_e.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Ql(e,t,n){var r=_e.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Jl(e,t,n){var r=_e.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function s5(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function c5(e,t,n){var r=_e.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function l5(e,t,n){var r=_e.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function ed(e,t,n){var r=_e.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function d5(e,t,n){var r=_e.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function td(e,t,n){var r=_e.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function h5(e,t,n){var r=_e.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function p5(e,t,n){var r=_e.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function m5(e,t,n){var r=_e.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function g5(e,t,n){var r=_e.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function b5(e,t,n){var r=t5.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function y5(e,t,n){var r=_e.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function v5(e,t,n){var r=_e.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function nd(e,t){return fe(e.getDate(),t,2)}function w5(e,t){return fe(e.getHours(),t,2)}function _5(e,t){return fe(e.getHours()%12||12,t,2)}function x5(e,t){return fe(1+qn.count(at(e),e),t,3)}function jp(e,t){return fe(e.getMilliseconds(),t,3)}function T5(e,t){return jp(e,t)+"000"}function S5(e,t){return fe(e.getMonth()+1,t,2)}function M5(e,t){return fe(e.getMinutes(),t,2)}function $5(e,t){return fe(e.getSeconds(),t,2)}function E5(e){var t=e.getDay();return t===0?7:t}function A5(e,t){return fe(dr.count(at(e)-1,e),t,2)}function zp(e){var t=e.getDay();return t>=4||t===0?On(e):On.ceil(e)}function C5(e,t){return e=zp(e),fe(On.count(at(e),e)+(at(e).getDay()===4),t,2)}function k5(e){return e.getDay()}function N5(e,t){return fe(ci.count(at(e)-1,e),t,2)}function L5(e,t){return fe(e.getFullYear()%100,t,2)}function I5(e,t){return e=zp(e),fe(e.getFullYear()%100,t,2)}function D5(e,t){return fe(e.getFullYear()%1e4,t,4)}function R5(e,t){var n=e.getDay();return e=n>=4||n===0?On(e):On.ceil(e),fe(e.getFullYear()%1e4,t,4)}function O5(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+fe(t/60|0,"0",2)+fe(t%60,"0",2)}function rd(e,t){return fe(e.getUTCDate(),t,2)}function P5(e,t){return fe(e.getUTCHours(),t,2)}function F5(e,t){return fe(e.getUTCHours()%12||12,t,2)}function q5(e,t){return fe(1+Na.count(ft(e),e),t,3)}function Bp(e,t){return fe(e.getUTCMilliseconds(),t,3)}function j5(e,t){return Bp(e,t)+"000"}function z5(e,t){return fe(e.getUTCMonth()+1,t,2)}function B5(e,t){return fe(e.getUTCMinutes(),t,2)}function U5(e,t){return fe(e.getUTCSeconds(),t,2)}function H5(e){var t=e.getUTCDay();return t===0?7:t}function Y5(e,t){return fe(hr.count(ft(e)-1,e),t,2)}function Up(e){var t=e.getUTCDay();return t>=4||t===0?Pn(e):Pn.ceil(e)}function G5(e,t){return e=Up(e),fe(Pn.count(ft(e),e)+(ft(e).getUTCDay()===4),t,2)}function W5(e){return e.getUTCDay()}function X5(e,t){return fe(li.count(ft(e)-1,e),t,2)}function V5(e,t){return fe(e.getUTCFullYear()%100,t,2)}function K5(e,t){return e=Up(e),fe(e.getUTCFullYear()%100,t,2)}function Z5(e,t){return fe(e.getUTCFullYear()%1e4,t,4)}function Q5(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Pn(e):Pn.ceil(e),fe(e.getUTCFullYear()%1e4,t,4)}function J5(){return"+0000"}function id(){return"%"}function od(e){return+e}function ad(e){return Math.floor(+e/1e3)}var Gn,Os,Li;e8({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function e8(e){return Gn=e5(e),Os=Gn.format,Gn.parse,Li=Gn.utcFormat,Gn.utcParse,Gn}function t8(e){return new Date(e)}function n8(e){return e instanceof Date?+e:+new Date(+e)}function Ps(e,t,n,r,i,o,a,f,u,s){var c=vp(),l=c.invert,d=c.domain,h=s(".%L"),p=s(":%S"),g=s("%I:%M"),m=s("%I %p"),y=s("%a %d"),b=s("%b %d"),w=s("%B"),v=s("%Y");function T(_){return(u(_)<_?h:f(_)<_?p:a(_)<_?g:o(_)<_?m:r(_)<_?i(_)<_?y:b:n(_)<_?w:v)(_)}return c.invert=function(_){return new Date(l(_))},c.domain=function(_){return arguments.length?d(Array.from(_,n8)):d().map(t8)},c.ticks=function(_){var E=d();return e(E[0],E[E.length-1],_??10)},c.tickFormat=function(_,E){return E==null?T:s(E)},c.nice=function(_){var E=d();return(!_||typeof _.range!="function")&&(_=t(E[0],E[E.length-1],_??10)),_?d(_p(E,_)):c},c.copy=function(){return Si(c,Ps(e,t,n,r,i,o,a,f,u,s))},c}function r8(){return Et.apply(Ps(Q3,J3,at,ki,dr,qn,Ai,$i,nt,Os).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function i8(){return Et.apply(Ps(Z3,qp,ft,Ni,hr,Na,Ci,Ei,nt,Li).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Ia(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Da(){var e=0,t=.5,n=1,r=1,i,o,a,f,u,s=Ve,c,l=!1,d;function h(g){return isNaN(g=+g)?d:(g=.5+((g=+c(g))-o)*(r*g<r*o?f:u),s(l?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([e,t,n]=g,i=c(e=+e),o=c(t=+t),a=c(n=+n),f=i===o?0:.5/(o-i),u=o===a?0:.5/(a-o),r=o<i?-1:1,h):[e,t,n]},h.clamp=function(g){return arguments.length?(l=!!g,h):l},h.interpolator=function(g){return arguments.length?(s=g,h):s};function p(g){return function(m){var y,b,w;return arguments.length?([y,b,w]=m,s=xa(g,[y,b,w]),h):[s(0),s(.5),s(1)]}}return h.range=p(xi),h.rangeRound=p(Ts),h.unknown=function(g){return arguments.length?(d=g,h):d},function(g){return c=g,i=g(e),o=g(t),a=g(n),f=i===o?0:.5/(o-i),u=o===a?0:.5/(a-o),r=o<i?-1:1,h}}function Hp(){var e=Mi(Da()(Ve));return e.copy=function(){return Ia(e,Hp())},Aa.apply(e,arguments)}function Yp(){var e=xp(Da()).domain([.1,1,10]);return e.copy=function(){return Ia(e,Yp()).base(e.base())},Aa.apply(e,arguments)}function Gp(){var e=Sp(Da());return e.copy=function(){return Ia(e,Gp()).constant(e.constant())},Aa.apply(e,arguments)}function Wp(){var e=$p(Da());return e.copy=function(){return Ia(e,Wp()).exponent(e.exponent())},Aa.apply(e,arguments)}function ee(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const o8=ee("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),a8=ee("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),f8=ee("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),u8=ee("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),s8=ee("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),c8=ee("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),l8=ee("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),d8=ee("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),h8=ee("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),p8=ee("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),m8=ee("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),se=e=>o_(e[e.length-1]);var Xp=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(ee);const Vp=se(Xp);var Kp=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(ee);const Zp=se(Kp);var Qp=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(ee);const Jp=se(Qp);var em=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(ee);const tm=se(em);var Vu=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(ee);const Vo=se(Vu);var nm=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(ee);const rm=se(nm);var Ku=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(ee);const Ko=se(Ku);var im=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(ee);const om=se(im);var am=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(ee);const fm=se(am);var um=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(ee);const sm=se(um);var cm=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(ee);const lm=se(cm);var dm=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(ee);const hm=se(dm);var pm=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(ee);const mm=se(pm);var gm=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(ee);const bm=se(gm);var ym=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(ee);const vm=se(ym);var wm=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(ee);const _m=se(wm);var xm=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(ee);const Tm=se(xm);var Sm=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(ee);const Mm=se(Sm);var $m=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(ee);const Em=se($m);var Am=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(ee);const Cm=se(Am);var km=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(ee);const Nm=se(km);var Lm=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(ee);const Im=se(Lm);var Dm=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(ee);const Rm=se(Dm);var Om=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(ee);const Pm=se(Om);var Fm=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(ee);const qm=se(Fm);var jm=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(ee);const zm=se(jm);var Bm=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(ee);const Um=se(Bm);function Hm(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}const Ym=Ss(Tt(300,.5,0),Tt(-240,.5,1));var Gm=Ss(Tt(-100,.75,.35),Tt(80,1.5,.8)),Wm=Ss(Tt(260,.75,.35),Tt(80,1.5,.8)),eo=Tt();function Xm(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return eo.h=360*e-100,eo.s=1.5-1.5*t,eo.l=.8-.9*t,eo+""}var to=un(),g8=Math.PI/3,b8=Math.PI*2/3;function Vm(e){var t;return e=(.5-e)*Math.PI,to.r=255*(t=Math.sin(e))*t,to.g=255*(t=Math.sin(e+g8))*t,to.b=255*(t=Math.sin(e+b8))*t,to+""}function Km(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function Ra(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const Zm=Ra(ee("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var Qm=Ra(ee("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Jm=Ra(ee("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),eg=Ra(ee("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function ve(e){return function(){return e}}const tg=Math.cos,Fs=Math.min,Zo=Math.sin,be=Math.sqrt,fd=1e-12,Qo=Math.PI,Oa=2*Qo;function ng(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new O0(t)}function rg(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ig(e){this._context=e}ig.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Ii(e){return new ig(e)}function og(e){return e[0]}function ag(e){return e[1]}function fg(e,t){var n=ve(!0),r=null,i=Ii,o=null,a=ng(f);e=typeof e=="function"?e:e===void 0?og:ve(e),t=typeof t=="function"?t:t===void 0?ag:ve(t);function f(u){var s,c=(u=rg(u)).length,l,d=!1,h;for(r==null&&(o=i(h=a())),s=0;s<=c;++s)!(s<c&&n(l=u[s],s,u))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+e(l,s,u),+t(l,s,u));if(h)return o=null,h+""||null}return f.x=function(u){return arguments.length?(e=typeof u=="function"?u:ve(+u),f):e},f.y=function(u){return arguments.length?(t=typeof u=="function"?u:ve(+u),f):t},f.defined=function(u){return arguments.length?(n=typeof u=="function"?u:ve(!!u),f):n},f.curve=function(u){return arguments.length?(i=u,r!=null&&(o=i(r)),f):i},f.context=function(u){return arguments.length?(u==null?r=o=null:o=i(r=u),f):r},f}function y8(e,t,n){var r=null,i=ve(!0),o=null,a=Ii,f=null,u=ng(s);e=typeof e=="function"?e:e===void 0?og:ve(+e),t=typeof t=="function"?t:ve(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?ag:ve(+n);function s(l){var d,h,p,g=(l=rg(l)).length,m,y=!1,b,w=new Array(g),v=new Array(g);for(o==null&&(f=a(b=u())),d=0;d<=g;++d){if(!(d<g&&i(m=l[d],d,l))===y)if(y=!y)h=d,f.areaStart(),f.lineStart();else{for(f.lineEnd(),f.lineStart(),p=d-1;p>=h;--p)f.point(w[p],v[p]);f.lineEnd(),f.areaEnd()}y&&(w[d]=+e(m,d,l),v[d]=+t(m,d,l),f.point(r?+r(m,d,l):w[d],n?+n(m,d,l):v[d]))}if(b)return f=null,b+""||null}function c(){return fg().defined(i).curve(a).context(o)}return s.x=function(l){return arguments.length?(e=typeof l=="function"?l:ve(+l),r=null,s):e},s.x0=function(l){return arguments.length?(e=typeof l=="function"?l:ve(+l),s):e},s.x1=function(l){return arguments.length?(r=l==null?null:typeof l=="function"?l:ve(+l),s):r},s.y=function(l){return arguments.length?(t=typeof l=="function"?l:ve(+l),n=null,s):t},s.y0=function(l){return arguments.length?(t=typeof l=="function"?l:ve(+l),s):t},s.y1=function(l){return arguments.length?(n=l==null?null:typeof l=="function"?l:ve(+l),s):n},s.lineX0=s.lineY0=function(){return c().x(e).y(t)},s.lineY1=function(){return c().x(e).y(n)},s.lineX1=function(){return c().x(r).y(t)},s.defined=function(l){return arguments.length?(i=typeof l=="function"?l:ve(!!l),s):i},s.curve=function(l){return arguments.length?(a=l,o!=null&&(f=a(o)),s):a},s.context=function(l){return arguments.length?(l==null?o=f=null:f=a(o=l),s):o},s}class ug{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function v8(e){return new ug(e,!0)}function w8(e){return new ug(e,!1)}const _8=be(3),sg={draw(e,t){const n=be(t+Fs(t/28,.75))*.59436,r=n/2,i=r*_8;e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-i,-r),e.lineTo(i,r),e.moveTo(-i,r),e.lineTo(i,-r)}},qs={draw(e,t){const n=be(t/Qo);e.moveTo(n,0),e.arc(0,0,n,0,Oa)}},cg={draw(e,t){const n=be(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},lg=be(1/3),x8=lg*2,dg={draw(e,t){const n=be(t/x8),r=n*lg;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},hg={draw(e,t){const n=be(t)*.62625;e.moveTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.lineTo(-n,0),e.closePath()}},pg={draw(e,t){const n=be(t-Fs(t/7,2))*.87559;e.moveTo(-n,0),e.lineTo(n,0),e.moveTo(0,n),e.lineTo(0,-n)}},mg={draw(e,t){const n=be(t),r=-n/2;e.rect(r,r,n,n)}},gg={draw(e,t){const n=be(t)*.4431;e.moveTo(n,n),e.lineTo(n,-n),e.lineTo(-n,-n),e.lineTo(-n,n),e.closePath()}},T8=.8908130915292852,bg=Zo(Qo/10)/Zo(7*Qo/10),S8=Zo(Oa/10)*bg,M8=-tg(Oa/10)*bg,yg={draw(e,t){const n=be(t*T8),r=S8*n,i=M8*n;e.moveTo(0,-n),e.lineTo(r,i);for(let o=1;o<5;++o){const a=Oa*o/5,f=tg(a),u=Zo(a);e.lineTo(u*n,-f*n),e.lineTo(f*r-u*i,u*r+f*i)}e.closePath()}},Rf=be(3),vg={draw(e,t){const n=-be(t/(Rf*3));e.moveTo(0,n*2),e.lineTo(-Rf*n,-n),e.lineTo(Rf*n,-n),e.closePath()}},$8=be(3),wg={draw(e,t){const n=be(t)*.6824,r=n/2,i=n*$8/2;e.moveTo(0,-n),e.lineTo(i,r),e.lineTo(-i,r),e.closePath()}},Ue=-.5,He=be(3)/2,Zu=1/be(12),E8=(Zu/2+1)*3,_g={draw(e,t){const n=be(t/E8),r=n/2,i=n*Zu,o=r,a=n*Zu+n,f=-o,u=a;e.moveTo(r,i),e.lineTo(o,a),e.lineTo(f,u),e.lineTo(Ue*r-He*i,He*r+Ue*i),e.lineTo(Ue*o-He*a,He*o+Ue*a),e.lineTo(Ue*f-He*u,He*f+Ue*u),e.lineTo(Ue*r+He*i,Ue*i-He*r),e.lineTo(Ue*o+He*a,Ue*a-He*o),e.lineTo(Ue*f+He*u,Ue*u-He*f),e.closePath()}},xg={draw(e,t){const n=be(t-Fs(t/6,1.7))*.6189;e.moveTo(-n,-n),e.lineTo(n,n),e.moveTo(-n,n),e.lineTo(n,-n)}},A8=[qs,cg,dg,mg,yg,vg,_g],C8=[qs,pg,xg,wg,sg,gg,hg];function sn(){}function Jo(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Pa(e){this._context=e}Pa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Jo(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Jo(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function k8(e){return new Pa(e)}function Tg(e){this._context=e}Tg.prototype={areaStart:sn,areaEnd:sn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Jo(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function N8(e){return new Tg(e)}function Sg(e){this._context=e}Sg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Jo(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function L8(e){return new Sg(e)}function Mg(e,t){this._basis=new Pa(e),this._beta=t}Mg.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],o=e[n]-r,a=t[n]-i,f=-1,u;++f<=n;)u=f/n,this._basis.point(this._beta*e[f]+(1-this._beta)*(r+u*o),this._beta*t[f]+(1-this._beta)*(i+u*a));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const I8=function e(t){function n(r){return t===1?new Pa(r):new Mg(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function ea(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function js(e,t){this._context=e,this._k=(1-t)/6}js.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ea(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:ea(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const D8=function e(t){function n(r){return new js(r,t)}return n.tension=function(r){return e(+r)},n}(0);function zs(e,t){this._context=e,this._k=(1-t)/6}zs.prototype={areaStart:sn,areaEnd:sn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:ea(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const R8=function e(t){function n(r){return new zs(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Bs(e,t){this._context=e,this._k=(1-t)/6}Bs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ea(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const O8=function e(t){function n(r){return new Bs(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Us(e,t,n){var r=e._x1,i=e._y1,o=e._x2,a=e._y2;if(e._l01_a>fd){var f=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*f-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*f-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>fd){var s=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*s+e._x1*e._l23_2a-t*e._l12_2a)/c,a=(a*s+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,o,a,e._x2,e._y2)}function $g(e,t){this._context=e,this._alpha=t}$g.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Us(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const P8=function e(t){function n(r){return t?new $g(r,t):new js(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Eg(e,t){this._context=e,this._alpha=t}Eg.prototype={areaStart:sn,areaEnd:sn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Us(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const F8=function e(t){function n(r){return t?new Eg(r,t):new zs(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Ag(e,t){this._context=e,this._alpha=t}Ag.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Us(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const q8=function e(t){function n(r){return t?new Ag(r,t):new Bs(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Cg(e){this._context=e}Cg.prototype={areaStart:sn,areaEnd:sn,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function j8(e){return new Cg(e)}function ud(e){return e<0?-1:1}function sd(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),f=(o*i+a*r)/(r+i);return(ud(o)+ud(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(f))||0}function cd(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Of(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,f=(o-r)/3;e._context.bezierCurveTo(r+f,i+f*t,o-f,a-f*n,o,a)}function ta(e){this._context=e}ta.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Of(this,this._t0,cd(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Of(this,cd(this,n=sd(this,e,t)),n);break;default:Of(this,this._t0,n=sd(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function kg(e){this._context=new Ng(e)}(kg.prototype=Object.create(ta.prototype)).point=function(e,t){ta.prototype.point.call(this,t,e)};function Ng(e){this._context=e}Ng.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function z8(e){return new ta(e)}function B8(e){return new kg(e)}function Lg(e){this._context=e}Lg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=ld(e),i=ld(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[a],t[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function ld(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),a=new Array(n);for(i[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,a[t]-=r*a[t-1];for(i[n-1]=a[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function U8(e){return new Lg(e)}function Fa(e,t){this._context=e,this._t=t}Fa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function H8(e){return new Fa(e,.5)}function Y8(e){return new Fa(e,0)}function G8(e){return new Fa(e,1)}function Wr(e,t,n){this.k=e,this.x=t,this.y=n}Wr.prototype={constructor:Wr,scale:function(e){return e===1?this:new Wr(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Wr(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Wr.prototype;function cn(e){return e!=null&&!Number.isNaN(e)}function ut(e,t){return+cn(t)-+cn(e)||Oe(e,t)}function na(e,t){return+cn(t)-+cn(e)||vi(e,t)}function Hs(e){return e!=null&&`${e}`!=""}function Ig(e){return isFinite(e)?e:NaN}function Ys(e){return e>0&&isFinite(e)?e:NaN}function Dg(e){return e<0&&isFinite(e)?e:NaN}function W8(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;const n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),o=e.getUTCMilliseconds();return`${X8(e.getUTCFullYear())}-${Rt(e.getUTCMonth()+1,2)}-${Rt(e.getUTCDate(),2)}${n||r||i||o?`T${Rt(n,2)}:${Rt(r,2)}${i||o?`:${Rt(i,2)}${o?`.${Rt(o,3)}`:""}`:""}Z`:""}`}function X8(e){return e<0?`-${Rt(-e,6)}`:e>9999?`+${Rt(e,6)}`:Rt(e,4)}function Rt(e,t){return`${e}`.padStart(t,"0")}const V8=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function Rg(e,t){return V8.test(e+="")?new Date(e):typeof t=="function"?t(e):t}function pr(e){if(e==null)return;const t=e[0],n=e[e.length-1];return vi(t,n)}const Zn=1e3,rn=Zn*60,on=rn*60,St=on*24,mt=St*7,An=St*30,Jt=St*365,Pf=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",Zn],["5 seconds",5*Zn],["15 seconds",15*Zn],["30 seconds",30*Zn],["minute",rn],["5 minutes",5*rn],["15 minutes",15*rn],["30 minutes",30*rn],["hour",on],["3 hours",3*on],["6 hours",6*on],["12 hours",12*on],["day",St],["2 days",2*St],["week",mt],["2 weeks",2*mt],["month",An],["3 months",3*An],["6 months",6*An],["year",Jt],["2 years",2*Jt],["5 years",5*Jt],["10 years",10*Jt],["20 years",20*Jt],["50 years",50*Jt],["100 years",100*Jt]],Gs=new Map([["second",Zn],["minute",rn],["hour",on],["day",St],["monday",mt],["tuesday",mt],["wednesday",mt],["thursday",mt],["friday",mt],["saturday",mt],["sunday",mt],["week",mt],["month",An],["year",Jt]]),Og=new Map([["second",nt],["minute",$i],["hour",Ai],["day",qn],["monday",ci],["tuesday",kp],["wednesday",Np],["thursday",On],["friday",Lp],["saturday",Ip],["sunday",dr],["week",dr],["month",ki],["year",at]]),Ws=new Map([["second",nt],["minute",Ei],["hour",Ci],["day",La],["monday",li],["tuesday",Dp],["wednesday",Rp],["thursday",Pn],["friday",Op],["saturday",Pp],["sunday",hr],["week",hr],["month",Ni],["year",ft]]),Di=Symbol("intervalDuration"),qa=Symbol("intervalType");for(const[e,t]of Og)t[Di]=Gs.get(e),t[qa]="time";for(const[e,t]of Ws)t[Di]=Gs.get(e),t[qa]="utc";const Xr=[["year",ft,"utc"],["month",Ni,"utc"],["day",La,"utc",6*An],["hour",Ci,"utc",3*St],["minute",Ei,"utc",6*on],["second",nt,"utc",30*rn]],_o=[["year",at,"time"],["month",ki,"time"],["day",qn,"time",6*An],["hour",Ai,"time",3*St],["minute",$i,"time",6*on],["second",nt,"time",30*rn]],K8=[Xr[0],_o[0],Xr[1],_o[1],Xr[2],_o[2],...Xr.slice(3)];function Pg(e){let t=`${e}`.toLowerCase();t.endsWith("s")&&(t=t.slice(0,-1));let n=1;const r=/^(?:(\d+)\s+)/.exec(t);switch(r&&(t=t.slice(r[0].length),n=+r[1]),t){case"quarter":t="month",n*=3;break;case"half":t="month",n*=6;break}let i=Ws.get(t);if(!i)throw new Error(`unknown interval: ${e}`);if(n>1&&!i.every)throw new Error(`non-periodic interval: ${t}`);return[t,n]}function Fg(e){return qg(Pg(e),"time")}function Xs(e){return qg(Pg(e),"utc")}function qg([e,t],n){let r=(n==="time"?Og:Ws).get(e);return t>1&&(r=r.every(t),r[Di]=Gs.get(e)*t,r[qa]=n),r}function dd(e,t){if(!(t>1))return;const n=e[Di];if(!Pf.some(([,i])=>i===n)||n%St===0&&St<n&&n<An)return;const[r]=Pf[pa(([,i])=>Math.log(i)).center(Pf,Math.log(n*t))];return(e[qa]==="time"?Fg:Xs)(r)}function hd(e,t,n){const r=t==="time"?Os:Li;if(n==null)return r(e==="year"?"%Y":e==="month"?"%Y-%m":e==="day"?"%Y-%m-%d":e==="hour"||e==="minute"?"%Y-%m-%dT%H:%M":e==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const i=Z8(n);switch(e){case"millisecond":return Wn(r(".%L"),r(":%M:%S"),i);case"second":return Wn(r(":%S"),r("%-I:%M"),i);case"minute":return Wn(r("%-I:%M"),r("%p"),i);case"hour":return Wn(r("%-I %p"),r("%b %-d"),i);case"day":return Wn(r("%-d"),r("%b"),i);case"month":return Wn(r("%b"),r("%Y"),i);case"year":return r("%Y")}throw new Error("unable to format time ticks")}function Z8(e){return e==="left"||e==="right"?(t,n)=>`
${t}
${n}`:e==="top"?(t,n)=>`${n}
${t}`:(t,n)=>`${t}
${n}`}function Q8(e){return e==="time"?_o:e==="utc"?Xr:K8}function J8(e,t,n){const r=rt(X2(t,(i,o)=>Math.abs(o-i)));if(r<1e3)return hd("millisecond","utc",n);for(const[i,o,a,f]of Q8(e)){if(r>f||i==="hour"&&!r)break;if(t.every(u=>o.floor(u)>=u))return hd(i,a,n)}}function Wn(e,t,n){return(r,i,o)=>{const a=e(r,i),f=t(r,i),u=i-pr(o);return i!==u&&o[u]!==void 0&&f===t(o[u],u)?a:n(a,f)}}const Vs=Object.getPrototypeOf(Uint8Array),ex=Object.prototype.toString;function pn(e){return e instanceof Array||e instanceof Vs}function jg(e){return e instanceof Vs&&!tx(e)}function zg(e){return(e==null?void 0:e.prototype)instanceof Vs&&!nx(e)}function tx(e){return e instanceof BigInt64Array||e instanceof BigUint64Array}function nx(e){return e===BigInt64Array||e===BigUint64Array}const Bg=Symbol("reindex");function le(e,t,n){const r=typeof t;return r==="string"?Qg(e)?Ks(e.getChild(t),n):pd(e,Ug(t),n):r==="function"?pd(e,t,n):r==="number"||t instanceof Date||r==="boolean"?me(e,jt(t),n):typeof(t==null?void 0:t.transform)=="function"?Qu(t.transform(e),n):rx(Qu(t,n),e==null?void 0:e[Bg])}function rx(e,t){return e!=null&&t?tc(e,t):e}function pd(e,t,n){return me(e,zg(n)?(r,i)=>Qs(t(r,i)):t,n)}function Qu(e,t){return t===void 0?ln(e):Jg(e)?Ks(e,t):e instanceof t?e:t.from(e,zg(t)&&!jg(e)?Qs:void 0)}function Ks(e,t){return e==null?e:(t===void 0||t===Array)&&Sx(e.type)?Hg(e.toArray()):Qu(e.toArray(),t)}const xo=[null],Ug=e=>t=>{var r;const n=t[e];return n===void 0&&t.type==="Feature"?(r=t.properties)==null?void 0:r[e]:n},Ri={transform:Gt},xe={transform:e=>e},ix=()=>1,ox=()=>!0,Ie=e=>e==null?e:`${e}`,Ce=e=>e==null?e:+e,Zs=e=>e?e[0]:void 0,ra=e=>e?e[1]:void 0,jt=e=>()=>e;function ax(e){const t=+`${e}`.slice(1)/100;return(n,r)=>ir(n,t,r)}function mr(e){return jg(e)?e:me(e,Qs,Float64Array)}function Qs(e){return e==null?NaN:Number(e)}function Hg(e){return me(e,Yg)}function Yg(e){return e instanceof Date&&!isNaN(e)?e:typeof e=="string"?Rg(e):e==null||isNaN(e=Number(e))?void 0:new Date(e)}function Qe(e,t){return e===void 0&&(e=t),e===null?[void 0,"none"]:za(e)?[void 0,e]:[e,void 0]}function qe(e,t){return e===void 0&&(e=t),e===null||typeof e=="number"?[void 0,e]:[e,void 0]}function Gg(e,t,n){if(e!=null)return ct(e,t,n)}function ct(e,t,n){const r=`${e}`.toLowerCase();if(!n.includes(r))throw new Error(`invalid ${t}: ${e}`);return r}function gr(e){return Qg(e)?e:ln(e)}function ln(e){if(e==null||pn(e))return e;if(Jg(e))return Ks(e);switch(e.type){case"FeatureCollection":return e.features;case"GeometryCollection":return e.geometries;case"Feature":case"LineString":case"MultiLineString":case"MultiPoint":case"MultiPolygon":case"Point":case"Polygon":case"Sphere":return[e]}return Array.from(e)}function me(e,t,n=Array){return e==null?e:e instanceof n?e.map(t):n.from(e,t)}function di(e,t=Array){return e instanceof t?e.slice():t.from(e)}function fx({x:e,x1:t,x2:n}){return e!==void 0||t!==void 0||n!==void 0}function Wg({y:e,y1:t,y2:n}){return e!==void 0||t!==void 0||n!==void 0}function ux(e){return fx(e)||Wg(e)||e.interval!==void 0}function mn(e){return(e==null?void 0:e.toString)===ex}function Ju(e){return mn(e)&&(e.type!==void 0||e.domain!==void 0)}function ja(e){return mn(e)&&typeof e.transform!="function"}function br(e){return ja(e)&&e.value===void 0&&e.channel===void 0}function sx(e,t,n,r=xe){return t===void 0&&n===void 0?(t=0,n=e===void 0?r:e):t===void 0?t=e===void 0?0:e:n===void 0&&(n=e===void 0?0:e),[t,n]}function Js(e,t){return e===void 0&&t===void 0?[Zs,ra]:[e,t]}function ec({z:e,fill:t,stroke:n}={}){return e===void 0&&([e]=Qe(t)),e===void 0&&([e]=Qe(n)),e}function hi(e){return pn(e)?e.length:e==null?void 0:e.numRows}function Gt(e){const t=hi(e),n=new Uint32Array(t);for(let r=0;r<t;++r)n[r]=r;return n}function tc(e,t){return pn(e)?me(t,n=>e[n],e.constructor):me(t,n=>e.at(n))}function cx(e,t,n){return e.subarray?e.subarray(t,n):e.slice(t,n)}function zt(e){return e!==null&&typeof e=="object"?e.valueOf():e}function lx(e,t){if(t[e]!==void 0)return t[e];switch(e){case"x1":case"x2":e="x";break;case"y1":case"y2":e="y";break}return t[e]}function ia(e){let t;return[{transform:()=>t,label:gn(e)},n=>t=n]}function Re(e){return e==null?[e]:ia(e)}function gn(e,t){return typeof e=="string"?e:e&&e.label!==void 0?e.label:t}function es(e,t){return{transform(n){const r=e.transform(n),i=t.transform(n);return Fe(r)||Fe(i)?me(r,(o,a)=>new Date((+r[a]+ +i[a])/2)):me(r,(o,a)=>(+r[a]+ +i[a])/2,Float64Array)},label:e.label}}function oa(e,t){const n=Xg(t==null?void 0:t.interval,t==null?void 0:t.type);return n?me(e,n):e}function Xg(e,t){const n=nc(e,t);return n&&(r=>cn(r)?n.floor(r):r)}function nc(e,t){if(e!=null){if(typeof e=="number")return dx(e);if(typeof e=="string")return(t==="time"?Fg:Xs)(e);if(typeof e.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof e.offset!="function")throw new Error("invalid interval; missing offset method");return e}}function dx(e){e=+e,0<e&&e<1&&Number.isInteger(1/e)&&(e=-1/e);const t=Math.abs(e);return e<0?{floor:n=>Math.floor(n*t)/t,offset:(n,r=1)=>(n*t+Math.floor(r))/t,range:(n,r)=>bu(Math.ceil(n*t),r*t).map(i=>i/t)}:{floor:n=>Math.floor(n/t)*t,offset:(n,r=1)=>n+t*Math.floor(r),range:(n,r)=>bu(Math.ceil(n/t),r/t).map(i=>i*t)}}function Mr(e,t){if(e=nc(e,t),e&&typeof e.range!="function")throw new Error("invalid interval: missing range method");return e}function hx(e,t){if(e=Mr(e,t),e&&typeof e.ceil!="function")throw new Error("invalid interval: missing ceil method");return e}function px(e){return Qn(e)&&typeof(e==null?void 0:e.floor)=="function"&&e.floor()instanceof Date}function Qn(e){return typeof(e==null?void 0:e.range)=="function"}function $r(e){return e===void 0||ja(e)?e:{value:e}}function mx(e){return e==null?null:{transform:t=>le(t,e,Float64Array),label:gn(e)}}function bn(e){return e&&typeof e[Symbol.iterator]=="function"}function Vg(e){for(const t of e)if(t!=null)return typeof t!="object"||t instanceof Date}function md(e){for(const t of e){if(t==null)continue;const n=typeof t;return n==="string"||n==="boolean"}}function Fe(e){for(const t of e)if(t!=null)return t instanceof Date}function gx(e){for(const t of e)if(t!=null)return typeof t=="string"&&isNaN(t)&&Rg(t)}function bx(e){for(const t of e)if(t!=null){if(typeof t!="string")return!1;if(t.trim())return!isNaN(t)}}function yx(e){for(const t of e)if(t!=null)return typeof t=="number"}function Ff(e,t){let n;for(const r of e)if(r!=null){if(!t(r))return!1;n=!0}return n}const vx=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function za(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(e)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(e)||vx.has(e))}function wx(e){return typeof e=="number"&&(0<=e&&e<=1||isNaN(e))}function Ee(e){return e==null||pi(e)}function pi(e){return/^\s*none\s*$/i.test(e)}function _x(e){return/^\s*round\s*$/i.test(e)}function ts(e,t){return Gg(e,t,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function rc(e="middle"){return ts(e,"frameAnchor")}function xx(e={},...t){let n=e;for(const r of t)for(const i in r)if(n[i]===void 0){const o=r[i];n===e?n={...n,[i]:o}:n[i]=o}return n}function Tx(e){console.warn("named iterables are deprecated; please use an object instead");const t=new Set;return Object.fromEntries(Array.from(e,n=>{const{name:r}=n;if(r==null)throw new Error("missing name");const i=`${r}`;if(i==="__proto__")throw new Error(`illegal name: ${i}`);if(t.has(i))throw new Error(`duplicate name: ${i}`);return t.add(i),[r,n]}))}function Kg(e){return bn(e)?Tx(e):e}function Zg(e){return e===!0?e="frame":e===!1?e=null:e!=null&&(e=ct(e,"clip",["frame","sphere"])),e}function Qg(e){return e&&typeof e.getChild=="function"&&typeof e.toArray=="function"&&e.schema&&Array.isArray(e.schema.fields)}function Jg(e){return e&&typeof e.toArray=="function"&&e.type}function Sx(e){return e&&(e.typeId===8||e.typeId===10)&&e.unit===1}const vt=Symbol("position"),Wt=Symbol("color"),Oi=Symbol("radius"),Pi=Symbol("length"),Fi=Symbol("opacity"),Ba=Symbol("symbol"),e1=Symbol("projection"),pe=new Map([["x",vt],["y",vt],["fx",vt],["fy",vt],["r",Oi],["color",Wt],["opacity",Fi],["symbol",Ba],["length",Pi],["projection",e1]]);function Mx(e){return e===vt||e===e1}function $x(e){return e===vt||e===Oi||e===Pi||e===Fi}const Ex=Math.sqrt(3),Ax=2/Ex,Cx={draw(e,t){const n=Math.sqrt(t/Math.PI),r=n*Ax,i=r/2;e.moveTo(0,r),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(0,-r),e.lineTo(-n,-i),e.lineTo(-n,i),e.closePath()}},ic=new Map([["asterisk",sg],["circle",qs],["cross",cg],["diamond",dg],["diamond2",hg],["hexagon",Cx],["plus",pg],["square",mg],["square2",gg],["star",yg],["times",xg],["triangle",vg],["triangle2",wg],["wye",_g]]);function oc(e){return e&&typeof e.draw=="function"}function kx(e){return oc(e)?!0:typeof e!="string"?!1:ic.has(e.toLowerCase())}function ac(e){if(e==null||oc(e))return e;const t=ic.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid symbol: ${e}`)}function wS(e){if(e==null||oc(e))return[void 0,e];if(typeof e=="string"){const t=ic.get(`${e}`.toLowerCase());if(t)return[void 0,t]}return[e,void 0]}function qi({filter:e,sort:t,reverse:n,transform:r,initializer:i,...o}={},a){if(r===void 0&&(e!=null&&(r=t1(e)),t!=null&&!br(t)&&(r=qf(r,fc(t))),n&&(r=qf(r,n1))),a!=null&&i!=null)throw new Error("transforms cannot be applied after initializers");return{...o,...(t===null||br(t))&&{sort:t},transform:qf(r,a)}}function yr({filter:e,sort:t,reverse:n,initializer:r,...i}={},o){return r===void 0&&(e!=null&&(r=t1(e)),t!=null&&!br(t)&&(r=jf(r,fc(t))),n&&(r=jf(r,n1))),{...i,...(t===null||br(t))&&{sort:t},initializer:jf(r,o)}}function qf(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i){return{data:n,facets:r}=e.call(this,n,r,i),t.call(this,gr(n),r,i)}}function jf(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i,...o){let a,f,u,s,c,l;return{data:f=n,facets:u=r,channels:a}=e.call(this,n,r,i,...o),{data:c=f,facets:l=u,channels:s}=t.call(this,f,u,{...i,...a},...o),{data:c,facets:l,channels:{...a,...s}}}}function Nx(e,t){return(e.initializer!=null?yr:qi)(e,t)}function t1(e){return(t,n)=>{const r=le(t,e);return{data:t,facets:n.map(i=>i.filter(o=>r[o]))}}}function n1(e,t){return{data:e,facets:t.map(n=>n.slice().reverse())}}function _S(e,{sort:t,...n}={}){return{...(ja(e)&&e.channel!==void 0?yr:Nx)(n,fc(e)),sort:br(t)?t:null}}function fc(e){return(typeof e=="function"&&e.length!==1?Lx:Ix)(e)}function Lx(e){return(t,n)=>{const r=pn(t)?(i,o)=>e(t[i],t[o]):(i,o)=>e(t.get(i),t.get(o));return{data:t,facets:n.map(i=>i.slice().sort(r))}}}function Ix(e){let t,n;({channel:t,value:e,order:n}={...$r(e)});const r=t==null?void 0:t.startsWith("-");if(r&&(t=t.slice(1)),n===void 0&&(n=r?na:ut),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=ut;break;case"descending":n=na;break;default:throw new Error(`invalid order: ${n}`)}return(i,o,a)=>{let f;if(t===void 0)f=le(i,e);else{if(a===void 0)throw new Error("channel sort requires an initializer");if(f=a[t],!f)return{};f=f.value}const u=(s,c)=>n(f[s],f[c]);return{data:i,facets:o.map(s=>s.slice().sort(u))}}}function r1(e={y:"count"},t={}){const{x:n=xe}=t;if(n==null)throw new Error("missing channel: x");return Dx(n,null,e,t)}function Dx(e,t,{data:n=cc,filter:r,sort:i,reverse:o,...a}={},f={}){a=Px(a,f),n=f1(n,xe),i=i==null?void 0:o1("sort",i,f),r=r==null?void 0:a1("filter",r,f);const[u,s]=Re(e),[c,l]=Re(t),{z:d,fill:h,stroke:p,x1:g,x2:m,y1:y,y2:b,...w}=f,[v,T]=Re(d),[_]=Qe(h),[E]=Qe(p),[C,k]=Re(_),[R,$]=Re(E);return{..."z"in f&&{z:v||d},..."fill"in f&&{fill:C||h},..."stroke"in f&&{stroke:R||p},...qi(w,(S,x,A)=>{const M=oa(le(S,e),A==null?void 0:A.x),N=oa(le(S,t),A==null?void 0:A.y),L=le(S,d),z=le(S,_),H=le(S,E),O=u1(a,{z:L,fill:z,stroke:H}),q=[],P=[],F=M&&s([]),K=N&&l([]),Z=L&&T([]),W=z&&k([]),Y=H&&$([]);let j=0;for(const I of a)I.initialize(S);i&&i.initialize(S),r&&r.initialize(S);for(const I of x){const B=[];for(const G of a)G.scope("facet",I);i&&i.scope("facet",I),r&&r.scope("facet",I);for(const[G,D]of ni(I,O))for(const[ie,X]of ni(D,N))for(const[oe,ae]of ni(X,M)){const ce={data:S};if(M&&(ce.x=oe),N&&(ce.y=ie),O&&(ce.z=G),!(r&&!r.reduce(ae,ce))){B.push(j++),P.push(n.reduceIndex(ae,S,ce)),M&&F.push(oe),N&&K.push(ie),L&&Z.push(O===L?G:L[ae[0]]),z&&W.push(O===z?G:z[ae[0]]),H&&Y.push(O===H?G:H[ae[0]]);for(const lt of a)lt.reduce(ae,ce);i&&i.reduce(ae,ce)}}q.push(B)}return s1(q,i,o),{data:P,facets:q}}),...!ti(a,"x")&&(u?{x:u}:{x1:g,x2:m}),...!ti(a,"y")&&(c?{y:c}:{y1:y,y2:b}),...Object.fromEntries(a.map(({name:S,output:x})=>[S,x]))}}function ti(e,...t){for(const{name:n}of e)if(t.includes(n))return!0;return!1}function i1(e,t,n=uc){const r=Object.entries(e);return t.title!=null&&e.title===void 0&&r.push(["title",zx]),t.href!=null&&e.href===void 0&&r.push(["href",lc]),r.filter(([,i])=>i!==void 0).map(([i,o])=>o===null?Rx(i):n(i,o,t))}function uc(e,t,n,r=sc){let i;mn(t)&&"reduce"in t&&(i=t.scale,t=t.reduce);const o=r(e,t,n),[a,f]=ia(o.label);let u;return{name:e,output:i===void 0?a:{value:a,scale:i},initialize(s){o.initialize(s),u=f([])},scope(s,c){o.scope(s,c)},reduce(s,c){u.push(o.reduce(s,c))}}}function Rx(e){return{name:e,initialize(){},scope(){},reduce(){}}}function sc(e,t,n,r=Ua){const i=lx(e,n),o=r(t,i);let a,f;return{label:gn(o===aa?null:i,o.label),initialize(u){a=i===void 0?u:le(u,i),o.scope==="data"&&(f=o.reduceIndex(Gt(u),a))},scope(u,s){o.scope===u&&(f=o.reduceIndex(s,a))},reduce(u,s){return o.scope==null?o.reduceIndex(u,a,s):o.reduceIndex(u,a,f,s)}}}function ni(e,t){return t?ba(e,n=>t[n]):[[,e]]}function Ua(e,t,n=Ox){if(e==null)return n(e);if(typeof e.reduceIndex=="function")return e;if(typeof e.reduce=="function"&&mn(e))return qx(e);if(typeof e=="function")return jx(e);if(/^p\d{2}$/i.test(e))return Dt(ax(e));switch(`${e}`.toLowerCase()){case"first":return lc;case"last":return Bx;case"identity":return cc;case"count":return aa;case"distinct":return Ux;case"sum":return t==null?aa:Hx;case"proportion":return bd(t,"data");case"proportion-facet":return bd(t,"facet");case"deviation":return Dt(Yh);case"min":return Dt(Bt);case"min-index":return Dt(B2);case"max":return Dt(rt);case"max-index":return Dt(z2);case"mean":return gd(Y2);case"median":return gd(gu);case"variance":return Dt(Hh);case"mode":return Dt(W2)}return n(e)}function Ox(e){throw new Error(`invalid reduce: ${e}`)}function Px(e,t){return i1(e,t,o1)}function o1(e,t,n){return uc(e,t,n,a1)}function a1(e,t,n){return sc(e,t,n,f1)}function f1(e,t){return Ua(e,t,Fx)}function Fx(e){switch(`${e}`.toLowerCase()){case"x":return Yx;case"y":return Gx;case"z":return c1}throw new Error(`invalid group reduce: ${e}`)}function u1(e,t){for(const n in t){const r=t[n];if(r!==void 0&&!e.some(i=>i.name===n))return r}}function s1(e,t,n){if(t){const r=t.output.transform(),i=(o,a)=>ut(r[o],r[a]);e.forEach(o=>o.sort(i))}n&&e.forEach(r=>r.reverse())}function qx(e){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...e,reduceIndex:e.reduce.bind(e)}}function jx(e){return{reduceIndex(t,n,r){return e(tc(n,t),r)}}}function Dt(e){return{reduceIndex(t,n){return e(t,r=>n[r])}}}function gd(e){return{reduceIndex(t,n){const r=e(t,i=>n[i]);return Fe(n)?new Date(r):r}}}const cc={reduceIndex(e,t){return tc(t,e)}},lc={reduceIndex(e,t){return t[e[0]]}},zx={reduceIndex(e,t){const r=So(Jn(e,o=>o.length,o=>t[o]),ra),i=r.slice(-5).reverse();if(i.length<r.length){const o=r.slice(0,-4);i[4]=[` ${o.length.toLocaleString("en-US")} more`,fn(o,ra)]}return i.map(([o,a])=>`${o} (${a.toLocaleString("en-US")})`).join(`
`)}},Bx={reduceIndex(e,t){return t[e[e.length-1]]}},aa={label:"Frequency",reduceIndex(e){return e.length}},Ux={label:"Distinct",reduceIndex(e,t){const n=new ga;for(const r of e)n.add(t[r]);return n.size}},Hx=Dt(fn);function bd(e,t){return e==null?{scope:t,label:"Frequency",reduceIndex:(n,r,i=1)=>n.length/i}:{scope:t,reduceIndex:(n,r,i=1)=>fn(n,o=>r[o])/i}}const Yx={reduceIndex(e,t,{x:n}){return n}},Gx={reduceIndex(e,t,{y:n}){return n}},c1={reduceIndex(e,t,{z:n}){return n}};function fa(e){if(typeof e!="function")throw new Error(`invalid test function: ${e}`);return{reduceIndex(t,n,{data:r}){return n[t.find(pn(r)?i=>e(r[i],i,r):i=>e(r.get(i),i,r))]}}}function mi(e,{scale:t,type:n,value:r,filter:i,hint:o,label:a=gn(r)},f){return o===void 0&&typeof(r==null?void 0:r.transform)=="function"&&(o=r.hint),l1(f,{scale:t,type:n,value:le(e,r),label:a,filter:i,hint:o})}function Wx(e,t){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,mi(t,r,n)]))}function Xx(e,t){const n=Object.fromEntries(Object.entries(e).map(([r,{scale:i,value:o}])=>{const a=i==null?null:t[i];return[r,a==null?o:me(o,a)]}));return n.channels=e,n}function l1(e,t){const{scale:n,value:r}=t;if(n===!0||n==="auto")switch(e){case"fill":case"stroke":case"color":t.scale=n!==!0&&Ff(r,za)?null:"color",t.defaultScale="color";break;case"fillOpacity":case"strokeOpacity":case"opacity":t.scale=n!==!0&&Ff(r,wx)?null:"opacity",t.defaultScale="opacity";break;case"symbol":n!==!0&&Ff(r,kx)?(t.scale=null,t.value=me(r,ac)):t.scale="symbol",t.defaultScale="symbol";break;default:t.scale=pe.has(e)?e:null;break}else if(n===!1)t.scale=null;else if(n!=null&&!pe.has(n))throw new Error(`unknown scale: ${n}`);return t}function Vx(e,t,n,r,i){const{order:o,reverse:a,reduce:f=!0,limit:u}=i;for(const s in i){if(!pe.has(s))continue;let{value:c,order:l=o,reverse:d=a,reduce:h=f,limit:p=u}=$r(i[s]);const g=c==null?void 0:c.startsWith("-");if(g&&(c=c.slice(1)),l=l===void 0?g!==(c==="width"||c==="height")?h1:d1:Qx(l),h==null||h===!1)continue;const m=s==="fx"||s==="fy"?Zx(t,r[s]):Kx(n,s);if(!m)throw new Error(`missing channel for scale: ${s}`);const y=m.value,[b=0,w=1/0]=bn(p)?p:p<0?[p]:[0,p];if(c==null)m.domain=()=>{let v=Array.from(new ga(y));return d&&(v=v.reverse()),(b!==0||w!==1/0)&&(v=v.slice(b,w)),v};else{const v=c==="data"?e:c==="height"?yd(n,"y1","y2"):c==="width"?yd(n,"x1","x2"):ns(n,c,c==="y"?"y2":c==="x"?"x2":void 0),T=Ua(h===!0?"max":h,v);m.domain=()=>{let _=R2(Gt(y),E=>T.reduceIndex(E,v),E=>y[E]);return l&&_.sort(l),d&&_.reverse(),(b!==0||w!==1/0)&&(_=_.slice(b,w)),_.map(Zs)}}}}function Kx(e,t){for(const n in e){const r=e[n];if(r.scale===t)return r}}function Zx(e,t){const n=e.original;if(n===e)return t;const r=t.value,i=t.value=[];for(let o=0;o<n.length;++o){const a=r[n[o][0]];for(const f of e[o])i[f]=a}return t}function yd(e,t,n){const r=ns(e,t),i=ns(e,n);return me(i,(o,a)=>Math.abs(o-r[a]),Float64Array)}function ns(e,t,n){let r=e[t];if(!r&&n!==void 0&&(r=e[n]),r)return r.value;throw new Error(`missing channel: ${t}`)}function Qx(e){if(e==null||typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"ascending":return d1;case"descending":return h1}throw new Error(`invalid order: ${e}`)}function d1([e,t],[n,r]){return ut(t,r)||ut(e,n)}function h1([e,t],[n,r]){return na(t,r)||ut(e,n)}function vd(e,t){let n=e[t];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}const p1=new Map([["accent",a8],["category10",o8],["dark2",f8],["observable10",u8],["paired",s8],["pastel1",c8],["pastel2",l8],["set1",d8],["set2",h8],["set3",p8],["tableau10",m8]]);function Jx(e){return e!=null&&p1.has(`${e}`.toLowerCase())}const wd=new Map([...p1,["brbg",kt(Xp,Vp)],["prgn",kt(Kp,Zp)],["piyg",kt(Qp,Jp)],["puor",kt(em,tm)],["rdbu",kt(Vu,Vo)],["rdgy",kt(nm,rm)],["rdylbu",kt(Ku,Ko)],["rdylgn",kt(im,om)],["spectral",kt(am,fm)],["burd",_d(Vu,Vo)],["buylrd",_d(Ku,Ko)],["blues",ye(Lm,Im)],["greens",ye(Dm,Rm)],["greys",ye(Om,Pm)],["oranges",ye(Bm,Um)],["purples",ye(Fm,qm)],["reds",ye(jm,zm)],["turbo",Nt(Km)],["viridis",Nt(Zm)],["magma",Nt(Qm)],["inferno",Nt(Jm)],["plasma",Nt(eg)],["cividis",Nt(Hm)],["cubehelix",Nt(Ym)],["warm",Nt(Gm)],["cool",Nt(Wm)],["bugn",ye(um,sm)],["bupu",ye(cm,lm)],["gnbu",ye(dm,hm)],["orrd",ye(pm,mm)],["pubu",ye(ym,vm)],["pubugn",ye(gm,bm)],["purd",ye(wm,_m)],["rdpu",ye(xm,Tm)],["ylgn",ye($m,Em)],["ylgnbu",ye(Sm,Mm)],["ylorbr",ye(Am,Cm)],["ylorrd",ye(km,Nm)],["rainbow",xd(Xm)],["sinebow",xd(Vm)]]);function ye(e,t){return({length:n})=>n===1?[e[3][1]]:n===2?[e[3][1],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?ot(t,n):e[n])}function kt(e,t){return({length:n})=>n===2?[e[3][0],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?ot(t,n):e[n])}function _d(e,t){return({length:n})=>n===2?[e[3][2],e[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?ot(r=>t(1-r),n):e[n].slice().reverse())}function Nt(e){return({length:t})=>ot(e,Math.max(2,Math.floor(t)))}function xd(e){return({length:t})=>ot(e,Math.floor(t)+1).slice(0,-1)}function m1(e){const t=`${e}`.toLowerCase();if(!wd.has(t))throw new Error(`unknown ordinal scheme: ${t}`);return wd.get(t)}function Ha(e,t){const n=m1(e),r=typeof n=="function"?n({length:t}):n;return r.length!==t?r.slice(0,t):r}function e4(e,t="greys"){const n=new Set,[r,i]=Ha(t,2);for(const o of e)if(o!=null)if(o===!0)n.add(i);else if(o===!1)n.add(r);else return;return[...n]}const Td=new Map([["brbg",Vp],["prgn",Zp],["piyg",Jp],["puor",tm],["rdbu",Vo],["rdgy",rm],["rdylbu",Ko],["rdylgn",om],["spectral",fm],["burd",e=>Vo(1-e)],["buylrd",e=>Ko(1-e)],["blues",Im],["greens",Rm],["greys",Pm],["purples",qm],["reds",zm],["oranges",Um],["turbo",Km],["viridis",Zm],["magma",Qm],["inferno",Jm],["plasma",eg],["cividis",Hm],["cubehelix",Ym],["warm",Gm],["cool",Wm],["bugn",sm],["bupu",lm],["gnbu",hm],["orrd",mm],["pubugn",bm],["pubu",vm],["purd",_m],["rdpu",Tm],["ylgnbu",Mm],["ylgn",Em],["ylorbr",Cm],["ylorrd",Nm],["rainbow",Xm],["sinebow",Vm]]);function dc(e){const t=`${e}`.toLowerCase();if(!Td.has(t))throw new Error(`unknown quantitative scheme: ${t}`);return Td.get(t)}const t4=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function n4(e){return e!=null&&t4.has(`${e}`.toLowerCase())}const g1=e=>t=>e(1-t),zf=[0,1],Sd=new Map([["number",$e],["rgb",In],["hsl",y_],["hcl",__],["lab",v_]]);function b1(e){const t=`${e}`.toLowerCase();if(!Sd.has(t))throw new Error(`unknown interpolator: ${t}`);return Sd.get(t)}function ji(e,t,n,{type:r,nice:i,clamp:o,zero:a,domain:f=v1(e,n),unknown:u,round:s,scheme:c,interval:l,range:d=pe.get(e)===Oi?h4(n,f):pe.get(e)===Pi?p4(n,f):pe.get(e)===Fi?zf:void 0,interpolate:h=pe.get(e)===Wt?c==null&&d!==void 0?In:dc(c!==void 0?c:r==="cyclical"?"rainbow":"turbo"):s?Ts:$e,reverse:p}){if(l=Mr(l,r),(r==="cyclical"||r==="sequential")&&(r="linear"),typeof h!="function"&&(h=b1(h)),p=!!p,d!==void 0){const g=(f=ln(f)).length,m=(d=ln(d)).length;if(g!==m){if(h.length===1)throw new Error("invalid piecewise interpolator");h=xa(h,d),d=void 0}}if(h.length===1?(p&&(h=g1(h),p=!1),d===void 0&&(d=Float64Array.from(f,(g,m)=>m/(f.length-1)),d.length===2&&(d=zf)),t.interpolate((d===zf?jt:pc)(h))):t.interpolate(h),a){const[g,m]=Ge(f);(g>0||m<0)&&(f=di(f),(pr(f)||1)===Math.sign(g)?f[0]=0:f[f.length-1]=0)}return p&&(f=Ao(f)),t.domain(f).unknown(u),i&&(t.nice(r4(i,r)),f=t.domain()),d!==void 0&&t.range(d),o&&t.clamp(o),{type:r,domain:f,range:d,scale:t,interpolate:h,interval:l}}function r4(e,t){return e===!0?void 0:typeof e=="number"?e:hx(e,t)}function i4(e,t,n){return ji(e,Ds(),t,n)}function o4(e,t,n){return y1(e,t,{...n,exponent:.5})}function y1(e,t,{exponent:n=1,...r}){return ji(e,Ep().exponent(n),t,{...r,type:"pow"})}function a4(e,t,{base:n=10,domain:r=m4(t),...i}){return ji(e,Tp().base(n),t,{...i,domain:r})}function f4(e,t,{constant:n=1,...r}){return ji(e,Mp().constant(n),t,r)}function u4(e,t,{range:n,quantiles:r=n===void 0?5:(n=[...n]).length,n:i=r,scheme:o="rdylbu",domain:a=g4(t),unknown:f,interpolate:u,reverse:s}){return n===void 0&&(n=u!==void 0?ot(u,i):pe.get(e)===Wt?Ha(o,i):void 0),a.length>0&&(a=Ap(a,n===void 0?{length:i}:n).quantiles()),hc(e,t,{domain:a,range:n,reverse:s,unknown:f})}function s4(e,t,{range:n,n:r=n===void 0?5:(n=[...n]).length,scheme:i="rdylbu",domain:o=v1(e,t),unknown:a,interpolate:f,reverse:u}){const[s,c]=Ge(o);let l;return n===void 0?(l=ri(s,c,r),l[0]<=s&&l.splice(0,1),l[l.length-1]>=c&&l.pop(),r=l.length+1,n=f!==void 0?ot(f,r):pe.get(e)===Wt?Ha(i,r):void 0):(l=ot($e(s,c),r+1).slice(1,-1),s instanceof Date&&(l=l.map(d=>new Date(d)))),pr(ln(o))<0&&l.reverse(),hc(e,t,{domain:l,range:n,reverse:u,unknown:a})}function hc(e,t,{domain:n=[0],unknown:r,scheme:i="rdylbu",interpolate:o,range:a=o!==void 0?ot(o,n.length+1):pe.get(e)===Wt?Ha(i,n.length+1):void 0,reverse:f}){n=ln(n);const u=pr(n);if(!isNaN(u)&&!c4(n,u))throw new Error(`the ${e} scale has a non-monotonic domain`);return f&&(a=Ao(a)),{type:"threshold",scale:Cp(u<0?Ao(n):n,a===void 0?[]:a).unknown(r),domain:n,range:a}}function c4(e,t){for(let n=1,r=e.length,i=e[0];n<r;++n){const o=vi(i,i=e[n]);if(o!==0&&o!==t)return!1}return!0}function l4(e){return{type:"identity",scale:$x(pe.get(e))?wp():t=>t}}function gi(e,t=Ig){return e.length?[Bt(e,({value:n})=>n===void 0?n:Bt(n,t)),rt(e,({value:n})=>n===void 0?n:rt(n,t))]:[0,1]}function v1(e,t){const n=pe.get(e);return(n===Oi||n===Fi||n===Pi?d4:gi)(t)}function d4(e){return[0,e.length?rt(e,({value:t})=>t===void 0?t:rt(t,Ig)):1]}function h4(e,t){const n=e.find(({radius:a})=>a!==void 0);if(n!==void 0)return[0,n.radius];const r=ir(e,.5,({value:a})=>a===void 0?NaN:ir(a,.25,Ys)),i=t.map(a=>3*Math.sqrt(a/r)),o=30/rt(i);return o<1?i.map(a=>a*o):i}function p4(e,t){const n=gu(e,({value:o})=>o===void 0?NaN:gu(o,Math.abs)),r=t.map(o=>12*o/n),i=60/rt(r);return i<1?r.map(o=>o*i):r}function m4(e){for(const{value:t}of e)if(t!==void 0)for(let n of t){if(n>0)return gi(e,Ys);if(n<0)return gi(e,Dg)}return[1,10]}function g4(e){const t=[];for(const{value:n}of e)if(n!==void 0)for(const r of n)t.push(r);return t}function pc(e){return(t,n)=>r=>e(t+r*(n-t))}let rs=0,is;function b4(){const e=rs;return rs=0,is=void 0,e}function an(e){e!==is&&(is=e,console.warn(e),++rs)}function Ya(e,t,n,r,{type:i,nice:o,clamp:a,domain:f=gi(r),unknown:u,pivot:s=0,scheme:c,range:l,symmetric:d=!0,interpolate:h=pe.get(e)===Wt?c==null&&l!==void 0?In:dc(c!==void 0?c:"rdbu"):$e,reverse:p}){s=+s,f=ln(f);let[g,m]=f;if(f.length>2&&an(`Warning: the diverging ${e} scale domain contains extra elements.`),vi(g,m)<0&&([g,m]=[m,g],p=!p),g=Math.min(g,s),m=Math.max(m,s),typeof h!="function"&&(h=b1(h)),l!==void 0&&(h=h.length===1?pc(h)(...l):xa(h,l)),p&&(h=g1(h)),d){const y=n.apply(s),b=y-n.apply(g),w=n.apply(m)-y;b<w?g=n.invert(y-w):b>w&&(m=n.invert(y+b))}return t.domain([g,s,m]).unknown(u).interpolator(h),a&&t.clamp(a),o&&t.nice(o),{type:i,domain:[g,m],pivot:s,interpolate:h,scale:t}}function y4(e,t,n){return Ya(e,Hp(),x4,t,n)}function v4(e,t,n){return w1(e,t,{...n,exponent:.5})}function w1(e,t,{exponent:n=1,...r}){return Ya(e,Wp().exponent(n=+n),M4(n),t,{...r,type:"diverging-pow"})}function w4(e,t,{base:n=10,pivot:r=1,domain:i=gi(t,r<0?Dg:Ys),...o}){return Ya(e,Yp().base(n=+n),T4,t,{domain:i,pivot:r,...o})}function _4(e,t,{constant:n=1,...r}){return Ya(e,Gp().constant(n=+n),$4(n),t,r)}const x4={apply(e){return e},invert(e){return e}},T4={apply:Math.log,invert:Math.exp},S4={apply(e){return Math.sign(e)*Math.sqrt(Math.abs(e))},invert(e){return Math.sign(e)*(e*e)}};function M4(e){return e===.5?S4:{apply(t){return Math.sign(t)*Math.pow(Math.abs(t),e)},invert(t){return Math.sign(t)*Math.pow(Math.abs(t),1/e)}}}function $4(e){return{apply(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))},invert(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}}function _1(e,t,n,r){return ji(e,t,n,r)}function E4(e,t,n){return _1(e,r8(),t,n)}function A4(e,t,n){return _1(e,i8(),t,n)}const zi=Symbol("ordinal");function x1(e,t,n,{type:r,interval:i,domain:o,range:a,reverse:f,hint:u}){return i=Mr(i,r),o===void 0&&(o=S1(n,i,e)),(r==="categorical"||r===zi)&&(r="ordinal"),f&&(o=Ao(o)),o=t.domain(o).domain(),a!==void 0&&(typeof a=="function"&&(a=a(o)),t.range(a)),{type:r,domain:o,range:a,scale:t,hint:u,interval:i}}function C4(e,t,{type:n,interval:r,domain:i,range:o,scheme:a,unknown:f,...u}){r=Mr(r,n),i===void 0&&(i=S1(t,r,e));let s;if(pe.get(e)===Ba)s=L4(t),o=o===void 0?I4(s):me(o,ac);else if(pe.get(e)===Wt&&(o===void 0&&(n==="ordinal"||n===zi)&&(o=e4(i,a),o!==void 0&&(a=void 0)),a===void 0&&o===void 0&&(a=n==="ordinal"?"turbo":"observable10"),a!==void 0))if(o!==void 0){const c=dc(a),l=o[0],d=o[1]-o[0];o=({length:h})=>ot(p=>c(l+d*p),h)}else o=m1(a);if(f===Gu)throw new Error(`implicit unknown on ${e} scale is not supported`);return x1(e,Is().unknown(f),t,{...u,type:n,domain:i,range:o,hint:s})}function k4(e,t,{align:n=.5,padding:r=.5,...i}){return T1(F3().align(n).padding(r),t,i,e)}function N4(e,t,{align:n=.5,padding:r=.1,paddingInner:i=r,paddingOuter:o=e==="fx"||e==="fy"?0:r,...a}){return T1(Ca().align(n).paddingInner(i).paddingOuter(o),t,a,e)}function T1(e,t,n,r){let{round:i}=n;return i!==void 0&&e.round(i=!!i),e=x1(r,e,t,n),e.round=i,e}function S1(e,t,n){const r=new ga;for(const{value:i,domain:o}of e){if(o!==void 0)return o();if(i!==void 0)for(const a of i)r.add(a)}if(t!==void 0){const[i,o]=Ge(r).map(t.floor,t);return t.range(i,t.offset(o))}if(r.size>1e4&&pe.get(n)===vt)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return So(r,ut)}function Md(e,t){let n;for(const{hint:r}of e){const i=r==null?void 0:r[t];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}function L4(e){return{fill:Md(e,"fill"),stroke:Md(e,"stroke")}}function I4(e){return Ee(e.fill)?C8:A8}function os(e,{label:t,inset:n=0,insetTop:r=n,insetRight:i=n,insetBottom:o=n,insetLeft:a=n,round:f,nice:u,clamp:s,zero:c,align:l,padding:d,projection:h,facet:{label:p=t}={},...g}={}){const m={};for(const[y,b]of e){const w=g[y],v=P4(y,b,{round:pe.get(y)===vt?f:void 0,nice:u,clamp:s,zero:c,align:l,padding:d,projection:h,...w});if(v){let{label:T=y==="fx"||y==="fy"?p:t,percent:_,transform:E,inset:C,insetTop:k=C!==void 0?C:y==="y"?r:0,insetRight:R=C!==void 0?C:y==="x"?i:0,insetBottom:$=C!==void 0?C:y==="y"?o:0,insetLeft:S=C!==void 0?C:y==="x"?a:0}=w||{};if(E==null)E=void 0;else if(typeof E!="function")throw new Error("invalid scale transform; not a function");v.percent=!!_,v.label=T===void 0?R4(b,v):T,v.transform=E,y==="x"||y==="fx"?(v.insetLeft=+S,v.insetRight=+R):(y==="y"||y==="fy")&&(v.insetTop=+k,v.insetBottom=+$),m[y]=v}}return m}function $d(e){const t={},n={scales:t};for(const[r,i]of Object.entries(e)){const{scale:o,type:a,interval:f,label:u}=i;t[r]=B4(i),n[r]=o,o.type=a,f!=null&&(o.interval=f),u!=null&&(o.label=u)}return n}function D4(e,t){const{x:n,y:r,fx:i,fy:o}=e,a=i||o?mc(t):t;i&&Ed(i,a),o&&Ad(o,a);const f=i||o?$1(e,t):t;n&&Ed(n,f),r&&Ad(r,f)}function R4(e=[],t){let n;for(const{label:r}of e)if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}if(n!==void 0)return!Bn(t)&&t.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function M1(e){return Math.sign(pr(e.domain()))*Math.sign(pr(e.range()))}function mc(e){const{marginTop:t,marginRight:n,marginBottom:r,marginLeft:i,width:o,height:a,facet:{marginTop:f,marginRight:u,marginBottom:s,marginLeft:c}}=e;return{marginTop:Math.max(t,f),marginRight:Math.max(n,u),marginBottom:Math.max(r,s),marginLeft:Math.max(i,c),width:o,height:a}}function $1({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:o,marginLeft:a,width:f,height:u}=mc(n);return{marginTop:r,marginRight:i,marginBottom:o,marginLeft:a,width:e?e.scale.bandwidth()+a+i:f,height:t?t.scale.bandwidth()+r+o:u,facet:{width:f,height:u}}}function Ed(e,t){if(e.range===void 0){const{insetLeft:n,insetRight:r}=e,{width:i,marginLeft:o=0,marginRight:a=0}=t,f=o+n,u=i-a-r;e.range=[f,Math.max(f,u)],Bn(e)||(e.range=A1(e)),e.scale.range(e.range)}E1(e)}function Ad(e,t){if(e.range===void 0){const{insetTop:n,insetBottom:r}=e,{height:i,marginTop:o=0,marginBottom:a=0}=t,f=o+n,u=i-a-r;e.range=[Math.max(f,u),f],Bn(e)?e.range.reverse():e.range=A1(e),e.scale.range(e.range)}E1(e)}function E1(e){e.round===void 0&&q4(e)&&O4(e)<=30&&e.scale.round(!0)}function O4({scale:e}){const t=e.domain().length,[n,r]=e.range(),i=e.paddingInner?e.paddingInner():1,o=e.paddingOuter?e.paddingOuter():e.padding(),a=t-i,f=Math.abs(r-n)/Math.max(1,a+o*2);return(f-Math.floor(f))*a}function A1(e){const t=e.scale.domain().length+C1(e);if(!(t>2))return e.range;const[n,r]=e.range;return Array.from({length:t},(i,o)=>n+o/(t-1)*(r-n))}function P4(e,t=[],n={}){const r=F4(e,t,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&e!=="fx"&&e!=="fy"&&Bn({type:r})){const i=t.map(({value:o})=>o).filter(o=>o!==void 0);i.some(Fe)?an(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${Xn(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${Xn(r)}".`):i.some(gx)?an(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${Xn(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${Xn(r)}".`):i.some(bx)&&an(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${Xn(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${Xn(r)}".`)}switch(n.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=no(t,n,mr);break;case"identity":switch(pe.get(e)){case vt:n=no(t,n,mr);break;case Ba:n=no(t,n,j4);break}break;case"utc":case"time":n=no(t,n,Hg);break}switch(r){case"diverging":return y4(e,t,n);case"diverging-sqrt":return v4(e,t,n);case"diverging-pow":return w1(e,t,n);case"diverging-log":return w4(e,t,n);case"diverging-symlog":return _4(e,t,n);case"categorical":case"ordinal":case zi:return C4(e,t,n);case"cyclical":case"sequential":case"linear":return i4(e,t,n);case"sqrt":return o4(e,t,n);case"threshold":return hc(e,t,n);case"quantile":return u4(e,t,n);case"quantize":return s4(e,t,n);case"pow":return y1(e,t,n);case"log":return a4(e,t,n);case"symlog":return f4(e,t,n);case"utc":return A4(e,t,n);case"time":return E4(e,t,n);case"point":return k4(e,t,n);case"band":return N4(e,t,n);case"identity":return l4(e);case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function Xn(e){return typeof e=="symbol"?e.description:e}function Cd(e){return typeof e=="string"?`${e}`.toLowerCase():e}const kd={toString:()=>"projection"};function F4(e,t,{type:n,domain:r,range:i,scheme:o,pivot:a,projection:f}){if(n=Cd(n),e==="fx"||e==="fy")return"band";(e==="x"||e==="y")&&f!=null&&(n=kd);for(const s of t){const c=Cd(s.type);if(c!==void 0){if(n===void 0)n=c;else if(n!==c)throw new Error(`scale incompatible with channel: ${n} !== ${c}`)}}if(n===kd)return;if(n!==void 0)return n;if(r===void 0&&!t.some(({value:s})=>s!==void 0))return;const u=pe.get(e);if(u===Oi)return"sqrt";if(u===Fi||u===Pi)return"linear";if(u===Ba)return"ordinal";if((r||i||[]).length>2)return Bf(u);if(r!==void 0){if(md(r))return Bf(u);if(Fe(r))return"utc"}else{const s=t.map(({value:c})=>c).filter(c=>c!==void 0);if(s.some(md))return Bf(u);if(s.some(Fe))return"utc"}if(u===Wt){if(a!=null||n4(o))return"diverging";if(Jx(o))return"categorical"}return"linear"}function Bf(e){switch(e){case vt:return"point";case Wt:return zi;default:return"ordinal"}}function Bn({type:e}){return e==="ordinal"||e==="point"||e==="band"||e===zi}function C1({type:e}){return e==="threshold"}function q4({type:e}){return e==="point"||e==="band"}function vr(e){if(e===void 0)return!0;const t=e.domain(),n=e(t[0]);for(let r=1,i=t.length;r<i;++r)if(e(t[r])-n)return!1;return!0}function no(e,{domain:t,...n},r){var i;for(const o of e)o.value!==void 0&&(t===void 0&&(t=(i=o.value)==null?void 0:i.domain),o.value=r(o.value));return{domain:t===void 0?t:r(t),...n}}function j4(e){return me(e,ac)}function z4(e){return t=>{if(!pe.has(t=`${t}`))throw new Error(`unknown scale: ${t}`);return e[t]}}function B4({scale:e,type:t,domain:n,range:r,interpolate:i,interval:o,transform:a,percent:f,pivot:u}){if(t==="identity")return{type:"identity",apply:c=>c,invert:c=>c};const s=e.unknown?e.unknown():void 0;return{type:t,domain:di(n),...r!==void 0&&{range:di(r)},...a!==void 0&&{transform:a},...f&&{percent:f},...s!==void 0&&{unknown:s},...o!==void 0&&{interval:o},...i!==void 0&&{interpolate:i},...e.clamp&&{clamp:e.clamp()},...u!==void 0&&{pivot:u,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:c=>e(c),...e.invert&&{invert:c=>e.invert(c)}}}function U4(e,t){const{fx:n,fy:r}=os(e,t),i=n==null?void 0:n.scale.domain(),o=r==null?void 0:r.scale.domain();return i&&o?I2(i,o).map(([a,f],u)=>({x:a,y:f,i:u})):i?i.map((a,f)=>({x:a,i:f})):o?o.map((a,f)=>({y:a,i:f})):void 0}function H4(e,{x:t,y:n}){return t&&(t=as(t)),n&&(n=as(n)),e.filter(t&&n?r=>t.has(r.x)&&n.has(r.y):t?r=>t.has(r.x):r=>n.has(r.y)).sort(t&&n?(r,i)=>t.get(r.x)-t.get(i.x)||n.get(r.y)-n.get(i.y):t?(r,i)=>t.get(r.x)-t.get(i.x):(r,i)=>n.get(r.y)-n.get(i.y))}function gc(e,{fx:t,fy:n}){const r=Gt(e),i=t==null?void 0:t.value,o=n==null?void 0:n.value;return t&&n?Jn(r,a=>(a.fx=i[a[0]],a.fy=o[a[0]],a),a=>i[a],a=>o[a]):t?Jn(r,a=>(a.fx=i[a[0]],a),a=>i[a]):Jn(r,a=>(a.fy=o[a[0]],a),a=>o[a])}function Y4(e,t,{marginTop:n,marginLeft:r}){return e&&t?({x:i,y:o})=>`translate(${e(i)-r},${t(o)-n})`:e?({x:i})=>`translate(${e(i)-r},0)`:({y:i})=>`translate(0,${t(i)-n})`}function G4(e){const t=[],n=new Uint32Array(fn(e,r=>r.length));for(const r of e){let i=0;for(const o of e)r!==o&&(n.set(o,i),i+=o.length);t.push(n.slice(0,i))}return t}const W4=new Map([["top",Uf],["right",Gf],["bottom",Hf],["left",Yf],["top-left",ro(Uf,Yf)],["top-right",ro(Uf,Gf)],["bottom-left",ro(Hf,Yf)],["bottom-right",ro(Hf,Gf)],["top-empty",K4],["right-empty",J4],["bottom-empty",Z4],["left-empty",Q4],["empty",e7]]);function X4(e){if(e==null)return null;const t=W4.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid facet anchor: ${e}`)}const Nd=new WeakMap;function as(e){let t=Nd.get(e);return t||Nd.set(e,t=new kn(me(e,(n,r)=>[n,r]))),t}function yn(e,t){return as(e).get(t)}function V4(e,t,n){return t=zt(t),n=zt(n),e.find(r=>Object.is(zt(r.x),t)&&Object.is(zt(r.y),n))}function Ga(e,t,n){var r;return(r=V4(e,t,n))==null?void 0:r.empty}function Uf(e,{y:t},{y:n}){return t?yn(t,n)===0:!0}function Hf(e,{y:t},{y:n}){return t?yn(t,n)===t.length-1:!0}function Yf(e,{x:t},{x:n}){return t?yn(t,n)===0:!0}function Gf(e,{x:t},{x:n}){return t?yn(t,n)===t.length-1:!0}function K4(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const o=yn(t,r);if(o>0)return Ga(e,n,t[o-1])}function Z4(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const o=yn(t,r);if(o<t.length-1)return Ga(e,n,t[o+1])}function Q4(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const o=yn(t,n);if(o>0)return Ga(e,t[o-1],r)}function J4(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const o=yn(t,n);if(o<t.length-1)return Ga(e,t[o+1],r)}function e7(e,t,{empty:n}){return n}function ro(e,t){return function(){return e.apply(null,arguments)&&t.apply(null,arguments)}}function Wf(e,{channels:{fx:t,fy:n},groups:r}){return t&&n?e.map(({x:i,y:o})=>{var a;return((a=r.get(i))==null?void 0:a.get(o))??[]}):t?e.map(({x:i})=>r.get(i)??[]):e.map(({y:i})=>r.get(i)??[])}const k1=Math.PI,Lt=2*k1,Xf=.618;function t7({projection:e,inset:t=0,insetTop:n=t,insetRight:r=t,insetBottom:i=t,insetLeft:o=t}={},a){if(e==null)return;if(typeof e.stream=="function")return e;let f,u,s="frame";if(mn(e)){let T;if({type:e,domain:u,inset:T,insetTop:n=T!==void 0?T:n,insetRight:r=T!==void 0?T:r,insetBottom:i=T!==void 0?T:i,insetLeft:o=T!==void 0?T:o,clip:s=s,...f}=e,e==null)return}typeof e!="function"&&({type:e}=fs(e));const{width:c,height:l,marginLeft:d,marginRight:h,marginTop:p,marginBottom:g}=a,m=c-d-h-o-r,y=l-p-g-n-i;if(e=e==null?void 0:e({width:m,height:y,clip:s,...f}),e==null)return;s=n7(s,d,p,c-h,l-g);let b=d+o,w=p+n,v;if(u!=null){const[[T,_],[E,C]]=Ma(e).bounds(u),k=Math.min(m/(E-T),y/(C-_));k>0?(b-=(k*(T+E)-m)/2,w-=(k*(_+C)-y)/2,v=Hu({point(R,$){this.stream.point(R*k+b,$*k+w)}})):an("Warning: the projection could not be fit to the specified domain; using the default scale.")}return v??(v=b===0&&w===0?N1():Hu({point(T,_){this.stream.point(T+b,_+w)}})),{stream:T=>e.stream(v.stream(s(T)))}}function fs(e){switch(`${e}`.toLowerCase()){case"albers-usa":return et(T3,.7463,.4673);case"albers":return io(up,.7463,.4673);case"azimuthal-equal-area":return et(S3,4,4);case"azimuthal-equidistant":return et(M3,Lt,Lt);case"conic-conformal":return io(A3,Lt,Lt);case"conic-equal-area":return io(Yo,6.1702,2.9781);case"conic-equidistant":return io(N3,7.312,3.6282);case"equal-earth":return et(I3,5.4133,2.6347);case"equirectangular":return et(C3,Lt,k1);case"gnomonic":return et(D3,3.4641,3.4641);case"identity":return{type:N1};case"reflect-y":return{type:r7};case"mercator":return et($3,Lt,Lt);case"orthographic":return et(R3,2,2);case"stereographic":return et(O3,2,2);case"transverse-mercator":return et(P3,Lt,Lt);default:throw new Error(`unknown projection type: ${e}`)}}function n7(e,t,n,r,i){if(e===!1||e==null||typeof e=="number")return o=>o;switch(e===!0&&(e="frame"),`${e}`.toLowerCase()){case"frame":return G0(t,n,r,i);default:throw new Error(`unknown projection clip type: ${e}`)}}function et(e,t,n){return{type:({width:r,height:i,rotate:o,precision:a=.15,clip:f})=>{var s,c,l;const u=e();return a!=null&&((s=u.precision)==null||s.call(u,a)),o!=null&&((c=u.rotate)==null||c.call(u,o)),typeof f=="number"&&((l=u.clipAngle)==null||l.call(u,f)),r!=null&&(u.scale(Math.min(r/t,i/n)),u.translate([r/2,i/2])),u},aspectRatio:n/t}}function io(e,t,n){const{type:r,aspectRatio:i}=et(e,t,n);return{type:o=>{const{parallels:a,domain:f,width:u,height:s}=o,c=r(o);return a!=null&&(c.parallels(a),f===void 0&&u!=null&&c.fitSize([u,s],{type:"Sphere"})),c},aspectRatio:i}}const N1=jt({stream:e=>e}),r7=jt(Hu({point(e,t){this.stream.point(e,-t)}}));function i7(e,t,n,r){const i=n[e],o=n[t],a=i.length,f=n[e]=new Float64Array(a).fill(NaN),u=n[t]=new Float64Array(a).fill(NaN);let s;const c=r.stream({point(l,d){f[s]=l,u[s]=d}});for(s=0;s<a;++s)c.point(i[s],o[s])}function o7({projection:e}={}){return e==null?!1:typeof e.stream=="function"?!0:(mn(e)&&(e=e.type),e!=null)}function a7(e){if(typeof(e==null?void 0:e.stream)=="function")return Xf;if(mn(e)){let t,n;if({domain:t,type:e,...n}=e,t!=null&&e!=null){const r=typeof e=="string"?fs(e).type:e,[[i,o],[a,f]]=Ma(r({...n,width:100,height:100})).bounds(t),u=(f-o)/(a-i);return u&&isFinite(u)?u<.2?.2:u>5?5:u:Xf}}if(e!=null){if(typeof e!="function"){const{aspectRatio:t}=fs(e);if(t)return t}return Xf}}function f7(e){const t=[],n=[],r={scale:"x",value:t},i={scale:"y",value:n},o={point(a,f){t.push(a),n.push(f)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const a of e.value)Sn(a,o);return[r,i]}function bc(e={}){const{document:t=typeof window<"u"?window.document:void 0,clip:n}=e;return{document:t,clip:Zg(n)}}function Te(e,{document:t}){return er(va(e).call(t.documentElement))}const us=Symbol("unset");function yc(e){return(e.length===1?u7:s7)(e)}function u7(e){let t,n=us;return r=>(Object.is(n,r)||(n=r,t=e(r)),t)}function s7(e){let t,n;return(...r)=>(((n==null?void 0:n.length)!==r.length||n.some((i,o)=>!Object.is(i,r[o])))&&(n=r,t=e(...r)),t)}const c7=yc(e=>new Intl.NumberFormat(e));yc((e,t)=>new Intl.DateTimeFormat(e,{timeZone:"UTC",...t&&{month:t}}));yc((e,t)=>new Intl.DateTimeFormat(e,{timeZone:"UTC",...t&&{weekday:t}}));function l7(e="en-US"){const t=c7(e);return n=>n!=null&&!isNaN(n)?t.format(n):void 0}function d7(e){return W8(e,"Invalid Date")}function h7(e="en-US"){const t=l7(e);return n=>(n instanceof Date?d7:typeof n=="number"?t:Ie)(n)}const wr=h7(),je=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let p7=0;function L1(){return`plot-clip-${++p7}`}function m7(e,{title:t,href:n,ariaLabel:r,ariaDescription:i,ariaHidden:o,target:a,fill:f,fillOpacity:u,stroke:s,strokeWidth:c,strokeOpacity:l,strokeLinejoin:d,strokeLinecap:h,strokeMiterlimit:p,strokeDasharray:g,strokeDashoffset:m,opacity:y,mixBlendMode:b,imageFilter:w,paintOrder:v,pointerEvents:T,shapeRendering:_,channels:E},{ariaLabel:C,fill:k="currentColor",fillOpacity:R,stroke:$="none",strokeOpacity:S,strokeWidth:x,strokeLinecap:A,strokeLinejoin:M,strokeMiterlimit:N,paintOrder:L}){k===null&&(f=null,u=null),$===null&&(s=null,l=null),Ee(k)?!Ee($)&&(!Ee(f)||E!=null&&E.fill)&&($="none"):Ee($)&&(!Ee(s)||E!=null&&E.stroke)&&(k="none");const[z,H]=Qe(f,k),[O,q]=qe(u,R),[P,F]=Qe(s,$),[K,Z]=qe(l,S),[W,Y]=qe(y);pi(F)||(c===void 0&&(c=x),h===void 0&&(h=A),d===void 0&&(d=M),p===void 0&&!_x(d)&&(p=N),!pi(H)&&v===void 0&&(v=L));const[j,I]=qe(c);return k!==null&&(e.fill=Me(H,"currentColor"),e.fillOpacity=Dr(q,1)),$!==null&&(e.stroke=Me(F,"none"),e.strokeWidth=Dr(I,1),e.strokeOpacity=Dr(Z,1),e.strokeLinejoin=Me(d,"miter"),e.strokeLinecap=Me(h,"butt"),e.strokeMiterlimit=Dr(p,4),e.strokeDasharray=Me(g,"none"),e.strokeDashoffset=Me(m,"0")),e.target=Ie(a),e.ariaLabel=Ie(C),e.ariaDescription=Ie(i),e.ariaHidden=Ie(o),e.opacity=Dr(Y,1),e.mixBlendMode=Me(b,"normal"),e.imageFilter=Me(w,"none"),e.paintOrder=Me(v,"normal"),e.pointerEvents=Me(T,"auto"),e.shapeRendering=Me(_,"auto"),{title:{value:t,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:z,scale:"auto",optional:!0},fillOpacity:{value:O,scale:"auto",optional:!0},stroke:{value:P,scale:"auto",optional:!0},strokeOpacity:{value:K,scale:"auto",optional:!0},strokeWidth:{value:j,optional:!0},opacity:{value:W,scale:"auto",optional:!0}}}function g7(e,t){t&&e.filter(n=>Hs(t[n])).append("title").call(y7,t)}function b7(e,t){t&&e.filter(([n])=>Hs(t[n])).append("title").call(v7,t)}function y7(e,t){t&&e.text(n=>wr(t[n]))}function v7(e,t){t&&e.text(([n])=>wr(t[n]))}function Fn(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:o,fillOpacity:a,stroke:f,strokeOpacity:u,strokeWidth:s,opacity:c,href:l}){r&&Q(e,"aria-label",d=>r[d]),o&&Q(e,"fill",d=>o[d]),a&&Q(e,"fill-opacity",d=>a[d]),f&&Q(e,"stroke",d=>f[d]),u&&Q(e,"stroke-opacity",d=>u[d]),s&&Q(e,"stroke-width",d=>s[d]),c&&Q(e,"opacity",d=>c[d]),l&&O1(e,d=>l[d],t),n||g7(e,i)}function I1(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:o,fillOpacity:a,stroke:f,strokeOpacity:u,strokeWidth:s,opacity:c,href:l}){r&&Q(e,"aria-label",([d])=>r[d]),o&&Q(e,"fill",([d])=>o[d]),a&&Q(e,"fill-opacity",([d])=>a[d]),f&&Q(e,"stroke",([d])=>f[d]),u&&Q(e,"stroke-opacity",([d])=>u[d]),s&&Q(e,"stroke-width",([d])=>s[d]),c&&Q(e,"opacity",([d])=>c[d]),l&&O1(e,([d])=>l[d],t),n||b7(e,i)}function w7({ariaLabel:e,title:t,fill:n,fillOpacity:r,stroke:i,strokeOpacity:o,strokeWidth:a,opacity:f,href:u},{tip:s}){return[e,s?void 0:t,n,r,i,o,a,f,u].filter(c=>c!==void 0)}function _7(e,t,n){const r=ba(e,i=>t[i]);return n===void 0&&r.size>1+e.length>>1&&an("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),r.values()}function*D1(e,t,n,r){const{z:i}=n,{z:o}=r,a=w7(r,n),f=[...t,...a];for(const u of o?_7(e,o,i):[e]){let s,c;e:for(const l of u){for(const d of f)if(!cn(d[l])){c&&c.push(-1);continue e}if(s===void 0){c&&(yield c),s=a.map(d=>zt(d[l])),c=[l];continue}c.push(l);for(let d=0;d<a.length;++d)if(zt(a[d][l])!==s[d]){yield c,s=a.map(p=>zt(p[l])),c=[l];continue e}}c&&(yield c)}}function x7(e,t,n,r){let i;const{clip:o=r.clip}=t;switch(o){case"frame":{e=Te("svg:g",r).each(function(){this.appendChild(e.node()),e.node=()=>this}),i=T7(r,n);break}case"sphere":{i=S7(r);break}}Q(e,"aria-label",t.ariaLabel),Q(e,"aria-description",t.ariaDescription),Q(e,"aria-hidden",t.ariaHidden),Q(e,"clip-path",i)}function R1(e){const t=new WeakMap;return(n,r)=>{let i=t.get(n);if(!i){const o=L1();er(n.ownerSVGElement).append("clipPath").attr("id",o).call(e,n,r),t.set(n,i=`url(#${o})`)}return i}}const T7=R1((e,t,n)=>{const{width:r,height:i,marginLeft:o,marginRight:a,marginTop:f,marginBottom:u}=n;e.append("rect").attr("x",o).attr("y",f).attr("width",r-a-o).attr("height",i-f-u)}),S7=R1((e,t)=>{const{projection:n}=t;if(!n)throw new Error('the "sphere" clip option requires a projection');e.append("path").attr("d",Ma(n)({type:"Sphere"}))});function Xt(e,t,n,r){x7(e,t,n,r),Q(e,"class",t.className),Q(e,"fill",t.fill),Q(e,"fill-opacity",t.fillOpacity),Q(e,"stroke",t.stroke),Q(e,"stroke-width",t.strokeWidth),Q(e,"stroke-opacity",t.strokeOpacity),Q(e,"stroke-linejoin",t.strokeLinejoin),Q(e,"stroke-linecap",t.strokeLinecap),Q(e,"stroke-miterlimit",t.strokeMiterlimit),Q(e,"stroke-dasharray",t.strokeDasharray),Q(e,"stroke-dashoffset",t.strokeDashoffset),Q(e,"shape-rendering",t.shapeRendering),Q(e,"filter",t.imageFilter),Q(e,"paint-order",t.paintOrder);const{pointerEvents:i=r.pointerSticky===!1?"none":void 0}=t;Q(e,"pointer-events",i)}function Mt(e,t){M7(e,"mix-blend-mode",t.mixBlendMode),Q(e,"opacity",t.opacity)}function O1(e,t,n){e.each(function(r){const i=t(r);if(i!=null){const o=this.ownerDocument.createElementNS(or.svg,"a");o.setAttribute("fill","inherit"),o.setAttributeNS(or.xlink,"href",i),n!=null&&o.setAttribute("target",n),this.parentNode.insertBefore(o,this).appendChild(this)}})}function Q(e,t,n){n!=null&&e.attr(t,n)}function M7(e,t,n){n!=null&&e.style(t,n)}function Vt(e,t,{x:n,y:r},i=je,o=je){i+=t.dx,o+=t.dy,n!=null&&n.bandwidth&&(i+=n.bandwidth()/2),r!=null&&r.bandwidth&&(o+=r.bandwidth()/2),(i||o)&&e.attr("transform",`translate(${i},${o})`)}function Me(e,t){if((e=Ie(e))!==t)return e}function Dr(e,t){if((e=Ce(e))!==t)return e}const $7=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function Wa(e){if(e===void 0)return"plot-d6a7b5";if(e=`${e}`,!$7.test(e))throw new Error(`invalid class name: ${e}`);return e}function vc(e,t){if(typeof t=="string")e.property("style",t);else if(t!=null)for(const n of e)Object.assign(n.style,t)}function Xa({frameAnchor:e},{width:t,height:n,marginTop:r,marginRight:i,marginBottom:o,marginLeft:a}){return[/left$/.test(e)?a:/right$/.test(e)?t-i:(a+t-i)/2,/^top/.test(e)?r:/^bottom/.test(e)?n-o:(r+n-o)/2]}class Je{constructor(t,n={},r={},i){const{facet:o="auto",facetAnchor:a,fx:f,fy:u,sort:s,dx:c=0,dy:l=0,margin:d=0,marginTop:h=d,marginRight:p=d,marginBottom:g=d,marginLeft:m=d,className:y,clip:b=i==null?void 0:i.clip,channels:w,tip:v,render:T}=r;if(this.data=t,this.sort=br(s)?s:null,this.initializer=yr(r).initializer,this.transform=this.initializer?r.transform:qi(r).transform,o===null||o===!1?this.facet=null:(this.facet=ct(o===!0?"include":o,"facet",["auto","include","exclude","super"]),this.fx=t===xo&&typeof f=="string"?[f]:f,this.fy=t===xo&&typeof u=="string"?[u]:u),this.facetAnchor=X4(a),n=Kg(n),w!==void 0&&(n={...E7(w),...n}),i!==void 0&&(n={...m7(this,r,i),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([_,E])=>{if(ja(E.value)){const{value:C,label:k=E.label,scale:R=E.scale}=E.value;E={...E,label:k,scale:R,value:C}}if(t===xo&&typeof E.value=="string"){const{value:C}=E;E={...E,value:[C]}}return[_,E]}).filter(([_,{value:E,optional:C}])=>{if(E!=null)return!0;if(C)return!1;throw new Error(`missing channel value: ${_}`)})),this.dx=+c,this.dy=+l,this.marginTop=+h,this.marginRight=+p,this.marginBottom=+g,this.marginLeft=+m,this.clip=Zg(b),this.tip=A7(v),this.className=y?Wa(y):null,this.facet==="super"){if(f||u)throw new Error("super-faceting cannot use fx or fy");for(const _ in this.channels){const{scale:E}=n[_];if(!(E!=="x"&&E!=="y"))throw new Error("super-faceting cannot use x or y")}}T!=null&&(this.render=ua(T,this.render))}initialize(t,n,r){let i=gr(this.data);t===void 0&&i!=null&&(t=[Gt(i)]);const o=t;this.transform!=null&&({facets:t,data:i}=this.transform(i,t,r),i=gr(i)),t!==void 0&&(t.original=o);const a=Wx(this.channels,i);return this.sort!=null&&Vx(i,t,a,n,this.sort),{data:i,facets:t,channels:a}}filter(t,n,r){for(const i in n){const{filter:o=cn}=n[i];if(o!==null){const a=r[i];t=t.filter(f=>o(a[f]))}}return t}project(t,n,r){for(const i in t)if(t[i].scale==="x"&&/^x|x$/.test(i)){const o=i.replace(/^x|x$/,"y");o in t&&t[o].scale==="y"&&i7(i,o,n,r.projection)}}scale(t,n,r){const i=Xx(t,n);return r.projection&&this.project(t,i,r),i}}function Un(...e){return e.plot=Je.prototype.plot,e}function ua(e,t){if(e==null)return t===null?void 0:t;if(t==null)return e===null?void 0:e;if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);return function(n,r,i,o,a,f){return e.call(this,n,r,i,o,a,(u,s,c,l,d)=>t.call(this,u,s,c,l,d,f))}}function E7(e){return Object.fromEntries(Object.entries(Kg(e)).map(([t,n])=>(n=typeof n=="string"?{value:n,label:t}:$r(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[t,n])))}function A7(e){return e===!0?"xy":e===!1||e==null?null:typeof e=="string"?ct(e,"tip",["x","y","xy"]):e}function Bi(e,t){return(e==null?void 0:e.tip)===!0?{...e,tip:t}:mn(e==null?void 0:e.tip)&&e.tip.pointer===void 0?{...e,tip:{...e.tip,pointer:t}}:e}function C7(e,t,n={}){let r=.5-je,i=.5+je,o=.5+je,a=.5-je;for(const{marginTop:g,marginRight:m,marginBottom:y,marginLeft:b}of t)g>r&&(r=g),m>i&&(i=m),y>o&&(o=y),b>a&&(a=b);let{margin:f,marginTop:u=f!==void 0?f:r,marginRight:s=f!==void 0?f:i,marginBottom:c=f!==void 0?f:o,marginLeft:l=f!==void 0?f:a}=n;u=+u,s=+s,c=+c,l=+l;let{width:d=640,height:h=k7(e,n,{width:d,marginTopDefault:r,marginRightDefault:i,marginBottomDefault:o,marginLeftDefault:a})+Math.max(0,u-r+c-o)}=n;d=+d,h=+h;const p={width:d,height:h,marginTop:u,marginRight:s,marginBottom:c,marginLeft:l};if(e.fx||e.fy){let{margin:g,marginTop:m=g!==void 0?g:u,marginRight:y=g!==void 0?g:s,marginBottom:b=g!==void 0?g:c,marginLeft:w=g!==void 0?g:l}=n.facet??{};m=+m,y=+y,b=+b,w=+w,p.facet={marginTop:m,marginRight:y,marginBottom:b,marginLeft:w}}return p}function k7({x:e,y:t,fy:n,fx:r},{projection:i,aspectRatio:o},{width:a,marginTopDefault:f,marginRightDefault:u,marginBottomDefault:s,marginLeftDefault:c}){const l=n&&n.scale.domain().length||1,d=a7(i);if(d){const p=r?r.scale.domain().length:1,g=(1.1*l-.1)/(1.1*p-.1)*d,m=Math.max(.1,Math.min(10,g));return Math.round((a-c-u)*m+f+s)}const h=t?Bn(t)?t.scale.domain().length||1:Math.max(7,17/l):1;if(o!=null){if(o=+o,!(isFinite(o)&&o>0))throw new Error(`invalid aspectRatio: ${o}`);const p=Ld("y",t)/(Ld("x",e)*o),g=r?r.scale.bandwidth():1,m=n?n.scale.bandwidth():1,y=g*(a-c-u)-e.insetLeft-e.insetRight;return(p*y+t.insetTop+t.insetBottom)/m+f+s}return!!(t||n)*Math.max(1,Math.min(60,h*l))*20+!!r*30+60}function Ld(e,t){if(!t)throw new Error(`aspectRatio requires ${e} scale`);const{type:n,domain:r}=t;let i;switch(n){case"linear":case"utc":case"time":i=Number;break;case"pow":{const f=t.scale.exponent();i=u=>Math.pow(u,f);break}case"log":i=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${e} scale for aspectRatio: ${n}`)}const[o,a]=Ge(r);return Math.abs(i(a)-i(o))}const Id=new WeakMap;function wc(e,t,{x:n,y:r,px:i,py:o,maxRadius:a=40,channels:f,render:u,...s}={}){return a=+a,i!=null&&(n??(n=null),f={...f,px:{value:i,scale:"x"}}),o!=null&&(r??(r=null),f={...f,py:{value:o,scale:"y"}}),{x:n,y:r,channels:f,...s,render:ua(function(c,l,d,h,p,g){p={...p,pointerSticky:!1};const m=p.ownerSVGElement,{data:y}=p.getMarkState(this);let b=Id.get(m);b||Id.set(m,b={sticky:!1,roots:[],renders:[]});let w=b.renders.push(F)-1;const{x:v,y:T,fx:_,fy:E}=l;let C=_?_(c.fx)-h.marginLeft:0,k=E?E(c.fy)-h.marginTop:0;v!=null&&v.bandwidth&&(C+=v.bandwidth()/2),T!=null&&T.bandwidth&&(k+=T.bandwidth()/2);const R=c.fi!=null;let $;if(R){let Y=b.facetStates;Y||(b.facetStates=Y=new Map),$=Y.get(this),$||Y.set(this,$=new Map)}const[S,x]=Xa(this,h),{px:A,py:M}=d,N=A?Y=>A[Y]:P1(d,S),L=M?Y=>M[Y]:F1(d,x);let z,H,O,q;function P(Y,j){if(R)if(q&&(q=cancelAnimationFrame(q)),Y==null)$.delete(c.fi);else{$.set(c.fi,j),q=requestAnimationFrame(()=>{q=null;for(const[I,B]of $)if(B<j||B===j&&I<c.fi){Y=null;break}F(Y)});return}F(Y)}function F(Y){if(z===Y&&O===b.sticky)return;z=Y,O=p.pointerSticky=b.sticky;const j=z==null?[]:[z];R&&(j.fx=c.fx,j.fy=c.fy,j.fi=c.fi);const I=g(j,l,d,h,p);if(H){if(R){const B=H.parentNode,G=H.getAttribute("transform"),D=I.getAttribute("transform");G?I.setAttribute("transform",G):I.removeAttribute("transform"),D?B.setAttribute("transform",D):B.removeAttribute("transform"),I.removeAttribute("aria-label"),I.removeAttribute("aria-description"),I.removeAttribute("aria-hidden")}H.replaceWith(I)}if(b.roots[w]=H=I,!(z==null&&($==null?void 0:$.size)>1)){const B=z==null?null:pn(y)?y[z]:y.get(z);p.dispatchValue(B)}return I}function K(Y){if(b.sticky||Y.pointerType==="mouse"&&Y.buttons===1)return;let[j,I]=jw(Y);j-=C,I-=k;const B=j<h.marginLeft||j>h.width-h.marginRight?1:e,G=I<h.marginTop||I>h.height-h.marginBottom?1:t;let D=null,ie=a*a;for(const X of c){const oe=B*(N(X)-j),ae=G*(L(X)-I),ce=oe*oe+ae*ae;ce<=ie&&(D=X,ie=ce)}if(D!=null&&(e!==1||t!==1)){const X=N(D)-j,oe=L(D)-I;ie=X*X+oe*oe}P(D,ie)}function Z(Y){Y.pointerType==="mouse"&&z!=null&&(b.sticky&&b.roots.some(j=>j==null?void 0:j.contains(Y.target))||(b.sticky?(b.sticky=!1,b.renders.forEach(j=>j(null))):(b.sticky=!0,F(z)),Y.stopImmediatePropagation()))}function W(Y){Y.pointerType==="mouse"&&(b.sticky||P(null))}return m.addEventListener("pointerenter",K),m.addEventListener("pointermove",K),m.addEventListener("pointerdown",Z),m.addEventListener("pointerleave",W),F(null)},u)}}function N7(e){return wc(1,1,e)}function L7(e){return wc(1,.01,e)}function Dd(e){return wc(.01,1,e)}function P1({x1:e,x2:t,x:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function F1({y1:e,y2:t,y:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function q1(e){return Bn(e)&&e.interval===void 0?void 0:"tabular-nums"}function I7(e,t){let{label:n=e.label,tickSize:r=6,width:i=240,height:o=44+r,marginTop:a=18,marginRight:f=0,marginBottom:u=16+r,marginLeft:s=0,style:c,ticks:l=(i-s-f)/64,tickFormat:d,fontVariant:h=q1(e),round:p=!0,opacity:g,className:m}=t;const y=bc(t);m=Wa(m),g=qe(g)[1],d===null&&(d=()=>null);const b=Te("svg",y).attr("class",`${m}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",o).attr("viewBox",`0 0 ${i} ${o}`).call(S=>S.append("style").text(`:where(.${m}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${m}-ramp text) {
  white-space: pre;
}`)).call(vc,c);let w=S=>S.selectAll(".tick line").attr("y1",a+u-o),v;const T=p?(S,x)=>S.rangeRound(x):(S,x)=>S.range(x),{type:_,domain:E,range:C,interpolate:k,scale:R,pivot:$}=e;if(k){const S=C===void 0?k:xa(k.length===1?pc(k):k,C);v=T(R.copy(),ot($e(s,i-f),Math.min(E.length+($!==void 0),C===void 0?1/0:C.length)));const x=256,A=y.document.createElement("canvas");A.width=x,A.height=1;const M=A.getContext("2d");for(let N=0,L=x-1;N<x;++N)M.fillStyle=S(N/L),M.fillRect(N,0,1,1);b.append("image").attr("opacity",g).attr("x",s).attr("y",a).attr("width",i-s-f).attr("height",o-a-u).attr("preserveAspectRatio","none").attr("xlink:href",A.toDataURL())}else if(_==="threshold"){const S=E,x=d===void 0?A=>A:typeof d=="string"?Tr(d):d;v=T(Ds().domain([-1,C.length-1]),[s,i-f]),b.append("g").attr("fill-opacity",g).selectAll().data(C).enter().append("rect").attr("x",(A,M)=>v(M-1)).attr("y",a).attr("width",(A,M)=>v(M)-v(M-1)).attr("height",o-a-u).attr("fill",A=>A),l=me(S,(A,M)=>M),d=A=>x(S[A],A)}else v=T(Ca().domain(E),[s,i-f]),b.append("g").attr("fill-opacity",g).selectAll().data(E).enter().append("rect").attr("x",v).attr("y",a).attr("width",Math.max(0,v.bandwidth()-1)).attr("height",o-a-u).attr("fill",R),w=()=>{};return b.append("g").attr("transform",`translate(0,${o-u})`).call(rv(v).ticks(Array.isArray(l)?null:l,typeof d=="string"?d:void 0).tickFormat(typeof d=="function"?d:void 0).tickSize(r).tickValues(Array.isArray(l)?l:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",Me(h,"normal")).call(w).call(S=>S.select(".domain").remove()),n!==void 0&&b.append("text").attr("x",s).attr("y",a-6).attr("fill","currentColor").attr("font-weight","bold").text(n),b.node()}const j1=Math.PI/180;function _c(e,{marker:t,markerStart:n=t,markerMid:r=t,markerEnd:i=t}={}){e.markerStart=Vf(n),e.markerMid=Vf(r),e.markerEnd=Vf(i)}function Vf(e){if(e==null||e===!1)return null;if(e===!0)return Od;if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"none":return null;case"arrow":return Rd("auto");case"arrow-reverse":return Rd("auto-start-reverse");case"dot":return D7;case"circle":case"circle-fill":return Od;case"circle-stroke":return R7;case"tick":return Kf("auto");case"tick-x":return Kf(90);case"tick-y":return Kf(0)}throw new Error(`invalid marker: ${e}`)}function Rd(e){return(t,n)=>Te("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",e).attr("fill","none").attr("stroke",t).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(r=>r.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function D7(e,t){return Te("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function Od(e,t){return Te("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function R7(e,t){return Te("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",e).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function Kf(e){return(t,n)=>Te("svg:marker",n).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",e).attr("stroke",t).call(r=>r.append("path").attr("d","M0,-3v6")).node()}let O7=0;function z1(e,t,{stroke:n},r){return U1(e,t,n&&(i=>n[i]),null,r)}function P7(e,t,{stroke:n,z:r},i){return U1(e,t,n&&(([o])=>n[o]),r,i)}const ss=1,B1=2;function F7(e,t){const n=new Uint8Array(t.length),r=e.data().filter(o=>o.length>1),i=r.length;for(let o=0,a=us;o<i;++o){const f=r[o];if(f.length>1){const u=f[0];a!==(a=zt(t[u]))&&(n[u]|=ss)}}for(let o=i-1,a=us;o>=0;--o){const f=r[o];if(f.length>1){const u=f[0];a!==(a=zt(t[u]))&&(n[u]|=B1)}}return([o])=>n[o]}function U1(e,{markerStart:t,markerMid:n,markerEnd:r,stroke:i},o=()=>i,a,f){if(!t&&!n&&!r)return;const u=new Map,s=a&&F7(e,a);function c(l,d,h){return function(p){if(h&&!h(p))return;const g=o(p);let m=u.get(d);m||u.set(d,m=new Map);let y=m.get(g);if(!y){const b=this.parentNode.insertBefore(d(g,f),this),w=`plot-marker-${++O7}`;b.setAttribute("id",w),m.set(g,y=`url(#${w})`)}this.setAttribute(l,y)}}t&&e.each(c("marker-start",t,s&&(l=>s(l)&ss))),n&&s&&e.each(c("marker-start",n,l=>!(s(l)&ss))),n&&e.each(c("marker-mid",n)),r&&e.each(c("marker-end",r,s&&(l=>s(l)&B1)))}function Va({inset:e,insetLeft:t,insetRight:n,...r}={}){return[t,n]=Y1(e,t,n),{inset:e,insetLeft:t,insetRight:n,...r}}function H1({inset:e,insetTop:t,insetBottom:n,...r}={}){return[t,n]=Y1(e,t,n),{inset:e,insetTop:t,insetBottom:n,...r}}function Y1(e,t,n){return e===void 0&&t===void 0&&n===void 0?je?[1,0]:[.5,.5]:[t,n]}function G1(e,{interval:t}){return e={...$r(e)},e.interval=nc(e.interval===void 0?t:e.interval),e}function xc(e,t,n,r){const{[e]:i,[`${e}1`]:o,[`${e}2`]:a}=n,{value:f,interval:u}=G1(i,n);if(f==null||u==null&&!r)return n;const s=gn(i);if(u==null){let h;const p={transform:g=>h||(h=le(g,f)),label:s};return{...n,[e]:void 0,[`${e}1`]:o===void 0?p:o,[`${e}2`]:a===void 0&&!(o===a&&r)?p:a}}let c,l;function d(h){return l!==void 0&&h===c?l:l=me(le(c=h,f),p=>u.floor(p))}return t({...n,[e]:void 0,[`${e}1`]:o===void 0?{transform:d,label:s}:o,[`${e}2`]:a===void 0?{transform:h=>d(h).map(p=>u.offset(p)),label:s}:a})}function W1(e,t,n){const{[e]:r}=n,{value:i,interval:o}=G1(r,n);return i==null||o==null?n:t({...n,[e]:{label:gn(r),transform:a=>{const f=me(le(a,i),s=>o.floor(s)),u=f.map(s=>o.offset(s));return f.map(Fe(f)?(s,c)=>s==null||isNaN(s=+s)||(c=u[c],c==null)||isNaN(c=+c)?void 0:new Date((s+c)/2):(s,c)=>s==null||(c=u[c],c==null)?NaN:(+s+ +c)/2)}}})}function q7(e={}){return xc("x",Va,e,!0)}function j7(e={}){return xc("x",Va,e)}function z7(e={}){return xc("y",H1,e)}function B7(e={}){return W1("x",Va,e)}function U7(e={}){return W1("y",H1,e)}const X1={ariaLabel:"rule",fill:null,stroke:"currentColor"};class H7 extends Je{constructor(t,n={}){const{x:r,y1:i,y2:o,inset:a=0,insetTop:f=a,insetBottom:u=a}=n;super(t,{x:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:o,scale:"y",optional:!0}},Bi(n,"x"),X1),this.insetTop=Ce(f),this.insetBottom=Ce(u),_c(this,n)}render(t,n,r,i,o){const{x:a,y:f}=n,{x:u,y1:s,y2:c}=r,{width:l,height:d,marginTop:h,marginRight:p,marginLeft:g,marginBottom:m}=i,{insetTop:y,insetBottom:b}=this;return Te("svg:g",o).call(Xt,this,i,o).call(Vt,this,{x:u&&a},je,0).call(w=>w.selectAll().data(t).enter().append("line").call(Mt,this).attr("x1",u?v=>u[v]:(g+l-p)/2).attr("x2",u?v=>u[v]:(g+l-p)/2).attr("y1",s&&!vr(f)?v=>s[v]+y:h+y).attr("y2",c&&!vr(f)?f.bandwidth?v=>c[v]+f.bandwidth()-b:v=>c[v]-b:d-m-b).call(Fn,this,r).call(z1,this,r,o)).node()}}class Y7 extends Je{constructor(t,n={}){const{x1:r,x2:i,y:o,inset:a=0,insetRight:f=a,insetLeft:u=a}=n;super(t,{y:{value:o,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},Bi(n,"y"),X1),this.insetRight=Ce(f),this.insetLeft=Ce(u),_c(this,n)}render(t,n,r,i,o){const{x:a,y:f}=n,{y:u,x1:s,x2:c}=r,{width:l,height:d,marginTop:h,marginRight:p,marginLeft:g,marginBottom:m}=i,{insetLeft:y,insetRight:b}=this;return Te("svg:g",o).call(Xt,this,i,o).call(Vt,this,{y:u&&f},0,je).call(w=>w.selectAll().data(t).enter().append("line").call(Mt,this).attr("x1",s&&!vr(a)?v=>s[v]+y:g+y).attr("x2",c&&!vr(a)?a.bandwidth?v=>c[v]+a.bandwidth()-b:v=>c[v]-b:l-p-b).attr("y1",u?v=>u[v]:(h+d-m)/2).attr("y2",u?v=>u[v]:(h+d-m)/2).call(Fn,this,r).call(z1,this,r,o)).node()}}function V1(e,t){let{x:n=xe,y:r,y1:i,y2:o,...a}=z7(t);return[i,o]=K1(r,i,o),new H7(e,{...a,x:n,y1:i,y2:o})}function Ka(e,t){let{y:n=xe,x:r,x1:i,x2:o,...a}=j7(t);return[i,o]=K1(r,i,o),new Y7(e,{...a,y:n,x1:i,x2:o})}function K1(e,t,n){if(e==null){if(t===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,t]}else{if(t===void 0)return n===void 0?[0,e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}function Z1(e,...t){let n=t.length;for(let r=0,i=!0;r<n;++r)typeof t[r]!="function"&&(i&&(e=e.slice(),i=!1),e.splice(r,2,e[r]+t[r]+e[r+1]),t.splice(r,1),--r,--n);return r=>{let i=e[0];for(let o=0;o<n;++o)i+=t[o](r)+e[o+1];return i}}const G7={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},Q1="";class Tc extends Je{constructor(t,n={}){const{x:r,y:i,text:o=bn(t)&&Vg(t)?xe:Ri,frameAnchor:a,textAnchor:f=/right$/i.test(a)?"end":/left$/i.test(a)?"start":"middle",lineAnchor:u=/^top/i.test(a)?"top":/^bottom/i.test(a)?"bottom":"middle",lineHeight:s=1,lineWidth:c=1/0,textOverflow:l,monospace:d,fontFamily:h=d?"ui-monospace, monospace":void 0,fontSize:p,fontStyle:g,fontVariant:m,fontWeight:y,rotate:b}=n,[w,v]=qe(b,0),[T,_]=Z7(p);if(super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:T,optional:!0},rotate:{value:mx(w),optional:!0},text:{value:o,filter:Hs,optional:!0}},n,G7),this.rotate=v,this.textAnchor=Me(f,"middle"),this.lineAnchor=ct(u,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+s,this.lineWidth=+c,this.textOverflow=J1(l),this.monospace=!!d,this.fontFamily=Ie(h),this.fontSize=_,this.fontStyle=Ie(g),this.fontVariant=Ie(m),this.fontWeight=Ie(y),this.frameAnchor=rc(a),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${c}`);this.splitLines=rb(this),this.clipLine=ib(this)}render(t,n,r,i,o){const{x:a,y:f}=n,{x:u,y:s,rotate:c,text:l,title:d,fontSize:h}=r,{rotate:p}=this,[g,m]=Xa(this,i);return Te("svg:g",o).call(Xt,this,i,o).call(nb,this,l,i).call(Vt,this,{x:u&&a,y:s&&f}).call(y=>y.selectAll().data(t).enter().append("text").call(Mt,this).call(W7,this,l,d).attr("transform",Z1`translate(${u?b=>u[b]:g},${s?b=>s[b]:m})${c?b=>` rotate(${c[b]})`:p?` rotate(${p})`:""}`).call(Q,"font-size",h&&(b=>h[b])).call(Fn,this,r)).node()}}function J1(e){return e==null?null:ct(e,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function W7(e,t,n,r){if(!n)return;const{lineAnchor:i,lineHeight:o,textOverflow:a,splitLines:f,clipLine:u}=t;e.each(function(s){const c=f(wr(n[s])??"").map(u),l=c.length,d=i==="top"?.71:i==="bottom"?1-l:(164-l*100)/200;if(l>1){let h=0;for(let p=0;p<l;++p){if(++h,!c[p])continue;const g=this.ownerDocument.createElementNS(or.svg,"tspan");g.setAttribute("x",0),p===h-1?g.setAttribute("y",`${(d+p)*o}em`):g.setAttribute("dy",`${h*o}em`),g.textContent=c[p],this.appendChild(g),h=0}}else d&&this.setAttribute("y",`${d*o}em`),this.textContent=c[0];if(a&&!r&&c[0]!==n[s]){const h=this.ownerDocument.createElementNS(or.svg,"title");h.textContent=n[s],this.appendChild(h)}})}function eb(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Js(t,n)),new Tc(e,{...r,x:t,y:n})}function tb(e,{x:t=xe,...n}={}){return new Tc(e,U7({...n,x:t}))}function X7(e,{y:t=xe,...n}={}){return new Tc(e,B7({...n,y:t}))}function nb(e,t,n){Q(e,"text-anchor",t.textAnchor),Q(e,"font-family",t.fontFamily),Q(e,"font-size",t.fontSize),Q(e,"font-style",t.fontStyle),Q(e,"font-variant",t.fontVariant===void 0?V7(n):t.fontVariant),Q(e,"font-weight",t.fontWeight)}function V7(e){return e&&(yx(e)||Fe(e))?"tabular-nums":void 0}const K7=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function Z7(e){return e==null||typeof e=="number"?[void 0,e]:typeof e!="string"?[e,void 0]:(e=e.trim().toLowerCase(),K7.has(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(e)?[void 0,e]:[e,void 0])}function Q7(e,t,n){const r=[];let i,o=0;for(const[a,f,u]of J7(e)){if(i===void 0&&(i=a),o>i&&n(e,i,f)>t&&(r.push(e.slice(i,o)+(e[o-1]===Q1?"-":"")),i=a),u){r.push(e.slice(i,f)),i=void 0;continue}o=f}return r}function*J7(e){let t=0,n=0;const r=e.length;for(;n<r;){let i=1;switch(e[n]){case Q1:case"-":++n,yield[t,n,!1],t=n;break;case" ":for(yield[t,n,!1];e[++n]===" ";);t=n;break;case"\r":e[n+1]===`
`&&++i;case`
`:yield[t,n,!0],n+=i,t=n;break;default:++n;break}}yield[t,n,!0]}const Pd={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"":31,"":31,"":47,"":47,"":82};function Sc(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=Er(e,i))r+=Pd[e[i]]??(ab(e,i)?120:Pd.e);return r}function Mc(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=Er(e,i))r+=ab(e,i)?126:63;return r}function rb({monospace:e,lineWidth:t,textOverflow:n}){if(n!=null||t==1/0)return o=>o.split(/\r\n?|\n/g);const r=e?Mc:Sc,i=t*100;return o=>Q7(o,i,r)}function ib({monospace:e,lineWidth:t,textOverflow:n}){if(n==null||t==1/0)return o=>o;const r=e?Mc:Sc,i=t*100;switch(n){case"clip-start":return o=>qd(o,i,r,"");case"clip-end":return o=>Fd(o,i,r,"");case"ellipsis-start":return o=>qd(o,i,r,rr);case"ellipsis-middle":return o=>e9(o,i,r,rr);case"ellipsis-end":return o=>Fd(o,i,r,rr)}}const rr="";function _r(e,t,n,r){const i=[];let o=0;for(let a=0,f=0,u=e.length;a<u;a=f){f=Er(e,a);const s=n(e,a,f);if(o+s>t){for(o+=r;o>t&&a>0;)f=a,a=i.pop(),o-=n(e,a,f);return[a,t-o]}o+=s,i.push(a)}return[-1,0]}function Fd(e,t,n,r){e=e.trim();const i=n(r),[o]=_r(e,t,n,i);return o<0?e:e.slice(0,o).trimEnd()+r}function e9(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const o=n(r)/2,[a,f]=_r(e,t/2,n,o),[u]=_r(e,i-t/2-f+o,n,-o);return u<0?r:e.slice(0,a).trimEnd()+r+e.slice(Er(e,u)).trimStart()}function qd(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const o=n(r),[a]=_r(e,i-t+o,n,-o);return a<0?r:r+e.slice(Er(e,a)).trimStart()}const cs=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,jd=new RegExp("\\p{Extended_Pictographic}","uy");function Er(e,t){return t+=t9(e,t)?2:1,r9(e,t)&&(t=cs.lastIndex),n9(e,t)?Er(e,t+1):t}function ob(e,t){return e.charCodeAt(t)<128}function t9(e,t){const n=e.charCodeAt(t);if(n>=55296&&n<56320){const r=e.charCodeAt(t+1);return r>=56320&&r<57344}return!1}function n9(e,t){return e.charCodeAt(t)===8205}function r9(e,t){return ob(e,t)?!1:(cs.lastIndex=t,cs.test(e))}function ab(e,t){return ob(e,t)?!1:(jd.lastIndex=t,jd.test(e))}const i9={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},fb=3.5,o9=fb*5,ub={draw(e,t,n){const r=t*n/o9;e.moveTo(0,0),e.lineTo(0,-t),e.moveTo(-r,r-t),e.lineTo(0,-t),e.lineTo(r,r-t)}},a9={draw(e,t,n){e.moveTo(-n,0),e.lineTo(0,-t),e.lineTo(n,0)}},f9=new Map([["arrow",ub],["spike",a9]]);function u9(e){return e&&typeof e.draw=="function"}function s9(e){if(u9(e))return e;const t=f9.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid shape: ${e}`)}class sb extends Je{constructor(t,n={}){const{x:r,y:i,r:o=fb,length:a,rotate:f,shape:u=ub,anchor:s="middle",frameAnchor:c}=n,[l,d]=qe(a,12),[h,p]=qe(f,0);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:l,scale:"length",optional:!0},rotate:{value:h,optional:!0}},n,i9),this.r=+o,this.length=d,this.rotate=p,this.shape=s9(u),this.anchor=ct(s,"anchor",["start","middle","end"]),this.frameAnchor=rc(c)}render(t,n,r,i,o){const{x:a,y:f}=n,{x:u,y:s,length:c,rotate:l}=r,{length:d,rotate:h,anchor:p,shape:g,r:m}=this,[y,b]=Xa(this,i);return Te("svg:g",o).call(Xt,this,i,o).call(Vt,this,{x:u&&a,y:s&&f}).call(w=>w.selectAll().data(t).enter().append("path").call(Mt,this).attr("transform",Z1`translate(${u?v=>u[v]:y},${s?v=>s[v]:b})${l?v=>` rotate(${l[v]})`:h?` rotate(${h})`:""}${p==="start"?"":p==="end"?c?v=>` translate(0,${c[v]})`:` translate(0,${d})`:c?v=>` translate(0,${c[v]/2})`:` translate(0,${d/2})`}`).attr("d",c?v=>{const T=Cu();return g.draw(T,c[v],m),T}:(()=>{const v=Cu();return g.draw(v,d,m),v})()).call(Fn,this,r)).node()}}function c9(e,t={}){const{x:n=xe,...r}=t;return new sb(e,{...r,x:n})}function l9(e,t={}){const{y:n=xe,...r}=t;return new sb(e,{...r,y:n})}function vn(e,t){return arguments.length<2&&!bn(e)&&(t=e,e=null),t===void 0&&(t={}),[e,t]}function Za({anchor:e}={},t){return e===void 0?t[0]:ct(e,"anchor",t)}function cb(e){return Za(e,["left","right"])}function lb(e){return Za(e,["right","left"])}function db(e){return Za(e,["bottom","top"])}function hb(e){return Za(e,["top","bottom"])}function pb(){const[e,t]=vn(...arguments);return gb("y",cb(t),e,t)}function d9(){const[e,t]=vn(...arguments);return gb("fy",lb(t),e,t)}function mb(){const[e,t]=vn(...arguments);return bb("x",db(t),e,t)}function h9(){const[e,t]=vn(...arguments);return bb("fx",hb(t),e,t)}function gb(e,t,n,{color:r="currentColor",opacity:i=1,stroke:o=r,strokeOpacity:a=i,strokeWidth:f=1,fill:u=r,fillOpacity:s=i,textAnchor:c,textStroke:l,textStrokeOpacity:d,textStrokeWidth:h,tickSize:p=e==="y"?6:0,tickPadding:g,tickRotate:m,x:y,margin:b,marginTop:w=b===void 0?20:b,marginRight:v=b===void 0?t==="right"?40:0:b,marginBottom:T=b===void 0?20:b,marginLeft:_=b===void 0?t==="left"?40:0:b,label:E,labelAnchor:C,labelArrow:k,labelOffset:R,...$}){return p=Ce(p),g=Ce(g),m=Ce(m),C!==void 0&&(C=ct(C,"labelAnchor",["center","top","bottom"])),k=Mb(k),Un(p&&!Ee(o)?p9(e,t,n,{stroke:o,strokeOpacity:a,strokeWidth:f,tickSize:p,tickPadding:g,tickRotate:m,x:y,...$}):null,Ee(u)?null:g9(e,t,n,{fill:u,fillOpacity:s,stroke:l,strokeOpacity:d,strokeWidth:h,textAnchor:c,tickSize:p,tickPadding:g,tickRotate:m,x:y,marginTop:w,marginRight:v,marginBottom:T,marginLeft:_,...$}),!Ee(u)&&E!==null?eb([],_b({fill:u,fillOpacity:s,...$},function(S,x,A,M,N){const L=M[e],{marginTop:z,marginRight:H,marginBottom:O,marginLeft:q}=e==="y"&&N.inset||N,P=C??(L.bandwidth?"center":"top"),F=R??(t==="right"?H:q)-3;return P==="center"?(this.textAnchor=void 0,this.lineAnchor=t==="right"?"bottom":"top",this.frameAnchor=t,this.rotate=-90):(this.textAnchor=t==="right"?"end":"start",this.lineAnchor=P,this.frameAnchor=`${P}-${t}`,this.rotate=0),this.dy=P==="top"?3-z:P==="bottom"?O-3:0,this.dx=t==="right"?F:-F,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[Sb(e,L,{anchor:t,label:E,labelAnchor:P,labelArrow:k})]}}}})):null)}function bb(e,t,n,{color:r="currentColor",opacity:i=1,stroke:o=r,strokeOpacity:a=i,strokeWidth:f=1,fill:u=r,fillOpacity:s=i,textAnchor:c,textStroke:l,textStrokeOpacity:d,textStrokeWidth:h,tickSize:p=e==="x"?6:0,tickPadding:g,tickRotate:m,y,margin:b,marginTop:w=b===void 0?t==="top"?30:0:b,marginRight:v=b===void 0?20:b,marginBottom:T=b===void 0?t==="bottom"?30:0:b,marginLeft:_=b===void 0?20:b,label:E,labelAnchor:C,labelArrow:k,labelOffset:R,...$}){return p=Ce(p),g=Ce(g),m=Ce(m),C!==void 0&&(C=ct(C,"labelAnchor",["center","left","right"])),k=Mb(k),Un(p&&!Ee(o)?m9(e,t,n,{stroke:o,strokeOpacity:a,strokeWidth:f,tickSize:p,tickPadding:g,tickRotate:m,y,...$}):null,Ee(u)?null:b9(e,t,n,{fill:u,fillOpacity:s,stroke:l,strokeOpacity:d,strokeWidth:h,textAnchor:c,tickSize:p,tickPadding:g,tickRotate:m,y,marginTop:w,marginRight:v,marginBottom:T,marginLeft:_,...$}),!Ee(u)&&E!==null?eb([],_b({fill:u,fillOpacity:s,...$},function(S,x,A,M,N){const L=M[e],{marginTop:z,marginRight:H,marginBottom:O,marginLeft:q}=e==="x"&&N.inset||N,P=C??(L.bandwidth?"center":"right"),F=R??(t==="top"?z:O)-3;return P==="center"?(this.frameAnchor=t,this.textAnchor=void 0):(this.frameAnchor=`${t}-${P}`,this.textAnchor=P==="right"?"end":"start"),this.lineAnchor=t,this.dy=t==="top"?-F:F,this.dx=P==="right"?H-3:P==="left"?3-q:0,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[Sb(e,L,{anchor:t,label:E,labelAnchor:P,labelArrow:k})]}}}})):null)}function p9(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:o=null,facetAnchor:a=t+(e==="y"?"-empty":""),frameAnchor:f=t,tickSize:u,inset:s=0,insetLeft:c=s,insetRight:l=s,dx:d=0,y:h=e==="y"?void 0:null,...p}){return Ar(l9,e,n,{ariaLabel:`${e}-axis tick`,ariaHidden:!0},{strokeWidth:r,strokeLinecap:i,strokeLinejoin:o,facetAnchor:a,frameAnchor:f,y:h,...p,dx:t==="left"?+d-je+ +c:+d+je-l,anchor:"start",length:u,shape:t==="left"?M9:$9})}function m9(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:o=null,facetAnchor:a=t+(e==="x"?"-empty":""),frameAnchor:f=t,tickSize:u,inset:s=0,insetTop:c=s,insetBottom:l=s,dy:d=0,x:h=e==="x"?void 0:null,...p}){return Ar(c9,e,n,{ariaLabel:`${e}-axis tick`,ariaHidden:!0},{strokeWidth:r,strokeLinejoin:o,strokeLinecap:i,facetAnchor:a,frameAnchor:f,x:h,...p,dy:t==="bottom"?+d-je-l:+d+je+ +c,anchor:"start",length:u,shape:t==="bottom"?T9:S9})}function g9(e,t,n,{facetAnchor:r=t+(e==="y"?"-empty":""),frameAnchor:i=t,tickSize:o,tickRotate:a=0,tickPadding:f=Math.max(3,9-o)+(Math.abs(a)>60?4*Math.cos(a*j1):0),text:u,textAnchor:s=Math.abs(a)>60?"middle":t==="left"?"end":"start",lineAnchor:c=a>60?"top":a<-60?"bottom":"middle",fontVariant:l,inset:d=0,insetLeft:h=d,insetRight:p=d,dx:g=0,y:m=e==="y"?void 0:null,...y}){return Ar(X7,e,n,{ariaLabel:`${e}-axis tick label`},{facetAnchor:r,frameAnchor:i,text:u,textAnchor:s,lineAnchor:c,fontVariant:l,rotate:a,y:m,...y,dx:t==="left"?+g-o-f+ +h:+g+ +o+ +f-p},function(b,w,v,T,_){l===void 0&&(this.fontVariant=Tb(b)),u===void 0&&(_.text=xb(b,w,v,T,t))})}function b9(e,t,n,{facetAnchor:r=t+(e==="x"?"-empty":""),frameAnchor:i=t,tickSize:o,tickRotate:a=0,tickPadding:f=Math.max(3,9-o)+(Math.abs(a)>=10?4*Math.cos(a*j1):0),text:u,textAnchor:s=Math.abs(a)>=10?a<0^t==="bottom"?"start":"end":"middle",lineAnchor:c=Math.abs(a)>=10?"middle":t==="bottom"?"top":"bottom",fontVariant:l,inset:d=0,insetTop:h=d,insetBottom:p=d,dy:g=0,x:m=e==="x"?void 0:null,...y}){return Ar(tb,e,n,{ariaLabel:`${e}-axis tick label`},{facetAnchor:r,frameAnchor:i,text:u===void 0?null:u,textAnchor:s,lineAnchor:c,fontVariant:l,rotate:a,x:m,...y,dy:t==="bottom"?+g+ +o+ +f-p:+g-o-f+ +h},function(b,w,v,T,_){l===void 0&&(this.fontVariant=Tb(b)),u===void 0&&(_.text=xb(b,w,v,T,t))})}function y9(){const[e,t]=vn(...arguments);return yb("y",cb(t),e,t)}function v9(){const[e,t]=vn(...arguments);return yb("fy",lb(t),e,t)}function w9(){const[e,t]=vn(...arguments);return vb("x",db(t),e,t)}function _9(){const[e,t]=vn(...arguments);return vb("fx",hb(t),e,t)}function yb(e,t,n,{y:r=e==="y"?void 0:null,x:i=null,x1:o=t==="left"?i:null,x2:a=t==="right"?i:null,...f}){return Ar(Ka,e,n,{ariaLabel:`${e}-grid`,ariaHidden:!0},{y:r,x1:o,x2:a,...wb(f)})}function vb(e,t,n,{x:r=e==="x"?void 0:null,y:i=null,y1:o=t==="top"?i:null,y2:a=t==="bottom"?i:null,...f}){return Ar(V1,e,n,{ariaLabel:`${e}-grid`,ariaHidden:!0},{x:r,y1:o,y2:a,...wb(f)})}function wb({color:e="currentColor",opacity:t=.1,stroke:n=e,strokeOpacity:r=t,strokeWidth:i=1,...o}){return{stroke:n,strokeOpacity:r,strokeWidth:i,...o}}function _b({fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:o,fontWeight:a,monospace:f,pointerEvents:u,shapeRendering:s,clip:c=!1},l){return[,e]=Qe(e),[,t]=qe(t),{facet:"super",x:null,y:null,fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:o,fontWeight:a,monospace:f,pointerEvents:u,shapeRendering:s,clip:c,initializer:l}}function Ar(e,t,n,r,i,o){let a;function f(c,l,d,h,p,g){const m=c==null&&(t==="fx"||t==="fy"),{[t]:y}=h;if(!y)throw new Error(`missing scale: ${t}`);const b=y.domain();let{interval:w,ticks:v,tickFormat:T,tickSpacing:_=t==="x"?80:35}=i;if(typeof v=="string"&&$b(y)&&(w=v,v=void 0),v===void 0&&(v=Mr(w,y.type)??x9(y,_)),c==null){if(bn(v))c=ln(v);else if(Qn(v))c=Zf(v,...Ge(b));else if(y.interval){let C=y.interval;if(y.ticks){const[k,R]=Ge(b),$=(R-k)/C[Di];C=dd(C,$/v)??C,c=Zf(C,k,R)}else{c=b;const k=c.length;C=dd(C,k/v)??C,C!==y.interval&&(c=Zf(C,...Ge(c)))}if(C===y.interval){const k=Math.round(c.length/v);k>1&&(c=c.filter((R,$)=>$%k===0))}}else y.ticks?c=y.ticks(v):c=b;if(!y.ticks&&c.length&&c!==b){const C=new ga(b);c=c.filter(k=>C.has(k)),c.length||an(`Warning: the ${t}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}t==="y"||t==="x"?l=[Gt(c)]:a[t]={scale:t,value:xe}}o==null||o.call(this,y,c,v,T,a);const E=Object.fromEntries(Object.entries(a).map(([C,k])=>[C,{...k,value:le(c,k.value)}]));return m&&(l=g.filterFacets(c,E)),{data:c,facets:l,channels:E}}const u=yr(i).initializer,s=e(n,yr({...i,initializer:f},u));return n==null?(a=s.channels,s.channels={}):a={},r!==void 0&&Object.assign(s,r),s.clip===void 0&&(s.clip=!1),s}function x9(e,t){const[n,r]=Ge(e.range());return(r-n)/t}function xb(e,t,n,r,i){return{value:$c(e,t,n,r,i)}}function $c(e,t,n,r,i){return typeof r=="function"&&!(e.type==="log"&&e.tickFormat)?r:r===void 0&&t&&Fe(t)?J8(e.type,t,i)??wr:e.tickFormat?e.tickFormat(typeof n=="number"?n:null,r):r===void 0?wr:typeof r=="string"?(Fe(e.domain())?Li:Tr)(r):jt(r)}function Zf(e,t,n){return e.range(t,e.offset(e.floor(n)))}const T9={draw(e,t){e.moveTo(0,0),e.lineTo(0,t)}},S9={draw(e,t){e.moveTo(0,0),e.lineTo(0,-t)}},M9={draw(e,t){e.moveTo(0,0),e.lineTo(-t,0)}},$9={draw(e,t){e.moveTo(0,0),e.lineTo(t,0)}};function Tb(e){return e.bandwidth&&!e.interval?void 0:"tabular-nums"}function Sb(e,t,{anchor:n,label:r=t.label,labelAnchor:i,labelArrow:o}={}){if(!(r==null||r.inferred&&$b(t)&&/^(date|time|year)$/i.test(r))){if(r=String(r),o==="auto"&&(o=(!t.bandwidth||t.interval)&&!/[]/.test(r)),!o)return r;if(o===!0){const a=M1(t);a&&(o=/x$/.test(e)||i==="center"?/x$/.test(e)===a<0?"left":"right":a<0?"up":"down")}switch(o){case"left":return` ${r}`;case"right":return`${r} `;case"up":return n==="right"?`${r} `:` ${r}`;case"down":return n==="right"?`${r} `:` ${r}`}return r}}function Mb(e="auto"){return Ee(e)?!1:typeof e=="boolean"?e:ct(e,"labelArrow",["auto","up","right","down","left"])}function $b(e){return Fe(e.domain())}function zd(e,t){if(t==null)return t;const n=e(t);if(!n)throw new Error(`scale not found: ${t}`);return n}function E9(e,{opacity:t,...n}={}){if(!Bn(e)&&!C1(e))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${e.type})`);return Eb(e,n,(r,i,o,a)=>r.append("svg").attr("width",o).attr("height",a).attr("fill",i.scale).attr("fill-opacity",qe(t)[1]).append("rect").attr("width","100%").attr("height","100%"))}function A9(e,{fill:t=(s=>(s=e.hint)==null?void 0:s.fill)()!==void 0?e.hint.fill:"none",fillOpacity:n=1,stroke:r=(c=>(c=e.hint)==null?void 0:c.stroke)()!==void 0?e.hint.stroke:Ee(t)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:o=1.5,r:a=4.5,...f}={},u){const[l,d]=Qe(t),[h,p]=Qe(r),g=zd(u,l),m=zd(u,h),y=a*a*Math.PI;return n=qe(n)[1],i=qe(i)[1],o=qe(o)[1],Eb(e,f,(b,w,v,T)=>b.append("svg").attr("viewBox","-8 -8 16 16").attr("width",v).attr("height",T).attr("fill",l==="color"?_=>g.scale(_):d).attr("fill-opacity",n).attr("stroke",h==="color"?_=>m.scale(_):p).attr("stroke-opacity",i).attr("stroke-width",o).append("path").attr("d",_=>{const E=Cu();return e.scale(_).draw(E,y),E}))}function Eb(e,t={},n){let{columns:r,tickFormat:i,fontVariant:o=q1(e),swatchSize:a=15,swatchWidth:f=a,swatchHeight:u=a,marginLeft:s=0,className:c,style:l,width:d}=t;const h=bc(t);c=Wa(c),i=$c(e.scale,e.domain,void 0,i);const p=Te("div",h).attr("class",`${c}-swatches ${c}-swatches-${r!=null?"columns":"wrap"}`);let g;return r!=null?(g=`:where(.${c}-swatches-columns .${c}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${c}-swatches-columns .${c}-swatch::before) {
  flex-shrink: 0;
}
:where(.${c}-swatches-columns .${c}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,p.style("columns",r).selectAll().data(e.domain).enter().append("div").attr("class",`${c}-swatch`).call(n,e,f,u).call(m=>m.append("div").attr("class",`${c}-swatch-label`).attr("title",i).text(i))):(g=`:where(.${c}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${c}-swatches-wrap .${c}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,p.selectAll().data(e.domain).enter().append("span").attr("class",`${c}-swatch`).call(n,e,f,u).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),p.call(m=>m.insert("style","*").text(`:where(.${c}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${c}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
${g}`)).style("margin-left",s?`${+s}px`:null).style("width",d===void 0?null:`${+d}px`).style("font-variant",Me(o,"normal")).call(vc,l).node()}const ls=new Map([["symbol",A9],["color",Cb],["opacity",k9]]);function C9(e,t,n={}){return(r,i)=>{if(!ls.has(r))throw new Error(`unknown legend type: ${r}`);if(r in e)return ls.get(r)(e[r],Ab(t,n[r],i),o=>e[o])}}function Ab({className:e,...t},{label:n,ticks:r,tickFormat:i}={},o){return xx(o,{className:e,...t},{label:n,ticks:r,tickFormat:i})}function Cb(e,{legend:t=!0,...n}){if(t===!0&&(t=e.type==="ordinal"?"swatches":"ramp"),e.domain!==void 0)switch(`${t}`.toLowerCase()){case"swatches":return E9(e,n);case"ramp":return I7(e,n);default:throw new Error(`unknown legend type: ${t}`)}}function k9({type:e,interpolate:t,...n},{legend:r=!0,color:i=un(0,0,0),...o}){if(!t)throw new Error(`${e} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return Cb({type:e,...n,interpolate:N9(i)},{legend:r,...o})}function N9(e){const{r:t,g:n,b:r}=un(e)||un(0,0,0);return i=>`rgba(${t},${n},${r},${i})`}function L9(e,t,n){const r=[];for(const[i,o]of ls){const a=n[i];if(a!=null&&a.legend&&i in e){const f=o(e[i],Ab(t,e[i],a),u=>e[u]);f!=null&&r.push(f)}}return r}function kb(e={}){return Wg(e)?e:{...e,y:xe}}function I9(e,t){if(t.length===1)return{data:e,facets:t};const n=hi(e),r=new Uint8Array(n);let i=0;for(const f of t)for(const u of f)r[u]&&++i,r[u]=1;if(i===0)return{data:e,facets:t};e=di(e);const o=e[Bg]=new Uint32Array(n+i);t=t.map(f=>di(f,Uint32Array));let a=n;r.fill(0);for(const f of t)for(let u=0,s=f.length;u<s;++u){const c=f[u];r[c]?(f[u]=a,e[a]=e[c],o[a]=c,++a):o[c]=c,r[c]=1}return{data:e,facets:t}}function D9(e={},t={}){arguments.length===1&&([e,t]=R9(e));const{x1:n,x:r=n,y:i,...o}=t,[a,f,u,s]=P9(r,i,"x","y",e,o);return{...a,x1:n,x:f,y1:u,y2:s,y:es(u,s)}}function Nb({y:e,y1:t,y2:n,...r}={}){return r=Bi(r,"x"),t===void 0&&n===void 0?D9({y:e,...r}):([t,n]=sx(e,t,n),{...r,y1:t,y2:n})}function R9(e){const{offset:t,order:n,reverse:r,...i}=e;return[{offset:t,order:n,reverse:r},i]}const O9={length:!0};function P9(e,t=ix,n,r,{offset:i,order:o,reverse:a},f){if(t===null)throw new Error(`stack requires ${r}`);const u=ec(f),[s,c]=Re(e),[l,d]=ia(t),[h,p]=ia(t);return l.hint=h.hint=O9,i=F9(i),o=z9(o,i,r),[qi(f,(g,m,y)=>{({data:g,facets:m}=I9(g,m));const b=e==null?void 0:c(oa(le(g,e),y==null?void 0:y[n])),w=le(g,t,Float64Array),v=le(g,u),T=o&&o(g,b,w,v),_=hi(g),E=d(new Float64Array(_)),C=p(new Float64Array(_)),k=[];for(const R of m){const $=b?Array.from(ba(R,S=>b[S]).values()):[R];if(T)for(const S of $)S.sort(T);for(const S of $){let x=0,A=0;a&&S.reverse();for(const M of S){const N=w[M];N<0?x=C[M]=(E[M]=x)+N:N>0?A=C[M]=(E[M]=A)+N:C[M]=E[M]=A}}k.push($)}return i&&i(k,E,C,v),{data:g,facets:m}}),s,l,h]}function F9(e){if(e!=null){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return q9;case"center":case"silhouette":return j9;case"wiggle":return Ib}throw new Error(`unknown offset: ${e}`)}}function Lb(e,t){let n=0,r=0;for(const i of e){const o=t[i];o<n&&(n=o),o>r&&(r=o)}return[n,r]}function q9(e,t,n){for(const r of e)for(const i of r){const[o,a]=Lb(i,n);for(const f of i){const u=1/(a-o||1);t[f]=u*(t[f]-o),n[f]=u*(n[f]-o)}}}function j9(e,t,n){for(const r of e){for(const i of r){const[o,a]=Lb(i,n);for(const f of i){const u=(a+o)/2;t[f]-=u,n[f]-=u}}Db(r,t,n)}Rb(e,t,n)}function Ib(e,t,n,r){for(const i of e){const o=new kn;let a=0;for(const f of i){let u=-1;const s=f.map(h=>Math.abs(n[h]-t[h])),c=f.map(h=>{u=r?r[h]:++u;const p=n[h]-t[h],g=o.has(u)?p-o.get(u):0;return o.set(u,p),g}),l=[0,...D2(c)];for(const h of f)t[h]+=a,n[h]+=a;const d=fn(s);d&&(a-=fn(s,(h,p)=>(c[p]/2+l[p])*h)/d)}Db(i,t,n)}Rb(e,t,n)}function Db(e,t,n){const r=Bt(e,i=>Bt(i,o=>t[o]));for(const i of e)for(const o of i)t[o]-=r,n[o]-=r}function Rb(e,t,n){const r=e.length;if(r===1)return;const i=e.map(f=>f.flat()),o=i.map(f=>(Bt(f,u=>t[u])+rt(f,u=>n[u]))/2),a=Bt(o);for(let f=0;f<r;f++){const u=a-o[f];for(const s of i[f])t[s]+=u,n[s]+=u}}function z9(e,t,n){if(e===void 0&&t===Ib)return Bd(ut);if(e!=null){if(typeof e=="string"){const r=e.startsWith("-"),i=r?na:ut;switch((r?e.slice(1):e).toLowerCase()){case"value":case n:return B9(i);case"z":return U9(i);case"sum":return H9(i);case"appearance":return Y9(i);case"inside-out":return Bd(i)}return Ud(Ug(e))}if(typeof e=="function")return(e.length===1?Ud:G9)(e);if(pn(e))return W9(e);throw new Error(`invalid order: ${e}`)}}function B9(e){return(t,n,r)=>(i,o)=>e(r[i],r[o])}function U9(e){return(t,n,r,i)=>(o,a)=>e(i[o],i[a])}function H9(e){return Qa(e,(t,n,r,i)=>gs(Gt(t),o=>fn(o,a=>r[a]),o=>i[o]))}function Y9(e){return Qa(e,(t,n,r,i)=>gs(Gt(t),o=>n[Zh(o,a=>r[a])],o=>i[o]))}function Bd(e){return Qa(e,(t,n,r,i)=>{const o=Gt(t),a=gs(o,l=>n[Zh(l,d=>r[d])],l=>i[l]),f=Jn(o,l=>fn(l,d=>r[d]),l=>i[l]),u=[],s=[];let c=0;for(const l of a)c<0?(c+=f.get(l),u.push(l)):(c-=f.get(l),s.push(l));return s.reverse().concat(u)})}function Ud(e){return t=>{const n=le(t,e);return(r,i)=>ut(n[r],n[i])}}function G9(e){return t=>pn(t)?(n,r)=>e(t[n],t[r]):(n,r)=>e(t.get(n),t.get(r))}function W9(e){return Qa(ut,()=>e)}function Qa(e,t){return(n,r,i,o)=>{if(!o)throw new Error("missing channel: z");const a=new kn(t(n,r,i,o).map((f,u)=>[f,u]));return(f,u)=>e(a.get(o[f]),a.get(o[u]))}}const X9={ariaLabel:"rect"};class V9 extends Je{constructor(t,n={}){const{x1:r,y1:i,x2:o,y2:a}=n;super(t,{x1:{value:r,scale:"x",type:r!=null&&o==null?"band":void 0,optional:!0},y1:{value:i,scale:"y",type:i!=null&&a==null?"band":void 0,optional:!0},x2:{value:o,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0}},n,X9),Ob(this,n),Pb(this,n)}render(t,n,r,i,o){const{x:a,y:f}=n;let{x1:u,y1:s,x2:c,y2:l}=r;const{marginTop:d,marginRight:h,marginBottom:p,marginLeft:g,width:m,height:y}=i,{projection:b}=o,{insetTop:w,insetRight:v,insetBottom:T,insetLeft:_}=this,{rx:E,ry:C,rx1y1:k,rx1y2:R,rx2y1:$,rx2y2:S}=this;(u||c)&&!b&&vr(a)&&(u=c=null),(s||l)&&!b&&vr(f)&&(s=l=null);const x=a!=null&&a.bandwidth?a.bandwidth():0,A=f!=null&&f.bandwidth?f.bandwidth():0;return Te("svg:g",o).call(Xt,this,i,o).call(Vt,this,{},0,0).call(M=>M.selectAll().data(t).enter().call(k||R||$||S?N=>N.append("path").call(Mt,this).call(Fb,u&&c?L=>u[L]+(c[L]<u[L]?-v:_):u?L=>u[L]+_:g+_,s&&l?L=>s[L]+(l[L]<s[L]?-T:w):s?L=>s[L]+w:d+w,u&&c?L=>c[L]-(c[L]<u[L]?-_:v):u?L=>u[L]+x-v:m-h-v,s&&l?L=>l[L]-(l[L]<s[L]?-w:T):s?L=>s[L]+A-T:y-p-T,this).call(Fn,this,r):N=>N.append("rect").call(Mt,this).attr("x",u?c?L=>Math.min(u[L],c[L])+_:L=>u[L]+_:g+_).attr("y",s?l?L=>Math.min(s[L],l[L])+w:L=>s[L]+w:d+w).attr("width",u?c?L=>Math.max(0,Math.abs(c[L]-u[L])+x-_-v):x-_-v:m-h-g-v-_).attr("height",s?l?L=>Math.max(0,Math.abs(s[L]-l[L])+A-w-T):A-w-T:y-d-p-w-T).call(Q,"rx",E).call(Q,"ry",C).call(Fn,this,r))).node()}}function Ob(e,{inset:t=0,insetTop:n=t,insetRight:r=t,insetBottom:i=t,insetLeft:o=t}={}){e.insetTop=Ce(n),e.insetRight=Ce(r),e.insetBottom=Ce(i),e.insetLeft=Ce(o)}function Pb(e,{r:t,rx:n,ry:r,rx1:i=t,ry1:o=t,rx2:a=t,ry2:f=t,rx1y1:u=i!==void 0?+i:o!==void 0?+o:0,rx1y2:s=i!==void 0?+i:f!==void 0?+f:0,rx2y1:c=a!==void 0?+a:o!==void 0?+o:0,rx2y2:l=a!==void 0?+a:f!==void 0?+f:0}={}){u||s||c||l?(e.rx1y1=u,e.rx1y2=s,e.rx2y1=c,e.rx2y2=l):(e.rx=Me(n,"auto"),e.ry=Me(r,"auto"))}function Fb(e,t,n,r,i,o){const{rx1y1:a,rx1y2:f,rx2y1:u,rx2y2:s}=o;typeof t!="function"&&(t=jt(t)),typeof n!="function"&&(n=jt(n)),typeof r!="function"&&(r=jt(r)),typeof i!="function"&&(i=jt(i));const c=Math.max(Math.abs(a+u),Math.abs(f+s)),l=Math.max(Math.abs(a+f),Math.abs(u+s));e.attr("d",d=>{const h=t(d),p=n(d),g=r(d),m=i(d),y=h>g,b=p>m,w=y?g:h,v=y?h:g,T=b?m:p,_=b?p:m,E=Math.min(1,(v-w)/c,(_-T)/l),C=E*(y?b?s:u:b?f:a),k=E*(y?b?f:a:b?s:u),R=E*(y?b?a:f:b?u:s),$=E*(y?b?u:s:b?a:f);return`M${w},${T+ao(C,$)}A${C},${C} 0 0 ${C<0?0:1} ${w+oo(C,$)},${T}H${v-oo(k,R)}A${k},${k} 0 0 ${k<0?0:1} ${v},${T+ao(k,R)}V${_-ao(R,k)}A${R},${R} 0 0 ${R<0?0:1} ${v-oo(R,k)},${_}H${w+oo($,C)}A${$},${$} 0 0 ${$<0?0:1} ${w},${_-ao($,C)}Z`})}function oo(e,t){return t<0?e:Math.abs(e)}function ao(e,t){return t<0?Math.abs(e):e}function xS(e,t={}){return ux(t)||(t={...t,x:Ri,y2:xe,interval:1}),new V9(e,Nb(q7(kb(t))))}const K9={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},Z9={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class Q9 extends Je{constructor(t={}){const{anchor:n=null}=t;super(xo,void 0,t,n==null?K9:Z9),this.anchor=Gg(n,"anchor",["top","right","bottom","left"]),Ob(this,t),n||Pb(this,t)}render(t,n,r,i,o){const{marginTop:a,marginRight:f,marginBottom:u,marginLeft:s,width:c,height:l}=i,{anchor:d,insetTop:h,insetRight:p,insetBottom:g,insetLeft:m}=this,{rx:y,ry:b,rx1y1:w,rx1y2:v,rx2y1:T,rx2y2:_}=this,E=s+m,C=c-f-p,k=a+h,R=l-u-g;return Te(d?"svg:line":w||v||T||_?"svg:path":"svg:rect",o).datum(0).call(Xt,this,i,o).call(Mt,this).call(Fn,this,r).call(Vt,this,{}).call(d==="left"?$=>$.attr("x1",E).attr("x2",E).attr("y1",k).attr("y2",R):d==="right"?$=>$.attr("x1",C).attr("x2",C).attr("y1",k).attr("y2",R):d==="top"?$=>$.attr("x1",E).attr("x2",C).attr("y1",k).attr("y2",k):d==="bottom"?$=>$.attr("x1",E).attr("x2",C).attr("y1",R).attr("y2",R):w||v||T||_?$=>$.call(Fb,E,k,C,R,this):$=>$.attr("x",E).attr("y",k).attr("width",C-E).attr("height",R-k).attr("rx",y).attr("ry",b)).node()}}function J9(e){return new Q9(e)}const Qf={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},eT=new Set(["geometry","href","src","ariaLabel","scales"]);class tT extends Je{constructor(t,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&bn(t)&&Vg(t)&&(n={...n,title:xe});const{x:r,y:i,x1:o,x2:a,y1:f,y2:u,anchor:s,preferredAnchor:c="bottom",monospace:l,fontFamily:d=l?"ui-monospace, monospace":void 0,fontSize:h,fontStyle:p,fontVariant:g,fontWeight:m,lineHeight:y=1,lineWidth:b=20,frameAnchor:w,format:v,textAnchor:T="start",textOverflow:_,textPadding:E=8,title:C,pointerSize:k=12,pathFilter:R="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(t,{x:{value:o!=null&&a!=null?null:r,scale:"x",optional:!0},y:{value:f!=null&&u!=null?null:i,scale:"y",optional:!0},x1:{value:o,scale:"x",optional:a==null},y1:{value:f,scale:"y",optional:u==null},x2:{value:a,scale:"x",optional:o==null},y2:{value:u,scale:"y",optional:f==null},title:{value:C,optional:!0}},n,Qf),this.anchor=ts(s,"anchor"),this.preferredAnchor=ts(c,"preferredAnchor"),this.frameAnchor=rc(w),this.textAnchor=Me(T,"middle"),this.textPadding=+E,this.pointerSize=+k,this.pathFilter=Ie(R),this.lineHeight=+y,this.lineWidth=+b,this.textOverflow=J1(_),this.monospace=!!l,this.fontFamily=Ie(d),this.fontSize=Ce(h),this.fontStyle=Ie(p),this.fontVariant=Ie(g),this.fontWeight=Ie(m);for(const $ in Qf)$ in this.channels&&(this[$]=Qf[$]);this.splitLines=rb(this),this.clipLine=ib(this),this.format=typeof v=="string"||typeof v=="function"?{title:v}:{...v}}render(t,n,r,i,o){const a=this,{x:f,y:u,fx:s,fy:c}=n,{ownerSVGElement:l,document:d}=o,{anchor:h,monospace:p,lineHeight:g,lineWidth:m}=this,{textPadding:y,pointerSize:b,pathFilter:w}=this,{marginTop:v,marginLeft:T}=i,{x1:_,y1:E,x2:C,y2:k,x:R=_??C,y:$=E??k}=r,S=s?s(t.fx)-T:0,x=c?c(t.fy)-v:0,[A,M]=Xa(this,i),N=P1(r,A),L=F1(r,M),z=p?Mc:Sc,H=z(rr);let O,q;"title"in r?(O=Hd.call(this,{title:r.channels.title},n),q=aT):(O=Hd.call(this,r.channels,n),q=fT);const P=Te("svg:g",o).call(Xt,this,i,o).call(nb,this).call(Vt,this,{x:R&&f,y:$&&u}).call(Z=>Z.selectAll().data(t).enter().append("g").attr("transform",W=>`translate(${Math.round(N(W))},${Math.round(L(W))})`).call(Mt,this).call(W=>W.append("path").attr("filter",w)).call(W=>W.append("text").each(function(Y){const j=er(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const I=q.call(a,Y,t,O,n,r);if(typeof I=="string")for(const B of a.splitLines(I))F(j,{value:a.clipLine(B)});else{const B=new Set;for(const G of I){const{label:D=""}=G;D&&B.has(D)||(B.add(D),F(j,G))}}})));function F(Z,{label:W,value:Y,color:j,opacity:I}){W??(W=""),Y??(Y="");const B=j!=null||I!=null;let G,D=m*100;const[ie]=_r(W,D,z,H);if(ie>=0)W=W.slice(0,ie).trimEnd()+rr,G=Y.trim(),Y="";else{(W||!Y&&!B)&&(Y=" "+Y);const[oe]=_r(Y,D-z(W),z,H);oe>=0&&(G=Y.trim(),Y=Y.slice(0,oe).trimEnd()+rr)}const X=Z.append("tspan").attr("x",0).attr("dy",`${g}em`).text("");W&&X.append("tspan").attr("font-weight","bold").text(W),Y&&X.append(()=>d.createTextNode(Y)),B&&X.append("tspan").text(" ").attr("fill",j).attr("fill-opacity",I).style("user-select","none"),G&&X.append("title").text(G)}function K(){const{width:Z,height:W}=i.facet??i;P.selectChildren().each(function(Y){let{x:j,width:I,height:B}=this.getBBox();I=Math.round(I),B=Math.round(B);let G=h;if(G===void 0){const X=N(Y)+S,oe=L(Y)+x,ae=X+I+b+y*2<Z,ce=X-I-b-y*2>0,lt=oe+B+b+y*2<W,wn=oe-B-b-y*2>0;G=ae&&ce?lt&&wn?a.preferredAnchor:wn?"bottom":"top":lt&&wn?ae?"left":"right":(ae||ce)&&(lt||wn)?`${wn?"bottom":"top"}-${ae?"left":"right"}`:a.preferredAnchor}const D=this.firstChild,ie=this.lastChild;if(D.setAttribute("d",oT(G,b,y,I,B)),j)for(const X of ie.childNodes)X.setAttribute("x",-j);ie.setAttribute("y",`${+rT(G,ie.childNodes.length,g).toFixed(6)}em`),ie.setAttribute("transform",`translate(${iT(G,b,y,I,B)})`)}),P.attr("visibility",null)}return t.length&&(P.attr("visibility","hidden"),l.isConnected?Promise.resolve().then(K):typeof requestAnimationFrame<"u"&&requestAnimationFrame(K)),P.node()}}function nT(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Js(t,n)),new tT(e,{...r,x:t,y:n})}function rT(e,t,n){return/^top(?:-|$)/.test(e)?.94-n:-.29-t*n}function iT(e,t,n,r,i){switch(e){case"middle":return[-r/2,i/2];case"top-left":return[n,t+n];case"top":return[-r/2,t/2+n];case"top-right":return[-r-n,t+n];case"right":return[-t/2-r-n,i/2];case"bottom-left":return[n,-t-n];case"bottom":return[-r/2,-t/2-n];case"bottom-right":return[-r-n,-t-n];case"left":return[n+t/2,i/2]}}function oT(e,t,n,r,i){const o=r+n*2,a=i+n*2;switch(e){case"middle":return`M${-o/2},${-a/2}h${o}v${a}h${-o}z`;case"top-left":return`M0,0l${t},${t}h${o-t}v${a}h${-o}z`;case"top":return`M0,0l${t/2},${t/2}h${(o-t)/2}v${a}h${-o}v${-a}h${(o-t)/2}z`;case"top-right":return`M0,0l${-t},${t}h${t-o}v${a}h${o}z`;case"right":return`M0,0l${-t/2},${-t/2}v${t/2-a/2}h${-o}v${a}h${o}v${t/2-a/2}z`;case"bottom-left":return`M0,0l${t},${-t}h${o-t}v${-a}h${-o}z`;case"bottom":return`M0,0l${t/2},${-t/2}h${(o-t)/2}v${-a}h${-o}v${a}h${(o-t)/2}z`;case"bottom-right":return`M0,0l${-t},${-t}h${t-o}v${-a}h${o}z`;case"left":return`M0,0l${t/2},${-t/2}v${t/2-a/2}h${o}v${a}h${-o}v${t/2-a/2}z`}}function Hd(e,t){var i,o;const n={};let r=this.format;r=Yd(r,e,"x"),r=Yd(r,e,"y"),this.format=r;for(const a in r){const f=r[a];if(!(f===null||f===!1))if(a==="fx"||a==="fy")n[a]=!0;else{const u=vd(e,a);u&&(n[a]=u)}}for(const a in e){if(a in n||a in r||eT.has(a)||(a==="x"||a==="y")&&e.geometry)continue;const f=vd(e,a);if(f){if(f.scale==null&&f.defaultScale==="color")continue;n[a]=f}}this.facet&&(t.fx&&!("fx"in r)&&(n.fx=!0),t.fy&&!("fy"in r)&&(n.fy=!0));for(const a in n){const f=this.format[a];if(typeof f=="string"){const u=((i=n[a])==null?void 0:i.value)??((o=t[a])==null?void 0:o.domain())??[];this.format[a]=(Fe(u)?Li:Tr)(f)}else if(f===void 0||f===!0){const u=t[a];this.format[a]=u!=null&&u.bandwidth?$c(u,u.domain()):wr}}return n}function Yd(e,t,n){if(!(n in e))return e;const r=`${n}1`,i=`${n}2`;if((r in e||!(r in t))&&(i in e||!(i in t)))return e;const o=Object.entries(e),a=e[n];return o.splice(o.findIndex(([f])=>f===n)+1,0,[r,a],[i,a]),Object.fromEntries(o)}function aT(e,t,{title:n}){return this.format.title(n.value[e],e)}function*fT(e,t,n,r,i){for(const o in n){if(o==="fx"||o==="fy"){yield{label:sa(r,n,o),value:this.format[o](t[o],e)};continue}if(o==="x1"&&"x2"in n||o==="y1"&&"y2"in n)continue;const a=n[o];if(o==="x2"&&"x1"in n)yield{label:Wd(r,n,"x"),value:Gd(this.format.x2,n.x1,a,e)};else if(o==="y2"&&"y1"in n)yield{label:Wd(r,n,"y"),value:Gd(this.format.y2,n.y1,a,e)};else{const f=a.value[e],u=a.scale;if(!cn(f)&&u==null)continue;yield{label:sa(r,n,o),value:this.format[o](f,e),color:u==="color"?i[o][e]:null,opacity:u==="opacity"?i[o][e]:null}}}}function Gd(e,t,n,r){var i;return(i=n.hint)!=null&&i.length?`${e(n.value[r]-t.value[r],r)}`:`${e(t.value[r],r)}${e(n.value[r],r)}`}function Wd(e,t,n){const r=sa(e,t,`${n}1`,n),i=sa(e,t,`${n}2`,n);return r===i?r:`${r}${i}`}function sa(e,t,n,r=n){const i=t[n],o=e[(i==null?void 0:i.scale)??n];return String((o==null?void 0:o.label)??(i==null?void 0:i.label)??r)}function uT(e={}){var H;const{facet:t,style:n,title:r,subtitle:i,caption:o,ariaLabel:a,ariaDescription:f}=e,u=Wa(e.className),s=e.marks===void 0?[]:Vd(e.marks);s.push(...mT(s));const c=hT(t,e),l=new Map;for(const O of s){const q=Kd(O,c,e);q&&l.set(O,q)}const d=new Map;c&&Rr(d,[c],e),Rr(d,l,e);const h=Vd(gT(s,d,e));for(const O of h){const q=Kd(O,c,e);q&&l.set(O,q)}s.unshift(...h);let p=U4(d,e);if(p!==void 0){const O=c?Wf(p,c):void 0;for(const P of s){if(P.facet===null||P.facet==="super")continue;const F=l.get(P);F!==void 0&&(F.facetsIndex=P.fx!=null||P.fy!=null?Wf(p,F):O)}const q=new Set;for(const{facetsIndex:P}of l.values())P==null||P.forEach((F,K)=>{(F==null?void 0:F.length)>0&&q.add(K)});p.forEach(0<q.size&&q.size<p.length?(P,F)=>P.empty=!q.has(F):P=>P.empty=!1);for(const P of s)if(P.facet==="exclude"){const F=l.get(P);F!==void 0&&(F.facetsIndex=G4(F.facetsIndex))}}for(const O of pe.keys())Ju(e[O])&&O!=="fx"&&O!=="fy"&&d.set(O,[]);const g=new Map;for(const O of s){if(g.has(O))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:q,channels:P}=l.get(O)??{},{data:F,facets:K,channels:Z}=O.initialize(q,P,e);Ec(Z,e),g.set(O,{data:F,facets:K,channels:Z})}const m=os(Rr(d,g,e),e),y=C7(m,s,e);D4(m,y);const b=$d(m),{fx:w,fy:v}=b,T=w||v?$1(m,y):y,_=w||v?TT(b,y):y,E=bc(e),C=E.document,k=va("svg").call(C.documentElement);let R=k;E.ownerSVGElement=k,E.className=u,E.projection=t7(e,T),E.filterFacets=(O,q)=>Wf(p,{channels:q,groups:gc(O,q)}),E.getMarkState=O=>{const q=g.get(O),P=l.get(O);return{...q,channels:{...q.channels,...P==null?void 0:P.channels}}},E.dispatchValue=O=>{R.value!==O&&(R.value=O,R.dispatchEvent(new Event("input",{bubbles:!0})))};const $=new Set;for(const[O,q]of g)if(O.initializer!=null){const P=O.facet==="super"?_:T,F=O.initializer(q.data,q.facets,q.channels,b,P,E);if(F.data!==void 0&&(q.data=F.data),F.facets!==void 0&&(q.facets=F.facets),F.channels!==void 0){const{fx:K,fy:Z,...W}=F.channels;dT(W),Object.assign(q.channels,W);for(const Y of Object.values(W)){const{scale:j}=Y;j!=null&&!Mx(pe.get(j))&&(qb(Y,e),$.add(j))}(K!=null||Z!=null)&&l.set(O,!0)}}if($.size){const O=new Map;Rr(O,g,e,K=>$.has(K)),Rr(d,g,e,K=>$.has(K));const q=xT(os(O,e),m),{scales:P,...F}=$d(q);Object.assign(m,q),Object.assign(b,F),Object.assign(b.scales,P)}let S,x;p!==void 0&&(S={x:w==null?void 0:w.domain(),y:v==null?void 0:v.domain()},p=H4(p,S),x=Y4(w,v,y));for(const[O,q]of g)q.values=O.scale(q.channels,b,E);const{width:A,height:M}=y;er(k).attr("class",u).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",A).attr("height",M).attr("viewBox",`0 0 ${A} ${M}`).attr("aria-label",a).attr("aria-description",f).call(O=>O.append("style").text(`:where(.${u}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${u} text),
:where(.${u} tspan) {
  white-space: pre;
}`)).call(vc,n);for(const O of s){const{channels:q,values:P,facets:F}=g.get(O);if(p===void 0||O.facet==="super"){let K=null;if(F&&(K=F[0],K=O.filter(K,q,P),K.length===0))continue;const Z=O.render(K,b,P,_,E);if(Z==null)continue;k.appendChild(Z)}else{let K;for(const Z of p){if(!(((H=O.facetAnchor)==null?void 0:H.call(O,p,S,Z))??!Z.empty))continue;let W=null;if(F){const j=l.has(O);if(W=F[j?Z.i:0],W=O.filter(W,q,P),W.length===0)continue;!j&&W===F[0]&&(W=cx(W)),W.fx=Z.x,W.fy=Z.y,W.fi=Z.i}const Y=O.render(W,b,P,T,E);if(Y!=null){(K??(K=er(k).append("g"))).append(()=>Y).datum(Z);for(const j of["aria-label","aria-description","aria-hidden","transform"])Y.hasAttribute(j)&&(K.attr(j,Y.getAttribute(j)),Y.removeAttribute(j))}}K==null||K.selectChildren().attr("transform",x)}}const N=L9(m,E,e),{figure:L=r!=null||i!=null||o!=null||N.length>0}=e;L&&(R=C.createElement("figure"),R.className=`${u}-figure`,R.style.maxWidth="initial",r!=null&&R.append(Xd(C,r,"h2")),i!=null&&R.append(Xd(C,i,"h3")),R.append(...N,k),o!=null&&R.append(sT(C,o)),"value"in k&&(R.value=k.value,delete k.value)),R.scale=z4(b.scales),R.legend=C9(m,E,e);const z=b4();return z>0&&er(k).append("text").attr("x",A).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("").append("title").text(`${z.toLocaleString("en-US")} warning${z===1?"":"s"}. Please check the console.`),R}function Xd(e,t,n){if(t.ownerDocument)return t;const r=e.createElement(n);return r.append(t),r}function sT(e,t){const n=e.createElement("figcaption");return n.append(t),n}function Vd(e){return e.flat(1/0).filter(t=>t!=null).map(cT)}function cT(e){return typeof e.render=="function"?e:new lT(e)}class lT extends Je{constructor(t){if(typeof t!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}}function Ec(e,t){for(const n in e)qb(e[n],t);return e}function qb(e,t){const{scale:n,transform:r=!0}=e;if(n==null||!r)return;const{type:i,percent:o,interval:a,transform:f=o?u=>u==null?NaN:u*100:Xg(a,i)}=t[n]??{};f!=null&&(e.value=me(e.value,f),e.transform=!1)}function dT(e){for(const t in e)l1(t,e[t])}function Rr(e,t,n,r=ox){var i,o;for(const{channels:a}of t.values())for(const f in a){const u=a[f],{scale:s}=u;if(s!=null&&r(s))if(s==="projection"){if(!o7(n)){const c=((i=n.x)==null?void 0:i.domain)===void 0,l=((o=n.y)==null?void 0:o.domain)===void 0;if(c||l){const[d,h]=f7(u);c&&Jf(e,"x",d),l&&Jf(e,"y",h)}}}else Jf(e,s,u)}return e}function Jf(e,t,n){const r=e.get(t);r!==void 0?r.push(n):e.set(t,[n])}function hT(e,t){if(e==null)return;const{x:n,y:r}=e;if(n==null&&r==null)return;const i=gr(e.data);if(i==null)throw new Error("missing facet data");const o={};n!=null&&(o.fx=mi(i,{value:n,scale:"fx"})),r!=null&&(o.fy=mi(i,{value:r,scale:"fy"})),Ec(o,t);const a=gc(i,o);return{channels:o,groups:a,data:e.data}}function Kd(e,t,n){if(e.facet===null||e.facet==="super")return;const{fx:r,fy:i}=e;if(r!=null||i!=null){const u=gr(e.data??r??i);if(u===void 0)throw new Error(`missing facet data in ${e.ariaLabel}`);if(u===null)return;const s={};return r!=null&&(s.fx=mi(u,{value:r,scale:"fx"})),i!=null&&(s.fy=mi(u,{value:i,scale:"fy"})),Ec(s,n),{channels:s,groups:gc(u,s)}}if(t===void 0)return;const{channels:o,groups:a,data:f}=t;if(e.facet!=="auto"||e.data===f)return{channels:o,groups:a};f.length>0&&(a.size>1||a.size===1&&o.fx&&o.fy&&[...a][0][1].size>1)&&hi(gr(e.data))===hi(f)&&an(`Warning: the ${e.ariaLabel} mark appears to use faceted data, but isnt faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function pT(e,t={}){return yr({...t,x:null,y:null},(n,r,i,o,a,f)=>f.getMarkState(e))}function mT(e){const t=[];for(const n of e){let r=n.tip;if(r){r===!0?r={}:typeof r=="string"&&(r={pointer:r});let{pointer:i,preferredAnchor:o}=r;i=/^x$/i.test(i)?L7:/^y$/i.test(i)?Dd:N7,r=i(pT(n,r)),r.title=null,o===void 0&&(r.preferredAnchor=i===Dd?"left":"bottom");const a=nT(n.data,r);a.facet=n.facet,a.facetAnchor=n.facetAnchor,t.push(a)}}return t}function gT(e,t,n){let{projection:r,x:i={},y:o={},fx:a={},fy:f={},axis:u,grid:s,facet:c={},facet:{axis:l=u,grid:d}=c,x:{axis:h=u,grid:p=h===null?null:s}=i,y:{axis:g=u,grid:m=g===null?null:s}=o,fx:{axis:y=l,grid:b=y===null?null:d}=a,fy:{axis:w=l,grid:v=w===null?null:d}=f}=n;(r||!Ju(i)&&!Zd("x",e))&&(h=p=null),(r||!Ju(o)&&!Zd("y",e))&&(g=m=null),t.has("fx")||(y=b=null),t.has("fy")||(w=v=null),h===void 0&&(h=!so(e,"x")),g===void 0&&(g=!so(e,"y")),y===void 0&&(y=!so(e,"fx")),w===void 0&&(w=!so(e,"fy")),h===!0&&(h="bottom"),g===!0&&(g="left"),y===!0&&(y=h==="top"||h===null?"bottom":"top"),w===!0&&(w=g==="right"||g===null?"left":"right");const T=[];return uo(T,v,v9,f),fo(T,w,d9,"right","left",c,f),uo(T,b,_9,a),fo(T,y,h9,"top","bottom",c,a),uo(T,m,y9,o),fo(T,g,pb,"left","right",n,o),uo(T,p,w9,i),fo(T,h,mb,"bottom","top",n,i),T}function fo(e,t,n,r,i,o,a){if(!t)return;const f=bT(t);a=yT(f?r:t,o,a);const{line:u}=a;(n===pb||n===mb)&&u&&!pi(u)&&e.push(J9(vT(a))),e.push(n(a)),f&&e.push(n({...a,anchor:i,label:null}))}function uo(e,t,n,r){!t||pi(t)||e.push(n(wT(t,r)))}function bT(e){return/^\s*both\s*$/i.test(e)}function yT(e,t,{line:n=t.line,ticks:r,tickSize:i,tickSpacing:o,tickPadding:a,tickFormat:f,tickRotate:u,fontVariant:s,ariaLabel:c,ariaDescription:l,label:d=t.label,labelAnchor:h,labelArrow:p=t.labelArrow,labelOffset:g}){return{anchor:e,line:n,ticks:r,tickSize:i,tickSpacing:o,tickPadding:a,tickFormat:f,tickRotate:u,fontVariant:s,ariaLabel:c,ariaDescription:l,label:d,labelAnchor:h,labelArrow:p,labelOffset:g}}function vT(e){const{anchor:t,line:n}=e;return{anchor:t,facetAnchor:t+"-empty",stroke:n===!0?void 0:n}}function wT(e,{stroke:t=za(e)?e:void 0,ticks:n=_T(e)?e:void 0,tickSpacing:r,ariaLabel:i,ariaDescription:o}){return{stroke:t,ticks:n,tickSpacing:r,ariaLabel:i,ariaDescription:o}}function _T(e){switch(typeof e){case"number":return!0;case"string":return!za(e)}return bn(e)||typeof(e==null?void 0:e.range)=="function"}function so(e,t){const n=`${t}-axis `;return e.some(r=>{var i;return(i=r.ariaLabel)==null?void 0:i.startsWith(n)})}function Zd(e,t){for(const n of t)for(const r in n.channels){const{scale:i}=n.channels[r];if(i===e||i==="projection")return!0}return!1}function xT(e,t){for(const n in e){const r=e[n],i=t[n];r.label===void 0&&i&&(r.label=i.label)}return e}function TT({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:o,marginLeft:a,width:f,height:u}=mc(n),s=e&&Qd(e),c=t&&Qd(t);return{marginTop:t?c[0]:r,marginRight:e?f-s[1]:i,marginBottom:t?u-c[1]:o,marginLeft:e?s[0]:a,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:f,height:u}}function Qd(e){const t=e.domain();if(t.length===0)return[0,e.bandwidth()];let n=e(t[0]),r=e(t[t.length-1]);return r<n&&([n,r]=[r,n]),[n,r+e.bandwidth()]}const ST=new Map([["basis",k8],["basis-closed",N8],["basis-open",L8],["bundle",I8],["bump-x",v8],["bump-y",w8],["cardinal",D8],["cardinal-closed",R8],["cardinal-open",O8],["catmull-rom",P8],["catmull-rom-closed",F8],["catmull-rom-open",q8],["linear",Ii],["linear-closed",j8],["monotone-x",z8],["monotone-y",B8],["natural",U8],["step",H8],["step-after",G8],["step-before",Y8]]);function jb(e=Ii,t){if(typeof e=="function")return e;const n=ST.get(`${e}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${e}`);if(t!==void 0){if("beta"in n)return n.beta(t);if("tension"in n)return n.tension(t);if("alpha"in n)return n.alpha(t)}return n}function MT(e=ca,t){return typeof e!="function"&&`${e}`.toLowerCase()==="auto"?ca:jb(e,t)}function ca(e){return Ii(e)}function $T(e={y:"count"},t={}){[e,t]=CT(e,t);const{x:n,y:r}=t;return AT(kT(n,t,xe),null,null,r,e,Va(t))}function ET(e,t,n={}){if((n==null?void 0:n.interval)==null)return n;const{reduce:r=lc}=n,i={filter:null};return n[t]!=null&&(i[t]=r),n[`${t}1`]!=null&&(i[`${t}1`]=r),n[`${t}2`]!=null&&(i[`${t}2`]=r),e(i,n)}function zb(e={}){return ET($T,"y",Bi(e,"x"))}function AT(e,t,n,r,{data:i=cc,filter:o=aa,sort:a,reverse:f,...u}={},s={}){e=Jd(e),t=Jd(t),u=LT(u,s),i=Hb(i,xe),a=a==null?void 0:Bb("sort",a,s),o=o==null?void 0:Ub("filter",o,s),r!=null&&ti(u,"y","y1","y2")&&(r=null);const[c,l]=Re(e),[d,h]=Re(e),[p,g]=Re(t),[m,y]=Re(t),[b,w]=r!=null?[r,"y"]:[],[v,T]=Re(b),{x:_,y:E,z:C,fill:k,stroke:R,x1:$,x2:S,y1:x,y2:A,domain:M,cumulative:N,thresholds:L,interval:z,...H}=s,[O,q]=Re(C),[P]=Qe(k),[F]=Qe(R),[K,Z]=Re(P),[W,Y]=Re(F);return{..."z"in s&&{z:O||C},..."fill"in s&&{fill:K||k},..."stroke"in s&&{stroke:W||R},...qi(H,(j,I,B)=>{const G=oa(le(j,b),B==null?void 0:B[w]),D=le(j,C),ie=le(j,P),X=le(j,F),oe=u1(u,{z:D,fill:ie,stroke:X}),ae=[],ce=[],lt=G&&T([]),wn=D&&q([]),uy=ie&&Z([]),sy=X&&Y([]),kc=e&&l([]),cy=e&&h([]),Nc=t&&g([]),ly=t&&y([]),dy=RT(e,t,j);let hy=0;for(const Hn of u)Hn.initialize(j);a&&a.initialize(j),o&&o.initialize(j);for(const Hn of I){const Lc=[];for(const Yn of u)Yn.scope("facet",Hn);a&&a.scope("facet",Hn),o&&o.scope("facet",Hn);for(const[Yn,py]of ni(Hn,oe))for(const[my,Ui]of ni(py,G))for(const[dt,At]of dy(Ui))if(oe&&(At.z=Yn),!(o&&!o.reduce(dt,At))){Lc.push(hy++),ce.push(i.reduceIndex(dt,j,At)),G&&lt.push(my),D&&wn.push(oe===D?Yn:D[(dt.length>0?dt:Ui)[0]]),ie&&uy.push(oe===ie?Yn:ie[(dt.length>0?dt:Ui)[0]]),X&&sy.push(oe===X?Yn:X[(dt.length>0?dt:Ui)[0]]),kc&&(kc.push(At.x1),cy.push(At.x2)),Nc&&(Nc.push(At.y1),ly.push(At.y2));for(const gy of u)gy.reduce(dt,At);a&&a.reduce(dt,At)}ae.push(Lc)}return s1(ae,a,f),{data:ce,facets:ae}}),...!ti(u,"x")&&(c?{x1:c,x2:d,x:es(c,d)}:{x:_,x1:$,x2:S}),...!ti(u,"y")&&(p?{y1:p,y2:m,y:es(p,m)}:{y:E,y1:x,y2:A}),...v&&{[w]:v},...Object.fromEntries(u.map(({name:j,output:I})=>[j,I]))}}function CT({cumulative:e,domain:t,thresholds:n,interval:r,...i},o){return[i,{cumulative:e,domain:t,thresholds:n,interval:r,...o}]}function kT(e,{cumulative:t,domain:n,thresholds:r,interval:i},o){return e={...$r(e)},e.domain===void 0&&(e.domain=n),e.cumulative===void 0&&(e.cumulative=t),e.thresholds===void 0&&(e.thresholds=r),e.interval===void 0&&(e.interval=i),e.value===void 0&&(e.value=o),e.thresholds=NT(e.thresholds,e.interval),e}function Jd(e){if(e==null)return;const{value:t,cumulative:n,domain:r=Ge,thresholds:i}=e,o=a=>{let f=le(a,t),u;if(Fe(f)||DT(i)){f=me(f,Yg,Float64Array);let[c,l]=typeof r=="function"?r(f):r,d=typeof i=="function"&&!Qn(i)?i(f,c,l):i;typeof d=="number"&&(d=qp(c,l,d)),Qn(d)&&(r===Ge&&(c=d.floor(c),l=d.offset(d.floor(l))),d=d.range(c,d.offset(l))),u=d}else{f=mr(f);let[c,l]=typeof r=="function"?r(f):r,d=typeof i=="function"&&!Qn(i)?i(f,c,l):i;if(typeof d=="number")if(r===Ge){let h=Eo(c,l,d);if(isFinite(h))if(h>0){let p=Math.round(c/h),g=Math.round(l/h);p*h<=c||--p,g*h>l||++g;let m=g-p+1;d=new Float64Array(m);for(let y=0;y<m;++y)d[y]=(p+y)*h}else if(h<0){h=-h;let p=Math.round(c*h),g=Math.round(l*h);p/h<=c||--p,g/h>l||++g;let m=g-p+1;d=new Float64Array(m);for(let y=0;y<m;++y)d[y]=(p+y)/h}else d=[c];else d=[c]}else d=ri(c,l,d);else Qn(d)&&(r===Ge&&(c=d.floor(c),l=d.offset(d.floor(l))),d=d.range(c,d.offset(l)));u=d}const s=[];if(u.length===1)s.push([u[0],u[0]]);else for(let c=1;c<u.length;++c)s.push([u[c-1],u[c]]);return s.bin=(n<0?PT:n>0?OT:Ac)(s,u,f),s};return o.label=gn(t),o}function NT(e,t,n=eh){if(e===void 0)return t===void 0?n:Mr(t);if(typeof e=="string"){switch(e.toLowerCase()){case"freedman-diaconis":return H2;case"scott":return Qh;case"sturges":return j2;case"auto":return eh}return Xs(e)}return e}function LT(e,t){return i1(e,t,Bb)}function Bb(e,t,n){return uc(e,t,n,Ub)}function Ub(e,t,n){return sc(e,t,n,Hb)}function Hb(e,t){return Ua(e,t,IT)}function IT(e){switch(`${e}`.toLowerCase()){case"x":return FT;case"x1":return jT;case"x2":return zT;case"y":return qT;case"y1":return BT;case"y2":return UT;case"z":return c1}throw new Error(`invalid bin reduce: ${e}`)}function eh(e,t,n){return Math.min(200,Qh(e,t,n))}function DT(e){return px(e)||bn(e)&&Fe(e)}function RT(e,t,n){const r=e==null?void 0:e(n),i=t==null?void 0:t(n);return r&&i?function*(o){const a=r.bin(o);for(const[f,[u,s]]of r.entries()){const c=i.bin(a[f]);for(const[l,[d,h]]of i.entries())yield[c[l],{data:n,x1:u,y1:d,x2:s,y2:h}]}}:r?function*(o){const a=r.bin(o);for(const[f,[u,s]]of r.entries())yield[a[f],{data:n,x1:u,x2:s}]}:function*(o){const a=i.bin(o);for(const[f,[u,s]]of i.entries())yield[a[f],{data:n,y1:u,y2:s}]}}function Ac(e,t,n){return t=mr(t),r=>{var o;const i=e.map(()=>[]);for(const a of r)(o=i[ma(t,n[a])-1])==null||o.push(a);return i}}function OT(e,t,n){const r=Ac(e,t,n);return i=>{const o=r(i);for(let a=1,f=o.length;a<f;++a){const u=o[a-1],s=o[a];for(const c of u)s.push(c)}return o}}function PT(e,t,n){const r=Ac(e,t,n);return i=>{const o=r(i);for(let a=o.length-2;a>=0;--a){const f=o[a+1],u=o[a];for(const s of f)u.push(s)}return o}}function Yb(e,t){const n=(+e+ +t)/2;return e instanceof Date?new Date(n):n}const FT={reduceIndex(e,t,{x1:n,x2:r}){return Yb(n,r)}},qT={reduceIndex(e,t,{y1:n,y2:r}){return Yb(n,r)}},jT={reduceIndex(e,t,{x1:n}){return n}},zT={reduceIndex(e,t,{x2:n}){return n}},BT={reduceIndex(e,t,{y1:n}){return n}},UT={reduceIndex(e,t,{y2:n}){return n}},HT={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Gb extends Je{constructor(t,n={}){const{x1:r,y1:i,x2:o,y2:a,z:f,curve:u,tension:s}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0},z:{value:ec(n),optional:!0}},n,HT),this.z=f,this.curve=jb(u,s)}filter(t){return t}render(t,n,r,i,o){const{x1:a,y1:f,x2:u=a,y2:s=f}=r;return Te("svg:g",o).call(Xt,this,i,o).call(Vt,this,n,0,0).call(c=>c.selectAll().data(D1(t,[a,f,u,s],this,r)).enter().append("path").call(Mt,this).call(I1,this,r).attr("d",y8().curve(this.curve).defined(l=>l>=0).x0(l=>a[l]).y0(l=>f[l]).x1(l=>u[l]).y1(l=>s[l]))).node()}}function th(e,t){return t===void 0?Cc(e,{x:Zs,y:ra}):new Gb(e,t)}function Cc(e,t){const{x:n=Ri,...r}=zb(t);return new Gb(e,Nb(kb({...r,x1:n,x2:void 0})))}const YT={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Wb extends Je{constructor(t,n={}){const{x:r,y:i,z:o,curve:a,tension:f}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:ec(n),optional:!0}},n,YT),this.z=o,this.curve=MT(a,f),_c(this,n)}filter(t){return t}project(t,n,r){this.curve!==ca&&super.project(t,n,r)}render(t,n,r,i,o){const{x:a,y:f}=r,{curve:u}=this;return Te("svg:g",o).call(Xt,this,i,o).call(Vt,this,n).call(s=>s.selectAll().data(D1(t,[a,f],this,r)).enter().append("path").call(Mt,this).call(I1,this,r).call(P7,this,r,o).attr("d",u===ca&&o.projection?GT(o.projection,a,f):fg().curve(u).defined(c=>c>=0).x(c=>a[c]).y(c=>f[c]))).node()}}function GT(e,t,n){const r=Ma(e);return t=mr(t),n=mr(n),i=>{let o=[];const a=[o];for(const f of i)f===-1?(o=[],a.push(o)):o.push([t[f],n[f]]);return r({type:"MultiLineString",coordinates:a})}}function WT(e,{x:t,y:n,...r}={}){return[t,n]=Js(t,n),new Wb(e,{...r,x:t,y:n})}function Ja(e,{x:t=Ri,y:n=xe,...r}={}){return new Wb(e,zb({...r,x:t,y:n}))}function Xb(e,t){return XT("y",e,t)}function XT(e,t,{x1:n,x2:r,y1:i,y2:o,x:a=n===void 0&&r===void 0?Ri:void 0,y:f=i===void 0&&o===void 0?xe:void 0,fill:u,positiveFill:s="#3ca951",negativeFill:c="#4269d0",fillOpacity:l=1,positiveFillOpacity:d=l,negativeFillOpacity:h=l,stroke:p,strokeOpacity:g,z:m=Qe(p)[0],clip:y,tip:b,render:w,...v}={}){return[n,r]=nh(a,n,r),[i,o]=nh(f,i,o),n===r&&i===o&&(i=en(0)),{tip:b}=Bi({tip:b},"x"),Un(Ee(s)?null:Object.assign(th(t,{x1:n,x2:r,y1:i,y2:o,z:m,fill:s,fillOpacity:d,render:ua(w,rh(e,!0)),clip:y,...v}),{ariaLabel:"positive difference"}),Ee(c)?null:Object.assign(th(t,{x1:n,x2:r,y1:i,y2:o,z:m,fill:c,fillOpacity:h,render:ua(w,rh(e,!1)),clip:y,...v}),{ariaLabel:"negative difference"}),WT(t,{x:r,y:o,z:m,stroke:p,strokeOpacity:g,tip:b,clip:!0,...v}))}function nh(e,t,n){return t===void 0&&n===void 0?t=n=en(e):t===void 0?(n=en(n),t=e===void 0?n:en(e)):n===void 0?(t=en(t),n=e===void 0?t:en(e)):(t=en(t),n=en(n)),[t,n]}function en(e){let t;const{value:n,label:r=gn(n)}=$r(e);return{transform:i=>t||(t=le(i,n)),label:r}}function rh(e,t){const n="x",r=`${n}1`,i=`${n}2`,o=`${e}1`,a=`${e}2`;return(f,u,s,c,l,d)=>{const{[r]:h,[i]:p}=s,g=new Float32Array(h.length),m=new Float32Array(p.length),y=c.height;(t===M1(u[e])<0?g:m).fill(y);const b=d(f,u,{...s,[i]:h,[a]:m},c,l),w=d(f,u,{...s,[r]:p,[o]:g},c,l),v=b.querySelector("g")??b,T=w.querySelector("g")??w;for(let _=0;v.firstChild;_+=2){const E=L1(),C=Te("svg:clipPath",l).attr("id",E).node();C.appendChild(v.firstChild),T.childNodes[_].setAttribute("clip-path",`url(#${E})`),T.insertBefore(C,T.childNodes[_])}return w}}Je.prototype.plot=function({marks:e=[],...t}={}){return uT({...t,marks:[...e,this]})};function ih(e){const t=document.createElement("template");return t.innerHTML=e,document.importNode(t.content,!0)}function oh(e){const t=document.createElementNS("http://www.w3.org/2000/svg","g");return t.innerHTML=e,t}Object.assign(da(ih,e=>{if(e.firstChild===null)return null;if(e.firstChild===e.lastChild)return e.removeChild(e.firstChild);const t=document.createElement("span");return t.appendChild(e),t}),{fragment:da(ih,e=>e)});const VT=Object.assign(da(oh,e=>e.firstChild===null?null:e.firstChild===e.lastChild?e.removeChild(e.firstChild):e),{fragment:da(oh,e=>{const t=document.createDocumentFragment();for(;e.firstChild;)t.appendChild(e.firstChild);return t})}),KT=9,ZT=10,QT=12,JT=13,eS=32,tS=65,nS=90,rS=97,iS=122,co=60,ke=62,Kt=47,ht=45,eu=33,tu=61,ah=34,fh=39,oS=63,Se=1,uh=2,sh=3,nu=4,lo=5,Zt=6,ru=7,ho=8,po=9,iu=10,ou=11,mo=12,au=13,Or=14,ch=15,lh=16,It=17,dh=18,hh=19,ph=20,mh=21,fu=22,Pr=23,gh=24,bh=25,pt=26,yh=27,vh=28,wh=29,aS=128,_h=1,fS=8,uS=1,Vb="http://www.w3.org/2000/svg",_n="http://www.w3.org/1999/xlink",xh="http://www.w3.org/XML/1998/namespace",Th="http://www.w3.org/2000/xmlns/",Kb=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),la=new Map([["xlink:actuate",_n],["xlink:arcrole",_n],["xlink:href",_n],["xlink:role",_n],["xlink:show",_n],["xlink:title",_n],["xlink:type",_n],["xml:lang",xh],["xml:space",xh],["xmlns",Th],["xmlns:xlink",Th]]);function da(e,t){return function({raw:n}){let r=Se,i="",o,a,f,u,s=0;for(let h=0,p=arguments.length;h<p;++h){const g=n[h];if(h>0){const m=arguments[h];switch(r){case pt:{if(m!=null){const y=`${m}`;if(Zb(a))i+=y.replace(/[<]/g,Vn);else{if(new RegExp(`</${a}[\\s>/]`,"i").test(i.slice(-a.length-2)+y))throw new Error("unsafe raw text");i+=y}}break}case Se:{m==null||(m instanceof Node||typeof m!="string"&&m[Symbol.iterator]||/(?:^|>)$/.test(n[h-1])&&/^(?:<|$)/.test(g)?(i+="<!--::"+h+"-->",s|=aS):i+=`${m}`.replace(/[<&]/g,Vn));break}case po:{r=mo;let y;if(/^[\s>]/.test(g)){if(m==null||m===!1){i=i.slice(0,f-n[h-1].length);break}if(m===!0||(y=`${m}`)==""){i+="''";break}if(n[h-1].slice(f,u)==="style"&&uu(m)||typeof m=="function"){i+="::"+h,s|=_h;break}}if(y===void 0&&(y=`${m}`),y==="")throw new Error("unsafe unquoted empty string");i+=y.replace(/^['"]|[\s>&]/g,Vn);break}case mo:{i+=`${m}`.replace(/[\s>&]/g,Vn);break}case ou:{i+=`${m}`.replace(/['&]/g,Vn);break}case iu:{i+=`${m}`.replace(/["&]/g,Vn);break}case Zt:{if(uu(m)){i+="::"+h+"=''",s|=_h;break}throw new Error("invalid binding")}case It:break;default:throw new Error("invalid binding")}}for(let m=0,y=g.length;m<y;++m){const b=g.charCodeAt(m);switch(r){case Se:{b===co&&(r=uh);break}case uh:{b===eu?r=bh:b===Kt?r=sh:go(b)?(o=m,a=void 0,r=nu,--m):b===oS?(r=lo,--m):(r=Se,--m);break}case sh:{go(b)?(r=nu,--m):b===ke?r=Se:(r=lo,--m);break}case nu:{Qt(b)?(r=Zt,a=qr(g,o,m)):b===Kt?r=Or:b===ke&&(a=qr(g,o,m),r=Fr(a)?pt:Se);break}case Zt:{Qt(b)||(b===Kt||b===ke?(r=ru,--m):b===tu?(r=ho,f=m+1,u=void 0):(r=ho,--m,f=m+1,u=void 0));break}case ho:{Qt(b)||b===Kt||b===ke?(r=ru,--m,u=m):b===tu&&(r=po,u=m);break}case ru:{Qt(b)||(b===Kt?r=Or:b===tu?r=po:b===ke?r=Fr(a)?pt:Se:(r=ho,--m,f=m+1,u=void 0));break}case po:{Qt(b)||(b===ah?r=iu:b===fh?r=ou:b===ke?r=Fr(a)?pt:Se:(r=mo,--m));break}case iu:{b===ah&&(r=au);break}case ou:{b===fh&&(r=au);break}case mo:{Qt(b)?r=Zt:b===ke&&(r=Fr(a)?pt:Se);break}case au:{Qt(b)?r=Zt:b===Kt?r=Or:b===ke?r=Fr(a)?pt:Se:(r=Zt,--m);break}case Or:{b===ke?r=Se:(r=Zt,--m);break}case lo:{b===ke&&(r=Se);break}case ch:{b===ht?r=lh:b===ke?r=Se:(r=It,--m);break}case lh:{b===ht?r=Pr:b===ke?r=Se:(r=It,--m);break}case It:{b===co?r=dh:b===ht&&(r=fu);break}case dh:{b===eu?r=hh:b!==co&&(r=It,--m);break}case hh:{b===ht?r=ph:(r=It,--m);break}case ph:{b===ht?r=mh:(r=Pr,--m);break}case mh:{r=Pr,--m;break}case fu:{b===ht?r=Pr:(r=It,--m);break}case Pr:{b===ke?r=Se:b===eu?r=gh:b!==ht&&(r=It,--m);break}case gh:{b===ht?r=fu:b===ke?r=Se:(r=It,--m);break}case bh:{b===ht&&g.charCodeAt(m+1)===ht?(r=ch,++m):(r=lo,--m);break}case pt:{b===co&&(r=yh);break}case yh:{b===Kt?r=vh:(r=pt,--m);break}case vh:{go(b)?(o=m,r=wh,--m):(r=pt,--m);break}case wh:{Qt(b)&&a===qr(g,o,m)?r=Zt:b===Kt&&a===qr(g,o,m)?r=Or:b===ke&&a===qr(g,o,m)?r=Se:go(b)||(r=pt,--m);break}default:{r=void 0;break}}}i+=g}const c=e(i),l=document.createTreeWalker(c,s,null,!1),d=[];for(;l.nextNode();){const h=l.currentNode;switch(h.nodeType){case uS:{const p=h.attributes;for(let g=0,m=p.length;g<m;++g){const{name:y,value:b}=p[g];if(/^::/.test(y)){const w=arguments[+y.slice(2)];Sh(h,y),--g,--m;for(const v in w){const T=w[v];T==null||T===!1||(typeof T=="function"?h[v]=T:v==="style"&&uu(T)?Mh(h[v],T):sS(h,v,T===!0?"":T))}}else if(/^::/.test(b)){const w=arguments[+b.slice(2)];Sh(h,y),--g,--m,typeof w=="function"?h[y]=w:Mh(h[y],w)}}break}case fS:{if(/^::/.test(h.data)){const p=h.parentNode,g=arguments[+h.data.slice(2)];if(g instanceof Node)p.insertBefore(g,h);else if(typeof g!="string"&&g[Symbol.iterator])if(g instanceof NodeList||g instanceof HTMLCollection)for(let m=g.length-1,y=h;m>=0;--m)y=p.insertBefore(g[m],y);else for(const m of g)m!=null&&p.insertBefore(m instanceof Node?m:document.createTextNode(m),h);else p.insertBefore(document.createTextNode(g),h);d.push(h)}break}}}for(const h of d)h.parentNode.removeChild(h);return t(c)}}function Vn(e){return`&#${e.charCodeAt(0).toString()};`}function go(e){return tS<=e&&e<=nS||rS<=e&&e<=iS}function Qt(e){return e===KT||e===ZT||e===QT||e===eS||e===JT}function uu(e){return e&&e.toString===Object.prototype.toString}function Fr(e){return e==="script"||e==="style"||Zb(e)}function Zb(e){return e==="textarea"||e==="title"}function qr(e,t,n){return e.slice(t,n).toLowerCase()}function sS(e,t,n){if(e.namespaceURI===Vb&&(t=t.toLowerCase(),t=Kb.get(t)||t,la.has(t))){e.setAttributeNS(la.get(t),t,n);return}e.setAttribute(t,n)}function Sh(e,t){if(e.namespaceURI===Vb&&(t=t.toLowerCase(),t=Kb.get(t)||t,la.has(t))){e.removeAttributeNS(la.get(t),t);return}e.removeAttribute(t)}function Mh(e,t){for(const n in t){const r=t[n];n.startsWith("--")?e.setProperty(n,r):e[n]=r}}function Qb(e){return[Ka([0]),V1(e,{x:t=>new Date(t.date),stroke:yt.slate[500],opacity:.3}),tb(e,{x:t=>new Date(t.date),text:t=>t.name,frameAnchor:"top",textAnchor:"start",fill:yt.slate[500],stroke:yt.slate[950],strokeWidth:5,dx:1,dy:-17})]}const Jb={stroke:yt.slate[700],fill:yt.slate[800],fillOpacity:.9,format:{x:!1,y:!1,z:!1,amount:e=>e.toLocaleString("en-AU",{style:"currency",currency:"AUD"}),date:e=>Eh(e).format("D MMMM, YYYY")}},ey={marginTop:20,marginBottom:30,marginLeft:60,marginRight:20,x:{grid:!1},y:{grid:!0,transform:e=>e/1e3,label:"AUD (K)",labelArrow:"none",labelOffset:47}};function ty({width:e,height:t,timeseries:n,scenarioEvents:r,color:i=yt.violet[700],opacity:o=.5}){const a=V.useRef(null);return V.useEffect(()=>{var u;const f=Un([()=>VT`<defs>
        <linearGradient id="gradient" gradientTransform="rotate(90)">
          <stop offset="20%" stop-color="${i}" stop-opacity="0.5" />
          <stop offset="100%" stop-color="${i}" stop-opacity="0" />
        </linearGradient>
      </defs>`,...Qb(r),Cc(n,{x:s=>new Date(s.date),y:"amount",fill:"url(#gradient)",opacity:o}),Ja(n,{x:s=>new Date(s.date),y:"amount",stroke:i,marker:"dot",channels:{amount:{label:"",value:"amount"},date:{label:"",value:"date"}},tip:Jb})]).plot({...ey,width:e,height:t});return(u=a.current)==null||u.append(f),()=>f.remove()},[i,n,t,o,r,e]),U.jsx("div",{ref:a,className:"h-full w-full"})}ty.__docgenInfo={description:"",methods:[],displayName:"AreaChart",props:{width:{required:!0,tsType:{name:"number"},description:""},height:{required:!0,tsType:{name:"number"},description:""},timeseries:{required:!0,tsType:{name:"TimeSeriesData"},description:""},scenarioEvents:{required:!0,tsType:{name:"ScenarioStartEvents"},description:""},color:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"twColors.violet[700]",computed:!0}},opacity:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0.5",computed:!1}}}};const wt={primaryLight:yt.violet[600],primary:yt.violet[700],secondary:yt.amber[400],secondaryDark:yt.amber[500]};function ny({width:e,height:t,timeseries:n,scenarioEvents:r}){const i=V.useRef(null);return V.useEffect(()=>{var a;const o=Un([...Qb(r),Xb(n,r1({y1:fa(f=>f.name==="highlighted"),y2:fa(f=>f.name==="pinned")},{x:f=>new Date(f.date),y:"amount",positiveFill:wt.secondary,negativeFill:wt.primary,fillOpacity:.2})),Ja(n,{x:f=>new Date(f.date),y:"amount",stroke:f=>f.name==="highlighted"?wt.primaryLight:wt.secondary,marker:"dot",channels:{amount:{label:"",value:"amount"},date:{label:"",value:"date"}},tip:Jb})]).plot({...ey,width:e,height:t});return(a=i.current)==null||a.append(o),()=>o.remove()},[n,t,e,r]),U.jsx("div",{ref:i,className:"h-full w-full"})}ny.__docgenInfo={description:"",methods:[],displayName:"DifferenceChart",props:{width:{required:!0,tsType:{name:"number"},description:""},height:{required:!0,tsType:{name:"number"},description:""},timeseries:{required:!0,tsType:{name:"TimeSeriesData"},description:""},scenarioEvents:{required:!0,tsType:{name:"ScenarioStartEvents"},description:""}}};function cS(e,t){if(e.length<=2)return e;const[n,r]=t;let i=Math.floor((e.length-1)*(n/100)),o=Math.floor((e.length-1)*(r/100));if(o-i===0)if(o+1<e.length)o+=1;else if(i-1>=0)i-=1;else throw new Error("Invalid selection (should have at least two data points)");const a=e[i].date,f=e[o].date;return e.filter(u=>u.date>=a&&u.date<=f)}function lS(e,t){if(t.length<2)return[];const n=t[0].date,r=t[t.length-1].date;return e.filter(i=>i.date>=n&&i.date<=r)}function ry({type:e,timeseries:t,scenarioEvents:n,selection:r}){const i=V.useMemo(()=>cS(t,r),[t,r]),o=V.useMemo(()=>lS(n,i),[n,i]);if(i.length<2){const a=i.length===0?"No data":"Insufficient data";return U.jsx("div",{className:"flex h-full items-center justify-center text-lg font-medium text-slate-600",children:a})}return U.jsx("div",{className:"h-full pt-1",children:U.jsx(ds,{children:({width:a,height:f})=>e==="area"?U.jsx(ty,{width:a,height:f,timeseries:i,scenarioEvents:o}):U.jsx(ny,{width:a,height:f,timeseries:i,scenarioEvents:o})})})}ry.__docgenInfo={description:"",methods:[],displayName:"ScenarioChart",props:{type:{required:!0,tsType:{name:"union",raw:"'area' | 'difference'",elements:[{name:"literal",value:"'area'"},{name:"literal",value:"'difference'"}]},description:""},timeseries:{required:!0,tsType:{name:"TimeSeriesData"},description:""},scenarioEvents:{required:!0,tsType:{name:"ScenarioStartEvents"},description:""},selection:{required:!0,tsType:{name:"TimeScrubberSelection"},description:""}}};function iy({width:e,height:t,data:n}){const r=V.useRef(null);return V.useEffect(()=>{var o;const i=Un([Ka([0]),Cc(n,{x:a=>new Date(a.date),y:"amount",fill:wt.primary,opacity:.5}),Ja(n,{x:a=>new Date(a.date),y:"amount",stroke:wt.primary})]).plot({width:e,height:t,marginLeft:0,marginRight:0,marginTop:16,y:{axis:null}});return(o=r.current)==null||o.append(i),()=>i.remove()},[n,t,e]),U.jsx("div",{ref:r,className:"h-full w-full"})}iy.__docgenInfo={description:"",methods:[],displayName:"TimelineAreaChart",props:{width:{required:!0,tsType:{name:"number"},description:""},height:{required:!0,tsType:{name:"number"},description:""},data:{required:!1,tsType:{name:"Plot.Data"},description:""}}};function oy({width:e,height:t,data:n}){const r=V.useRef(null);return V.useEffect(()=>{var o;const i=Un([Ka([0]),Xb(n,r1({y1:fa(a=>a.name==="highlighted"),y2:fa(a=>a.name==="pinned")},{x:a=>new Date(a.date),y:"amount",positiveFill:wt.secondary,negativeFill:wt.primary,fillOpacity:.2})),Ja(n,{x:a=>new Date(a.date),y:"amount",stroke:a=>a.name==="highlighted"?wt.primaryLight:wt.secondary})]).plot({width:e,height:t,marginLeft:0,marginRight:0,marginTop:16,y:{axis:null}});return(o=r.current)==null||o.append(i),()=>i.remove()},[n,t,e]),U.jsx("div",{ref:r,className:"h-full w-full"})}oy.__docgenInfo={description:"",methods:[],displayName:"TimelineDifferenceChart",props:{width:{required:!0,tsType:{name:"number"},description:""},height:{required:!0,tsType:{name:"number"},description:""},data:{required:!1,tsType:{name:"Plot.Data"},description:""}}};function dS({disabled:e=!1,leftPanelRef:t,rightPanelRef:n,selection:r,onUpdateSelection:i}){const[o,a]=r,f=V.useCallback(c=>{i&&i([c,a])},[i,a]),u=V.useCallback(c=>{i&&i([o,100-c])},[i,o]),s=V.useCallback(()=>{var l,d;a-o!==100&&((l=t.current)==null||l.resize(0),(d=n.current)==null||d.resize(0),i&&i([0,100]))},[o,a,t,n,i]);return V.useEffect(()=>{var c,l;e&&((c=t.current)==null||c.resize(o),(l=n.current)==null||l.resize(100-a))},[e,a,t,n,o]),{start:o,end:a,updateStart:f,updateEnd:u,maximize:s}}function ay({disabled:e=!1,selection:t,onUpdateSelection:n}){const r=V.useRef(null),i=V.useRef(null),{start:o,end:a,updateStart:f,updateEnd:u,maximize:s}=dS({leftPanelRef:r,rightPanelRef:i,selection:t,onUpdateSelection:n,disabled:e}),c=a-o===999;return U.jsxs(Sy,{direction:"horizontal",onDoubleClick:s,children:[U.jsx(ef,{className:"bg-gradient-to-tr from-slate-600/5 to-slate-600/20 backdrop-blur-[1px]",ref:r,defaultSize:o,onResize:f}),U.jsx(Rc,{className:"flex w-[5px] flex-col items-center justify-center bg-slate-700",disabled:e,children:U.jsx(Ic,{className:"text-slate-950",size:16})}),U.jsx(ef,{className:`border-b border-t border-slate-700 ${c&&"cursor-grab"}`}),U.jsx(Rc,{className:"flex w-[5px] flex-col items-center justify-center bg-slate-700",disabled:e,children:U.jsx(Ic,{className:"text-slate-950",size:16})}),U.jsx(ef,{className:"border-t-slate-50/5x border-b border-b-slate-800 bg-gradient-to-tr from-slate-600/5 to-slate-600/20 backdrop-blur-[1px]",ref:i,defaultSize:100-a,onResize:u})]})}ay.__docgenInfo={description:"",methods:[],displayName:"TimelineSelector",props:{disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},selection:{required:!0,tsType:{name:"TimeScrubberSelection"},description:""},onUpdateSelection:{required:!1,tsType:{name:"signature",type:"function",raw:"(selection: TimeScrubberSelection) => void",signature:{arguments:[{type:{name:"TimeScrubberSelection"},name:"selection"}],return:{name:"void"}}},description:""}}};function fy({data:e,type:t,selection:n,onUpdateSelection:r}){const i=e&&Array.from(e).length<2;return U.jsxs("div",{className:"relative h-20 bg-slate-900",children:[!i&&U.jsx(ds,{children:({width:o,height:a})=>t==="area"?U.jsx(iy,{width:o,height:a,data:e}):U.jsx(oy,{width:o,height:a,data:e})}),U.jsx("div",{className:"absolute bottom-0 left-0 right-0 top-0",children:U.jsx(ay,{selection:n,onUpdateSelection:r,disabled:i})})]})}fy.__docgenInfo={description:"",methods:[],displayName:"TimelineScrubber",props:{type:{required:!0,tsType:{name:"union",raw:"'area' | 'difference'",elements:[{name:"literal",value:"'area'"},{name:"literal",value:"'difference'"}]},description:""},data:{required:!1,tsType:{name:"Plot.Data"},description:""},selection:{required:!0,tsType:{name:"TimeScrubberSelection"},description:""},onUpdateSelection:{required:!1,tsType:{name:"signature",type:"function",raw:"(selection: TimeScrubberSelection) => void",signature:{arguments:[{type:{name:"TimeScrubberSelection"},name:"selection"}],return:{name:"void"}}},description:""}}};export{V1 as A,eb as B,yr as C,N7 as D,vd as E,Cc as F,Xb as G,Hy as H,Ja as I,r1 as J,fa as K,tb as L,Je as M,D9 as N,VT as O,ds as R,Bh as S,fy as T,zh as a,ry as b,My as c,f2 as d,M2 as e,xS as f,$T as g,B7 as h,xe as i,wS as j,rc as k,Te as l,Un as m,Xt as n,Vt as o,Ys as p,Mt as q,Ka as r,Cu as s,Z1 as t,Fn as u,_S as v,qs as w,qe as x,Xa as y,Dg as z};
