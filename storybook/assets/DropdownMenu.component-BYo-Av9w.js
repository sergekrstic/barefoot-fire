import{j as n}from"./jsx-runtime-D_zvdyIk.js";import{r as t}from"./index-PahMPgEy.js";import{u as M,a as G,b as E,c as P,d as J,e as K,s as Q,f as V,g as W,h as X,i as Y,j as Z,k as $,F as ee,l as k,m as te,n as ne,o as se,p as ae,q as oe,r as ie,t as re,v as ce}from"./floating-ui.react-f02HS2BF.js";const N=t.createContext({getItemProps:()=>({}),activeIndex:null,setActiveIndex:()=>{},setHasFocusInside:()=>{},isOpen:!1}),b=t.forwardRef(({children:c,label:d,menuButtonClasses:R,menuContainerClasses:a,menuItemClasses:v,...i},I)=>{const[s,m]=t.useState(!1),[f,r]=t.useState(!1),[h,y]=t.useState(null),C=t.useRef([]),T=t.useRef([]),F=t.useContext(N),o=M(),u=G(),g=E(),j=P(),e=g!=null,{floatingStyles:S,refs:q,context:l}=J({nodeId:u,open:s,onOpenChange:m,placement:e?"right-start":"bottom-start",middleware:[oe({mainAxis:e?0:4,alignmentAxis:e?-4:0}),ie(),re()],whileElementsMounted:ce}),_=K(l,{enabled:e,delay:{open:75},handleClose:Q({blockPointerEvents:!0})}),A=V(l,{event:"mousedown",toggle:!e,ignoreMouse:e}),H=W(l,{role:"menu"}),O=X(l,{bubbles:!0}),L=Y(l,{listRef:C,activeIndex:h,nested:e,onNavigate:y}),B=Z(l,{listRef:T,onMatch:s?y:void 0,activeIndex:h}),{getReferenceProps:z,getFloatingProps:D,getItemProps:U}=$([_,A,H,O,L,B]);return t.useEffect(()=>{if(!o)return;function x(){m(!1)}function p(w){w.nodeId!==u&&w.parentId===g&&m(!1)}return o.events.on("click",x),o.events.on("menuopen",p),()=>{o.events.off("click",x),o.events.off("menuopen",p)}},[o,u,g]),t.useEffect(()=>{s&&o&&o.events.emit("menuopen",{parentId:g,nodeId:u})},[o,s,u,g]),n.jsxs(ee,{id:u,children:[n.jsxs("button",{ref:k([q.setReference,j.ref,I]),tabIndex:e?F.activeIndex===j.index?0:-1:void 0,role:e?"menuitem":void 0,"data-open":s?"":void 0,"data-nested":e?"":void 0,"data-focus-inside":f?"":void 0,className:e?v:R,...z(F.getItemProps({...i,onFocus(x){var p;(p=i.onFocus)==null||p.call(i,x),r(!1),F.setHasFocusInside(!0)}})),children:[d,e&&n.jsx("span",{"aria-hidden":!0,style:{marginLeft:10,fontSize:10},children:"â–¶"})]}),n.jsx(N.Provider,{value:{activeIndex:h,setActiveIndex:y,getItemProps:U,setHasFocusInside:r,isOpen:s},children:n.jsx(te,{elementsRef:C,labelsRef:T,children:s&&n.jsx(ne,{children:n.jsx(se,{context:l,modal:!1,initialFocus:e?-1:0,returnFocus:!e,children:n.jsx("div",{ref:q.setFloating,className:a,style:S,...D(),children:c})})})})})]})}),de=t.forwardRef(({label:c,disabled:d,className:R,...a},v)=>{const i=t.useContext(N),I=P({label:d?null:c}),s=M(),m=I.index===i.activeIndex;return n.jsx("button",{...a,ref:k([I.ref,v]),type:"button",role:"menuitem",className:R,tabIndex:m?0:-1,disabled:d,...i.getItemProps({onClick(f){var r;(r=a.onClick)==null||r.call(a,f),s==null||s.events.emit("click")},onFocus(f){var r;(r=a.onFocus)==null||r.call(a,f),i.setHasFocusInside(!0)}}),children:c})}),le=t.forwardRef((c,d)=>E()===null?n.jsx(ae,{children:n.jsx(b,{...c,ref:d})}):n.jsx(b,{...c,ref:d}));b.__docgenInfo={description:"",methods:[],displayName:"MenuComponent",props:{label:{required:!0,tsType:{name:"union",raw:"string | React.ReactNode | React.ReactElement",elements:[{name:"string"},{name:"ReactReactNode",raw:"React.ReactNode"},{name:"ReactReactElement",raw:"React.ReactElement"}]},description:""},nested:{required:!1,tsType:{name:"boolean"},description:""},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},menuButtonClasses:{required:!1,tsType:{name:"string"},description:""},menuContainerClasses:{required:!1,tsType:{name:"string"},description:""},menuItemClasses:{required:!1,tsType:{name:"string"},description:""}}};de.__docgenInfo={description:"",methods:[],displayName:"MenuItem",props:{label:{required:!0,tsType:{name:"string"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""}}};le.__docgenInfo={description:"",methods:[],displayName:"Menu",props:{label:{required:!0,tsType:{name:"union",raw:"string | React.ReactNode | React.ReactElement",elements:[{name:"string"},{name:"ReactReactNode",raw:"React.ReactNode"},{name:"ReactReactElement",raw:"React.ReactElement"}]},description:""},nested:{required:!1,tsType:{name:"boolean"},description:""},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},menuButtonClasses:{required:!1,tsType:{name:"string"},description:""},menuContainerClasses:{required:!1,tsType:{name:"string"},description:""},menuItemClasses:{required:!1,tsType:{name:"string"},description:""}}};export{le as M,de as a};
