import{j as n}from"./jsx-runtime-CLpGMVip.js";import{r as t}from"./index-BBGmM4Ve.js";import{j as M,k as G,l as E,m as P,u as J,n as K,p as Q,q as V,b as W,c as X,d as Y,e as Z,g as $,r as ee,t as k,v as te,F as ne,i as se,w as ae,o as ie,f as oe,s as re,a as ce}from"./floating-ui.react-40E8SCbq.js";const N=t.createContext({getItemProps:()=>({}),activeIndex:null,setActiveIndex:()=>{},setHasFocusInside:()=>{},isOpen:!1}),b=t.forwardRef(({children:c,label:d,menuButtonClasses:R,menuContainerClasses:a,menuItemClasses:h,...o},I)=>{const[s,m]=t.useState(!1),[f,r]=t.useState(!1),[y,F]=t.useState(null),C=t.useRef([]),T=t.useRef([]),v=t.useContext(N),i=M(),u=G(),g=E(),j=P(),e=g!=null,{floatingStyles:S,refs:q,context:l}=J({nodeId:u,open:s,onOpenChange:m,placement:e?"right-start":"bottom-start",middleware:[ie({mainAxis:e?0:4,alignmentAxis:e?-4:0}),oe(),re()],whileElementsMounted:ce}),_=K(l,{enabled:e,delay:{open:75},handleClose:Q({blockPointerEvents:!0})}),A=V(l,{event:"mousedown",toggle:!e,ignoreMouse:e}),H=W(l,{role:"menu"}),O=X(l,{bubbles:!0}),L=Y(l,{listRef:C,activeIndex:y,nested:e,onNavigate:F}),B=Z(l,{listRef:T,onMatch:s?F:void 0,activeIndex:y}),{getReferenceProps:z,getFloatingProps:D,getItemProps:U}=$([_,A,H,O,L,B]);return t.useEffect(()=>{if(!i)return;function x(){m(!1)}function p(w){w.nodeId!==u&&w.parentId===g&&m(!1)}return i.events.on("click",x),i.events.on("menuopen",p),()=>{i.events.off("click",x),i.events.off("menuopen",p)}},[i,u,g]),t.useEffect(()=>{s&&i&&i.events.emit("menuopen",{parentId:g,nodeId:u})},[i,s,u,g]),n.jsxs(ee,{id:u,children:[n.jsxs("button",{ref:k([q.setReference,j.ref,I]),tabIndex:e?v.activeIndex===j.index?0:-1:void 0,role:e?"menuitem":void 0,"data-open":s?"":void 0,"data-nested":e?"":void 0,"data-focus-inside":f?"":void 0,className:e?h:R,...z(v.getItemProps({...o,onFocus(x){var p;(p=o.onFocus)==null||p.call(o,x),r(!1),v.setHasFocusInside(!0)}})),children:[d,e&&n.jsx("span",{"aria-hidden":!0,style:{marginLeft:10,fontSize:10},children:"â–¶"})]}),n.jsx(N.Provider,{value:{activeIndex:y,setActiveIndex:F,getItemProps:U,setHasFocusInside:r,isOpen:s},children:n.jsx(te,{elementsRef:C,labelsRef:T,children:s&&n.jsx(ne,{children:n.jsx(se,{context:l,modal:!1,initialFocus:e?-1:0,returnFocus:!e,children:n.jsx("div",{ref:q.setFloating,className:a,style:S,...D(),children:c})})})})})]})}),de=t.forwardRef(({label:c,disabled:d,className:R,...a},h)=>{const o=t.useContext(N),I=P({label:d?null:c}),s=M(),m=I.index===o.activeIndex;return n.jsx("button",{...a,ref:k([I.ref,h]),type:"button",role:"menuitem",className:R,tabIndex:m?0:-1,disabled:d,...o.getItemProps({onClick(f){var r;(r=a.onClick)==null||r.call(a,f),s==null||s.events.emit("click")},onFocus(f){var r;(r=a.onFocus)==null||r.call(a,f),o.setHasFocusInside(!0)}}),children:c})}),le=t.forwardRef((c,d)=>E()===null?n.jsx(ae,{children:n.jsx(b,{...c,ref:d})}):n.jsx(b,{...c,ref:d}));b.__docgenInfo={description:"",methods:[],displayName:"MenuComponent",props:{label:{required:!0,tsType:{name:"union",raw:"string | React.ReactNode | React.ReactElement",elements:[{name:"string"},{name:"ReactReactNode",raw:"React.ReactNode"},{name:"ReactReactElement",raw:"React.ReactElement"}]},description:""},nested:{required:!1,tsType:{name:"boolean"},description:""},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},menuButtonClasses:{required:!1,tsType:{name:"string"},description:""},menuContainerClasses:{required:!1,tsType:{name:"string"},description:""},menuItemClasses:{required:!1,tsType:{name:"string"},description:""}}};de.__docgenInfo={description:"",methods:[],displayName:"MenuItem",props:{label:{required:!0,tsType:{name:"string"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""}}};le.__docgenInfo={description:"",methods:[],displayName:"Menu",props:{label:{required:!0,tsType:{name:"union",raw:"string | React.ReactNode | React.ReactElement",elements:[{name:"string"},{name:"ReactReactNode",raw:"React.ReactNode"},{name:"ReactReactElement",raw:"React.ReactElement"}]},description:""},nested:{required:!1,tsType:{name:"boolean"},description:""},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},menuButtonClasses:{required:!1,tsType:{name:"string"},description:""},menuContainerClasses:{required:!1,tsType:{name:"string"},description:""},menuItemClasses:{required:!1,tsType:{name:"string"},description:""}}};export{le as M,de as a};
