import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{r as d}from"./index-F28aNuxU.js";import{m,r as p,a as v,b,R as f,c as y,l as j}from"./ScenarioChart.container.v2-DNS8kc5J.js";import{C as N}from"./CollapsibleTree.component-De3ikyo2.js";import"./Header.component-Ci7o0xQy.js";import{a as w}from"./budget.data-CxpMDVaV.js";import{u as S}from"./ScenarioGraph.component-DLxN6sq2.js";import{t as u}from"./colors-DQfPey5i.js";function x({budget:t}){return e.jsxs("div",{className:"flex h-full w-full select-none flex-col border-l border-slate-800 bg-slate-900 text-slate-300",children:[e.jsx("div",{className:"bg-slate-800 px-4 py-1 text-sm font-medium text-slate-500",children:"Budget Details"}),t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-4 pb-2 pt-4 text-lg font-medium",children:t?t.name:"No budget selected"}),e.jsx(N,{tree:t.categories,parentContainerClasses:"cursor-pointer hover:bg-slate-800 px-4",childContainerClasses:"cursor-default px-4",renderCollapsibleItemContent:s=>e.jsxs("div",{className:"flex flex-row py-2",children:[e.jsx("div",{className:"grow",children:s.name}),e.jsx("div",{className:"text-gray-500",children:s.value})]}),renderLeafItemContent:s=>e.jsxs("div",{className:"flex flex-row py-2",children:[e.jsx("div",{className:"grow",children:s.name}),e.jsx("div",{children:s.value})]})},t.name)]}):e.jsx("div",{className:"px-4 pb-2 pt-4 text-lg font-medium text-slate-600",children:"No budget selected"})]})}x.__docgenInfo={description:"",methods:[],displayName:"ScenarioBudget",props:{budget:{required:!0,tsType:{name:"union",raw:"MockBudget | null",elements:[{name:"MockBudget"},{name:"null"}]},description:""}}};function T(){const t=S(r=>r.selectedBudgetId),s=t?w[t]:null;return e.jsx(x,{budget:s})}T.__docgenInfo={description:"",methods:[],displayName:"ScenarioBudget"};function g({width:t,height:s,data:r,period:n,interval:l="month",cumulative:i=!1}){const a=d.useRef(null);return d.useEffect(()=>{var o;const c=m([p([0]),v(r,b({y:"sum"},{x:"date",y:"amount",fill:"name",interval:l,cumulative:i}))]).plot({width:t,height:s,marginLeft:50,y:{grid:!0},x:{domain:[new Date(n.startDate),new Date(n.endDate)]}});return(o=a.current)==null||o.append(c),()=>c.remove()},[i,r,s,l,n.endDate,n.startDate,t]),e.jsx("div",{ref:a,className:"h-full w-full"})}g.__docgenInfo={description:"",methods:[],displayName:"ScenarioChartV1",props:{width:{required:!0,tsType:{name:"number"},description:""},height:{required:!0,tsType:{name:"number"},description:""},data:{required:!0,tsType:{name:"Plot.Data"},description:""},period:{required:!0,tsType:{name:"Period"},description:""},interval:{required:!1,tsType:{name:"Plot.RangeInterval"},description:"",defaultValue:{value:"'month'",computed:!1}},cumulative:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};function C({scenarioEvents:t,interval:s,cumulative:r}){const{period:n,budgetEvents:l}=t,i=l.map(a=>a.events.map(c=>({date:new Date(c.date),amount:c.value,name:a.budget.name}))).flat();return e.jsx(f,{children:({width:a,height:c})=>e.jsx(g,{width:a,height:c,data:i,period:n,cumulative:r,interval:s})})}C.__docgenInfo={description:"",methods:[],displayName:"ScenarioChartV1",props:{scenarioEvents:{required:!0,tsType:{name:"ScenarioEvents"},description:""},interval:{required:!1,tsType:{name:"Plot.RangeInterval"},description:""},cumulative:{required:!1,tsType:{name:"boolean"},description:""}}};function D({data:t,initialSelection:s=[0,1]}){const[r]=d.useState(s),[n,l]=r,i=o=>{console.log("handleSelectionMouseDown",o)},a=o=>{console.log("handleSelectionMouseMove",o)},c=o=>{console.log("handleSelectionMouseUp",o)};return e.jsxs("div",{className:"relative flex h-40 w-full items-center justify-center border-y border-slate-800 bg-slate-900",children:[e.jsx(f,{children:({width:o,height:h})=>e.jsx(M,{width:o,height:h,data:t})}),t&&Array.from(t).length!==0&&e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 top-0 flex",children:[e.jsx("div",{className:"bg-slate-800/40",style:{width:`${n*100}%`}}),e.jsxs("div",{className:"flex grow cursor-grab border border-slate-700",children:[e.jsx("div",{className:"w-1 cursor-col-resize bg-slate-700",onMouseDown:i,onMouseMove:a,onMouseUp:c}),e.jsx("div",{className:"flex grow"}),e.jsx("div",{className:"w-1 cursor-col-resize bg-slate-700"})]}),e.jsx("div",{className:"bg-slate-800/40",style:{width:`${(1-l)*100}%`}})]})]})}function M({width:t,height:s,data:r}){const n=d.useRef(null);return d.useEffect(()=>{var i;const l=m([p([0]),y(r,{x:a=>new Date(a.date),y:"amount",fill:u.amber[400],opacity:.5}),j(r,{x:a=>new Date(a.date),y:"amount",stroke:u.amber[400]})]).plot({width:t,height:s,marginLeft:0,marginRight:0,marginTop:16,y:{axis:null}});return(i=n.current)==null||i.append(l),()=>l.remove()},[r,s,t]),e.jsx("div",{ref:n,className:"h-full w-full"})}D.__docgenInfo={description:"",methods:[],displayName:"TimelineScrubber",props:{data:{required:!1,tsType:{name:"Plot.Data"},description:""},initialSelection:{required:!1,tsType:{name:"tuple",raw:"[number, number]",elements:[{name:"number"},{name:"number"}]},description:"",defaultValue:{value:"[0, 1]",computed:!1}}}};export{x as S,D as T,C as a,T as b};
