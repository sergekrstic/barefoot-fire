import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{r as m}from"./index-PahMPgEy.js";import{m as g,r as b,a as N,b as w,R as h,c as S,l as T}from"./ScenarioChart.container.v2-Br42t3Hy.js";import{D as p}from"./Fire.icon-Di-S4vvp.js";import{C}from"./CollapsibleTree.component-DSHTWi39.js";import"./Header.component-BGqI9wSV.js";import{s as D,a as q}from"./budget.data-nDvbkWrp.js";import{m as R,u as B}from"./ScenarioGraph.component-Bo6nmH1Y.js";import{P as I,a as u,b as f}from"./react-resizable-panels.browser.esm-zIh8wNIw.js";import{t as x}from"./colors-Cuw9ST8W.js";const P={graph:R,plot:D,budgets:q};function y({budget:t}){return e.jsxs("div",{className:"flex h-full w-full select-none flex-col border-l border-slate-800 bg-slate-900 text-slate-300",children:[e.jsx("div",{className:"bg-slate-800 px-4 py-1 text-sm font-medium text-slate-500",children:"Budget Details"}),t?e.jsxs("div",{className:"flex-grow overflow-y-auto pb-4",children:[e.jsx("div",{className:"px-4 pb-2 pt-4 text-lg font-medium",children:t?t.name:"No budget selected"}),e.jsx(C,{tree:t.categories,parentContainerClasses:"cursor-pointer hover:bg-slate-800 px-4",childContainerClasses:"cursor-default px-4",renderCollapsibleItemContent:a=>e.jsxs("div",{className:"flex flex-row py-2",children:[e.jsx("div",{className:"grow",children:a.name}),e.jsx("div",{className:"text-gray-500",children:a.value})]}),renderLeafItemContent:a=>e.jsxs("div",{className:"flex flex-row py-2",children:[e.jsx("div",{className:"grow",children:a.name}),e.jsx("div",{children:_(a.value)})]})},t.name)]}):e.jsx("div",{className:"px-4 pb-2 pt-4 text-lg font-medium text-slate-600",children:"No budget selected"})]})}function _(t){return t>=0?t.toFixed(0).toString():`(${Math.abs(t).toFixed(0)})`}y.__docgenInfo={description:"",methods:[],displayName:"ScenarioBudget",props:{budget:{required:!0,tsType:{name:"union",raw:"BudgetCategories | null",elements:[{name:"BudgetCategories"},{name:"null"}]},description:""}}};function z(){const t=B(r=>r.selectedBudgetId),a=t?P.budgets[t]:null;return e.jsx(y,{budget:a})}z.__docgenInfo={description:"",methods:[],displayName:"ScenarioBudget"};function j({width:t,height:a,data:r,period:n,interval:o="month",cumulative:l=!1}){const s=m.useRef(null);return m.useEffect(()=>{var c;const i=g([b([0]),N(r,w({y:"sum"},{x:"date",y:"amount",fill:"name",interval:o,cumulative:l}))]).plot({width:t,height:a,marginLeft:50,y:{grid:!0},x:{domain:[new Date(n.startDate),new Date(n.endDate)]}});return(c=s.current)==null||c.append(i),()=>i.remove()},[l,r,a,o,n.endDate,n.startDate,t]),e.jsx("div",{ref:s,className:"h-full w-full"})}j.__docgenInfo={description:"",methods:[],displayName:"ScenarioChartV1",props:{width:{required:!0,tsType:{name:"number"},description:""},height:{required:!0,tsType:{name:"number"},description:""},data:{required:!0,tsType:{name:"Plot.Data"},description:""},period:{required:!0,tsType:{name:"Period"},description:""},interval:{required:!1,tsType:{name:"Plot.RangeInterval"},description:"",defaultValue:{value:"'month'",computed:!1}},cumulative:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};function V({scenarioEvents:t,interval:a,cumulative:r}){const{period:n,budgetEvents:o}=t,l=o.map(s=>s.events.map(i=>({date:new Date(i.date),amount:i.value,name:s.budget.name}))).flat();return e.jsx(h,{children:({width:s,height:i})=>e.jsx(j,{width:s,height:i,data:l,period:n,cumulative:r,interval:a})})}V.__docgenInfo={description:"",methods:[],displayName:"ScenarioChartV1",props:{scenarioEvents:{required:!0,tsType:{name:"ScenarioEvents"},description:""},interval:{required:!1,tsType:{name:"Plot.RangeInterval"},description:""},cumulative:{required:!1,tsType:{name:"boolean"},description:""}}};function E({data:t,initialSelection:a=[0,100],onSelectionChange:r}){const[n,o]=m.useState(a[0]),[l,s]=m.useState(a[1]),i=d=>{r&&(o(d),r([d,l]))},c=d=>{r&&(s(d),r([n,d]))};return e.jsxs("div",{className:"relative flex h-40 w-full items-center justify-center border-y border-slate-800 bg-slate-900",children:[e.jsx(h,{children:({width:d,height:v})=>e.jsx(k,{width:d,height:v,data:t})}),t&&Array.from(t).length!==0&&e.jsxs(I,{className:"absolute bottom-0 left-0 right-0 top-0 flex",direction:"horizontal",children:[e.jsx(u,{className:"bg-gradient-to-tr from-slate-600/5 to-slate-600/20 backdrop-blur-[1px]",defaultSize:n,onResize:i}),e.jsx(f,{className:"flex w-1 flex-col items-center justify-center bg-slate-700",children:e.jsx(p,{className:"pl-[1px] text-slate-950",size:16})}),e.jsx(u,{className:"cursor-grabx border border-slate-700",minSize:0}),e.jsx(f,{className:"flex w-1 flex-col items-center justify-center bg-slate-700",children:e.jsx(p,{className:"pr-[1px] text-slate-950",size:16})}),e.jsx(u,{className:"bg-gradient-to-tr from-slate-600/5 to-slate-600/20 backdrop-blur-[1px]",defaultSize:100-l,onResize:c})]})]})}function k({width:t,height:a,data:r}){const n=m.useRef(null);return m.useEffect(()=>{var l;const o=g([b([0]),S(r,{x:s=>new Date(s.date),y:"amount",fill:x.amber[400],opacity:.5}),T(r,{x:s=>new Date(s.date),y:"amount",stroke:x.amber[400]})]).plot({width:t,height:a,marginLeft:0,marginRight:0,marginTop:16,y:{axis:null}});return(l=n.current)==null||l.append(o),()=>o.remove()},[r,a,t]),e.jsx("div",{ref:n,className:"h-full w-full"})}E.__docgenInfo={description:"",methods:[],displayName:"TimelineScrubber",props:{data:{required:!1,tsType:{name:"Plot.Data"},description:""},initialSelection:{required:!1,tsType:{name:"tuple",raw:"[number, number]",elements:[{name:"number"},{name:"number"}]},description:"",defaultValue:{value:"[0, 100]",computed:!1}},onSelectionChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(selection: [number, number]) => void",signature:{arguments:[{type:{name:"tuple",raw:"[number, number]",elements:[{name:"number"},{name:"number"}]},name:"selection"}],return:{name:"void"}}},description:""}}};export{y as S,E as T,V as a,P as b,z as c};
